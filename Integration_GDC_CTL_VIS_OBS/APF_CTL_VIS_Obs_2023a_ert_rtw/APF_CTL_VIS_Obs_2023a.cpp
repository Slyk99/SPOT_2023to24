//
// Academic License - for use in teaching, academic research, and meeting
// course requirements at degree granting institutions only.  Not for
// government, commercial, or other organizational use.
//
// File: APF_CTL_VIS_Obs_2023a.cpp
//
// Code generated for Simulink model 'APF_CTL_VIS_Obs_2023a'.
//
// Model version                  : 1.1251
// Simulink Coder version         : 9.9 (R2023a) 19-Nov-2022
// C/C++ source code generated on : Fri Apr  5 18:31:40 2024
//
// Target selection: ert.tlc
// Embedded hardware selection: ARM Compatible->ARM 64-bit (LP64)
// Code generation objectives: Unspecified
// Validation result: Not run
//
#include "APF_CTL_VIS_Obs_2023a.h"
#include "rtwtypes.h"
#include "APF_CTL_VIS_Obs_2023a_private.h"
#include <math.h>

extern "C"
{

#include "rt_nonfinite.h"

}

#include "rt_defines.h"
#include <string.h>

// Block signals (default storage)
B_APF_CTL_VIS_Obs_2023a_T APF_CTL_VIS_Obs_2023a_B;

// Continuous states
X_APF_CTL_VIS_Obs_2023a_T APF_CTL_VIS_Obs_2023a_X;

// Block states (default storage)
DW_APF_CTL_VIS_Obs_2023a_T APF_CTL_VIS_Obs_2023a_DW;

// Real-time model
RT_MODEL_APF_CTL_VIS_Obs_2023_T APF_CTL_VIS_Obs_2023a_M_ =
  RT_MODEL_APF_CTL_VIS_Obs_2023_T();
RT_MODEL_APF_CTL_VIS_Obs_2023_T *const APF_CTL_VIS_Obs_2023a_M =
  &APF_CTL_VIS_Obs_2023a_M_;

// Forward declaration for local functions
static real_T APF_CTL_VIS_Obs_2023a_maximum(const real_T x[8]);

// Forward declaration for local functions
static real_T APF_CTL_VIS_Obs_2023a_maximum_p(const real_T x[8]);

// Forward declaration for local functions
static boolean_T APF_CTL_VIS_Obs_202_ishermitian(const real_T A[36]);
static boolean_T APF_CTL_VIS_Obs_2_ishermitian_c(const real_T A[36]);
static void APF_CTL_VIS_Obs_2023a_xzlascl(real_T cfrom, real_T cto, real_T A[36]);
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_l(int32_T n, const real_T x[36],
  int32_T ix0);
static void APF_CTL_VIS_Obs_2023a_xzgebal(real_T A[36], int32_T *ilo, int32_T
  *ihi, real_T scale[6]);
static real_T APF_CTL_VIS_Obs_2_rt_hypotd_snf(real_T u0, real_T u1);
static real_T APF_CTL_VIS_Obs_2023a_xzlarfg(int32_T n, real_T *alpha1, real_T x
  [36], int32_T ix0);
static void APF_CTL_VIS_Obs_2023a_xzlarf(int32_T b_m, int32_T n, int32_T iv0,
  real_T tau, real_T C[36], int32_T ic0, real_T work[6]);
static void APF_CTL_VIS_Obs_2023a_xzlarf_g(int32_T b_m, int32_T n, int32_T iv0,
  real_T tau, real_T C[36], int32_T ic0, real_T work[6]);
static void APF_CTL_VIS_Obs_2023a_xzgehrd(real_T a[36], int32_T ilo, int32_T ihi);
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_lw(int32_T n, const real_T x[3]);
static real_T APF_CTL_VIS_Obs_2023a_xzlarfg_l(int32_T n, real_T *alpha1, real_T
  x[3]);
static void APF_CTL_VIS_Obs_2023a_xdlanv2(real_T *a, real_T *b, real_T *c,
  real_T *d, real_T *rt1r, real_T *rt1i, real_T *rt2r, real_T *rt2i, real_T *cs,
  real_T *sn);
static void APF_CTL_VIS_Obs_2023a_xdlahqr(int32_T ilo, int32_T ihi, real_T h[36],
  int32_T *info, real_T *z, real_T wr[6], real_T wi[6]);
static void APF_CTL_VIS_Obs_2023a_xzlascl_k(real_T cfrom, real_T cto, int32_T
  b_m, real_T A[6], int32_T iA0);
static real_T APF_CTL_VIS_Obs_20_computeNormM(const real_T A[36]);
static real_T APF_CTL_computeNormMTridiagonal(int32_T n, const real_T d[6],
  const real_T e[5], int32_T i0);
static void APF_CTL_VIS_Obs_2023_xzlascl_ka(real_T cfrom, real_T cto, int32_T
  b_m, real_T A[5], int32_T iA0);
static void APF_CTL_VIS_Obs_2023a_xdlaev2(real_T a, real_T b, real_T c, real_T
  *rt1, real_T *rt2);
static void APF_CTL_VIS_Obs_2_insertionsort(real_T x[6], int32_T xstart, int32_T
  xend);
static int32_T APF_CTL_VIS_Obs_2023a_xdsterf(real_T d[6], real_T e[5]);
static void APF_CTL_VIS_Obs_2023a_eig(const real_T A[36], creal_T V[6]);
static void APF_CTL_VIS_Obs_2023a_xzgehrd_j(real_T a[36], int32_T ilo, int32_T
  ihi, real_T tau[5]);
static void APF_CTL_VIS_Obs_2023a_xzunghr(int32_T ilo, int32_T ihi, real_T A[36],
  const real_T tau[5]);
static void APF_CTL_VIS_Obs_2023a_xdlahqr_p(int32_T ilo, int32_T ihi, real_T h
  [36], int32_T iloz, int32_T ihiz, real_T z[36], int32_T *info, real_T wr[6],
  real_T wi[6]);
static void APF_CTL_VIS_Obs_2023a_xgemv(int32_T n, const real_T x[18], real_T
  beta1, real_T y[36], int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_dladiv1(real_T a, real_T b, real_T c, real_T d,
  real_T *p, real_T *q);
static void APF_CTL_VIS_Obs_2023a_xdladiv(real_T a, real_T b, real_T c, real_T d,
  real_T *p, real_T *q);
static void APF_CTL_VIS_Obs_2023a_xdlaln2(int32_T na, int32_T nw, real_T smin,
  const real_T A[36], int32_T ia0, const real_T B[18], int32_T ib0, real_T wr,
  real_T wi, real_T X[4], real_T *scale, real_T *xnorm);
static void APF_CTL_VIS_Obs_2023_xaxpy_p5n5(int32_T n, real_T a, const real_T x
  [36], int32_T ix0, real_T y[18]);
static void APF_CTL_VIS_Obs_2023a_xdtrevc3(const real_T T[36], real_T vr[36]);
static void APF_CTL_VIS_Obs_202_eigStandard(const real_T A[36], creal_T V[36],
  creal_T D[36]);
static void APF_CTL_VIS_Obs_2023a_xzlartg(real_T f, real_T g, real_T *cs, real_T
  *sn, real_T *r);
static void APF_CTL_VIS_Obs_2_rotateRight_e(int32_T n, real_T z[36], int32_T iz0,
  const real_T cs[10], int32_T ic0, int32_T is0);
static void APF_CTL_VIS_Obs_2023a_xdlaev2_n(real_T a, real_T b, real_T c, real_T
  *rt1, real_T *rt2, real_T *cs1, real_T *sn1);
static void APF_CTL_VIS_Obs_202_rotateRight(int32_T n, real_T z[36], int32_T iz0,
  const real_T cs[10], int32_T ic0, int32_T is0);
static int32_T APF_CTL_VIS_Obs_2023a_xzsteqr(real_T d[6], real_T e[5], real_T z
  [36]);
static void APF_CTL_VIS_Obs_2023a_eig_m(const real_T A[36], creal_T V[36],
  creal_T D[36]);
static real_T APF_CTL_VIS_Obs_2023a_xdotc_b(int32_T n, const real_T x[36],
  int32_T ix0, const real_T y[36], int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_xaxpy(int32_T n, real_T a, int32_T ix0, real_T
  y[36], int32_T iy0);
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_c(int32_T n, const real_T x[6],
  int32_T ix0);
static void APF_CTL_VIS_Obs_2023a_xaxpy_j(int32_T n, real_T a, const real_T x[36],
  int32_T ix0, real_T y[6], int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_xaxpy_jv(int32_T n, real_T a, const real_T x[6],
  int32_T ix0, real_T y[36], int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_xswap(real_T x[36], int32_T ix0, int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_xrotg(real_T *a, real_T *b, real_T *c, real_T *
  s);
static void APF_CTL_VIS_Obs_2023a_xrot(real_T x[36], int32_T ix0, int32_T iy0,
  real_T c, real_T s);
static void APF_CTL_VIS_Obs_2023a_svd_p(const real_T A[36], real_T U[36], real_T
  s[6], real_T V[36]);
static void APF_CTL_VIS_Obs_2023a_chol(real_T A[36], int32_T *flag, int32_T
  *jmax);
static real_T APF_CTL_VIS_Obs_2_rt_atan2d_snf(real_T u0, real_T u1);
static creal_T APF_CTL_VIS_Obs_2023a_minimum(const creal_T x[6]);
static real_T APF_CTL_VIS_Obs_2023a_eps(real_T x);
static void APF_CTL_VIS_Ob_binary_expand_op(real_T in1_data[], int32_T in1_size
  [2], const real_T in2[36], int32_T in3, int32_T in4);
static void APF_CTL_VIS_Obs_2023a_Cardioid(const real_T state_red[6], const
  real_T state_black[6], const real_T b_shape[5], real_T *alpha, real_T *d);
static real_T APF_CTL_VIS_Obs_2023a_norm(const real_T x[3]);
static real_T APF_CTL_VIS_Obs_202_rt_powd_snf(real_T u0, real_T u1);
static real_T APF__rt_urand_Upu32_Yd_f_pw_snf(uint32_T *u);
static real_T APF__rt_nrand_Upu32_Yd_f_pw_snf(uint32_T *u);
static real_T APF_CTL_VIS_Obs_2023a_xnrm2(int32_T n, const real_T x[36], int32_T
  ix0);
static real_T APF_CTL_VIS_Obs_2023a_xdotc(int32_T n, const real_T x[36], int32_T
  ix0, const real_T y[36], int32_T iy0);
static void APF_CTL_VIS_Obs_2023a_svd(const real_T A[36], real_T U[36], real_T
  s[6], real_T V[36]);
static void APF_CTL_VIS_Obs__rt_invd3x3_snf(const real_T u[9], real_T y[9]);
int32_T div_nde_s32_floor(int32_T numerator, int32_T denominator)
{
  return (((numerator < 0) != (denominator < 0)) && (numerator % denominator !=
           0) ? -1 : 0) + numerator / denominator;
}

//
// This function updates continuous states using the ODE4 fixed-step
// solver algorithm
//
static void rt_ertODEUpdateContinuousStates(RTWSolverInfo *si )
{
  time_T t = rtsiGetT(si);
  time_T tnew = rtsiGetSolverStopTime(si);
  time_T h = rtsiGetStepSize(si);
  real_T *x = rtsiGetContStates(si);
  ODE4_IntgData *id = static_cast<ODE4_IntgData *>(rtsiGetSolverData(si));
  real_T *y = id->y;
  real_T *f0 = id->f[0];
  real_T *f1 = id->f[1];
  real_T *f2 = id->f[2];
  real_T *f3 = id->f[3];
  real_T temp;
  int_T i;
  int_T nXc = 6;
  rtsiSetSimTimeStep(si,MINOR_TIME_STEP);

  // Save the state values at time t in y, we'll use x as ynew.
  (void) memcpy(y, x,
                static_cast<uint_T>(nXc)*sizeof(real_T));

  // Assumes that rtsiSetT and ModelOutputs are up-to-date
  // f0 = f(t,y)
  rtsiSetdX(si, f0);
  APF_CTL_VIS_Obs_2023a_derivatives();

  // f1 = f(t + (h/2), y + (h/2)*f0)
  temp = 0.5 * h;
  for (i = 0; i < nXc; i++) {
    x[i] = y[i] + (temp*f0[i]);
  }

  rtsiSetT(si, t + temp);
  rtsiSetdX(si, f1);
  APF_CTL_VIS_Obs_2023a_step();
  APF_CTL_VIS_Obs_2023a_derivatives();

  // f2 = f(t + (h/2), y + (h/2)*f1)
  for (i = 0; i < nXc; i++) {
    x[i] = y[i] + (temp*f1[i]);
  }

  rtsiSetdX(si, f2);
  APF_CTL_VIS_Obs_2023a_step();
  APF_CTL_VIS_Obs_2023a_derivatives();

  // f3 = f(t + h, y + h*f2)
  for (i = 0; i < nXc; i++) {
    x[i] = y[i] + (h*f2[i]);
  }

  rtsiSetT(si, tnew);
  rtsiSetdX(si, f3);
  APF_CTL_VIS_Obs_2023a_step();
  APF_CTL_VIS_Obs_2023a_derivatives();

  // tnew = t + h
  // ynew = y + (h/6)*(f0 + 2*f1 + 2*f2 + 2*f3)
  temp = h / 6.0;
  for (i = 0; i < nXc; i++) {
    x[i] = y[i] + temp*(f0[i] + 2.0*f1[i] + 2.0*f2[i] + f3[i]);
  }

  rtsiSetSimTimeStep(si,MAJOR_TIME_STEP);
}

//
// System initialize for action system:
//    '<S1>/Change BLACK Behavior'
//    '<S1>/Change BLUE Behavior'
//
void APF_CT_ChangeBLACKBehavior_Init(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, DW_ChangeBLACKBehavior_APF_CT_T *localDW,
  P_ChangeBLACKBehavior_APF_CTL_T *localP)
{
  char_T *sErr;

  // Start for S-Function (sdspToNetwork): '<S20>/UDP Send'
  sErr = GetErrorBuffer(&localDW->UDPSend_NetworkLib[0U]);
  CreateUDPInterface(&localDW->UDPSend_NetworkLib[0U]);
  if (*sErr == 0) {
    LibCreate_Network(&localDW->UDPSend_NetworkLib[0U], 1, "0.0.0.0", -1,
                      "255.255.255.255", localP->UDPSend_Port, 8192, 4, 0);
  }

  if (*sErr == 0) {
    LibStart(&localDW->UDPSend_NetworkLib[0U]);
  }

  if (*sErr != 0) {
    DestroyUDPInterface(&localDW->UDPSend_NetworkLib[0U]);
    if (*sErr != 0) {
      rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
      rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
    }
  }

  // End of Start for S-Function (sdspToNetwork): '<S20>/UDP Send'
}

//
// Output and update for action system:
//    '<S1>/Change BLACK Behavior'
//    '<S1>/Change BLUE Behavior'
//
void APF_CTL_VIS_ChangeBLACKBehavior(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, DW_ChangeBLACKBehavior_APF_CT_T *localDW,
  P_ChangeBLACKBehavior_APF_CTL_T *localP)
{
  char_T *sErr;

  // Update for S-Function (sdspToNetwork): '<S20>/UDP Send' incorporates:
  //   Constant: '<S20>/Constant1'

  sErr = GetErrorBuffer(&localDW->UDPSend_NetworkLib[0U]);
  LibUpdate_Network(&localDW->UDPSend_NetworkLib[0U], &localP->Constant1_Value,
                    1);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  // End of Update for S-Function (sdspToNetwork): '<S20>/UDP Send'
}

//
// Termination for action system:
//    '<S1>/Change BLACK Behavior'
//    '<S1>/Change BLUE Behavior'
//
void APF_CT_ChangeBLACKBehavior_Term(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, DW_ChangeBLACKBehavior_APF_CT_T *localDW)
{
  char_T *sErr;

  // Terminate for S-Function (sdspToNetwork): '<S20>/UDP Send'
  sErr = GetErrorBuffer(&localDW->UDPSend_NetworkLib[0U]);
  LibTerminate(&localDW->UDPSend_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&localDW->UDPSend_NetworkLib[0U], 1);
  DestroyUDPInterface(&localDW->UDPSend_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspToNetwork): '<S20>/UDP Send'
}

//
// Output and update for action system:
//    '<S6>/Change BLUE Behavior'
//    '<S7>/Change BLUE Behavior'
//    '<S12>/Change BLUE Behavior'
//
void APF_CTL_VIS__ChangeBLUEBehavior(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_BLUE_Fx, real_T *rtd_BLUE_Fy, real_T
  *rtd_BLUE_Tz, real_T *rtd_Float_State, P_ChangeBLUEBehavior_APF_CTL__T *localP)
{
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // DataStoreWrite: '<S28>/BLUE_Fx' incorporates:
    //   Constant: '<S28>/Constant3'

    *rtd_BLUE_Fx = localP->Constant3_Value;

    // DataStoreWrite: '<S28>/BLUE_Fy' incorporates:
    //   Constant: '<S28>/Constant4'

    *rtd_BLUE_Fy = localP->Constant4_Value;

    // DataStoreWrite: '<S28>/BLUE_Tz' incorporates:
    //   Constant: '<S28>/Constant5'

    *rtd_BLUE_Tz = localP->Constant5_Value;

    // DataStoreWrite: '<S28>/Data Store Write4' incorporates:
    //   Constant: '<S28>/Puck State'

    *rtd_Float_State = localP->PuckState_Value;
  }
}

//
// System initialize for action system:
//    '<Root>/Phase #0: Synchronization'
//    '<Root>/Phase #1: Start Floating '
//
void APF__Phase0Synchronization_Init(DW_Phase0Synchronization_APF__T *localDW)
{
  // Start for If: '<S6>/This IF block determines whether or not to run the BLUE sim//exp' 
  localDW->ThisIFblockdetermineswhetherorn = -1;

  // Start for If: '<S6>/This IF block determines whether or not to run the BLACK sim//exp' 
  localDW->ThisIFblockdetermineswhethero_p = -1;

  // Start for If: '<S6>/This IF block determines whether or not to run the RED sim//exp ' 
  localDW->ThisIFblockdetermineswhethero_e = -1;
}

//
// Output and update for action system:
//    '<Root>/Phase #0: Synchronization'
//    '<Root>/Phase #1: Start Floating '
//
void APF_CTL_V_Phase0Synchronization(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_BLACK_Fx, real_T *rtd_BLACK_Fy, real_T
  *rtd_BLACK_Tz, real_T *rtd_BLUE_Fx, real_T *rtd_BLUE_Fy, real_T *rtd_BLUE_Tz,
  real_T *rtd_Float_State, real_T *rtd_RED_ARM_Control_Mode, real_T *rtd_RED_Fx,
  real_T *rtd_RED_Fy, real_T *rtd_RED_Tz, real_T *rtd_RED_Tz_RW, const real_T
  *rtd_WhoAmI, const real_T *rtd_isSim, DW_Phase0Synchronization_APF__T *localDW,
  P_Phase0Synchronization_APF_C_T *localP)
{
  int8_T rtAction;

  // If: '<S6>/This IF block determines whether or not to run the BLUE sim//exp' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 3.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhetherorn = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhetherorn;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S6>/Change BLACK Behavior' incorporates:
    //   ActionPort: '<S27>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S27>/BLACK_Fx' incorporates:
      //   Constant: '<S27>/Constant3'

      *rtd_BLACK_Fx = localP->Constant3_Value;

      // DataStoreWrite: '<S27>/BLACK_Fy' incorporates:
      //   Constant: '<S27>/Constant4'

      *rtd_BLACK_Fy = localP->Constant4_Value;

      // DataStoreWrite: '<S27>/BLACK_Tz' incorporates:
      //   Constant: '<S27>/Constant5'

      *rtd_BLACK_Tz = localP->Constant5_Value;

      // DataStoreWrite: '<S27>/Data Store Write4' incorporates:
      //   Constant: '<S27>/Puck State'

      *rtd_Float_State = localP->PuckState_Value;
    }

    // End of Outputs for SubSystem: '<S6>/Change BLACK Behavior'
  }

  // End of If: '<S6>/This IF block determines whether or not to run the BLUE sim//exp' 

  // If: '<S6>/This IF block determines whether or not to run the BLACK sim//exp' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 2.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhethero_p = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhethero_p;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S6>/Change BLUE Behavior' incorporates:
    //   ActionPort: '<S28>/Action Port'

    APF_CTL_VIS__ChangeBLUEBehavior(APF_CTL_VIS_Obs_2023a_M, rtd_BLUE_Fx,
      rtd_BLUE_Fy, rtd_BLUE_Tz, rtd_Float_State, &localP->ChangeBLUEBehavior);

    // End of Outputs for SubSystem: '<S6>/Change BLUE Behavior'
  }

  // End of If: '<S6>/This IF block determines whether or not to run the BLACK sim//exp' 

  // If: '<S6>/This IF block determines whether or not to run the RED sim//exp ' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 1.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhethero_e = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhethero_e;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S6>/Change RED Behavior' incorporates:
    //   ActionPort: '<S29>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S29>/RED_Fx' incorporates:
      //   Constant: '<S29>/Constant'

      *rtd_RED_Fx = localP->Constant_Value;

      // DataStoreWrite: '<S29>/RED_Fy' incorporates:
      //   Constant: '<S29>/Constant1'

      *rtd_RED_Fy = localP->Constant1_Value;

      // DataStoreWrite: '<S29>/RED_Tz' incorporates:
      //   Constant: '<S29>/Constant2'

      *rtd_RED_Tz = localP->Constant2_Value;

      // DataStoreWrite: '<S29>/RED_Tz_RW' incorporates:
      //   Constant: '<S29>/Constant3'

      *rtd_RED_Tz_RW = localP->Constant3_Value_e;

      // DataStoreWrite: '<S29>/Data Store Write1' incorporates:
      //   Constant: '<S29>/Constant4'

      *rtd_RED_ARM_Control_Mode = localP->Constant4_Value_b;

      // DataStoreWrite: '<S29>/Data Store Write4' incorporates:
      //   Constant: '<S29>/Puck State'

      *rtd_Float_State = localP->PuckState_Value_h;
    }

    // End of Outputs for SubSystem: '<S6>/Change RED Behavior'
  }

  // End of If: '<S6>/This IF block determines whether or not to run the RED sim//exp ' 
}

//
// Output and update for atomic system:
//    '<S52>/MATLAB Function2'
//    '<S39>/MATLAB Function2'
//    '<S65>/MATLAB Function2'
//    '<S441>/MATLAB Function2'
//    '<S428>/MATLAB Function2'
//    '<S454>/MATLAB Function2'
//    '<S495>/MATLAB Function2'
//    '<S482>/MATLAB Function2'
//    '<S508>/MATLAB Function2'
//
void APF_CTL_VIS_Obs_MATLABFunction2(real_T rtu_z, real_T rty_Oy[2], real_T
  rty_Ox[2])
{
  real_T tmp;
  real_T tmp_0;
  tmp_0 = sin(rtu_z);
  tmp = cos(rtu_z);
  rty_Ox[0] = tmp_0 * 0.0 + tmp;
  rty_Ox[1] = tmp * 0.0 - tmp_0;
  rty_Oy[0] = tmp * 0.0 + tmp_0;
  rty_Oy[1] = -tmp_0 * 0.0 + tmp;
}

//
// Output and update for atomic system:
//    '<S52>/MATLAB Function3'
//    '<S39>/MATLAB Function3'
//    '<S65>/MATLAB Function3'
//    '<S98>/MATLAB Function3'
//    '<S115>/MATLAB Function3'
//    '<S132>/MATLAB Function3'
//    '<S148>/MATLAB Function3'
//    '<S169>/MATLAB Function3'
//    '<S190>/MATLAB Function3'
//    '<S211>/MATLAB Function3'
//    ...
//
void APF_CTL_VIS_Obs_MATLABFunction3(real_T rtu_z, real_T rty_Ox[2])
{
  real_T tmp;
  real_T tmp_0;
  tmp = sin(rtu_z);
  tmp_0 = cos(rtu_z);
  rty_Ox[0] = tmp * 0.0 + tmp_0;
  rty_Ox[1] = tmp_0 * 0.0 - tmp;
}

//
// Output and update for atomic system:
//    '<S52>/MATLAB Function4'
//    '<S39>/MATLAB Function4'
//    '<S65>/MATLAB Function4'
//    '<S98>/MATLAB Function4'
//    '<S115>/MATLAB Function4'
//    '<S132>/MATLAB Function4'
//    '<S148>/MATLAB Function4'
//    '<S169>/MATLAB Function4'
//    '<S190>/MATLAB Function4'
//    '<S211>/MATLAB Function4'
//    ...
//
void APF_CTL_VIS_Obs_MATLABFunction4(const real_T rtu_Oy[2], const real_T
  rtu_e_in[2], real_T *rty_e_out)
{
  real_T absxk;
  real_T scale;
  real_T t;
  real_T y;
  scale = 3.3121686421112381E-170;
  absxk = fabs(rtu_e_in[0]);
  if (absxk > 3.3121686421112381E-170) {
    y = 1.0;
    scale = absxk;
  } else {
    t = absxk / 3.3121686421112381E-170;
    y = t * t;
  }

  absxk = fabs(rtu_e_in[1]);
  if (absxk > scale) {
    t = scale / absxk;
    y = y * t * t + 1.0;
    scale = absxk;
  } else {
    t = absxk / scale;
    y += t * t;
  }

  absxk = rtu_Oy[0] * rtu_e_in[0] + rtu_Oy[1] * rtu_e_in[1];
  if (rtIsNaN(absxk)) {
    absxk = (rtNaN);
  } else if (absxk < 0.0) {
    absxk = -1.0;
  } else {
    absxk = (absxk > 0.0);
  }

  *rty_e_out = scale * sqrt(y) * -absxk;
}

//
// System initialize for action system:
//    '<S66>/Simulated Position Controller'
//    '<S254>/Simulated Position Controller'
//    '<S287>/Simulated Position Controller'
//    '<S320>/Simulated Position Controller'
//    '<S352>/Simulated Position Controller'
//
void SimulatedPositionControlle_Init(B_SimulatedPositionController_T *localB,
  DW_SimulatedPositionControlle_T *localDW, P_SimulatedPositionController_T
  *localP)
{
  // InitializeConditions for Delay: '<S83>/Delay1'
  localDW->icLoad = true;

  // InitializeConditions for Delay: '<S81>/Delay1'
  localDW->icLoad_j = true;

  // InitializeConditions for Delay: '<S85>/Delay1'
  localDW->icLoad_m = true;

  // SystemInitialize for IfAction SubSystem: '<S83>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S84>/In1' incorporates:
  //   Outport: '<S84>/Out1'

  localB->In1_g = localP->Out1_Y0_h;

  // End of SystemInitialize for SubSystem: '<S83>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S81>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S82>/In1' incorporates:
  //   Outport: '<S82>/Out1'

  localB->In1_g2 = localP->Out1_Y0;

  // End of SystemInitialize for SubSystem: '<S81>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S85>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S86>/In1' incorporates:
  //   Outport: '<S86>/Out1'

  localB->In1 = localP->Out1_Y0_k;

  // End of SystemInitialize for SubSystem: '<S85>/Hold this value'
}

//
// Output and update for action system:
//    '<S66>/Simulated Position Controller'
//    '<S254>/Simulated Position Controller'
//    '<S287>/Simulated Position Controller'
//    '<S320>/Simulated Position Controller'
//    '<S352>/Simulated Position Controller'
//
void APF_SimulatedPositionController(real_T rtu_q1_desired, real_T
  rtu_q2_desired, real_T rtu_q3_desired, real_T *rty_q1_command, real_T
  *rty_q2_command, real_T *rty_q3_command, const real_T *rtd_RED_Rz_Elbow, const
  real_T *rtd_RED_Rz_Shoulder, const real_T *rtd_RED_Rz_Wrist,
  B_SimulatedPositionController_T *localB, DW_SimulatedPositionControlle_T
  *localDW)
{
  real_T rtb_Subtract2_kc;
  real_T rtb_Sum6_ba;
  real_T rtb_Sum6_jb;
  real_T rtb_Sum6_pt;

  // Sum: '<S77>/Subtract2' incorporates:
  //   DataStoreRead: '<S77>/Data Store Read'

  rtb_Subtract2_kc = rtu_q1_desired - *rtd_RED_Rz_Shoulder;

  // Delay: '<S83>/Delay1'
  if (localDW->icLoad) {
    localDW->Delay1_DSTATE = rtb_Subtract2_kc;
  }

  // Sum: '<S83>/Sum6' incorporates:
  //   Delay: '<S83>/Delay1'

  rtb_Sum6_jb = rtb_Subtract2_kc - localDW->Delay1_DSTATE;

  // If: '<S83>/if we went through a "step"'
  if (rtb_Sum6_jb != 0.0) {
    // Outputs for IfAction SubSystem: '<S83>/Hold this value' incorporates:
    //   ActionPort: '<S84>/Action Port'

    // SignalConversion generated from: '<S84>/In1'
    localB->In1_g = rtb_Sum6_jb;

    // End of Outputs for SubSystem: '<S83>/Hold this value'
  }

  // End of If: '<S83>/if we went through a "step"'

  // Sum: '<S79>/Sum3' incorporates:
  //   Gain: '<S79>/kd_sharm'
  //   Gain: '<S79>/kp_sharm'
  //   Gain: '<S83>/divide by delta T'

  rtb_Sum6_pt = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g *
    APF_CTL_VIS_Obs_2023a_P.Kd_sharm + APF_CTL_VIS_Obs_2023a_P.Kp_sharm *
    rtb_Subtract2_kc;

  // Saturate: '<S77>/Saturation'
  if (rtb_Sum6_pt > APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm) {
    *rty_q1_command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm;
  } else if (rtb_Sum6_pt < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm) {
    *rty_q1_command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm;
  } else {
    *rty_q1_command = rtb_Sum6_pt;
  }

  // End of Saturate: '<S77>/Saturation'

  // Sum: '<S77>/Subtract3' incorporates:
  //   DataStoreRead: '<S77>/Data Store Read5'

  rtb_Sum6_jb = rtu_q2_desired - *rtd_RED_Rz_Elbow;

  // Delay: '<S81>/Delay1'
  if (localDW->icLoad_j) {
    localDW->Delay1_DSTATE_e = rtb_Sum6_jb;
  }

  // Sum: '<S81>/Sum6' incorporates:
  //   Delay: '<S81>/Delay1'

  rtb_Sum6_ba = rtb_Sum6_jb - localDW->Delay1_DSTATE_e;

  // If: '<S81>/if we went through a "step"'
  if (rtb_Sum6_ba != 0.0) {
    // Outputs for IfAction SubSystem: '<S81>/Hold this value' incorporates:
    //   ActionPort: '<S82>/Action Port'

    // SignalConversion generated from: '<S82>/In1'
    localB->In1_g2 = rtb_Sum6_ba;

    // End of Outputs for SubSystem: '<S81>/Hold this value'
  }

  // End of If: '<S81>/if we went through a "step"'

  // Sum: '<S78>/Sum3' incorporates:
  //   Gain: '<S78>/kd_elarm'
  //   Gain: '<S78>/kp_elarm'
  //   Gain: '<S81>/divide by delta T'

  rtb_Sum6_pt = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g2 *
    APF_CTL_VIS_Obs_2023a_P.Kd_elarm + APF_CTL_VIS_Obs_2023a_P.Kp_elarm *
    rtb_Sum6_jb;

  // Saturate: '<S77>/Saturation1'
  if (rtb_Sum6_pt > APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm) {
    *rty_q2_command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm;
  } else if (rtb_Sum6_pt < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm) {
    *rty_q2_command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm;
  } else {
    *rty_q2_command = rtb_Sum6_pt;
  }

  // End of Saturate: '<S77>/Saturation1'

  // Sum: '<S77>/Subtract4' incorporates:
  //   DataStoreRead: '<S77>/Data Store Read6'

  rtb_Sum6_ba = rtu_q3_desired - *rtd_RED_Rz_Wrist;

  // Delay: '<S85>/Delay1'
  if (localDW->icLoad_m) {
    localDW->Delay1_DSTATE_l = rtb_Sum6_ba;
  }

  // Sum: '<S85>/Sum6' incorporates:
  //   Delay: '<S85>/Delay1'

  rtb_Sum6_pt = rtb_Sum6_ba - localDW->Delay1_DSTATE_l;

  // If: '<S85>/if we went through a "step"'
  if (rtb_Sum6_pt != 0.0) {
    // Outputs for IfAction SubSystem: '<S85>/Hold this value' incorporates:
    //   ActionPort: '<S86>/Action Port'

    // SignalConversion generated from: '<S86>/In1'
    localB->In1 = rtb_Sum6_pt;

    // End of Outputs for SubSystem: '<S85>/Hold this value'
  }

  // End of If: '<S85>/if we went through a "step"'

  // Sum: '<S80>/Sum3' incorporates:
  //   Gain: '<S80>/kd_wrarm'
  //   Gain: '<S80>/kp_wrarm'
  //   Gain: '<S85>/divide by delta T'

  rtb_Sum6_pt = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1 *
    APF_CTL_VIS_Obs_2023a_P.Kd_wrarm + APF_CTL_VIS_Obs_2023a_P.Kp_wrarm *
    rtb_Sum6_ba;

  // Saturate: '<S77>/Saturation3'
  if (rtb_Sum6_pt > APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm) {
    *rty_q3_command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm;
  } else if (rtb_Sum6_pt < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm) {
    *rty_q3_command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm;
  } else {
    *rty_q3_command = rtb_Sum6_pt;
  }

  // End of Saturate: '<S77>/Saturation3'

  // Update for Delay: '<S83>/Delay1'
  localDW->icLoad = false;
  localDW->Delay1_DSTATE = rtb_Subtract2_kc;

  // Update for Delay: '<S81>/Delay1'
  localDW->icLoad_j = false;
  localDW->Delay1_DSTATE_e = rtb_Sum6_jb;

  // Update for Delay: '<S85>/Delay1'
  localDW->icLoad_m = false;
  localDW->Delay1_DSTATE_l = rtb_Sum6_ba;
}

//
// Output and update for action system:
//    '<S66>/Passthrough for Experiment'
//    '<S254>/Passthrough for Experiment'
//    '<S287>/Passthrough for Experiment'
//    '<S320>/Passthrough for Experiment'
//    '<S352>/Passthrough for Experiment'
//
void APF_CT_PassthroughforExperiment(real_T rtu_q1_desired, real_T
  rtu_q2_desired, real_T rtu_q3_desired, real_T *rty_q1_command, real_T
  *rty_q2_command, real_T *rty_q3_command)
{
  // SignalConversion generated from: '<S76>/q1_desired'
  *rty_q1_command = rtu_q1_desired;

  // SignalConversion generated from: '<S76>/q2_desired'
  *rty_q2_command = rtu_q2_desired;

  // SignalConversion generated from: '<S76>/q3_desired'
  *rty_q3_command = rtu_q3_desired;
}

//
// System initialize for action system:
//    '<S35>/RED+ARM'
//    '<S244>/RED+ARM'
//    '<S245>/RED+ARM'
//    '<S246>/RED+ARM'
//
void APF_CTL_VIS_Obs_202_REDARM_Init(B_REDARM_APF_CTL_VIS_Obs_2023_T *localB,
  DW_REDARM_APF_CTL_VIS_Obs_202_T *localDW, P_REDARM_APF_CTL_VIS_Obs_2023_T
  *localP)
{
  // SystemInitialize for IfAction SubSystem: '<S66>/Simulated Position Controller' 
  SimulatedPositionControlle_Init(&localB->SimulatedPositionController,
    &localDW->SimulatedPositionController, &localP->SimulatedPositionController);

  // End of SystemInitialize for SubSystem: '<S66>/Simulated Position Controller' 
}

//
// Output and update for action system:
//    '<S35>/RED+ARM'
//    '<S244>/RED+ARM'
//    '<S245>/RED+ARM'
//    '<S246>/RED+ARM'
//
void APF_CTL_VIS_Obs_2023a_REDARM(real_T *rtd_RED_ARM_Control_Mode, real_T
  *rtd_RED_Elbow_Command, const real_T *rtd_RED_Rz_Elbow, const real_T
  *rtd_RED_Rz_Shoulder, const real_T *rtd_RED_Rz_Wrist, real_T
  *rtd_RED_Shoulder_Command, real_T *rtd_RED_Wrist_Command, const real_T
  *rtd_isSim, B_REDARM_APF_CTL_VIS_Obs_2023_T *localB,
  DW_REDARM_APF_CTL_VIS_Obs_202_T *localDW, P_REDARM_APF_CTL_VIS_Obs_2023_T
  *localP)
{
  // If: '<S66>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' incorporates:
  //   DataStoreRead: '<S66>/Data Store Read1'

  if (*rtd_isSim == 1.0) {
    // Outputs for IfAction SubSystem: '<S66>/Simulated Position Controller' incorporates:
    //   ActionPort: '<S77>/Action Port'

    // DataStoreWrite: '<S66>/Data Store Write2' incorporates:
    //   Constant: '<S66>/Constant4'
    //   Constant: '<S66>/Constant5'
    //   Constant: '<S66>/Constant6'
    //   DataStoreWrite: '<S66>/Data Store Write'
    //   DataStoreWrite: '<S66>/Data Store Write1'

    APF_SimulatedPositionController(localP->Constant4_Value,
      localP->Constant5_Value, localP->Constant6_Value, rtd_RED_Shoulder_Command,
      rtd_RED_Elbow_Command, rtd_RED_Wrist_Command, (real_T *)rtd_RED_Rz_Elbow,
      (real_T *)rtd_RED_Rz_Shoulder, (real_T *)rtd_RED_Rz_Wrist,
      &localB->SimulatedPositionController,
      &localDW->SimulatedPositionController);

    // End of Outputs for SubSystem: '<S66>/Simulated Position Controller'
  } else {
    // Outputs for IfAction SubSystem: '<S66>/Passthrough for Experiment' incorporates:
    //   ActionPort: '<S76>/Action Port'

    // DataStoreWrite: '<S66>/Data Store Write2' incorporates:
    //   Constant: '<S66>/Constant4'
    //   Constant: '<S66>/Constant5'
    //   Constant: '<S66>/Constant6'
    //   DataStoreWrite: '<S66>/Data Store Write'
    //   DataStoreWrite: '<S66>/Data Store Write1'

    APF_CT_PassthroughforExperiment(localP->Constant4_Value,
      localP->Constant5_Value, localP->Constant6_Value, rtd_RED_Shoulder_Command,
      rtd_RED_Elbow_Command, rtd_RED_Wrist_Command);

    // End of Outputs for SubSystem: '<S66>/Passthrough for Experiment'
  }

  // End of If: '<S66>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

  // DataStoreWrite: '<S66>/Data Store Write3' incorporates:
  //   Constant: '<S66>/Constant7'

  *rtd_RED_ARM_Control_Mode = localP->Constant7_Value;
}

real_T rt_atan2d_snf(real_T u0, real_T u1)
{
  real_T y;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = (rtNaN);
  } else if (rtIsInf(u0) && rtIsInf(u1)) {
    int32_T tmp;
    int32_T tmp_0;
    if (u0 > 0.0) {
      tmp = 1;
    } else {
      tmp = -1;
    }

    if (u1 > 0.0) {
      tmp_0 = 1;
    } else {
      tmp_0 = -1;
    }

    y = atan2(static_cast<real_T>(tmp), static_cast<real_T>(tmp_0));
  } else if (u1 == 0.0) {
    if (u0 > 0.0) {
      y = RT_PI / 2.0;
    } else if (u0 < 0.0) {
      y = -(RT_PI / 2.0);
    } else {
      y = 0.0;
    }
  } else {
    y = atan2(u0, u1);
  }

  return y;
}

//
// Output and update for atomic system:
//    '<S100>/MATLAB Function'
//    '<S117>/MATLAB Function'
//    '<S134>/MATLAB Function'
//    '<S174>/MATLAB Function'
//    '<S195>/MATLAB Function'
//    '<S216>/MATLAB Function'
//    '<S278>/MATLAB Function'
//    '<S311>/MATLAB Function'
//    '<S344>/MATLAB Function'
//    '<S406>/MATLAB Function'
//
void APF_CTL_VIS_Obs__MATLABFunction(real_T rtu_u, real_T *rty_wrappedAngle)
{
  *rty_wrappedAngle = rt_atan2d_snf(sin(rtu_u), cos(rtu_u));
}

//
// System initialize for action system:
//    '<S87>/Sub-Phase #1'
//    '<S87>/Sub-Phase #2 '
//    '<S87>/Sub-Phase #3 '
//
void APF_CTL_VIS_Obs__SubPhase1_Init(B_SubPhase1_APF_CTL_VIS_Obs_2_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Obs__T *localDW, P_SubPhase1_APF_CTL_VIS_Obs_2_T
  *localP)
{
  // Start for If: '<S104>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSubs = -1;

  // Start for If: '<S106>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_g = -1;

  // Start for If: '<S102>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_o = -1;

  // InitializeConditions for Delay: '<S104>/Delay1'
  localDW->icLoad = true;

  // InitializeConditions for Delay: '<S106>/Delay1'
  localDW->icLoad_p = true;

  // InitializeConditions for Delay: '<S102>/Delay1'
  localDW->icLoad_c = true;

  // SystemInitialize for IfAction SubSystem: '<S104>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S105>/In1' incorporates:
  //   Outport: '<S105>/Out1'

  localB->In1_g = localP->Out1_Y0_a;

  // End of SystemInitialize for SubSystem: '<S104>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S106>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S107>/In1' incorporates:
  //   Outport: '<S107>/Out1'

  localB->In1 = localP->Out1_Y0_o;

  // End of SystemInitialize for SubSystem: '<S106>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S102>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S103>/In1' incorporates:
  //   Outport: '<S103>/Out1'

  localB->In1_g2 = localP->Out1_Y0;

  // End of SystemInitialize for SubSystem: '<S102>/Hold this value'
}

//
// Outputs for action system:
//    '<S87>/Sub-Phase #1'
//    '<S87>/Sub-Phase #2 '
//    '<S87>/Sub-Phase #3 '
//
void APF_CTL_VIS_Obs_2023a_SubPhase1(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_BLACK_Fx, real_T *rtd_BLACK_Fy, const
  real_T *rtd_BLACK_Px, const real_T *rtd_BLACK_Py, const real_T *rtd_BLACK_Rz,
  real_T *rtd_BLACK_Tz, real_T *rtd_Float_State, const real_T *rtd_Univ_Time,
  B_SubPhase1_APF_CTL_VIS_Obs_2_T *localB, DW_SubPhase1_APF_CTL_VIS_Obs__T
  *localDW, P_SubPhase1_APF_CTL_VIS_Obs_2_T *localP)
{
  real_T rtb_Oy_ik[2];
  real_T rtb_Sum6_ii;
  int8_T rtAction;

  // Sum: '<S90>/Subtract' incorporates:
  //   Constant: '<S90>/Desired X-Position (BLACK)'

  localB->Subtract = APF_CTL_VIS_Obs_2023a_P.xLength / 2.0 - *rtd_BLACK_Px;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S104>/Delay1'
    if (localDW->icLoad) {
      localDW->Delay1_DSTATE = localB->Subtract;
    }

    // Delay: '<S104>/Delay1'
    localB->Delay1 = localDW->Delay1_DSTATE;
  }

  // Sum: '<S104>/Sum6'
  rtb_Sum6_ii = localB->Subtract - localB->Delay1;

  // If: '<S104>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_ii != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSubs = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSubs;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S104>/Hold this value' incorporates:
    //   ActionPort: '<S105>/Action Port'

    // SignalConversion generated from: '<S105>/In1'
    localB->In1_g = rtb_Sum6_ii;

    // End of Outputs for SubSystem: '<S104>/Hold this value'
  }

  // End of If: '<S104>/if we went through a "step"'

  // Sum: '<S96>/Sum3' incorporates:
  //   DataStoreWrite: '<S90>/BLACK_Fx'
  //   Gain: '<S104>/divide by delta T'
  //   Gain: '<S96>/kd_xb'
  //   Gain: '<S96>/kp_xb'

  *rtd_BLACK_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g *
    APF_CTL_VIS_Obs_2023a_P.Kd_xb + APF_CTL_VIS_Obs_2023a_P.Kp_xb *
    localB->Subtract;

  // Sum: '<S90>/Subtract1' incorporates:
  //   Constant: '<S90>/Desired Y-Position (BLACK)'

  localB->Subtract1 = APF_CTL_VIS_Obs_2023a_P.yLength / 2.0 - *rtd_BLACK_Py;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S106>/Delay1'
    if (localDW->icLoad_p) {
      localDW->Delay1_DSTATE_n = localB->Subtract1;
    }

    // Delay: '<S106>/Delay1'
    localB->Delay1_l = localDW->Delay1_DSTATE_n;
  }

  // Sum: '<S106>/Sum6'
  rtb_Sum6_ii = localB->Subtract1 - localB->Delay1_l;

  // If: '<S106>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_ii != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_g = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_g;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S106>/Hold this value' incorporates:
    //   ActionPort: '<S107>/Action Port'

    // SignalConversion generated from: '<S107>/In1'
    localB->In1 = rtb_Sum6_ii;

    // End of Outputs for SubSystem: '<S106>/Hold this value'
  }

  // End of If: '<S106>/if we went through a "step"'

  // Sum: '<S97>/Sum3' incorporates:
  //   DataStoreWrite: '<S90>/BLACK_Fy'
  //   Gain: '<S106>/divide by delta T'
  //   Gain: '<S97>/kd_yb'
  //   Gain: '<S97>/kp_yb'

  *rtd_BLACK_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1 *
    APF_CTL_VIS_Obs_2023a_P.Kd_yb + APF_CTL_VIS_Obs_2023a_P.Kp_yb *
    localB->Subtract1;

  // MATLAB Function: '<S100>/MATLAB Function' incorporates:
  //   Constant: '<S94>/Desired Rate (BLACK)'
  //   Constant: '<S99>/Constant1'
  //   Product: '<S94>/Product'
  //   Sum: '<S99>/Subtract'

  APF_CTL_VIS_Obs__MATLABFunction(localP->DesiredRateBLACK_Value *
    (*rtd_Univ_Time - APF_CTL_VIS_Obs_2023a_P.Phase2_End), &rtb_Sum6_ii);

  // MATLAB Function: '<S98>/MATLAB Function2'
  APF_CTL_VIS_Obs_MATLABFunction2(rtb_Sum6_ii, rtb_Oy_ik, localB->rtb_Ox_fz_m);

  // MATLAB Function: '<S98>/MATLAB Function3'
  APF_CTL_VIS_Obs_MATLABFunction3(*rtd_BLACK_Rz, localB->rtb_Ox_a5_c);

  // Sum: '<S98>/Subtract2'
  localB->rtb_Ox_fz_m[0] -= localB->rtb_Ox_a5_c[0];
  localB->rtb_Ox_fz_m[1] -= localB->rtb_Ox_a5_c[1];

  // MATLAB Function: '<S98>/MATLAB Function4'
  APF_CTL_VIS_Obs_MATLABFunction4(rtb_Oy_ik, localB->rtb_Ox_fz_m, &localB->e_out);
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S102>/Delay1'
    if (localDW->icLoad_c) {
      localDW->Delay1_DSTATE_j = localB->e_out;
    }

    // Delay: '<S102>/Delay1'
    localB->Delay1_lb = localDW->Delay1_DSTATE_j;
  }

  // Sum: '<S102>/Sum6'
  rtb_Sum6_ii = localB->e_out - localB->Delay1_lb;

  // If: '<S102>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_ii != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_o = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_o;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S102>/Hold this value' incorporates:
    //   ActionPort: '<S103>/Action Port'

    // SignalConversion generated from: '<S103>/In1'
    localB->In1_g2 = rtb_Sum6_ii;

    // End of Outputs for SubSystem: '<S102>/Hold this value'
  }

  // End of If: '<S102>/if we went through a "step"'

  // Sum: '<S95>/Sum3' incorporates:
  //   DataStoreWrite: '<S90>/BLACK_Tz'
  //   Gain: '<S102>/divide by delta T'
  //   Gain: '<S95>/kd_tb'
  //   Gain: '<S95>/kp_tb'

  *rtd_BLACK_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g2 *
    APF_CTL_VIS_Obs_2023a_P.Kd_tb + APF_CTL_VIS_Obs_2023a_P.Kp_tb *
    localB->e_out;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // DataStoreWrite: '<S90>/Data Store Write3' incorporates:
    //   Constant: '<S90>/Puck State'

    *rtd_Float_State = localP->PuckState_Value;
  }
}

//
// Update for action system:
//    '<S87>/Sub-Phase #1'
//    '<S87>/Sub-Phase #2 '
//    '<S87>/Sub-Phase #3 '
//
void APF_CTL_VIS_Ob_SubPhase1_Update(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, B_SubPhase1_APF_CTL_VIS_Obs_2_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Obs__T *localDW)
{
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Update for Delay: '<S104>/Delay1'
    localDW->icLoad = false;
    localDW->Delay1_DSTATE = localB->Subtract;

    // Update for Delay: '<S106>/Delay1'
    localDW->icLoad_p = false;
    localDW->Delay1_DSTATE_n = localB->Subtract1;

    // Update for Delay: '<S102>/Delay1'
    localDW->icLoad_c = false;
    localDW->Delay1_DSTATE_j = localB->e_out;
  }
}

//
// System initialize for action system:
//    '<S88>/Sub-Phase #1'
//    '<S88>/Sub-Phase #2 '
//    '<S88>/Sub-Phase #3 '
//
void APF_CTL_VIS_Ob_SubPhase1_l_Init(B_SubPhase1_APF_CTL_VIS_Obs_n_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Ob_o_T *localDW, P_SubPhase1_APF_CTL_VIS_Obs_a_T
  *localP)
{
  // Start for If: '<S178>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSubs = -1;

  // Start for If: '<S180>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_l = -1;

  // Start for If: '<S176>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_i = -1;

  // InitializeConditions for Delay: '<S178>/Delay1'
  localDW->icLoad = true;

  // InitializeConditions for Delay: '<S180>/Delay1'
  localDW->icLoad_j = true;

  // InitializeConditions for Delay: '<S176>/Delay1'
  localDW->icLoad_h = true;

  // SystemInitialize for IfAction SubSystem: '<S178>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S179>/In1' incorporates:
  //   Outport: '<S179>/Out1'

  localB->In1_g = localP->Out1_Y0_p;

  // End of SystemInitialize for SubSystem: '<S178>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S180>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S181>/In1' incorporates:
  //   Outport: '<S181>/Out1'

  localB->In1 = localP->Out1_Y0_j;

  // End of SystemInitialize for SubSystem: '<S180>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S176>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S177>/In1' incorporates:
  //   Outport: '<S177>/Out1'

  localB->In1_g2 = localP->Out1_Y0;

  // End of SystemInitialize for SubSystem: '<S176>/Hold this value'
}

//
// Outputs for action system:
//    '<S88>/Sub-Phase #1'
//    '<S88>/Sub-Phase #2 '
//    '<S88>/Sub-Phase #3 '
//
void APF_CTL_VIS_Obs_202_SubPhase1_g(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_BLUE_Fx, real_T *rtd_BLUE_Fy, const
  real_T *rtd_BLUE_Px, const real_T *rtd_BLUE_Py, const real_T *rtd_BLUE_Rz,
  real_T *rtd_BLUE_Tz, real_T *rtd_Float_State, const real_T *rtd_Univ_Time,
  B_SubPhase1_APF_CTL_VIS_Obs_n_T *localB, DW_SubPhase1_APF_CTL_VIS_Ob_o_T
  *localDW, P_SubPhase1_APF_CTL_VIS_Obs_a_T *localP)
{
  real_T rtb_Subtract3_o;
  real_T rtb_Sum6_bu;
  int8_T rtAction;

  // Sum: '<S172>/Subtract3' incorporates:
  //   Constant: '<S172>/Constant2'

  rtb_Subtract3_o = *rtd_Univ_Time - APF_CTL_VIS_Obs_2023a_P.Phase2_End;

  // Sum: '<S161>/Subtract' incorporates:
  //   MATLAB Function: '<S161>/MATLAB Function2'

  localB->Subtract = (cos(0.03490659 * rtb_Subtract3_o) * -0.85 +
                      APF_CTL_VIS_Obs_2023a_P.xLength / 2.0) - *rtd_BLUE_Px;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S178>/Delay1'
    if (localDW->icLoad) {
      localDW->Delay1_DSTATE = localB->Subtract;
    }

    // Delay: '<S178>/Delay1'
    localB->Delay1 = localDW->Delay1_DSTATE;
  }

  // Sum: '<S178>/Sum6'
  rtb_Sum6_bu = localB->Subtract - localB->Delay1;

  // If: '<S178>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_bu != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSubs = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSubs;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S178>/Hold this value' incorporates:
    //   ActionPort: '<S179>/Action Port'

    // SignalConversion generated from: '<S179>/In1'
    localB->In1_g = rtb_Sum6_bu;

    // End of Outputs for SubSystem: '<S178>/Hold this value'
  }

  // End of If: '<S178>/if we went through a "step"'

  // Sum: '<S167>/Sum3' incorporates:
  //   DataStoreWrite: '<S161>/BLUE_Fx'
  //   Gain: '<S167>/kd_xb'
  //   Gain: '<S167>/kp_xb'
  //   Gain: '<S178>/divide by delta T'

  *rtd_BLUE_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g *
    APF_CTL_VIS_Obs_2023a_P.Kd_xblue + APF_CTL_VIS_Obs_2023a_P.Kp_xblue *
    localB->Subtract;

  // Sum: '<S161>/Subtract1' incorporates:
  //   MATLAB Function: '<S161>/MATLAB Function3'

  localB->Subtract1 = (sin(0.03490659 * rtb_Subtract3_o) * -0.85 +
                       APF_CTL_VIS_Obs_2023a_P.yLength / 2.0) - *rtd_BLUE_Py;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S180>/Delay1'
    if (localDW->icLoad_j) {
      localDW->Delay1_DSTATE_o = localB->Subtract1;
    }

    // Delay: '<S180>/Delay1'
    localB->Delay1_l = localDW->Delay1_DSTATE_o;
  }

  // Sum: '<S180>/Sum6'
  rtb_Subtract3_o = localB->Subtract1 - localB->Delay1_l;

  // If: '<S180>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Subtract3_o != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_l = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_l;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S180>/Hold this value' incorporates:
    //   ActionPort: '<S181>/Action Port'

    // SignalConversion generated from: '<S181>/In1'
    localB->In1 = rtb_Subtract3_o;

    // End of Outputs for SubSystem: '<S180>/Hold this value'
  }

  // End of If: '<S180>/if we went through a "step"'

  // Sum: '<S168>/Sum3' incorporates:
  //   DataStoreWrite: '<S161>/BLUE_Fy'
  //   Gain: '<S168>/kd_yb'
  //   Gain: '<S168>/kp_yb'
  //   Gain: '<S180>/divide by delta T'

  *rtd_BLUE_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1 *
    APF_CTL_VIS_Obs_2023a_P.Kd_yblue + APF_CTL_VIS_Obs_2023a_P.Kp_yblue *
    localB->Subtract1;

  // MATLAB Function: '<S174>/MATLAB Function' incorporates:
  //   Constant: '<S165>/Desired Rate '
  //   Constant: '<S173>/Constant1'
  //   Product: '<S165>/Product'
  //   Sum: '<S173>/Subtract'

  APF_CTL_VIS_Obs__MATLABFunction(localP->DesiredRate_Value * (*rtd_Univ_Time -
    APF_CTL_VIS_Obs_2023a_P.Phase2_End), &rtb_Subtract3_o);

  // MATLAB Function: '<S169>/MATLAB Function2'
  APF_CTL_VIS_Obs_MATLABFunction2(rtb_Subtract3_o, localB->rtb_Oy_p_k,
    localB->rtb_Ox_eh_m);

  // MATLAB Function: '<S169>/MATLAB Function3'
  APF_CTL_VIS_Obs_MATLABFunction3(*rtd_BLUE_Rz, localB->rtb_Ox_kz_c);

  // Sum: '<S169>/Subtract2'
  localB->rtb_Ox_eh_m[0] -= localB->rtb_Ox_kz_c[0];
  localB->rtb_Ox_eh_m[1] -= localB->rtb_Ox_kz_c[1];

  // MATLAB Function: '<S169>/MATLAB Function4'
  APF_CTL_VIS_Obs_MATLABFunction4(localB->rtb_Oy_p_k, localB->rtb_Ox_eh_m,
    &localB->e_out);
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S176>/Delay1'
    if (localDW->icLoad_h) {
      localDW->Delay1_DSTATE_i = localB->e_out;
    }

    // Delay: '<S176>/Delay1'
    localB->Delay1_k = localDW->Delay1_DSTATE_i;
  }

  // Sum: '<S176>/Sum6'
  rtb_Subtract3_o = localB->e_out - localB->Delay1_k;

  // If: '<S176>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Subtract3_o != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_i = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_i;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S176>/Hold this value' incorporates:
    //   ActionPort: '<S177>/Action Port'

    // SignalConversion generated from: '<S177>/In1'
    localB->In1_g2 = rtb_Subtract3_o;

    // End of Outputs for SubSystem: '<S176>/Hold this value'
  }

  // End of If: '<S176>/if we went through a "step"'

  // Sum: '<S166>/Sum3' incorporates:
  //   DataStoreWrite: '<S161>/BLUE_Tz'
  //   Gain: '<S166>/kd_tb'
  //   Gain: '<S166>/kp_tb'
  //   Gain: '<S176>/divide by delta T'

  *rtd_BLUE_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g2 *
    APF_CTL_VIS_Obs_2023a_P.Kd_tblue + APF_CTL_VIS_Obs_2023a_P.Kp_tblue *
    localB->e_out;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // DataStoreWrite: '<S161>/Data Store Write1' incorporates:
    //   Constant: '<S161>/Puck State'

    *rtd_Float_State = localP->PuckState_Value;
  }
}

//
// Update for action system:
//    '<S88>/Sub-Phase #1'
//    '<S88>/Sub-Phase #2 '
//    '<S88>/Sub-Phase #3 '
//
void APF_CTL_VIS__SubPhase1_b_Update(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, B_SubPhase1_APF_CTL_VIS_Obs_n_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Ob_o_T *localDW)
{
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Update for Delay: '<S178>/Delay1'
    localDW->icLoad = false;
    localDW->Delay1_DSTATE = localB->Subtract;

    // Update for Delay: '<S180>/Delay1'
    localDW->icLoad_j = false;
    localDW->Delay1_DSTATE_o = localB->Subtract1;

    // Update for Delay: '<S176>/Delay1'
    localDW->icLoad_h = false;
    localDW->Delay1_DSTATE_i = localB->e_out;
  }
}

//
// Output and update for atomic system:
//    '<S244>/MATLAB Function'
//    '<S245>/MATLAB Function'
//    '<S246>/MATLAB Function'
//
void APF_CTL_VIS_Ob_MATLABFunction_o(real_T rtu_t, real_T *rty_x)
{
  *rty_x = cos(0.03490659 * rtu_t) * 0.9 + APF_CTL_VIS_Obs_2023a_P.xLength / 2.0;
}

//
// Output and update for atomic system:
//    '<S244>/MATLAB Function1'
//    '<S245>/MATLAB Function1'
//    '<S246>/MATLAB Function1'
//
void APF_CTL_VIS_Obs_MATLABFunction1(real_T rtu_t, real_T *rty_y)
{
  *rty_y = sin(0.03490659 * rtu_t) * 0.85 + APF_CTL_VIS_Obs_2023a_P.yLength /
    2.0;
}

//
// System initialize for action system:
//    '<S89>/Sub-Phase #1'
//    '<S89>/Sub-Phase #2 '
//
void APF_CTL_VIS_Ob_SubPhase1_o_Init(B_SubPhase1_APF_CTL_VIS_Obs_i_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Ob_m_T *localDW, P_SubPhase1_APF_CTL_VIS_Obs_h_T
  *localP)
{
  // Start for If: '<S257>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSubs = -1;

  // Start for If: '<S259>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_a = -1;

  // Start for If: '<S261>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_i = -1;

  // InitializeConditions for Delay: '<S257>/Delay1'
  localDW->icLoad = true;

  // InitializeConditions for Delay: '<S259>/Delay1'
  localDW->icLoad_g = true;

  // InitializeConditions for Delay: '<S261>/Delay1'
  localDW->icLoad_h = true;

  // SystemInitialize for IfAction SubSystem: '<S257>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S258>/In1' incorporates:
  //   Outport: '<S258>/Out1'

  localB->In1_g2 = localP->Out1_Y0;

  // End of SystemInitialize for SubSystem: '<S257>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S259>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S260>/In1' incorporates:
  //   Outport: '<S260>/Out1'

  localB->In1_g = localP->Out1_Y0_c;

  // End of SystemInitialize for SubSystem: '<S259>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S261>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S262>/In1' incorporates:
  //   Outport: '<S262>/Out1'

  localB->In1 = localP->Out1_Y0_j;

  // End of SystemInitialize for SubSystem: '<S261>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S244>/RED+ARM'
  APF_CTL_VIS_Obs_202_REDARM_Init(&localB->REDARM, &localDW->REDARM,
    &localP->REDARM);

  // End of SystemInitialize for SubSystem: '<S244>/RED+ARM'
}

//
// Outputs for action system:
//    '<S89>/Sub-Phase #1'
//    '<S89>/Sub-Phase #2 '
//
void APF_CTL_VIS_Obs_202_SubPhase1_p(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_Float_State, real_T
  *rtd_RED_ARM_Control_Mode, real_T *rtd_RED_Elbow_Command, real_T *rtd_RED_Fx,
  real_T *rtd_RED_Fy, const real_T *rtd_RED_Px, const real_T *rtd_RED_Py, const
  real_T *rtd_RED_Rz, const real_T *rtd_RED_Rz_Elbow, const real_T
  *rtd_RED_Rz_Shoulder, const real_T *rtd_RED_Rz_Wrist, real_T
  *rtd_RED_Shoulder_Command, real_T *rtd_RED_Tz, real_T *rtd_RED_Tz_RW, real_T
  *rtd_RED_Wrist_Command, const real_T *rtd_Univ_Time, const real_T *rtd_isSim,
  B_SubPhase1_APF_CTL_VIS_Obs_i_T *localB, DW_SubPhase1_APF_CTL_VIS_Ob_m_T
  *localDW, P_SubPhase1_APF_CTL_VIS_Obs_h_T *localP)
{
  real_T rtb_Sum6_f2;
  real_T rtb_y_g;
  int8_T rtAction;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // DataStoreWrite: '<S244>/RED_Tz_RW' incorporates:
    //   Constant: '<S244>/Constant1'

    *rtd_RED_Tz_RW = localP->Constant1_Value;
  }

  // MATLAB Function: '<S278>/MATLAB Function' incorporates:
  //   Constant: '<S255>/Constant'
  //   Constant: '<S255>/Desired Rate '
  //   Constant: '<S277>/Constant1'
  //   Product: '<S255>/Product'
  //   Sum: '<S255>/Sum'
  //   Sum: '<S277>/Subtract'

  APF_CTL_VIS_Obs__MATLABFunction(localP->DesiredRate_Value * (*rtd_Univ_Time -
    APF_CTL_VIS_Obs_2023a_P.Phase2_End) + localP->Constant_Value, &rtb_y_g);

  // MATLAB Function: '<S251>/MATLAB Function2'
  APF_CTL_VIS_Obs_MATLABFunction2(rtb_y_g, localB->rtb_Oy_j5_k,
    localB->rtb_Ox_o_m);

  // MATLAB Function: '<S251>/MATLAB Function3'
  APF_CTL_VIS_Obs_MATLABFunction3(*rtd_RED_Rz, localB->rtb_Ox_gy_c);

  // Sum: '<S251>/Subtract2'
  localB->rtb_Ox_o_m[0] -= localB->rtb_Ox_gy_c[0];
  localB->rtb_Ox_o_m[1] -= localB->rtb_Ox_gy_c[1];

  // MATLAB Function: '<S251>/MATLAB Function4'
  APF_CTL_VIS_Obs_MATLABFunction4(localB->rtb_Oy_j5_k, localB->rtb_Ox_o_m,
    &localB->e_out);
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S257>/Delay1'
    if (localDW->icLoad) {
      localDW->Delay1_DSTATE = localB->e_out;
    }

    // Delay: '<S257>/Delay1'
    localB->Delay1 = localDW->Delay1_DSTATE;
  }

  // Sum: '<S257>/Sum6'
  rtb_Sum6_f2 = localB->e_out - localB->Delay1;

  // If: '<S257>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_f2 != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSubs = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSubs;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S257>/Hold this value' incorporates:
    //   ActionPort: '<S258>/Action Port'

    // SignalConversion generated from: '<S258>/In1'
    localB->In1_g2 = rtb_Sum6_f2;

    // End of Outputs for SubSystem: '<S257>/Hold this value'
  }

  // End of If: '<S257>/if we went through a "step"'

  // Sum: '<S248>/Sum3' incorporates:
  //   DataStoreWrite: '<S244>/RED_Tz'
  //   Gain: '<S248>/kd_tr'
  //   Gain: '<S248>/kp_tr'
  //   Gain: '<S257>/divide by delta T'

  *rtd_RED_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g2 *
    APF_CTL_VIS_Obs_2023a_P.Kd_tr + APF_CTL_VIS_Obs_2023a_P.Kp_tr *
    localB->e_out;

  // Sum: '<S256>/Subtract3' incorporates:
  //   Constant: '<S256>/Constant2'

  rtb_Sum6_f2 = *rtd_Univ_Time - APF_CTL_VIS_Obs_2023a_P.Phase2_End;

  // MATLAB Function: '<S244>/MATLAB Function'
  APF_CTL_VIS_Ob_MATLABFunction_o(rtb_Sum6_f2, &rtb_y_g);

  // Sum: '<S244>/Subtract'
  localB->Subtract = rtb_y_g - *rtd_RED_Px;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S259>/Delay1'
    if (localDW->icLoad_g) {
      localDW->Delay1_DSTATE_e = localB->Subtract;
    }

    // Delay: '<S259>/Delay1'
    localB->Delay1_c = localDW->Delay1_DSTATE_e;
  }

  // Sum: '<S259>/Sum6'
  rtb_y_g = localB->Subtract - localB->Delay1_c;

  // If: '<S259>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_y_g != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_a = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_a;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S259>/Hold this value' incorporates:
    //   ActionPort: '<S260>/Action Port'

    // SignalConversion generated from: '<S260>/In1'
    localB->In1_g = rtb_y_g;

    // End of Outputs for SubSystem: '<S259>/Hold this value'
  }

  // End of If: '<S259>/if we went through a "step"'

  // Sum: '<S249>/Sum3' incorporates:
  //   DataStoreWrite: '<S244>/RED_Fx'
  //   Gain: '<S249>/kd_xr'
  //   Gain: '<S249>/kp_xr'
  //   Gain: '<S259>/divide by delta T'

  *rtd_RED_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g *
    APF_CTL_VIS_Obs_2023a_P.Kd_xr + APF_CTL_VIS_Obs_2023a_P.Kp_xr *
    localB->Subtract;

  // MATLAB Function: '<S244>/MATLAB Function1'
  APF_CTL_VIS_Obs_MATLABFunction1(rtb_Sum6_f2, &rtb_y_g);

  // Sum: '<S244>/Subtract2'
  localB->Subtract2 = rtb_y_g - *rtd_RED_Py;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Delay: '<S261>/Delay1'
    if (localDW->icLoad_h) {
      localDW->Delay1_DSTATE_o = localB->Subtract2;
    }

    // Delay: '<S261>/Delay1'
    localB->Delay1_m = localDW->Delay1_DSTATE_o;
  }

  // Sum: '<S261>/Sum6'
  rtb_Sum6_f2 = localB->Subtract2 - localB->Delay1_m;

  // If: '<S261>/if we went through a "step"'
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if (rtb_Sum6_f2 != 0.0) {
      rtAction = 0;
    }

    localDW->ifwewentthroughastep_ActiveSu_i = rtAction;
  } else {
    rtAction = localDW->ifwewentthroughastep_ActiveSu_i;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S261>/Hold this value' incorporates:
    //   ActionPort: '<S262>/Action Port'

    // SignalConversion generated from: '<S262>/In1'
    localB->In1 = rtb_Sum6_f2;

    // End of Outputs for SubSystem: '<S261>/Hold this value'
  }

  // End of If: '<S261>/if we went through a "step"'

  // Sum: '<S250>/Sum3' incorporates:
  //   DataStoreWrite: '<S244>/RED_Fy'
  //   Gain: '<S250>/kd_yr'
  //   Gain: '<S250>/kp_yr'
  //   Gain: '<S261>/divide by delta T'

  *rtd_RED_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1 *
    APF_CTL_VIS_Obs_2023a_P.Kd_yr + APF_CTL_VIS_Obs_2023a_P.Kp_yr *
    localB->Subtract2;
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // DataStoreWrite: '<S244>/Data Store Write3' incorporates:
    //   Constant: '<S244>/Puck State'

    *rtd_Float_State = localP->PuckState_Value;

    // If: '<S244>/If' incorporates:
    //   Constant: '<S244>/Constant4'

    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo) &&
        ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
         (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
         (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
         (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0))) {
      // Outputs for IfAction SubSystem: '<S244>/RED+ARM' incorporates:
      //   ActionPort: '<S254>/Action Port'

      APF_CTL_VIS_Obs_2023a_REDARM(rtd_RED_ARM_Control_Mode,
        rtd_RED_Elbow_Command, (real_T *)rtd_RED_Rz_Elbow, (real_T *)
        rtd_RED_Rz_Shoulder, (real_T *)rtd_RED_Rz_Wrist,
        rtd_RED_Shoulder_Command, rtd_RED_Wrist_Command, (real_T *)rtd_isSim,
        &localB->REDARM, &localDW->REDARM, &localP->REDARM);

      // End of Outputs for SubSystem: '<S244>/RED+ARM'
    }

    // End of If: '<S244>/If'
  }
}

//
// Update for action system:
//    '<S89>/Sub-Phase #1'
//    '<S89>/Sub-Phase #2 '
//
void APF_CTL_VIS__SubPhase1_g_Update(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, B_SubPhase1_APF_CTL_VIS_Obs_i_T *localB,
  DW_SubPhase1_APF_CTL_VIS_Ob_m_T *localDW)
{
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // Update for Delay: '<S257>/Delay1'
    localDW->icLoad = false;
    localDW->Delay1_DSTATE = localB->e_out;

    // Update for Delay: '<S259>/Delay1'
    localDW->icLoad_g = false;
    localDW->Delay1_DSTATE_e = localB->Subtract;

    // Update for Delay: '<S261>/Delay1'
    localDW->icLoad_h = false;
    localDW->Delay1_DSTATE_o = localB->Subtract2;
  }
}

//
// System initialize for action system:
//    '<S349>/Target Tracker'
//    '<S349>/Target Finder'
//
void APF_CTL_VIS__TargetTracker_Init(real_T rty_Out1[3],
  P_TargetTracker_APF_CTL_VIS_O_T *localP, X_TargetTracker_APF_CTL_VIS_O_T
  *localX)
{
  // InitializeConditions for TransferFcn: '<S376>/Pseudo Derivative'
  localX->PseudoDerivative_CSTATE = 0.0;

  // InitializeConditions for TransferFcn: '<S376>/Pseudo Derivative1'
  localX->PseudoDerivative1_CSTATE = 0.0;

  // InitializeConditions for TransferFcn: '<S376>/Pseudo Derivative2'
  localX->PseudoDerivative2_CSTATE = 0.0;

  // SystemInitialize for Outport: '<S366>/Out1'
  rty_Out1[0] = localP->Out1_Y0;
  rty_Out1[1] = localP->Out1_Y0;
  rty_Out1[2] = localP->Out1_Y0;
}

//
// Outputs for action system:
//    '<S349>/Target Tracker'
//    '<S349>/Target Finder'
//
void APF_CTL_VIS_Obs_2_TargetTracker(real_T rtu_e_x, real_T rtu_e_y, real_T
  rtu_e_t, real_T rty_Out1[3], P_TargetTracker_APF_CTL_VIS_O_T *localP,
  X_TargetTracker_APF_CTL_VIS_O_T *localX)
{
  real_T rtu_e_x_0[6];

  // MATLAB Function: '<S376>/MATLAB Function' incorporates:
  //   Constant: '<S376>/Constant'
  //   TransferFcn: '<S376>/Pseudo Derivative'
  //   TransferFcn: '<S376>/Pseudo Derivative1'
  //   TransferFcn: '<S376>/Pseudo Derivative2'

  rtu_e_x_0[0] = rtu_e_x;
  rtu_e_x_0[1] = rtu_e_y;
  rtu_e_x_0[2] = rtu_e_t;
  rtu_e_x_0[3] = localP->PseudoDerivative_C * localX->PseudoDerivative_CSTATE +
    localP->PseudoDerivative_D * rtu_e_x;
  rtu_e_x_0[4] = localP->PseudoDerivative1_C * localX->PseudoDerivative1_CSTATE
    + localP->PseudoDerivative1_D * rtu_e_y;
  rtu_e_x_0[5] = localP->PseudoDerivative2_C * localX->PseudoDerivative2_CSTATE
    + localP->PseudoDerivative2_D * rtu_e_t;
  for (int32_T i = 0; i < 3; i++) {
    real_T tmp;
    tmp = 0.0;
    for (int32_T i_0 = 0; i_0 < 6; i_0++) {
      tmp += APF_CTL_VIS_Obs_2023a_P.k[3 * i_0 + i] * rtu_e_x_0[i_0];
    }

    rty_Out1[i] = tmp;
  }

  // End of MATLAB Function: '<S376>/MATLAB Function'
}

//
// Derivatives for action system:
//    '<S349>/Target Tracker'
//    '<S349>/Target Finder'
//
void APF_CTL_VIS_TargetTracker_Deriv(real_T rtu_e_x, real_T rtu_e_y, real_T
  rtu_e_t, P_TargetTracker_APF_CTL_VIS_O_T *localP,
  X_TargetTracker_APF_CTL_VIS_O_T *localX, XDot_TargetTracker_APF_CTL_VI_T
  *localXdot)
{
  // Derivatives for TransferFcn: '<S376>/Pseudo Derivative'
  localXdot->PseudoDerivative_CSTATE = localP->PseudoDerivative_A *
    localX->PseudoDerivative_CSTATE;
  localXdot->PseudoDerivative_CSTATE += rtu_e_x;

  // Derivatives for TransferFcn: '<S376>/Pseudo Derivative1'
  localXdot->PseudoDerivative1_CSTATE = localP->PseudoDerivative1_A *
    localX->PseudoDerivative1_CSTATE;
  localXdot->PseudoDerivative1_CSTATE += rtu_e_y;

  // Derivatives for TransferFcn: '<S376>/Pseudo Derivative2'
  localXdot->PseudoDerivative2_CSTATE = localP->PseudoDerivative2_A *
    localX->PseudoDerivative2_CSTATE;
  localXdot->PseudoDerivative2_CSTATE += rtu_e_t;
}

//
// System initialize for action system:
//    '<Root>/Phase #4: Return Home'
//    '<Root>/Phase #5: Hold Home'
//
void APF_CTL_V_Phase4ReturnHome_Init(B_Phase4ReturnHome_APF_CTL_VI_T *localB,
  DW_Phase4ReturnHome_APF_CTL_V_T *localDW, P_Phase4ReturnHome_APF_CTL_VI_T
  *localP)
{
  // Start for If: '<S10>/This IF block determines whether or not to run the BLUE sim//exp' 
  localDW->ThisIFblockdetermineswhetherorn = -1;

  // Start for If: '<S10>/This IF block determines whether or not to run the BLACK sim//exp' 
  localDW->ThisIFblockdetermineswhethero_n = -1;

  // Start for If: '<S10>/This IF block determines whether or not to run the RED sim//exp ' 
  localDW->ThisIFblockdetermineswhethero_a = -1;

  // SystemInitialize for IfAction SubSystem: '<S10>/Change BLACK Behavior'
  // Start for If: '<S431>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_a = -1;

  // Start for If: '<S433>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_l = -1;

  // Start for If: '<S429>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_d = -1;

  // InitializeConditions for Delay: '<S431>/Delay1'
  localDW->icLoad_f = true;

  // InitializeConditions for Delay: '<S433>/Delay1'
  localDW->icLoad_j = true;

  // InitializeConditions for Delay: '<S429>/Delay1'
  localDW->icLoad_c = true;

  // SystemInitialize for IfAction SubSystem: '<S431>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S432>/In1' incorporates:
  //   Outport: '<S432>/Out1'

  localB->In1_g20asdt = localP->Out1_Y0_k;

  // End of SystemInitialize for SubSystem: '<S431>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S433>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S434>/In1' incorporates:
  //   Outport: '<S434>/Out1'

  localB->In1_g20asd = localP->Out1_Y0_dj;

  // End of SystemInitialize for SubSystem: '<S433>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S429>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S430>/In1' incorporates:
  //   Outport: '<S430>/Out1'

  localB->In1_g20asdtg = localP->Out1_Y0_o;

  // End of SystemInitialize for SubSystem: '<S429>/Hold this value'
  // End of SystemInitialize for SubSystem: '<S10>/Change BLACK Behavior'

  // SystemInitialize for IfAction SubSystem: '<S10>/Change BLUE Behavior'
  // Start for If: '<S444>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_i = -1;

  // Start for If: '<S446>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_p = -1;

  // Start for If: '<S442>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_k = -1;

  // InitializeConditions for Delay: '<S444>/Delay1'
  localDW->icLoad_ce = true;

  // InitializeConditions for Delay: '<S446>/Delay1'
  localDW->icLoad_p = true;

  // InitializeConditions for Delay: '<S442>/Delay1'
  localDW->icLoad_jr = true;

  // SystemInitialize for IfAction SubSystem: '<S444>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S445>/In1' incorporates:
  //   Outport: '<S445>/Out1'

  localB->In1_g20asdtgi0 = localP->Out1_Y0_d;

  // End of SystemInitialize for SubSystem: '<S444>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S446>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S447>/In1' incorporates:
  //   Outport: '<S447>/Out1'

  localB->In1_g20asdtgi = localP->Out1_Y0_p;

  // End of SystemInitialize for SubSystem: '<S446>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S442>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S443>/In1' incorporates:
  //   Outport: '<S443>/Out1'

  localB->In1_g20asdtgi0c = localP->Out1_Y0;

  // End of SystemInitialize for SubSystem: '<S442>/Hold this value'
  // End of SystemInitialize for SubSystem: '<S10>/Change BLUE Behavior'

  // SystemInitialize for IfAction SubSystem: '<S10>/Change RED Behavior'
  // Start for If: '<S456>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSubs = -1;

  // Start for If: '<S458>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_c = -1;

  // Start for If: '<S460>/if we went through a "step"'
  localDW->ifwewentthroughastep_ActiveSu_m = -1;

  // InitializeConditions for Delay: '<S456>/Delay1'
  localDW->icLoad = true;

  // InitializeConditions for Delay: '<S458>/Delay1'
  localDW->icLoad_g = true;

  // InitializeConditions for Delay: '<S460>/Delay1'
  localDW->icLoad_d = true;

  // SystemInitialize for IfAction SubSystem: '<S456>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S457>/In1' incorporates:
  //   Outport: '<S457>/Out1'

  localB->In1_g20as = localP->Out1_Y0_b;

  // End of SystemInitialize for SubSystem: '<S456>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S458>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S459>/In1' incorporates:
  //   Outport: '<S459>/Out1'

  localB->In1_g20a = localP->Out1_Y0_b1;

  // End of SystemInitialize for SubSystem: '<S458>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S460>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S461>/In1' incorporates:
  //   Outport: '<S461>/Out1'

  localB->In1_g20 = localP->Out1_Y0_ba;

  // End of SystemInitialize for SubSystem: '<S460>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S424>/RED+ARM'
  // SystemInitialize for IfAction SubSystem: '<S455>/Simulated Position Controller' 
  // InitializeConditions for Delay: '<S472>/Delay1'
  localDW->icLoad_e = true;

  // InitializeConditions for Delay: '<S470>/Delay1'
  localDW->icLoad_gp = true;

  // InitializeConditions for Delay: '<S474>/Delay1'
  localDW->icLoad_k = true;

  // SystemInitialize for IfAction SubSystem: '<S472>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S473>/In1' incorporates:
  //   Outport: '<S473>/Out1'

  localB->In1_g = localP->Out1_Y0_o0;

  // End of SystemInitialize for SubSystem: '<S472>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S470>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S471>/In1' incorporates:
  //   Outport: '<S471>/Out1'

  localB->In1_g2 = localP->Out1_Y0_c;

  // End of SystemInitialize for SubSystem: '<S470>/Hold this value'

  // SystemInitialize for IfAction SubSystem: '<S474>/Hold this value'
  // SystemInitialize for SignalConversion generated from: '<S475>/In1' incorporates:
  //   Outport: '<S475>/Out1'

  localB->In1 = localP->Out1_Y0_a;

  // End of SystemInitialize for SubSystem: '<S474>/Hold this value'
  // End of SystemInitialize for SubSystem: '<S455>/Simulated Position Controller' 
  // End of SystemInitialize for SubSystem: '<S424>/RED+ARM'
  // End of SystemInitialize for SubSystem: '<S10>/Change RED Behavior'
}

//
// Outputs for action system:
//    '<Root>/Phase #4: Return Home'
//    '<Root>/Phase #5: Hold Home'
//
void APF_CTL_VIS_Ob_Phase4ReturnHome(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, real_T *rtd_BLACK_Fx, real_T *rtd_BLACK_Fy, const
  real_T *rtd_BLACK_Px, const real_T *rtd_BLACK_Py, const real_T *rtd_BLACK_Rz,
  real_T *rtd_BLACK_Tz, real_T *rtd_BLUE_Fx, real_T *rtd_BLUE_Fy, const real_T
  *rtd_BLUE_Px, const real_T *rtd_BLUE_Py, const real_T *rtd_BLUE_Rz, real_T
  *rtd_BLUE_Tz, real_T *rtd_Float_State, real_T *rtd_RED_ARM_Control_Mode,
  real_T *rtd_RED_Elbow_Command, real_T *rtd_RED_Fx, real_T *rtd_RED_Fy, const
  real_T *rtd_RED_Px, const real_T *rtd_RED_Py, const real_T *rtd_RED_Rz, const
  real_T *rtd_RED_Rz_Elbow, const real_T *rtd_RED_Rz_Shoulder, const real_T
  *rtd_RED_Rz_Wrist, real_T *rtd_RED_Shoulder_Command, real_T *rtd_RED_Tz,
  real_T *rtd_RED_Tz_RW, real_T *rtd_RED_Wrist_Command, const real_T *rtd_WhoAmI,
  const real_T *rtd_isSim, B_Phase4ReturnHome_APF_CTL_VI_T *localB,
  DW_Phase4ReturnHome_APF_CTL_V_T *localDW, P_Phase4ReturnHome_APF_CTL_VI_T
  *localP)
{
  real_T rtb_Sum6_bf;
  real_T rtb_Sum6_gp;
  real_T rtb_Sum6_py;
  int8_T rtAction;

  // If: '<S10>/This IF block determines whether or not to run the BLUE sim//exp' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 3.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhetherorn = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhetherorn;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S10>/Change BLACK Behavior' incorporates:
    //   ActionPort: '<S422>/Action Port'

    // Sum: '<S422>/Subtract' incorporates:
    //   Constant: '<S422>/Desired Px (BLACK)'

    localB->Subtract_c = APF_CTL_VIS_Obs_2023a_P.home_states_BLACK[0] -
      *rtd_BLACK_Px;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S431>/Delay1'
      if (localDW->icLoad_f) {
        localDW->Delay1_DSTATE_a = localB->Subtract_c;
      }

      // Delay: '<S431>/Delay1'
      localB->Delay1_j = localDW->Delay1_DSTATE_a;
    }

    // Sum: '<S431>/Sum6'
    localB->Sum6_hx = localB->Subtract_c - localB->Delay1_j;

    // If: '<S431>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_a = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_a;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S431>/Hold this value' incorporates:
      //   ActionPort: '<S432>/Action Port'

      // SignalConversion generated from: '<S432>/In1'
      localB->In1_g20asdt = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S431>/Hold this value'
    }

    // End of If: '<S431>/if we went through a "step"'

    // DataStoreWrite: '<S422>/BLACK_Fx' incorporates:
    //   Gain: '<S426>/kd_xb'
    //   Gain: '<S426>/kp_xb'
    //   Gain: '<S431>/divide by delta T'
    //   Sum: '<S426>/Sum3'

    *rtd_BLACK_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g20asdt
      * APF_CTL_VIS_Obs_2023a_P.Kd_xb + APF_CTL_VIS_Obs_2023a_P.Kp_xb *
      localB->Subtract_c;

    // Sum: '<S422>/Subtract1' incorporates:
    //   Constant: '<S422>/Desired Py (BLACK)'

    localB->Subtract1_k = APF_CTL_VIS_Obs_2023a_P.home_states_BLACK[1] -
      *rtd_BLACK_Py;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S433>/Delay1'
      if (localDW->icLoad_j) {
        localDW->Delay1_DSTATE_jh = localB->Subtract1_k;
      }

      // Delay: '<S433>/Delay1'
      localB->Delay1_i = localDW->Delay1_DSTATE_jh;
    }

    // Sum: '<S433>/Sum6'
    localB->Sum6_hx = localB->Subtract1_k - localB->Delay1_i;

    // If: '<S433>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_l = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_l;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S433>/Hold this value' incorporates:
      //   ActionPort: '<S434>/Action Port'

      // SignalConversion generated from: '<S434>/In1'
      localB->In1_g20asd = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S433>/Hold this value'
    }

    // End of If: '<S433>/if we went through a "step"'

    // DataStoreWrite: '<S422>/BLACK_Fy' incorporates:
    //   Gain: '<S427>/kd_yb'
    //   Gain: '<S427>/kp_yb'
    //   Gain: '<S433>/divide by delta T'
    //   Sum: '<S427>/Sum3'

    *rtd_BLACK_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g20asd *
      APF_CTL_VIS_Obs_2023a_P.Kd_yb + APF_CTL_VIS_Obs_2023a_P.Kp_yb *
      localB->Subtract1_k;

    // MATLAB Function: '<S428>/MATLAB Function2' incorporates:
    //   Constant: '<S422>/Desired Attitude (BLACK)'

    APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_P.home_states_BLACK[2],
      localB->rtb_Oy_a_k, localB->rtb_Ox_d_m);

    // MATLAB Function: '<S428>/MATLAB Function3'
    APF_CTL_VIS_Obs_MATLABFunction3(*rtd_BLACK_Rz, localB->rtb_Ox_kr_c);

    // Sum: '<S428>/Subtract2'
    localB->rtb_Ox_d_m[0] -= localB->rtb_Ox_kr_c[0];
    localB->rtb_Ox_d_m[1] -= localB->rtb_Ox_kr_c[1];

    // MATLAB Function: '<S428>/MATLAB Function4'
    APF_CTL_VIS_Obs_MATLABFunction4(localB->rtb_Oy_a_k, localB->rtb_Ox_d_m,
      &localB->e_out_h);
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S429>/Delay1'
      if (localDW->icLoad_c) {
        localDW->Delay1_DSTATE_h5 = localB->e_out_h;
      }

      // Delay: '<S429>/Delay1'
      localB->Delay1_c = localDW->Delay1_DSTATE_h5;
    }

    // Sum: '<S429>/Sum6'
    localB->Sum6_hx = localB->e_out_h - localB->Delay1_c;

    // If: '<S429>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_d = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_d;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S429>/Hold this value' incorporates:
      //   ActionPort: '<S430>/Action Port'

      // SignalConversion generated from: '<S430>/In1'
      localB->In1_g20asdtg = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S429>/Hold this value'
    }

    // End of If: '<S429>/if we went through a "step"'

    // DataStoreWrite: '<S422>/BLACK_Tz' incorporates:
    //   Gain: '<S425>/kd_tb'
    //   Gain: '<S425>/kp_tb'
    //   Gain: '<S429>/divide by delta T'
    //   Sum: '<S425>/Sum3'

    *rtd_BLACK_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
      localB->In1_g20asdtg * APF_CTL_VIS_Obs_2023a_P.Kd_tb +
      APF_CTL_VIS_Obs_2023a_P.Kp_tb * localB->e_out_h;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S422>/Data Store Write3' incorporates:
      //   Constant: '<S422>/Puck State'

      *rtd_Float_State = localP->PuckState_Value_p;
    }

    // End of Outputs for SubSystem: '<S10>/Change BLACK Behavior'
  }

  // End of If: '<S10>/This IF block determines whether or not to run the BLUE sim//exp' 

  // If: '<S10>/This IF block determines whether or not to run the BLACK sim//exp' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 2.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhethero_n = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhethero_n;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S10>/Change BLUE Behavior' incorporates:
    //   ActionPort: '<S423>/Action Port'

    // Sum: '<S423>/Subtract' incorporates:
    //   Constant: '<S423>/Desired Px (BLUE)'

    localB->Subtract_k = APF_CTL_VIS_Obs_2023a_P.home_states_BLUE[0] -
      *rtd_BLUE_Px;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S444>/Delay1'
      if (localDW->icLoad_ce) {
        localDW->Delay1_DSTATE_f = localB->Subtract_k;
      }

      // Delay: '<S444>/Delay1'
      localB->Delay1_k = localDW->Delay1_DSTATE_f;
    }

    // Sum: '<S444>/Sum6'
    localB->Sum6_hx = localB->Subtract_k - localB->Delay1_k;

    // If: '<S444>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_i = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_i;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S444>/Hold this value' incorporates:
      //   ActionPort: '<S445>/Action Port'

      // SignalConversion generated from: '<S445>/In1'
      localB->In1_g20asdtgi0 = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S444>/Hold this value'
    }

    // End of If: '<S444>/if we went through a "step"'

    // DataStoreWrite: '<S423>/BLUE_Fx' incorporates:
    //   Gain: '<S439>/kd_xb'
    //   Gain: '<S439>/kp_xb'
    //   Gain: '<S444>/divide by delta T'
    //   Sum: '<S439>/Sum3'

    *rtd_BLUE_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
      localB->In1_g20asdtgi0 * APF_CTL_VIS_Obs_2023a_P.Kd_xblue +
      APF_CTL_VIS_Obs_2023a_P.Kp_xblue * localB->Subtract_k;

    // Sum: '<S423>/Subtract1' incorporates:
    //   Constant: '<S423>/Desired Py (BLUE)'

    localB->Subtract1_j = APF_CTL_VIS_Obs_2023a_P.home_states_BLUE[1] -
      *rtd_BLUE_Py;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S446>/Delay1'
      if (localDW->icLoad_p) {
        localDW->Delay1_DSTATE_i = localB->Subtract1_j;
      }

      // Delay: '<S446>/Delay1'
      localB->Delay1_g = localDW->Delay1_DSTATE_i;
    }

    // Sum: '<S446>/Sum6'
    localB->Sum6_hx = localB->Subtract1_j - localB->Delay1_g;

    // If: '<S446>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_p = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_p;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S446>/Hold this value' incorporates:
      //   ActionPort: '<S447>/Action Port'

      // SignalConversion generated from: '<S447>/In1'
      localB->In1_g20asdtgi = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S446>/Hold this value'
    }

    // End of If: '<S446>/if we went through a "step"'

    // DataStoreWrite: '<S423>/BLUE_Fy' incorporates:
    //   Gain: '<S440>/kd_yb'
    //   Gain: '<S440>/kp_yb'
    //   Gain: '<S446>/divide by delta T'
    //   Sum: '<S440>/Sum3'

    *rtd_BLUE_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
      localB->In1_g20asdtgi * APF_CTL_VIS_Obs_2023a_P.Kd_yblue +
      APF_CTL_VIS_Obs_2023a_P.Kp_yblue * localB->Subtract1_j;

    // MATLAB Function: '<S441>/MATLAB Function2' incorporates:
    //   Constant: '<S423>/Desired Attitude (BLUE)'

    APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_P.home_states_BLUE[2],
      localB->rtb_Oy_a_k, localB->rtb_Ox_d_m);

    // MATLAB Function: '<S441>/MATLAB Function3'
    APF_CTL_VIS_Obs_MATLABFunction3(*rtd_BLUE_Rz, localB->rtb_Ox_kr_c);

    // Sum: '<S441>/Subtract2'
    localB->rtb_Ox_d_m[0] -= localB->rtb_Ox_kr_c[0];
    localB->rtb_Ox_d_m[1] -= localB->rtb_Ox_kr_c[1];

    // MATLAB Function: '<S441>/MATLAB Function4'
    APF_CTL_VIS_Obs_MATLABFunction4(localB->rtb_Oy_a_k, localB->rtb_Ox_d_m,
      &localB->e_out_h3);
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S442>/Delay1'
      if (localDW->icLoad_jr) {
        localDW->Delay1_DSTATE_ol = localB->e_out_h3;
      }

      // Delay: '<S442>/Delay1'
      localB->Delay1_p = localDW->Delay1_DSTATE_ol;
    }

    // Sum: '<S442>/Sum6'
    localB->Sum6_hx = localB->e_out_h3 - localB->Delay1_p;

    // If: '<S442>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_k = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_k;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S442>/Hold this value' incorporates:
      //   ActionPort: '<S443>/Action Port'

      // SignalConversion generated from: '<S443>/In1'
      localB->In1_g20asdtgi0c = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S442>/Hold this value'
    }

    // End of If: '<S442>/if we went through a "step"'

    // DataStoreWrite: '<S423>/BLUE_Tz' incorporates:
    //   Gain: '<S438>/kd_tb'
    //   Gain: '<S438>/kp_tb'
    //   Gain: '<S442>/divide by delta T'
    //   Sum: '<S438>/Sum3'

    *rtd_BLUE_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
      localB->In1_g20asdtgi0c * APF_CTL_VIS_Obs_2023a_P.Kd_tblue +
      APF_CTL_VIS_Obs_2023a_P.Kp_tblue * localB->e_out_h3;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S423>/Data Store Write3' incorporates:
      //   Constant: '<S423>/Puck State'

      *rtd_Float_State = localP->PuckState_Value;
    }

    // End of Outputs for SubSystem: '<S10>/Change BLUE Behavior'
  }

  // End of If: '<S10>/This IF block determines whether or not to run the BLACK sim//exp' 

  // If: '<S10>/This IF block determines whether or not to run the RED sim//exp ' 
  rtAction = -1;
  if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
    if ((*rtd_WhoAmI == 1.0) || (*rtd_isSim == 1.0)) {
      rtAction = 0;
    }

    localDW->ThisIFblockdetermineswhethero_a = rtAction;
  } else {
    rtAction = localDW->ThisIFblockdetermineswhethero_a;
  }

  if (rtAction == 0) {
    // Outputs for IfAction SubSystem: '<S10>/Change RED Behavior' incorporates:
    //   ActionPort: '<S424>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S424>/RED_Tz_RW1' incorporates:
      //   Constant: '<S424>/Constant2'

      *rtd_RED_Tz_RW = localP->Constant2_Value;
    }

    // MATLAB Function: '<S454>/MATLAB Function2' incorporates:
    //   Constant: '<S424>/Desired Rz (RED)'

    APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_P.home_states_RED[2],
      localB->rtb_Oy_a_k, localB->rtb_Ox_d_m);

    // MATLAB Function: '<S454>/MATLAB Function3'
    APF_CTL_VIS_Obs_MATLABFunction3(*rtd_RED_Rz, localB->rtb_Ox_kr_c);

    // Sum: '<S454>/Subtract2'
    localB->rtb_Ox_d_m[0] -= localB->rtb_Ox_kr_c[0];
    localB->rtb_Ox_d_m[1] -= localB->rtb_Ox_kr_c[1];

    // MATLAB Function: '<S454>/MATLAB Function4'
    APF_CTL_VIS_Obs_MATLABFunction4(localB->rtb_Oy_a_k, localB->rtb_Ox_d_m,
      &localB->e_out);
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S456>/Delay1'
      if (localDW->icLoad) {
        localDW->Delay1_DSTATE = localB->e_out;
      }

      // Delay: '<S456>/Delay1'
      localB->Delay1 = localDW->Delay1_DSTATE;
    }

    // Sum: '<S456>/Sum6'
    localB->Sum6_hx = localB->e_out - localB->Delay1;

    // If: '<S456>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSubs = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSubs;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S456>/Hold this value' incorporates:
      //   ActionPort: '<S457>/Action Port'

      // SignalConversion generated from: '<S457>/In1'
      localB->In1_g20as = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S456>/Hold this value'
    }

    // End of If: '<S456>/if we went through a "step"'

    // DataStoreWrite: '<S424>/RED_Tz' incorporates:
    //   Gain: '<S451>/kd_tr'
    //   Gain: '<S451>/kp_tr'
    //   Gain: '<S456>/divide by delta T'
    //   Sum: '<S451>/Sum3'

    *rtd_RED_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g20as *
      APF_CTL_VIS_Obs_2023a_P.Kd_tr + APF_CTL_VIS_Obs_2023a_P.Kp_tr *
      localB->e_out;

    // Sum: '<S424>/Subtract' incorporates:
    //   Constant: '<S424>/Desired Px (RED)'

    localB->Subtract = APF_CTL_VIS_Obs_2023a_P.home_states_RED[0] - *rtd_RED_Px;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S458>/Delay1'
      if (localDW->icLoad_g) {
        localDW->Delay1_DSTATE_d = localB->Subtract;
      }

      // Delay: '<S458>/Delay1'
      localB->Delay1_b = localDW->Delay1_DSTATE_d;
    }

    // Sum: '<S458>/Sum6'
    localB->Sum6_hx = localB->Subtract - localB->Delay1_b;

    // If: '<S458>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_c = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_c;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S458>/Hold this value' incorporates:
      //   ActionPort: '<S459>/Action Port'

      // SignalConversion generated from: '<S459>/In1'
      localB->In1_g20a = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S458>/Hold this value'
    }

    // End of If: '<S458>/if we went through a "step"'

    // DataStoreWrite: '<S424>/RED_Fx' incorporates:
    //   Gain: '<S452>/kd_xr'
    //   Gain: '<S452>/kp_xr'
    //   Gain: '<S458>/divide by delta T'
    //   Sum: '<S452>/Sum3'

    *rtd_RED_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g20a *
      APF_CTL_VIS_Obs_2023a_P.Kd_xr + APF_CTL_VIS_Obs_2023a_P.Kp_xr *
      localB->Subtract;

    // Sum: '<S424>/Subtract1' incorporates:
    //   Constant: '<S424>/Desired Py (RED)'

    localB->Subtract1 = APF_CTL_VIS_Obs_2023a_P.home_states_RED[1] - *rtd_RED_Py;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Delay: '<S460>/Delay1'
      if (localDW->icLoad_d) {
        localDW->Delay1_DSTATE_o = localB->Subtract1;
      }

      // Delay: '<S460>/Delay1'
      localB->Delay1_d = localDW->Delay1_DSTATE_o;
    }

    // Sum: '<S460>/Sum6'
    localB->Sum6_hx = localB->Subtract1 - localB->Delay1_d;

    // If: '<S460>/if we went through a "step"'
    rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (localB->Sum6_hx != 0.0) {
        rtAction = 0;
      }

      localDW->ifwewentthroughastep_ActiveSu_m = rtAction;
    } else {
      rtAction = localDW->ifwewentthroughastep_ActiveSu_m;
    }

    if (rtAction == 0) {
      // Outputs for IfAction SubSystem: '<S460>/Hold this value' incorporates:
      //   ActionPort: '<S461>/Action Port'

      // SignalConversion generated from: '<S461>/In1'
      localB->In1_g20 = localB->Sum6_hx;

      // End of Outputs for SubSystem: '<S460>/Hold this value'
    }

    // End of If: '<S460>/if we went through a "step"'

    // DataStoreWrite: '<S424>/RED_Fy' incorporates:
    //   Gain: '<S453>/kd_yr'
    //   Gain: '<S453>/kp_yr'
    //   Gain: '<S460>/divide by delta T'
    //   Sum: '<S453>/Sum3'

    *rtd_RED_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g20 *
      APF_CTL_VIS_Obs_2023a_P.Kd_yr + APF_CTL_VIS_Obs_2023a_P.Kp_yr *
      localB->Subtract1;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // DataStoreWrite: '<S424>/Data Store Write3' incorporates:
      //   Constant: '<S424>/Puck State'

      *rtd_Float_State = localP->PuckState_Value_c;

      // If: '<S424>/If' incorporates:
      //   Constant: '<S424>/Constant4'

      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo) &&
          ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0))) {
        // Outputs for IfAction SubSystem: '<S424>/RED+ARM' incorporates:
        //   ActionPort: '<S455>/Action Port'

        // If: '<S455>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 
        if (*rtd_isSim == 1.0) {
          // Outputs for IfAction SubSystem: '<S455>/Simulated Position Controller' incorporates:
          //   ActionPort: '<S466>/Action Port'

          // Sum: '<S466>/Subtract2' incorporates:
          //   Constant: '<S455>/Constant1'

          localB->Sum6_hx = localP->Constant1_Value - *rtd_RED_Rz_Shoulder;

          // Delay: '<S472>/Delay1'
          if (localDW->icLoad_e) {
            localDW->Delay1_DSTATE_j = localB->Sum6_hx;
          }

          // Sum: '<S472>/Sum6' incorporates:
          //   Delay: '<S472>/Delay1'

          rtb_Sum6_gp = localB->Sum6_hx - localDW->Delay1_DSTATE_j;

          // If: '<S472>/if we went through a "step"'
          if (rtb_Sum6_gp != 0.0) {
            // Outputs for IfAction SubSystem: '<S472>/Hold this value' incorporates:
            //   ActionPort: '<S473>/Action Port'

            // SignalConversion generated from: '<S473>/In1'
            localB->In1_g = rtb_Sum6_gp;

            // End of Outputs for SubSystem: '<S472>/Hold this value'
          }

          // End of If: '<S472>/if we went through a "step"'

          // Sum: '<S468>/Sum3' incorporates:
          //   Gain: '<S468>/kd_sharm'
          //   Gain: '<S468>/kp_sharm'
          //   Gain: '<S472>/divide by delta T'

          rtb_Sum6_bf = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g *
            APF_CTL_VIS_Obs_2023a_P.Kd_sharm + APF_CTL_VIS_Obs_2023a_P.Kp_sharm *
            localB->Sum6_hx;

          // Saturate: '<S466>/Saturation'
          if (rtb_Sum6_bf > APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm) {
            // DataStoreWrite: '<S455>/Data Store Write'
            *rtd_RED_Shoulder_Command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm;
          } else if (rtb_Sum6_bf < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm) {
            // DataStoreWrite: '<S455>/Data Store Write'
            *rtd_RED_Shoulder_Command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_sharm;
          } else {
            // DataStoreWrite: '<S455>/Data Store Write'
            *rtd_RED_Shoulder_Command = rtb_Sum6_bf;
          }

          // End of Saturate: '<S466>/Saturation'

          // Sum: '<S466>/Subtract3' incorporates:
          //   Constant: '<S455>/Constant1'

          rtb_Sum6_gp = localP->Constant1_Value - *rtd_RED_Rz_Elbow;

          // Delay: '<S470>/Delay1'
          if (localDW->icLoad_gp) {
            localDW->Delay1_DSTATE_l = rtb_Sum6_gp;
          }

          // Sum: '<S470>/Sum6' incorporates:
          //   Delay: '<S470>/Delay1'

          rtb_Sum6_py = rtb_Sum6_gp - localDW->Delay1_DSTATE_l;

          // If: '<S470>/if we went through a "step"'
          if (rtb_Sum6_py != 0.0) {
            // Outputs for IfAction SubSystem: '<S470>/Hold this value' incorporates:
            //   ActionPort: '<S471>/Action Port'

            // SignalConversion generated from: '<S471>/In1'
            localB->In1_g2 = rtb_Sum6_py;

            // End of Outputs for SubSystem: '<S470>/Hold this value'
          }

          // End of If: '<S470>/if we went through a "step"'

          // Sum: '<S467>/Sum3' incorporates:
          //   Gain: '<S467>/kd_elarm'
          //   Gain: '<S467>/kp_elarm'
          //   Gain: '<S470>/divide by delta T'

          rtb_Sum6_bf = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1_g2 *
            APF_CTL_VIS_Obs_2023a_P.Kd_elarm + APF_CTL_VIS_Obs_2023a_P.Kp_elarm *
            rtb_Sum6_gp;

          // Saturate: '<S466>/Saturation1'
          if (rtb_Sum6_bf > APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm) {
            // DataStoreWrite: '<S455>/Data Store Write1'
            *rtd_RED_Elbow_Command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm;
          } else if (rtb_Sum6_bf < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm) {
            // DataStoreWrite: '<S455>/Data Store Write1'
            *rtd_RED_Elbow_Command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_elarm;
          } else {
            // DataStoreWrite: '<S455>/Data Store Write1'
            *rtd_RED_Elbow_Command = rtb_Sum6_bf;
          }

          // End of Saturate: '<S466>/Saturation1'

          // Sum: '<S466>/Subtract4' incorporates:
          //   Constant: '<S455>/Constant6'

          rtb_Sum6_py = localP->Constant6_Value - *rtd_RED_Rz_Wrist;

          // Delay: '<S474>/Delay1'
          if (localDW->icLoad_k) {
            localDW->Delay1_DSTATE_h = rtb_Sum6_py;
          }

          // Sum: '<S474>/Sum6' incorporates:
          //   Delay: '<S474>/Delay1'

          rtb_Sum6_bf = rtb_Sum6_py - localDW->Delay1_DSTATE_h;

          // If: '<S474>/if we went through a "step"'
          if (rtb_Sum6_bf != 0.0) {
            // Outputs for IfAction SubSystem: '<S474>/Hold this value' incorporates:
            //   ActionPort: '<S475>/Action Port'

            // SignalConversion generated from: '<S475>/In1'
            localB->In1 = rtb_Sum6_bf;

            // End of Outputs for SubSystem: '<S474>/Hold this value'
          }

          // End of If: '<S474>/if we went through a "step"'

          // Sum: '<S469>/Sum3' incorporates:
          //   Gain: '<S469>/kd_wrarm'
          //   Gain: '<S469>/kp_wrarm'
          //   Gain: '<S474>/divide by delta T'

          rtb_Sum6_bf = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate * localB->In1 *
            APF_CTL_VIS_Obs_2023a_P.Kd_wrarm + APF_CTL_VIS_Obs_2023a_P.Kp_wrarm *
            rtb_Sum6_py;

          // Saturate: '<S466>/Saturation3'
          if (rtb_Sum6_bf > APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm) {
            // DataStoreWrite: '<S455>/Data Store Write2'
            *rtd_RED_Wrist_Command = APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm;
          } else if (rtb_Sum6_bf < -APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm) {
            // DataStoreWrite: '<S455>/Data Store Write2'
            *rtd_RED_Wrist_Command = -APF_CTL_VIS_Obs_2023a_P.Tz_lim_wrarm;
          } else {
            // DataStoreWrite: '<S455>/Data Store Write2'
            *rtd_RED_Wrist_Command = rtb_Sum6_bf;
          }

          // End of Saturate: '<S466>/Saturation3'

          // Update for Delay: '<S472>/Delay1'
          localDW->icLoad_e = false;
          localDW->Delay1_DSTATE_j = localB->Sum6_hx;

          // Update for Delay: '<S470>/Delay1'
          localDW->icLoad_gp = false;
          localDW->Delay1_DSTATE_l = rtb_Sum6_gp;

          // Update for Delay: '<S474>/Delay1'
          localDW->icLoad_k = false;
          localDW->Delay1_DSTATE_h = rtb_Sum6_py;

          // End of Outputs for SubSystem: '<S455>/Simulated Position Controller' 
        } else {
          // Outputs for IfAction SubSystem: '<S455>/Passthrough for Experiment' incorporates:
          //   ActionPort: '<S465>/Action Port'

          // DataStoreWrite: '<S455>/Data Store Write' incorporates:
          //   Constant: '<S455>/Constant1'
          //   SignalConversion generated from: '<S465>/q1_desired'

          *rtd_RED_Shoulder_Command = localP->Constant1_Value;

          // DataStoreWrite: '<S455>/Data Store Write1' incorporates:
          //   Constant: '<S455>/Constant1'
          //   SignalConversion generated from: '<S465>/q2_desired'

          *rtd_RED_Elbow_Command = localP->Constant1_Value;

          // DataStoreWrite: '<S455>/Data Store Write2' incorporates:
          //   Constant: '<S455>/Constant6'
          //   SignalConversion generated from: '<S465>/q3_desired'

          *rtd_RED_Wrist_Command = localP->Constant6_Value;

          // End of Outputs for SubSystem: '<S455>/Passthrough for Experiment'
        }

        // End of If: '<S455>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

        // DataStoreWrite: '<S455>/Data Store Write3' incorporates:
        //   Constant: '<S455>/Constant7'

        *rtd_RED_ARM_Control_Mode = localP->Constant7_Value;

        // End of Outputs for SubSystem: '<S424>/RED+ARM'
      }

      // End of If: '<S424>/If'
    }

    // End of Outputs for SubSystem: '<S10>/Change RED Behavior'
  }

  // End of If: '<S10>/This IF block determines whether or not to run the RED sim//exp ' 
}

//
// Update for action system:
//    '<Root>/Phase #4: Return Home'
//    '<Root>/Phase #5: Hold Home'
//
void APF_CTL_Phase4ReturnHome_Update(RT_MODEL_APF_CTL_VIS_Obs_2023_T * const
  APF_CTL_VIS_Obs_2023a_M, B_Phase4ReturnHome_APF_CTL_VI_T *localB,
  DW_Phase4ReturnHome_APF_CTL_V_T *localDW)
{
  // Update for If: '<S10>/This IF block determines whether or not to run the BLUE sim//exp' 
  if (localDW->ThisIFblockdetermineswhetherorn == 0) {
    // Update for IfAction SubSystem: '<S10>/Change BLACK Behavior' incorporates:
    //   ActionPort: '<S422>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Update for Delay: '<S431>/Delay1'
      localDW->icLoad_f = false;
      localDW->Delay1_DSTATE_a = localB->Subtract_c;

      // Update for Delay: '<S433>/Delay1'
      localDW->icLoad_j = false;
      localDW->Delay1_DSTATE_jh = localB->Subtract1_k;

      // Update for Delay: '<S429>/Delay1'
      localDW->icLoad_c = false;
      localDW->Delay1_DSTATE_h5 = localB->e_out_h;
    }

    // End of Update for SubSystem: '<S10>/Change BLACK Behavior'
  }

  // End of Update for If: '<S10>/This IF block determines whether or not to run the BLUE sim//exp' 

  // Update for If: '<S10>/This IF block determines whether or not to run the BLACK sim//exp' 
  if (localDW->ThisIFblockdetermineswhethero_n == 0) {
    // Update for IfAction SubSystem: '<S10>/Change BLUE Behavior' incorporates:
    //   ActionPort: '<S423>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Update for Delay: '<S444>/Delay1'
      localDW->icLoad_ce = false;
      localDW->Delay1_DSTATE_f = localB->Subtract_k;

      // Update for Delay: '<S446>/Delay1'
      localDW->icLoad_p = false;
      localDW->Delay1_DSTATE_i = localB->Subtract1_j;

      // Update for Delay: '<S442>/Delay1'
      localDW->icLoad_jr = false;
      localDW->Delay1_DSTATE_ol = localB->e_out_h3;
    }

    // End of Update for SubSystem: '<S10>/Change BLUE Behavior'
  }

  // End of Update for If: '<S10>/This IF block determines whether or not to run the BLACK sim//exp' 

  // Update for If: '<S10>/This IF block determines whether or not to run the RED sim//exp ' 
  if (localDW->ThisIFblockdetermineswhethero_a == 0) {
    // Update for IfAction SubSystem: '<S10>/Change RED Behavior' incorporates:
    //   ActionPort: '<S424>/Action Port'

    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Update for Delay: '<S456>/Delay1'
      localDW->icLoad = false;
      localDW->Delay1_DSTATE = localB->e_out;

      // Update for Delay: '<S458>/Delay1'
      localDW->icLoad_g = false;
      localDW->Delay1_DSTATE_d = localB->Subtract;

      // Update for Delay: '<S460>/Delay1'
      localDW->icLoad_d = false;
      localDW->Delay1_DSTATE_o = localB->Subtract1;
    }

    // End of Update for SubSystem: '<S10>/Change RED Behavior'
  }

  // End of Update for If: '<S10>/This IF block determines whether or not to run the RED sim//exp ' 
}

// Function for MATLAB Function: '<S639>/MATLAB Function1'
static real_T APF_CTL_VIS_Obs_2023a_maximum(const real_T x[8])
{
  real_T ex;
  int32_T idx;
  int32_T k;
  if (!rtIsNaN(x[0])) {
    idx = 1;
  } else {
    boolean_T exitg1;
    idx = 0;
    k = 2;
    exitg1 = false;
    while ((!exitg1) && (k < 9)) {
      if (!rtIsNaN(x[k - 1])) {
        idx = k;
        exitg1 = true;
      } else {
        k++;
      }
    }
  }

  if (idx == 0) {
    ex = x[0];
  } else {
    ex = x[idx - 1];
    for (k = idx + 1; k < 9; k++) {
      real_T x_0;
      x_0 = x[k - 1];
      if (ex < x_0) {
        ex = x_0;
      }
    }
  }

  return ex;
}

//
// Output and update for atomic system:
//    '<S639>/MATLAB Function1'
//    '<S651>/MATLAB Function2'
//    '<S663>/MATLAB Function2'
//
void APF_CTL_VIS_O_MATLABFunction1_l(const real_T rtu_ThrustPer[8], real_T
  rty_ThrustPer_Final[8])
{
  real_T TControl;
  real_T ThrustPer_Sat;
  real_T maxval;
  int32_T i;
  TControl = 1.0 / APF_CTL_VIS_Obs_2023a_P.PWMFreq;
  maxval = APF_CTL_VIS_Obs_2023a_maximum(rtu_ThrustPer);
  for (i = 0; i < 8; i++) {
    if (maxval > 1.0) {
      ThrustPer_Sat = rtu_ThrustPer[i] / maxval;
    } else {
      ThrustPer_Sat = rtu_ThrustPer[i];
    }

    if (ThrustPer_Sat > 0.007 / TControl) {
      rty_ThrustPer_Final[i] = ThrustPer_Sat;
    } else {
      rty_ThrustPer_Final[i] = 0.0;
    }
  }
}

// Function for MATLAB Function: '<S639>/MATLAB Function10'
static real_T APF_CTL_VIS_Obs_2023a_maximum_p(const real_T x[8])
{
  real_T ex;
  int32_T idx;
  int32_T k;
  if (!rtIsNaN(x[0])) {
    idx = 1;
  } else {
    boolean_T exitg1;
    idx = 0;
    k = 2;
    exitg1 = false;
    while ((!exitg1) && (k < 9)) {
      if (!rtIsNaN(x[k - 1])) {
        idx = k;
        exitg1 = true;
      } else {
        k++;
      }
    }
  }

  if (idx == 0) {
    ex = x[0];
  } else {
    ex = x[idx - 1];
    for (k = idx + 1; k < 9; k++) {
      real_T x_0;
      x_0 = x[k - 1];
      if (ex < x_0) {
        ex = x_0;
      }
    }
  }

  return ex;
}

//
// Output and update for atomic system:
//    '<S639>/MATLAB Function10'
//    '<S651>/MATLAB Function6'
//    '<S663>/MATLAB Function5'
//
void APF_CTL_VIS_Ob_MATLABFunction10(const real_T rtu_PWMs[8], real_T
  *rty_thrust_decay_factor, real_T *rty_count, B_MATLABFunction10_APF_CTL_VI_T
  *localB)
{
  real_T rtu_PWMs_0;
  real_T sum_of_duty_cycles;
  int32_T i;
  int32_T nz;
  boolean_T x[8];
  sum_of_duty_cycles = APF_CTL_VIS_Obs_2023a_maximum_p(rtu_PWMs);
  for (i = 0; i < 8; i++) {
    rtu_PWMs_0 = rtu_PWMs[i];
    localB->PWMs[i] = rtu_PWMs_0;
    if (sum_of_duty_cycles > 1.0) {
      rtu_PWMs_0 /= sum_of_duty_cycles;
      localB->PWMs[i] = rtu_PWMs_0;
    }

    x[i] = (rtu_PWMs_0 > APF_CTL_VIS_Obs_2023a_P.thruster_count_threshold);
  }

  nz = x[0];
  for (i = 0; i < 7; i++) {
    nz += x[i + 1];
  }

  for (i = 0; i < 8; i++) {
    sum_of_duty_cycles = localB->PWMs[i];
    if (sum_of_duty_cycles >= 0.0) {
      localB->positives_only[i] = sum_of_duty_cycles;
    } else {
      localB->positives_only[i] = 0.0;
    }
  }

  sum_of_duty_cycles = localB->positives_only[0];
  for (i = 0; i < 7; i++) {
    sum_of_duty_cycles += localB->positives_only[i + 1];
  }

  sum_of_duty_cycles /= static_cast<real_T>(nz);
  if ((sum_of_duty_cycles < 0.3) || (nz == 0)) {
    *rty_thrust_decay_factor = 1.0;
  } else {
    sum_of_duty_cycles = (0.6 - 2.0 * sum_of_duty_cycles) + 1.0;
    if (sum_of_duty_cycles >= 0.5) {
      *rty_thrust_decay_factor = sum_of_duty_cycles;
    } else {
      *rty_thrust_decay_factor = 0.5;
    }
  }

  *rty_count = nz;
}

//
// Output and update for atomic system:
//    '<S646>/Create Rotation Matrix'
//    '<S658>/Create Rotation Matrix'
//    '<S679>/Create Rotation Matrix'
//
void APF_CTL_VI_CreateRotationMatrix(real_T rtu_Rz, real_T rty_C_Ib[4])
{
  real_T x_tmp;
  real_T x_tmp_0;
  x_tmp = sin(rtu_Rz);
  x_tmp_0 = cos(rtu_Rz);
  if (fabs(-x_tmp) > fabs(x_tmp_0)) {
    real_T r_tmp;
    real_T t;
    r_tmp = x_tmp_0 / -x_tmp;
    t = 1.0 / (r_tmp * x_tmp_0 - x_tmp);
    x_tmp_0 = r_tmp * t;
    rty_C_Ib[0] = x_tmp_0;
    rty_C_Ib[1] = -t;
    rty_C_Ib[2] = -x_tmp / -x_tmp * t;
    rty_C_Ib[3] = x_tmp_0;
  } else {
    real_T r_tmp;
    real_T t;
    r_tmp = -x_tmp / x_tmp_0;
    t = 1.0 / (x_tmp_0 - r_tmp * x_tmp);
    rty_C_Ib[0] = x_tmp_0 / x_tmp_0 * t;
    rty_C_Ib[1] = -r_tmp * t;
    rty_C_Ib[2] = r_tmp * t;
    rty_C_Ib[3] = t;
  }
}

//
// Output and update for atomic system:
//    '<S640>/Create Rotation Matrix'
//    '<S652>/Create Rotation Matrix'
//    '<S664>/Create Rotation Matrix'
//
void APF_CTL__CreateRotationMatrix_g(real_T rtu_Rz, real_T rty_C_bI[4])
{
  real_T tmp;
  real_T tmp_0;
  tmp = sin(rtu_Rz);
  tmp_0 = cos(rtu_Rz);
  rty_C_bI[0] = tmp_0;
  rty_C_bI[2] = tmp;
  rty_C_bI[1] = -tmp;
  rty_C_bI[3] = tmp_0;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static boolean_T APF_CTL_VIS_Obs_202_ishermitian(const real_T A[36])
{
  boolean_T exitg2;
  boolean_T p;
  p = true;
  APF_CTL_VIS_Obs_2023a_B.j_i = 0;
  exitg2 = false;
  while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.j_i < 6)) {
    int32_T exitg1;
    APF_CTL_VIS_Obs_2023a_B.i_eb = 0;
    do {
      exitg1 = 0;
      if (APF_CTL_VIS_Obs_2023a_B.i_eb <= APF_CTL_VIS_Obs_2023a_B.j_i) {
        if (!(A[6 * APF_CTL_VIS_Obs_2023a_B.j_i + APF_CTL_VIS_Obs_2023a_B.i_eb] ==
              A[6 * APF_CTL_VIS_Obs_2023a_B.i_eb + APF_CTL_VIS_Obs_2023a_B.j_i]))
        {
          p = false;
          exitg1 = 1;
        } else {
          APF_CTL_VIS_Obs_2023a_B.i_eb++;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.j_i++;
        exitg1 = 2;
      }
    } while (exitg1 == 0);

    if (exitg1 == 1) {
      exitg2 = true;
    }
  }

  return p;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static boolean_T APF_CTL_VIS_Obs_2_ishermitian_c(const real_T A[36])
{
  boolean_T exitg2;
  boolean_T p;
  p = true;
  APF_CTL_VIS_Obs_2023a_B.j_g = 0;
  exitg2 = false;
  while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.j_g < 6)) {
    int32_T exitg1;
    APF_CTL_VIS_Obs_2023a_B.i_ed = 0;
    do {
      exitg1 = 0;
      if (APF_CTL_VIS_Obs_2023a_B.i_ed <= APF_CTL_VIS_Obs_2023a_B.j_g) {
        if (!(A[6 * APF_CTL_VIS_Obs_2023a_B.j_g + APF_CTL_VIS_Obs_2023a_B.i_ed] ==
              -A[6 * APF_CTL_VIS_Obs_2023a_B.i_ed + APF_CTL_VIS_Obs_2023a_B.j_g]))
        {
          p = false;
          exitg1 = 1;
        } else {
          APF_CTL_VIS_Obs_2023a_B.i_ed++;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.j_g++;
        exitg1 = 2;
      }
    } while (exitg1 == 0);

    if (exitg1 == 1) {
      exitg2 = true;
    }
  }

  return p;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzlascl(real_T cfrom, real_T cto, real_T A[36])
{
  APF_CTL_VIS_Obs_2023a_B.cfromc_iy = cfrom;
  APF_CTL_VIS_Obs_2023a_B.ctoc_p = cto;
  APF_CTL_VIS_Obs_2023a_B.notdone_i = true;
  while (APF_CTL_VIS_Obs_2023a_B.notdone_i) {
    APF_CTL_VIS_Obs_2023a_B.cfrom1_f = APF_CTL_VIS_Obs_2023a_B.cfromc_iy *
      2.0041683600089728E-292;
    APF_CTL_VIS_Obs_2023a_B.cto1_e = APF_CTL_VIS_Obs_2023a_B.ctoc_p /
      4.9896007738368E+291;
    if ((fabs(APF_CTL_VIS_Obs_2023a_B.cfrom1_f) > fabs
         (APF_CTL_VIS_Obs_2023a_B.ctoc_p)) && (APF_CTL_VIS_Obs_2023a_B.ctoc_p !=
         0.0)) {
      APF_CTL_VIS_Obs_2023a_B.mul_n = 2.0041683600089728E-292;
      APF_CTL_VIS_Obs_2023a_B.cfromc_iy = APF_CTL_VIS_Obs_2023a_B.cfrom1_f;
    } else if (fabs(APF_CTL_VIS_Obs_2023a_B.cto1_e) > fabs
               (APF_CTL_VIS_Obs_2023a_B.cfromc_iy)) {
      APF_CTL_VIS_Obs_2023a_B.mul_n = 4.9896007738368E+291;
      APF_CTL_VIS_Obs_2023a_B.ctoc_p = APF_CTL_VIS_Obs_2023a_B.cto1_e;
    } else {
      APF_CTL_VIS_Obs_2023a_B.mul_n = APF_CTL_VIS_Obs_2023a_B.ctoc_p /
        APF_CTL_VIS_Obs_2023a_B.cfromc_iy;
      APF_CTL_VIS_Obs_2023a_B.notdone_i = false;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i9 = 0; APF_CTL_VIS_Obs_2023a_B.i9 < 36;
         APF_CTL_VIS_Obs_2023a_B.i9++) {
      A[APF_CTL_VIS_Obs_2023a_B.i9] *= APF_CTL_VIS_Obs_2023a_B.mul_n;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_l(int32_T n, const real_T x[36],
  int32_T ix0)
{
  real_T y;
  y = 0.0;
  if (n >= 1) {
    if (n == 1) {
      y = fabs(x[ix0 - 1]);
    } else {
      APF_CTL_VIS_Obs_2023a_B.scale_n = 3.3121686421112381E-170;
      APF_CTL_VIS_Obs_2023a_B.kend_b = (ix0 + n) - 1;
      for (APF_CTL_VIS_Obs_2023a_B.k_h = ix0; APF_CTL_VIS_Obs_2023a_B.k_h <=
           APF_CTL_VIS_Obs_2023a_B.kend_b; APF_CTL_VIS_Obs_2023a_B.k_h++) {
        APF_CTL_VIS_Obs_2023a_B.absxk_p = fabs(x[APF_CTL_VIS_Obs_2023a_B.k_h - 1]);
        if (APF_CTL_VIS_Obs_2023a_B.absxk_p > APF_CTL_VIS_Obs_2023a_B.scale_n) {
          APF_CTL_VIS_Obs_2023a_B.t_d = APF_CTL_VIS_Obs_2023a_B.scale_n /
            APF_CTL_VIS_Obs_2023a_B.absxk_p;
          y = y * APF_CTL_VIS_Obs_2023a_B.t_d * APF_CTL_VIS_Obs_2023a_B.t_d +
            1.0;
          APF_CTL_VIS_Obs_2023a_B.scale_n = APF_CTL_VIS_Obs_2023a_B.absxk_p;
        } else {
          APF_CTL_VIS_Obs_2023a_B.t_d = APF_CTL_VIS_Obs_2023a_B.absxk_p /
            APF_CTL_VIS_Obs_2023a_B.scale_n;
          y += APF_CTL_VIS_Obs_2023a_B.t_d * APF_CTL_VIS_Obs_2023a_B.t_d;
        }
      }

      y = APF_CTL_VIS_Obs_2023a_B.scale_n * sqrt(y);
    }
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzgebal(real_T A[36], int32_T *ilo, int32_T
  *ihi, real_T scale[6])
{
  int32_T exitg1;
  int32_T exitg2;
  int32_T exitg4;
  int32_T exitg5;
  boolean_T exitg3;
  boolean_T exitg6;
  boolean_T exitg7;
  for (APF_CTL_VIS_Obs_2023a_B.i_e = 0; APF_CTL_VIS_Obs_2023a_B.i_e < 6;
       APF_CTL_VIS_Obs_2023a_B.i_e++) {
    scale[APF_CTL_VIS_Obs_2023a_B.i_e] = 1.0;
  }

  *ilo = 1;
  *ihi = 6;
  APF_CTL_VIS_Obs_2023a_B.notdone = true;
  do {
    exitg5 = 0;
    if (APF_CTL_VIS_Obs_2023a_B.notdone) {
      APF_CTL_VIS_Obs_2023a_B.notdone = false;
      APF_CTL_VIS_Obs_2023a_B.f_ix = *ihi;
      do {
        exitg4 = 0;
        if (APF_CTL_VIS_Obs_2023a_B.f_ix > 0) {
          APF_CTL_VIS_Obs_2023a_B.skipThisColumn = false;
          APF_CTL_VIS_Obs_2023a_B.i_e = 0;
          exitg6 = false;
          while ((!exitg6) && (APF_CTL_VIS_Obs_2023a_B.i_e <=
                               static_cast<uint8_T>(*ihi) - 1)) {
            if ((APF_CTL_VIS_Obs_2023a_B.i_e + 1 == APF_CTL_VIS_Obs_2023a_B.f_ix)
                || (!(A[(6 * APF_CTL_VIS_Obs_2023a_B.i_e +
                         APF_CTL_VIS_Obs_2023a_B.f_ix) - 1] != 0.0))) {
              APF_CTL_VIS_Obs_2023a_B.i_e++;
            } else {
              APF_CTL_VIS_Obs_2023a_B.skipThisColumn = true;
              exitg6 = true;
            }
          }

          if (APF_CTL_VIS_Obs_2023a_B.skipThisColumn) {
            APF_CTL_VIS_Obs_2023a_B.f_ix--;
          } else {
            scale[*ihi - 1] = APF_CTL_VIS_Obs_2023a_B.f_ix;
            if (APF_CTL_VIS_Obs_2023a_B.f_ix != *ihi) {
              APF_CTL_VIS_Obs_2023a_B.kend_g = (APF_CTL_VIS_Obs_2023a_B.f_ix - 1)
                * 6;
              APF_CTL_VIS_Obs_2023a_B.ica = (*ihi - 1) * 6;
              APF_CTL_VIS_Obs_2023a_B.ira = static_cast<uint8_T>(*ihi);
              for (APF_CTL_VIS_Obs_2023a_B.ix0_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp < APF_CTL_VIS_Obs_2023a_B.ira;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp++) {
                APF_CTL_VIS_Obs_2023a_B.c_temp_tmp =
                  APF_CTL_VIS_Obs_2023a_B.kend_g +
                  APF_CTL_VIS_Obs_2023a_B.ix0_tmp;
                APF_CTL_VIS_Obs_2023a_B.c_ob =
                  A[APF_CTL_VIS_Obs_2023a_B.c_temp_tmp];
                APF_CTL_VIS_Obs_2023a_B.i_e = APF_CTL_VIS_Obs_2023a_B.ica +
                  APF_CTL_VIS_Obs_2023a_B.ix0_tmp;
                A[APF_CTL_VIS_Obs_2023a_B.c_temp_tmp] =
                  A[APF_CTL_VIS_Obs_2023a_B.i_e];
                A[APF_CTL_VIS_Obs_2023a_B.i_e] = APF_CTL_VIS_Obs_2023a_B.c_ob;
              }

              for (APF_CTL_VIS_Obs_2023a_B.ix0_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp < 6;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp++) {
                APF_CTL_VIS_Obs_2023a_B.kend_g =
                  (APF_CTL_VIS_Obs_2023a_B.ix0_tmp * 6 +
                   APF_CTL_VIS_Obs_2023a_B.f_ix) - 1;
                APF_CTL_VIS_Obs_2023a_B.c_ob = A[APF_CTL_VIS_Obs_2023a_B.kend_g];
                APF_CTL_VIS_Obs_2023a_B.i_e = (APF_CTL_VIS_Obs_2023a_B.ix0_tmp *
                  6 + *ihi) - 1;
                A[APF_CTL_VIS_Obs_2023a_B.kend_g] =
                  A[APF_CTL_VIS_Obs_2023a_B.i_e];
                A[APF_CTL_VIS_Obs_2023a_B.i_e] = APF_CTL_VIS_Obs_2023a_B.c_ob;
              }
            }

            exitg4 = 1;
          }
        } else {
          exitg4 = 2;
        }
      } while (exitg4 == 0);

      if (exitg4 == 1) {
        if (*ihi == 1) {
          *ilo = 1;
          *ihi = 1;
          exitg5 = 1;
        } else {
          (*ihi)--;
          APF_CTL_VIS_Obs_2023a_B.notdone = true;
        }
      }
    } else {
      APF_CTL_VIS_Obs_2023a_B.notdone = true;
      while (APF_CTL_VIS_Obs_2023a_B.notdone) {
        APF_CTL_VIS_Obs_2023a_B.notdone = false;
        APF_CTL_VIS_Obs_2023a_B.f_ix = *ilo;
        exitg6 = false;
        while ((!exitg6) && (APF_CTL_VIS_Obs_2023a_B.f_ix <= *ihi)) {
          APF_CTL_VIS_Obs_2023a_B.skipThisColumn = false;
          APF_CTL_VIS_Obs_2023a_B.i_e = *ilo;
          exitg7 = false;
          while ((!exitg7) && (APF_CTL_VIS_Obs_2023a_B.i_e <= *ihi)) {
            if ((APF_CTL_VIS_Obs_2023a_B.i_e == APF_CTL_VIS_Obs_2023a_B.f_ix) ||
                (!(A[((APF_CTL_VIS_Obs_2023a_B.f_ix - 1) * 6 +
                      APF_CTL_VIS_Obs_2023a_B.i_e) - 1] != 0.0))) {
              APF_CTL_VIS_Obs_2023a_B.i_e++;
            } else {
              APF_CTL_VIS_Obs_2023a_B.skipThisColumn = true;
              exitg7 = true;
            }
          }

          if (APF_CTL_VIS_Obs_2023a_B.skipThisColumn) {
            APF_CTL_VIS_Obs_2023a_B.f_ix++;
          } else {
            scale[*ilo - 1] = APF_CTL_VIS_Obs_2023a_B.f_ix;
            if (APF_CTL_VIS_Obs_2023a_B.f_ix != *ilo) {
              APF_CTL_VIS_Obs_2023a_B.ica = (APF_CTL_VIS_Obs_2023a_B.f_ix - 1) *
                6;
              APF_CTL_VIS_Obs_2023a_B.ix0_tmp = (*ilo - 1) * 6;
              APF_CTL_VIS_Obs_2023a_B.ira = static_cast<uint8_T>(*ihi);
              for (APF_CTL_VIS_Obs_2023a_B.kend_g = 0;
                   APF_CTL_VIS_Obs_2023a_B.kend_g < APF_CTL_VIS_Obs_2023a_B.ira;
                   APF_CTL_VIS_Obs_2023a_B.kend_g++) {
                APF_CTL_VIS_Obs_2023a_B.c_temp_tmp = APF_CTL_VIS_Obs_2023a_B.ica
                  + APF_CTL_VIS_Obs_2023a_B.kend_g;
                APF_CTL_VIS_Obs_2023a_B.c_ob =
                  A[APF_CTL_VIS_Obs_2023a_B.c_temp_tmp];
                APF_CTL_VIS_Obs_2023a_B.i_e = APF_CTL_VIS_Obs_2023a_B.ix0_tmp +
                  APF_CTL_VIS_Obs_2023a_B.kend_g;
                A[APF_CTL_VIS_Obs_2023a_B.c_temp_tmp] =
                  A[APF_CTL_VIS_Obs_2023a_B.i_e];
                A[APF_CTL_VIS_Obs_2023a_B.i_e] = APF_CTL_VIS_Obs_2023a_B.c_ob;
              }

              APF_CTL_VIS_Obs_2023a_B.f_ix = (APF_CTL_VIS_Obs_2023a_B.ix0_tmp +
                APF_CTL_VIS_Obs_2023a_B.f_ix) - 1;
              APF_CTL_VIS_Obs_2023a_B.kend_g = (APF_CTL_VIS_Obs_2023a_B.ix0_tmp
                + *ilo) - 1;
              APF_CTL_VIS_Obs_2023a_B.ica = static_cast<uint8_T>(7 - *ilo);
              for (APF_CTL_VIS_Obs_2023a_B.ix0_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp < APF_CTL_VIS_Obs_2023a_B.ica;
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp++) {
                APF_CTL_VIS_Obs_2023a_B.ira = APF_CTL_VIS_Obs_2023a_B.ix0_tmp *
                  6 + APF_CTL_VIS_Obs_2023a_B.f_ix;
                APF_CTL_VIS_Obs_2023a_B.c_ob = A[APF_CTL_VIS_Obs_2023a_B.ira];
                APF_CTL_VIS_Obs_2023a_B.i_e = APF_CTL_VIS_Obs_2023a_B.ix0_tmp *
                  6 + APF_CTL_VIS_Obs_2023a_B.kend_g;
                A[APF_CTL_VIS_Obs_2023a_B.ira] = A[APF_CTL_VIS_Obs_2023a_B.i_e];
                A[APF_CTL_VIS_Obs_2023a_B.i_e] = APF_CTL_VIS_Obs_2023a_B.c_ob;
              }
            }

            (*ilo)++;
            APF_CTL_VIS_Obs_2023a_B.notdone = true;
            exitg6 = true;
          }
        }
      }

      APF_CTL_VIS_Obs_2023a_B.notdone = false;
      exitg5 = 2;
    }
  } while (exitg5 == 0);

  if (exitg5 == 1) {
  } else {
    exitg3 = false;
    while ((!exitg3) && (!APF_CTL_VIS_Obs_2023a_B.notdone)) {
      APF_CTL_VIS_Obs_2023a_B.notdone = true;
      APF_CTL_VIS_Obs_2023a_B.i_e = *ilo - 1;
      do {
        exitg2 = 0;
        if (APF_CTL_VIS_Obs_2023a_B.i_e + 1 <= *ihi) {
          APF_CTL_VIS_Obs_2023a_B.f_ix = (*ihi - *ilo) + 1;
          APF_CTL_VIS_Obs_2023a_B.c_ob = APF_CTL_VIS_Obs_2023a_xnrm2_l
            (APF_CTL_VIS_Obs_2023a_B.f_ix, A, APF_CTL_VIS_Obs_2023a_B.i_e * 6 + *
             ilo);
          APF_CTL_VIS_Obs_2023a_B.ix0_tmp = (*ilo - 1) * 6 +
            APF_CTL_VIS_Obs_2023a_B.i_e;
          APF_CTL_VIS_Obs_2023a_B.r_l = 0.0;
          if (APF_CTL_VIS_Obs_2023a_B.f_ix >= 1) {
            if (APF_CTL_VIS_Obs_2023a_B.f_ix == 1) {
              APF_CTL_VIS_Obs_2023a_B.r_l = fabs
                (A[APF_CTL_VIS_Obs_2023a_B.ix0_tmp]);
            } else {
              APF_CTL_VIS_Obs_2023a_B.b_scale_f = 3.3121686421112381E-170;
              APF_CTL_VIS_Obs_2023a_B.kend_g = ((APF_CTL_VIS_Obs_2023a_B.f_ix -
                1) * 6 + APF_CTL_VIS_Obs_2023a_B.ix0_tmp) + 1;
              for (APF_CTL_VIS_Obs_2023a_B.f_ix =
                   APF_CTL_VIS_Obs_2023a_B.ix0_tmp + 1;
                   APF_CTL_VIS_Obs_2023a_B.f_ix <=
                   APF_CTL_VIS_Obs_2023a_B.kend_g; APF_CTL_VIS_Obs_2023a_B.f_ix +=
                   6) {
                APF_CTL_VIS_Obs_2023a_B.absxk_cm = fabs
                  (A[APF_CTL_VIS_Obs_2023a_B.f_ix - 1]);
                if (APF_CTL_VIS_Obs_2023a_B.absxk_cm >
                    APF_CTL_VIS_Obs_2023a_B.b_scale_f) {
                  APF_CTL_VIS_Obs_2023a_B.t_f =
                    APF_CTL_VIS_Obs_2023a_B.b_scale_f /
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                  APF_CTL_VIS_Obs_2023a_B.r_l = APF_CTL_VIS_Obs_2023a_B.r_l *
                    APF_CTL_VIS_Obs_2023a_B.t_f * APF_CTL_VIS_Obs_2023a_B.t_f +
                    1.0;
                  APF_CTL_VIS_Obs_2023a_B.b_scale_f =
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.t_f = APF_CTL_VIS_Obs_2023a_B.absxk_cm
                    / APF_CTL_VIS_Obs_2023a_B.b_scale_f;
                  APF_CTL_VIS_Obs_2023a_B.r_l += APF_CTL_VIS_Obs_2023a_B.t_f *
                    APF_CTL_VIS_Obs_2023a_B.t_f;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.r_l = APF_CTL_VIS_Obs_2023a_B.b_scale_f *
                sqrt(APF_CTL_VIS_Obs_2023a_B.r_l);
            }
          }

          APF_CTL_VIS_Obs_2023a_B.f_ix = APF_CTL_VIS_Obs_2023a_B.i_e * 6;
          APF_CTL_VIS_Obs_2023a_B.ica = 1;
          if (*ihi > 1) {
            APF_CTL_VIS_Obs_2023a_B.b_scale_f = fabs
              (A[APF_CTL_VIS_Obs_2023a_B.f_ix]);
            for (APF_CTL_VIS_Obs_2023a_B.kend_g = 2;
                 APF_CTL_VIS_Obs_2023a_B.kend_g <= *ihi;
                 APF_CTL_VIS_Obs_2023a_B.kend_g++) {
              APF_CTL_VIS_Obs_2023a_B.absxk_cm = fabs(A
                [(APF_CTL_VIS_Obs_2023a_B.f_ix + APF_CTL_VIS_Obs_2023a_B.kend_g)
                - 1]);
              if (APF_CTL_VIS_Obs_2023a_B.absxk_cm >
                  APF_CTL_VIS_Obs_2023a_B.b_scale_f) {
                APF_CTL_VIS_Obs_2023a_B.ica = APF_CTL_VIS_Obs_2023a_B.kend_g;
                APF_CTL_VIS_Obs_2023a_B.b_scale_f =
                  APF_CTL_VIS_Obs_2023a_B.absxk_cm;
              }
            }
          }

          APF_CTL_VIS_Obs_2023a_B.b_scale_f = fabs(A[(6 *
            APF_CTL_VIS_Obs_2023a_B.i_e + APF_CTL_VIS_Obs_2023a_B.ica) - 1]);
          APF_CTL_VIS_Obs_2023a_B.ica = 7 - *ilo;
          if (7 - *ilo < 1) {
            APF_CTL_VIS_Obs_2023a_B.ira = 0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.ira = 1;
            if (7 - *ilo > 1) {
              APF_CTL_VIS_Obs_2023a_B.absxk_cm = fabs
                (A[APF_CTL_VIS_Obs_2023a_B.ix0_tmp]);
              for (APF_CTL_VIS_Obs_2023a_B.kend_g = 2;
                   APF_CTL_VIS_Obs_2023a_B.kend_g <= APF_CTL_VIS_Obs_2023a_B.ica;
                   APF_CTL_VIS_Obs_2023a_B.kend_g++) {
                APF_CTL_VIS_Obs_2023a_B.t_f = fabs(A
                  [(APF_CTL_VIS_Obs_2023a_B.kend_g - 1) * 6 +
                  APF_CTL_VIS_Obs_2023a_B.ix0_tmp]);
                if (APF_CTL_VIS_Obs_2023a_B.t_f >
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm) {
                  APF_CTL_VIS_Obs_2023a_B.ira = APF_CTL_VIS_Obs_2023a_B.kend_g;
                  APF_CTL_VIS_Obs_2023a_B.absxk_cm = APF_CTL_VIS_Obs_2023a_B.t_f;
                }
              }
            }
          }

          APF_CTL_VIS_Obs_2023a_B.t_f = fabs(A[((APF_CTL_VIS_Obs_2023a_B.ira +
            *ilo) - 2) * 6 + APF_CTL_VIS_Obs_2023a_B.i_e]);
          if ((APF_CTL_VIS_Obs_2023a_B.c_ob == 0.0) ||
              (APF_CTL_VIS_Obs_2023a_B.r_l == 0.0)) {
            APF_CTL_VIS_Obs_2023a_B.i_e++;
          } else {
            APF_CTL_VIS_Obs_2023a_B.g_k = APF_CTL_VIS_Obs_2023a_B.r_l / 2.0;
            APF_CTL_VIS_Obs_2023a_B.absxk_cm = 1.0;
            APF_CTL_VIS_Obs_2023a_B.s_j = APF_CTL_VIS_Obs_2023a_B.c_ob +
              APF_CTL_VIS_Obs_2023a_B.r_l;
            do {
              exitg1 = 0;
              if (APF_CTL_VIS_Obs_2023a_B.c_ob < APF_CTL_VIS_Obs_2023a_B.g_k) {
                if ((APF_CTL_VIS_Obs_2023a_B.c_ob >=
                     APF_CTL_VIS_Obs_2023a_B.b_scale_f) || rtIsNaN
                    (APF_CTL_VIS_Obs_2023a_B.b_scale_f)) {
                  APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.c_ob;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.y_n =
                    APF_CTL_VIS_Obs_2023a_B.b_scale_f;
                }

                if (APF_CTL_VIS_Obs_2023a_B.absxk_cm >=
                    APF_CTL_VIS_Obs_2023a_B.y_n) {
                  APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                }

                if (APF_CTL_VIS_Obs_2023a_B.y_n < 4.9896007738368E+291) {
                  if ((APF_CTL_VIS_Obs_2023a_B.g_k <=
                       APF_CTL_VIS_Obs_2023a_B.t_f) || rtIsNaN
                      (APF_CTL_VIS_Obs_2023a_B.t_f)) {
                    APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.g_k;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.t_f;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.r_l <= APF_CTL_VIS_Obs_2023a_B.y_n)
                  {
                    APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.r_l;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.y_n > 2.0041683600089728E-292) {
                    if (rtIsNaN(((((APF_CTL_VIS_Obs_2023a_B.c_ob +
                                    APF_CTL_VIS_Obs_2023a_B.absxk_cm) +
                                   APF_CTL_VIS_Obs_2023a_B.b_scale_f) +
                                  APF_CTL_VIS_Obs_2023a_B.r_l) +
                                 APF_CTL_VIS_Obs_2023a_B.g_k) +
                                APF_CTL_VIS_Obs_2023a_B.t_f)) {
                      exitg1 = 1;
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.absxk_cm *= 2.0;
                      APF_CTL_VIS_Obs_2023a_B.c_ob *= 2.0;
                      APF_CTL_VIS_Obs_2023a_B.b_scale_f *= 2.0;
                      APF_CTL_VIS_Obs_2023a_B.r_l /= 2.0;
                      APF_CTL_VIS_Obs_2023a_B.g_k /= 2.0;
                      APF_CTL_VIS_Obs_2023a_B.t_f /= 2.0;
                    }
                  } else {
                    exitg1 = 2;
                  }
                } else {
                  exitg1 = 2;
                }
              } else {
                exitg1 = 2;
              }
            } while (exitg1 == 0);

            if (exitg1 == 1) {
              exitg2 = 2;
            } else {
              APF_CTL_VIS_Obs_2023a_B.g_k = APF_CTL_VIS_Obs_2023a_B.c_ob / 2.0;
              exitg6 = false;
              while ((!exitg6) && (APF_CTL_VIS_Obs_2023a_B.g_k >=
                                   APF_CTL_VIS_Obs_2023a_B.r_l)) {
                if ((APF_CTL_VIS_Obs_2023a_B.r_l >= APF_CTL_VIS_Obs_2023a_B.t_f)
                    || rtIsNaN(APF_CTL_VIS_Obs_2023a_B.t_f)) {
                  APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.r_l;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.t_f;
                }

                if (APF_CTL_VIS_Obs_2023a_B.y_n < 4.9896007738368E+291) {
                  if ((APF_CTL_VIS_Obs_2023a_B.absxk_cm <=
                       APF_CTL_VIS_Obs_2023a_B.c_ob) || rtIsNaN
                      (APF_CTL_VIS_Obs_2023a_B.c_ob)) {
                    APF_CTL_VIS_Obs_2023a_B.y_n =
                      APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.y_n = APF_CTL_VIS_Obs_2023a_B.c_ob;
                  }

                  if ((APF_CTL_VIS_Obs_2023a_B.g_k <=
                       APF_CTL_VIS_Obs_2023a_B.b_scale_f) || rtIsNaN
                      (APF_CTL_VIS_Obs_2023a_B.b_scale_f)) {
                    APF_CTL_VIS_Obs_2023a_B.y_i = APF_CTL_VIS_Obs_2023a_B.g_k;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.y_i =
                      APF_CTL_VIS_Obs_2023a_B.b_scale_f;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.y_n <= APF_CTL_VIS_Obs_2023a_B.y_i)
                  {
                    APF_CTL_VIS_Obs_2023a_B.y_i = APF_CTL_VIS_Obs_2023a_B.y_n;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.y_i > 2.0041683600089728E-292) {
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm /= 2.0;
                    APF_CTL_VIS_Obs_2023a_B.c_ob /= 2.0;
                    APF_CTL_VIS_Obs_2023a_B.g_k /= 2.0;
                    APF_CTL_VIS_Obs_2023a_B.b_scale_f /= 2.0;
                    APF_CTL_VIS_Obs_2023a_B.r_l *= 2.0;
                    APF_CTL_VIS_Obs_2023a_B.t_f *= 2.0;
                  } else {
                    exitg6 = true;
                  }
                } else {
                  exitg6 = true;
                }
              }

              if ((APF_CTL_VIS_Obs_2023a_B.c_ob + APF_CTL_VIS_Obs_2023a_B.r_l >=
                   0.95 * APF_CTL_VIS_Obs_2023a_B.s_j) ||
                  ((APF_CTL_VIS_Obs_2023a_B.absxk_cm < 1.0) &&
                   (scale[APF_CTL_VIS_Obs_2023a_B.i_e] < 1.0) &&
                   (APF_CTL_VIS_Obs_2023a_B.absxk_cm *
                    scale[APF_CTL_VIS_Obs_2023a_B.i_e] <=
                    1.0020841800044864E-292)) ||
                  ((APF_CTL_VIS_Obs_2023a_B.absxk_cm > 1.0) &&
                   (scale[APF_CTL_VIS_Obs_2023a_B.i_e] > 1.0) &&
                   (scale[APF_CTL_VIS_Obs_2023a_B.i_e] >= 9.9792015476736E+291 /
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm))) {
              } else {
                APF_CTL_VIS_Obs_2023a_B.c_ob = 1.0 /
                  APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                scale[APF_CTL_VIS_Obs_2023a_B.i_e] *=
                  APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                APF_CTL_VIS_Obs_2023a_B.kend_g = APF_CTL_VIS_Obs_2023a_B.ix0_tmp
                  + 1;
                APF_CTL_VIS_Obs_2023a_B.ica = ((6 - *ilo) * 6 +
                  APF_CTL_VIS_Obs_2023a_B.ix0_tmp) + 1;
                for (APF_CTL_VIS_Obs_2023a_B.ix0_tmp =
                     APF_CTL_VIS_Obs_2023a_B.kend_g;
                     APF_CTL_VIS_Obs_2023a_B.ix0_tmp <=
                     APF_CTL_VIS_Obs_2023a_B.ica;
                     APF_CTL_VIS_Obs_2023a_B.ix0_tmp += 6) {
                  A[APF_CTL_VIS_Obs_2023a_B.ix0_tmp - 1] *=
                    APF_CTL_VIS_Obs_2023a_B.c_ob;
                }

                APF_CTL_VIS_Obs_2023a_B.kend_g = APF_CTL_VIS_Obs_2023a_B.f_ix + *
                  ihi;
                for (APF_CTL_VIS_Obs_2023a_B.ix0_tmp =
                     APF_CTL_VIS_Obs_2023a_B.f_ix + 1;
                     APF_CTL_VIS_Obs_2023a_B.ix0_tmp <=
                     APF_CTL_VIS_Obs_2023a_B.kend_g;
                     APF_CTL_VIS_Obs_2023a_B.ix0_tmp++) {
                  A[APF_CTL_VIS_Obs_2023a_B.ix0_tmp - 1] *=
                    APF_CTL_VIS_Obs_2023a_B.absxk_cm;
                }

                APF_CTL_VIS_Obs_2023a_B.notdone = false;
              }

              APF_CTL_VIS_Obs_2023a_B.i_e++;
            }
          }
        } else {
          exitg2 = 1;
        }
      } while (exitg2 == 0);

      if (exitg2 == 1) {
      } else {
        exitg3 = true;
      }
    }
  }
}

static real_T APF_CTL_VIS_Obs_2_rt_hypotd_snf(real_T u0, real_T u1)
{
  real_T y;
  APF_CTL_VIS_Obs_2023a_B.a = fabs(u0);
  APF_CTL_VIS_Obs_2023a_B.b_a = fabs(u1);
  if (APF_CTL_VIS_Obs_2023a_B.a < APF_CTL_VIS_Obs_2023a_B.b_a) {
    APF_CTL_VIS_Obs_2023a_B.a /= APF_CTL_VIS_Obs_2023a_B.b_a;
    y = sqrt(APF_CTL_VIS_Obs_2023a_B.a * APF_CTL_VIS_Obs_2023a_B.a + 1.0) *
      APF_CTL_VIS_Obs_2023a_B.b_a;
  } else if (APF_CTL_VIS_Obs_2023a_B.a > APF_CTL_VIS_Obs_2023a_B.b_a) {
    APF_CTL_VIS_Obs_2023a_B.b_a /= APF_CTL_VIS_Obs_2023a_B.a;
    y = sqrt(APF_CTL_VIS_Obs_2023a_B.b_a * APF_CTL_VIS_Obs_2023a_B.b_a + 1.0) *
      APF_CTL_VIS_Obs_2023a_B.a;
  } else if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.b_a)) {
    y = (rtNaN);
  } else {
    y = APF_CTL_VIS_Obs_2023a_B.a * 1.4142135623730951;
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_xzlarfg(int32_T n, real_T *alpha1, real_T x
  [36], int32_T ix0)
{
  real_T tau;
  tau = 0.0;
  if (n > 0) {
    APF_CTL_VIS_Obs_2023a_B.xnorm_l = APF_CTL_VIS_Obs_2023a_xnrm2_l(n - 1, x,
      ix0);
    if (APF_CTL_VIS_Obs_2023a_B.xnorm_l != 0.0) {
      APF_CTL_VIS_Obs_2023a_B.xnorm_l = APF_CTL_VIS_Obs_2_rt_hypotd_snf(*alpha1,
        APF_CTL_VIS_Obs_2023a_B.xnorm_l);
      if (*alpha1 >= 0.0) {
        APF_CTL_VIS_Obs_2023a_B.xnorm_l = -APF_CTL_VIS_Obs_2023a_B.xnorm_l;
      }

      if (fabs(APF_CTL_VIS_Obs_2023a_B.xnorm_l) < 1.0020841800044864E-292) {
        APF_CTL_VIS_Obs_2023a_B.knt_h = 0;
        APF_CTL_VIS_Obs_2023a_B.d_tmp_d = (ix0 + n) - 2;
        do {
          APF_CTL_VIS_Obs_2023a_B.knt_h++;
          for (APF_CTL_VIS_Obs_2023a_B.c_i = ix0; APF_CTL_VIS_Obs_2023a_B.c_i <=
               APF_CTL_VIS_Obs_2023a_B.d_tmp_d; APF_CTL_VIS_Obs_2023a_B.c_i++) {
            x[APF_CTL_VIS_Obs_2023a_B.c_i - 1] *= 9.9792015476736E+291;
          }

          APF_CTL_VIS_Obs_2023a_B.xnorm_l *= 9.9792015476736E+291;
          *alpha1 *= 9.9792015476736E+291;
        } while ((fabs(APF_CTL_VIS_Obs_2023a_B.xnorm_l) <
                  1.0020841800044864E-292) && (APF_CTL_VIS_Obs_2023a_B.knt_h <
                  20));

        APF_CTL_VIS_Obs_2023a_B.xnorm_l = APF_CTL_VIS_Obs_2_rt_hypotd_snf
          (*alpha1, APF_CTL_VIS_Obs_2023a_xnrm2_l(n - 1, x, ix0));
        if (*alpha1 >= 0.0) {
          APF_CTL_VIS_Obs_2023a_B.xnorm_l = -APF_CTL_VIS_Obs_2023a_B.xnorm_l;
        }

        tau = (APF_CTL_VIS_Obs_2023a_B.xnorm_l - *alpha1) /
          APF_CTL_VIS_Obs_2023a_B.xnorm_l;
        APF_CTL_VIS_Obs_2023a_B.a_c = 1.0 / (*alpha1 -
          APF_CTL_VIS_Obs_2023a_B.xnorm_l);
        for (APF_CTL_VIS_Obs_2023a_B.c_i = ix0; APF_CTL_VIS_Obs_2023a_B.c_i <=
             APF_CTL_VIS_Obs_2023a_B.d_tmp_d; APF_CTL_VIS_Obs_2023a_B.c_i++) {
          x[APF_CTL_VIS_Obs_2023a_B.c_i - 1] *= APF_CTL_VIS_Obs_2023a_B.a_c;
        }

        for (APF_CTL_VIS_Obs_2023a_B.c_i = 0; APF_CTL_VIS_Obs_2023a_B.c_i <
             APF_CTL_VIS_Obs_2023a_B.knt_h; APF_CTL_VIS_Obs_2023a_B.c_i++) {
          APF_CTL_VIS_Obs_2023a_B.xnorm_l *= 1.0020841800044864E-292;
        }

        *alpha1 = APF_CTL_VIS_Obs_2023a_B.xnorm_l;
      } else {
        tau = (APF_CTL_VIS_Obs_2023a_B.xnorm_l - *alpha1) /
          APF_CTL_VIS_Obs_2023a_B.xnorm_l;
        APF_CTL_VIS_Obs_2023a_B.a_c = 1.0 / (*alpha1 -
          APF_CTL_VIS_Obs_2023a_B.xnorm_l);
        APF_CTL_VIS_Obs_2023a_B.c_i = (ix0 + n) - 2;
        for (APF_CTL_VIS_Obs_2023a_B.knt_h = ix0; APF_CTL_VIS_Obs_2023a_B.knt_h <=
             APF_CTL_VIS_Obs_2023a_B.c_i; APF_CTL_VIS_Obs_2023a_B.knt_h++) {
          x[APF_CTL_VIS_Obs_2023a_B.knt_h - 1] *= APF_CTL_VIS_Obs_2023a_B.a_c;
        }

        *alpha1 = APF_CTL_VIS_Obs_2023a_B.xnorm_l;
      }
    }
  }

  return tau;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzlarf(int32_T b_m, int32_T n, int32_T iv0,
  real_T tau, real_T C[36], int32_T ic0, real_T work[6])
{
  if (tau != 0.0) {
    boolean_T exitg2;
    APF_CTL_VIS_Obs_2023a_B.lastv = n;
    APF_CTL_VIS_Obs_2023a_B.lastc = iv0 + n;
    while ((APF_CTL_VIS_Obs_2023a_B.lastv > 0) &&
           (C[APF_CTL_VIS_Obs_2023a_B.lastc - 2] == 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.lastv--;
      APF_CTL_VIS_Obs_2023a_B.lastc--;
    }

    APF_CTL_VIS_Obs_2023a_B.lastc = b_m;
    exitg2 = false;
    while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.lastc > 0)) {
      int32_T exitg1;
      APF_CTL_VIS_Obs_2023a_B.rowleft = (ic0 + APF_CTL_VIS_Obs_2023a_B.lastc) -
        1;
      APF_CTL_VIS_Obs_2023a_B.jA = APF_CTL_VIS_Obs_2023a_B.rowleft;
      do {
        exitg1 = 0;
        if (APF_CTL_VIS_Obs_2023a_B.jA <= (APF_CTL_VIS_Obs_2023a_B.lastv - 1) *
            6 + APF_CTL_VIS_Obs_2023a_B.rowleft) {
          if (C[APF_CTL_VIS_Obs_2023a_B.jA - 1] != 0.0) {
            exitg1 = 1;
          } else {
            APF_CTL_VIS_Obs_2023a_B.jA += 6;
          }
        } else {
          APF_CTL_VIS_Obs_2023a_B.lastc--;
          exitg1 = 2;
        }
      } while (exitg1 == 0);

      if (exitg1 == 1) {
        exitg2 = true;
      }
    }
  } else {
    APF_CTL_VIS_Obs_2023a_B.lastv = 0;
    APF_CTL_VIS_Obs_2023a_B.lastc = 0;
  }

  if (APF_CTL_VIS_Obs_2023a_B.lastv > 0) {
    if (APF_CTL_VIS_Obs_2023a_B.lastc != 0) {
      APF_CTL_VIS_Obs_2023a_B.jA = static_cast<uint8_T>
        (APF_CTL_VIS_Obs_2023a_B.lastc);
      memset(&work[0], 0, static_cast<uint32_T>(APF_CTL_VIS_Obs_2023a_B.jA) *
             sizeof(real_T));
      APF_CTL_VIS_Obs_2023a_B.ix = iv0;
      APF_CTL_VIS_Obs_2023a_B.c_j = (APF_CTL_VIS_Obs_2023a_B.lastv - 1) * 6 +
        ic0;
      for (APF_CTL_VIS_Obs_2023a_B.rowleft = ic0;
           APF_CTL_VIS_Obs_2023a_B.rowleft <= APF_CTL_VIS_Obs_2023a_B.c_j;
           APF_CTL_VIS_Obs_2023a_B.rowleft += 6) {
        APF_CTL_VIS_Obs_2023a_B.d_e = (APF_CTL_VIS_Obs_2023a_B.rowleft +
          APF_CTL_VIS_Obs_2023a_B.lastc) - 1;
        for (APF_CTL_VIS_Obs_2023a_B.jA = APF_CTL_VIS_Obs_2023a_B.rowleft;
             APF_CTL_VIS_Obs_2023a_B.jA <= APF_CTL_VIS_Obs_2023a_B.d_e;
             APF_CTL_VIS_Obs_2023a_B.jA++) {
          APF_CTL_VIS_Obs_2023a_B.i2 = APF_CTL_VIS_Obs_2023a_B.jA -
            APF_CTL_VIS_Obs_2023a_B.rowleft;
          work[APF_CTL_VIS_Obs_2023a_B.i2] += C[APF_CTL_VIS_Obs_2023a_B.jA - 1] *
            C[APF_CTL_VIS_Obs_2023a_B.ix - 1];
        }

        APF_CTL_VIS_Obs_2023a_B.ix++;
      }
    }

    if (!(-tau == 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.jA = ic0;
      APF_CTL_VIS_Obs_2023a_B.ix = static_cast<uint8_T>
        (APF_CTL_VIS_Obs_2023a_B.lastv);
      for (APF_CTL_VIS_Obs_2023a_B.lastv = 0; APF_CTL_VIS_Obs_2023a_B.lastv <
           APF_CTL_VIS_Obs_2023a_B.ix; APF_CTL_VIS_Obs_2023a_B.lastv++) {
        APF_CTL_VIS_Obs_2023a_B.temp_c = C[(iv0 + APF_CTL_VIS_Obs_2023a_B.lastv)
          - 1];
        if (APF_CTL_VIS_Obs_2023a_B.temp_c != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.temp_c *= -tau;
          APF_CTL_VIS_Obs_2023a_B.c_j = APF_CTL_VIS_Obs_2023a_B.lastc +
            APF_CTL_VIS_Obs_2023a_B.jA;
          for (APF_CTL_VIS_Obs_2023a_B.rowleft = APF_CTL_VIS_Obs_2023a_B.jA;
               APF_CTL_VIS_Obs_2023a_B.rowleft < APF_CTL_VIS_Obs_2023a_B.c_j;
               APF_CTL_VIS_Obs_2023a_B.rowleft++) {
            C[APF_CTL_VIS_Obs_2023a_B.rowleft - 1] +=
              work[APF_CTL_VIS_Obs_2023a_B.rowleft - APF_CTL_VIS_Obs_2023a_B.jA]
              * APF_CTL_VIS_Obs_2023a_B.temp_c;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.jA += 6;
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzlarf_g(int32_T b_m, int32_T n, int32_T iv0,
  real_T tau, real_T C[36], int32_T ic0, real_T work[6])
{
  if (tau != 0.0) {
    boolean_T exitg2;
    APF_CTL_VIS_Obs_2023a_B.lastv_i = b_m;
    APF_CTL_VIS_Obs_2023a_B.lastc_p = iv0 + b_m;
    while ((APF_CTL_VIS_Obs_2023a_B.lastv_i > 0) &&
           (C[APF_CTL_VIS_Obs_2023a_B.lastc_p - 2] == 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.lastv_i--;
      APF_CTL_VIS_Obs_2023a_B.lastc_p--;
    }

    APF_CTL_VIS_Obs_2023a_B.lastc_p = n;
    exitg2 = false;
    while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.lastc_p > 0)) {
      int32_T exitg1;
      APF_CTL_VIS_Obs_2023a_B.coltop = (APF_CTL_VIS_Obs_2023a_B.lastc_p - 1) * 6
        + ic0;
      APF_CTL_VIS_Obs_2023a_B.b_ia_m = APF_CTL_VIS_Obs_2023a_B.coltop;
      do {
        exitg1 = 0;
        if (APF_CTL_VIS_Obs_2023a_B.b_ia_m <= (APF_CTL_VIS_Obs_2023a_B.coltop +
             APF_CTL_VIS_Obs_2023a_B.lastv_i) - 1) {
          if (C[APF_CTL_VIS_Obs_2023a_B.b_ia_m - 1] != 0.0) {
            exitg1 = 1;
          } else {
            APF_CTL_VIS_Obs_2023a_B.b_ia_m++;
          }
        } else {
          APF_CTL_VIS_Obs_2023a_B.lastc_p--;
          exitg1 = 2;
        }
      } while (exitg1 == 0);

      if (exitg1 == 1) {
        exitg2 = true;
      }
    }

    APF_CTL_VIS_Obs_2023a_B.lastc_p--;
  } else {
    APF_CTL_VIS_Obs_2023a_B.lastv_i = 0;
    APF_CTL_VIS_Obs_2023a_B.lastc_p = -1;
  }

  if (APF_CTL_VIS_Obs_2023a_B.lastv_i > 0) {
    if (APF_CTL_VIS_Obs_2023a_B.lastc_p + 1 != 0) {
      if (APF_CTL_VIS_Obs_2023a_B.lastc_p >= 0) {
        memset(&work[0], 0, static_cast<uint32_T>
               (APF_CTL_VIS_Obs_2023a_B.lastc_p + 1) * sizeof(real_T));
      }

      APF_CTL_VIS_Obs_2023a_B.jA_o = 6 * APF_CTL_VIS_Obs_2023a_B.lastc_p + ic0;
      for (APF_CTL_VIS_Obs_2023a_B.coltop = ic0; APF_CTL_VIS_Obs_2023a_B.coltop <=
           APF_CTL_VIS_Obs_2023a_B.jA_o; APF_CTL_VIS_Obs_2023a_B.coltop += 6) {
        APF_CTL_VIS_Obs_2023a_B.c_p = 0.0;
        APF_CTL_VIS_Obs_2023a_B.d_o = (APF_CTL_VIS_Obs_2023a_B.coltop +
          APF_CTL_VIS_Obs_2023a_B.lastv_i) - 1;
        for (APF_CTL_VIS_Obs_2023a_B.b_ia_m = APF_CTL_VIS_Obs_2023a_B.coltop;
             APF_CTL_VIS_Obs_2023a_B.b_ia_m <= APF_CTL_VIS_Obs_2023a_B.d_o;
             APF_CTL_VIS_Obs_2023a_B.b_ia_m++) {
          APF_CTL_VIS_Obs_2023a_B.c_p += C[((iv0 +
            APF_CTL_VIS_Obs_2023a_B.b_ia_m) - APF_CTL_VIS_Obs_2023a_B.coltop) -
            1] * C[APF_CTL_VIS_Obs_2023a_B.b_ia_m - 1];
        }

        APF_CTL_VIS_Obs_2023a_B.b_ia_m = div_nde_s32_floor
          (APF_CTL_VIS_Obs_2023a_B.coltop - ic0, 6);
        work[APF_CTL_VIS_Obs_2023a_B.b_ia_m] += APF_CTL_VIS_Obs_2023a_B.c_p;
      }
    }

    if (!(-tau == 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.jA_o = ic0;
      for (APF_CTL_VIS_Obs_2023a_B.coltop = 0; APF_CTL_VIS_Obs_2023a_B.coltop <=
           APF_CTL_VIS_Obs_2023a_B.lastc_p; APF_CTL_VIS_Obs_2023a_B.coltop++) {
        APF_CTL_VIS_Obs_2023a_B.c_p = work[APF_CTL_VIS_Obs_2023a_B.coltop];
        if (APF_CTL_VIS_Obs_2023a_B.c_p != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.c_p *= -tau;
          APF_CTL_VIS_Obs_2023a_B.d_o = APF_CTL_VIS_Obs_2023a_B.lastv_i +
            APF_CTL_VIS_Obs_2023a_B.jA_o;
          for (APF_CTL_VIS_Obs_2023a_B.b_ia_m = APF_CTL_VIS_Obs_2023a_B.jA_o;
               APF_CTL_VIS_Obs_2023a_B.b_ia_m < APF_CTL_VIS_Obs_2023a_B.d_o;
               APF_CTL_VIS_Obs_2023a_B.b_ia_m++) {
            C[APF_CTL_VIS_Obs_2023a_B.b_ia_m - 1] += C[((iv0 +
              APF_CTL_VIS_Obs_2023a_B.b_ia_m) - APF_CTL_VIS_Obs_2023a_B.jA_o) -
              1] * APF_CTL_VIS_Obs_2023a_B.c_p;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.jA_o += 6;
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzgehrd(real_T a[36], int32_T ilo, int32_T ihi)
{
  if ((ihi - ilo) + 1 > 1) {
    for (APF_CTL_VIS_Obs_2023a_B.i_n = 0; APF_CTL_VIS_Obs_2023a_B.i_n < 6;
         APF_CTL_VIS_Obs_2023a_B.i_n++) {
      APF_CTL_VIS_Obs_2023a_B.work_ja[APF_CTL_VIS_Obs_2023a_B.i_n] = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_n = ilo; APF_CTL_VIS_Obs_2023a_B.i_n < ihi;
         APF_CTL_VIS_Obs_2023a_B.i_n++) {
      APF_CTL_VIS_Obs_2023a_B.im1n_tmp = (APF_CTL_VIS_Obs_2023a_B.i_n - 1) * 6;
      APF_CTL_VIS_Obs_2023a_B.in = APF_CTL_VIS_Obs_2023a_B.i_n * 6 + 1;
      APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.im1n_tmp
        + APF_CTL_VIS_Obs_2023a_B.i_n;
      APF_CTL_VIS_Obs_2023a_B.alpha1 = a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp];
      if (APF_CTL_VIS_Obs_2023a_B.i_n + 2 <= 6) {
        APF_CTL_VIS_Obs_2023a_B.i_j = APF_CTL_VIS_Obs_2023a_B.i_n + 2;
      } else {
        APF_CTL_VIS_Obs_2023a_B.i_j = 6;
      }

      APF_CTL_VIS_Obs_2023a_B.tau_tmp_a = ihi - APF_CTL_VIS_Obs_2023a_B.i_n;
      APF_CTL_VIS_Obs_2023a_B.tau_n = APF_CTL_VIS_Obs_2023a_xzlarfg
        (APF_CTL_VIS_Obs_2023a_B.tau_tmp_a, &APF_CTL_VIS_Obs_2023a_B.alpha1, a,
         APF_CTL_VIS_Obs_2023a_B.im1n_tmp + APF_CTL_VIS_Obs_2023a_B.i_j);
      a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp] = 1.0;
      APF_CTL_VIS_Obs_2023a_xzlarf(ihi, APF_CTL_VIS_Obs_2023a_B.tau_tmp_a,
        APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp + 1,
        APF_CTL_VIS_Obs_2023a_B.tau_n, a, APF_CTL_VIS_Obs_2023a_B.in,
        APF_CTL_VIS_Obs_2023a_B.work_ja);
      APF_CTL_VIS_Obs_2023a_xzlarf_g(APF_CTL_VIS_Obs_2023a_B.tau_tmp_a, 6 -
        APF_CTL_VIS_Obs_2023a_B.i_n, APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp + 1,
        APF_CTL_VIS_Obs_2023a_B.tau_n, a, APF_CTL_VIS_Obs_2023a_B.i_n +
        APF_CTL_VIS_Obs_2023a_B.in, APF_CTL_VIS_Obs_2023a_B.work_ja);
      a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp] = APF_CTL_VIS_Obs_2023a_B.alpha1;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_lw(int32_T n, const real_T x[3])
{
  real_T y;
  y = 0.0;
  if (n >= 1) {
    if (n == 1) {
      y = fabs(x[1]);
    } else {
      APF_CTL_VIS_Obs_2023a_B.scale_e = 3.3121686421112381E-170;
      APF_CTL_VIS_Obs_2023a_B.absxk_mv = fabs(x[1]);
      if (APF_CTL_VIS_Obs_2023a_B.absxk_mv > 3.3121686421112381E-170) {
        y = 1.0;
        APF_CTL_VIS_Obs_2023a_B.scale_e = APF_CTL_VIS_Obs_2023a_B.absxk_mv;
      } else {
        APF_CTL_VIS_Obs_2023a_B.t_m = APF_CTL_VIS_Obs_2023a_B.absxk_mv /
          3.3121686421112381E-170;
        y = APF_CTL_VIS_Obs_2023a_B.t_m * APF_CTL_VIS_Obs_2023a_B.t_m;
      }

      APF_CTL_VIS_Obs_2023a_B.absxk_mv = fabs(x[2]);
      if (APF_CTL_VIS_Obs_2023a_B.absxk_mv > APF_CTL_VIS_Obs_2023a_B.scale_e) {
        APF_CTL_VIS_Obs_2023a_B.t_m = APF_CTL_VIS_Obs_2023a_B.scale_e /
          APF_CTL_VIS_Obs_2023a_B.absxk_mv;
        y = y * APF_CTL_VIS_Obs_2023a_B.t_m * APF_CTL_VIS_Obs_2023a_B.t_m + 1.0;
        APF_CTL_VIS_Obs_2023a_B.scale_e = APF_CTL_VIS_Obs_2023a_B.absxk_mv;
      } else {
        APF_CTL_VIS_Obs_2023a_B.t_m = APF_CTL_VIS_Obs_2023a_B.absxk_mv /
          APF_CTL_VIS_Obs_2023a_B.scale_e;
        y += APF_CTL_VIS_Obs_2023a_B.t_m * APF_CTL_VIS_Obs_2023a_B.t_m;
      }

      y = APF_CTL_VIS_Obs_2023a_B.scale_e * sqrt(y);
    }
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_xzlarfg_l(int32_T n, real_T *alpha1, real_T
  x[3])
{
  real_T tau;
  tau = 0.0;
  if (n > 0) {
    APF_CTL_VIS_Obs_2023a_B.xnorm = APF_CTL_VIS_Obs_2023a_xnrm2_lw(n - 1, x);
    if (APF_CTL_VIS_Obs_2023a_B.xnorm != 0.0) {
      APF_CTL_VIS_Obs_2023a_B.xnorm = APF_CTL_VIS_Obs_2_rt_hypotd_snf(*alpha1,
        APF_CTL_VIS_Obs_2023a_B.xnorm);
      if (*alpha1 >= 0.0) {
        APF_CTL_VIS_Obs_2023a_B.xnorm = -APF_CTL_VIS_Obs_2023a_B.xnorm;
      }

      if (fabs(APF_CTL_VIS_Obs_2023a_B.xnorm) < 1.0020841800044864E-292) {
        APF_CTL_VIS_Obs_2023a_B.knt = 0;
        do {
          APF_CTL_VIS_Obs_2023a_B.knt++;
          for (APF_CTL_VIS_Obs_2023a_B.c_k_o = 2; APF_CTL_VIS_Obs_2023a_B.c_k_o <=
               n; APF_CTL_VIS_Obs_2023a_B.c_k_o++) {
            x[APF_CTL_VIS_Obs_2023a_B.c_k_o - 1] *= 9.9792015476736E+291;
          }

          APF_CTL_VIS_Obs_2023a_B.xnorm *= 9.9792015476736E+291;
          *alpha1 *= 9.9792015476736E+291;
        } while ((fabs(APF_CTL_VIS_Obs_2023a_B.xnorm) < 1.0020841800044864E-292)
                 && (APF_CTL_VIS_Obs_2023a_B.knt < 20));

        APF_CTL_VIS_Obs_2023a_B.xnorm = APF_CTL_VIS_Obs_2_rt_hypotd_snf(*alpha1,
          APF_CTL_VIS_Obs_2023a_xnrm2_lw(n - 1, x));
        if (*alpha1 >= 0.0) {
          APF_CTL_VIS_Obs_2023a_B.xnorm = -APF_CTL_VIS_Obs_2023a_B.xnorm;
        }

        tau = (APF_CTL_VIS_Obs_2023a_B.xnorm - *alpha1) /
          APF_CTL_VIS_Obs_2023a_B.xnorm;
        APF_CTL_VIS_Obs_2023a_B.a_j = 1.0 / (*alpha1 -
          APF_CTL_VIS_Obs_2023a_B.xnorm);
        for (APF_CTL_VIS_Obs_2023a_B.c_k_o = 2; APF_CTL_VIS_Obs_2023a_B.c_k_o <=
             n; APF_CTL_VIS_Obs_2023a_B.c_k_o++) {
          x[APF_CTL_VIS_Obs_2023a_B.c_k_o - 1] *= APF_CTL_VIS_Obs_2023a_B.a_j;
        }

        for (APF_CTL_VIS_Obs_2023a_B.c_k_o = 0; APF_CTL_VIS_Obs_2023a_B.c_k_o <
             APF_CTL_VIS_Obs_2023a_B.knt; APF_CTL_VIS_Obs_2023a_B.c_k_o++) {
          APF_CTL_VIS_Obs_2023a_B.xnorm *= 1.0020841800044864E-292;
        }

        *alpha1 = APF_CTL_VIS_Obs_2023a_B.xnorm;
      } else {
        tau = (APF_CTL_VIS_Obs_2023a_B.xnorm - *alpha1) /
          APF_CTL_VIS_Obs_2023a_B.xnorm;
        APF_CTL_VIS_Obs_2023a_B.a_j = 1.0 / (*alpha1 -
          APF_CTL_VIS_Obs_2023a_B.xnorm);
        for (APF_CTL_VIS_Obs_2023a_B.knt = 2; APF_CTL_VIS_Obs_2023a_B.knt <= n;
             APF_CTL_VIS_Obs_2023a_B.knt++) {
          x[APF_CTL_VIS_Obs_2023a_B.knt - 1] *= APF_CTL_VIS_Obs_2023a_B.a_j;
        }

        *alpha1 = APF_CTL_VIS_Obs_2023a_B.xnorm;
      }
    }
  }

  return tau;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlanv2(real_T *a, real_T *b, real_T *c,
  real_T *d, real_T *rt1r, real_T *rt1i, real_T *rt2r, real_T *rt2i, real_T *cs,
  real_T *sn)
{
  if (*c == 0.0) {
    *cs = 1.0;
    *sn = 0.0;
  } else if (*b == 0.0) {
    *cs = 0.0;
    *sn = 1.0;
    APF_CTL_VIS_Obs_2023a_B.temp_e = *d;
    *d = *a;
    *a = APF_CTL_VIS_Obs_2023a_B.temp_e;
    *b = -*c;
    *c = 0.0;
  } else {
    APF_CTL_VIS_Obs_2023a_B.temp_e = *a - *d;
    if ((APF_CTL_VIS_Obs_2023a_B.temp_e == 0.0) && ((*b < 0.0) != (*c < 0.0))) {
      *cs = 1.0;
      *sn = 0.0;
    } else {
      APF_CTL_VIS_Obs_2023a_B.p = 0.5 * APF_CTL_VIS_Obs_2023a_B.temp_e;
      APF_CTL_VIS_Obs_2023a_B.scale_c = fabs(*b);
      APF_CTL_VIS_Obs_2023a_B.bcmis = fabs(*c);
      APF_CTL_VIS_Obs_2023a_B.b3 = rtIsNaN(APF_CTL_VIS_Obs_2023a_B.bcmis);
      if ((APF_CTL_VIS_Obs_2023a_B.scale_c >= APF_CTL_VIS_Obs_2023a_B.bcmis) ||
          APF_CTL_VIS_Obs_2023a_B.b3) {
        APF_CTL_VIS_Obs_2023a_B.bcmax = APF_CTL_VIS_Obs_2023a_B.scale_c;
      } else {
        APF_CTL_VIS_Obs_2023a_B.bcmax = APF_CTL_VIS_Obs_2023a_B.bcmis;
      }

      if ((APF_CTL_VIS_Obs_2023a_B.scale_c <= APF_CTL_VIS_Obs_2023a_B.bcmis) ||
          APF_CTL_VIS_Obs_2023a_B.b3) {
        APF_CTL_VIS_Obs_2023a_B.bcmis = APF_CTL_VIS_Obs_2023a_B.scale_c;
      }

      if (!(*b < 0.0)) {
        APF_CTL_VIS_Obs_2023a_B.count = 1;
      } else {
        APF_CTL_VIS_Obs_2023a_B.count = -1;
      }

      if (!(*c < 0.0)) {
        APF_CTL_VIS_Obs_2023a_B.i7 = 1;
      } else {
        APF_CTL_VIS_Obs_2023a_B.i7 = -1;
      }

      APF_CTL_VIS_Obs_2023a_B.bcmis = APF_CTL_VIS_Obs_2023a_B.bcmis *
        static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.count) * static_cast<real_T>
        (APF_CTL_VIS_Obs_2023a_B.i7);
      APF_CTL_VIS_Obs_2023a_B.scale_c = fabs(APF_CTL_VIS_Obs_2023a_B.p);
      if ((!(APF_CTL_VIS_Obs_2023a_B.scale_c >= APF_CTL_VIS_Obs_2023a_B.bcmax)) &&
          (!rtIsNaN(APF_CTL_VIS_Obs_2023a_B.bcmax))) {
        APF_CTL_VIS_Obs_2023a_B.scale_c = APF_CTL_VIS_Obs_2023a_B.bcmax;
      }

      APF_CTL_VIS_Obs_2023a_B.z = APF_CTL_VIS_Obs_2023a_B.p /
        APF_CTL_VIS_Obs_2023a_B.scale_c * APF_CTL_VIS_Obs_2023a_B.p +
        APF_CTL_VIS_Obs_2023a_B.bcmax / APF_CTL_VIS_Obs_2023a_B.scale_c *
        APF_CTL_VIS_Obs_2023a_B.bcmis;
      if (APF_CTL_VIS_Obs_2023a_B.z >= 8.8817841970012523E-16) {
        if (!(APF_CTL_VIS_Obs_2023a_B.p < 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.temp_e = sqrt(APF_CTL_VIS_Obs_2023a_B.scale_c)
            * sqrt(APF_CTL_VIS_Obs_2023a_B.z);
        } else {
          APF_CTL_VIS_Obs_2023a_B.temp_e = -(sqrt
            (APF_CTL_VIS_Obs_2023a_B.scale_c) * sqrt(APF_CTL_VIS_Obs_2023a_B.z));
        }

        APF_CTL_VIS_Obs_2023a_B.z = APF_CTL_VIS_Obs_2023a_B.p +
          APF_CTL_VIS_Obs_2023a_B.temp_e;
        *a = *d + APF_CTL_VIS_Obs_2023a_B.z;
        *d -= APF_CTL_VIS_Obs_2023a_B.bcmax / APF_CTL_VIS_Obs_2023a_B.z *
          APF_CTL_VIS_Obs_2023a_B.bcmis;
        APF_CTL_VIS_Obs_2023a_B.bcmax = APF_CTL_VIS_Obs_2_rt_hypotd_snf(*c,
          APF_CTL_VIS_Obs_2023a_B.z);
        *cs = APF_CTL_VIS_Obs_2023a_B.z / APF_CTL_VIS_Obs_2023a_B.bcmax;
        *sn = *c / APF_CTL_VIS_Obs_2023a_B.bcmax;
        *b -= *c;
        *c = 0.0;
      } else {
        APF_CTL_VIS_Obs_2023a_B.p = *b + *c;
        APF_CTL_VIS_Obs_2023a_B.bcmax = fabs(APF_CTL_VIS_Obs_2023a_B.temp_e);
        APF_CTL_VIS_Obs_2023a_B.scale_c = fabs(APF_CTL_VIS_Obs_2023a_B.p);
        if ((APF_CTL_VIS_Obs_2023a_B.bcmax >= APF_CTL_VIS_Obs_2023a_B.scale_c) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.scale_c)) {
          APF_CTL_VIS_Obs_2023a_B.scale_c = APF_CTL_VIS_Obs_2023a_B.bcmax;
        }

        APF_CTL_VIS_Obs_2023a_B.count = 0;
        while ((APF_CTL_VIS_Obs_2023a_B.scale_c >= 7.4428285367870146E+137) &&
               (APF_CTL_VIS_Obs_2023a_B.count <= 20)) {
          APF_CTL_VIS_Obs_2023a_B.p *= 1.3435752215134178E-138;
          APF_CTL_VIS_Obs_2023a_B.temp_e *= 1.3435752215134178E-138;
          APF_CTL_VIS_Obs_2023a_B.bcmax = fabs(APF_CTL_VIS_Obs_2023a_B.temp_e);
          APF_CTL_VIS_Obs_2023a_B.scale_c = fabs(APF_CTL_VIS_Obs_2023a_B.p);
          if ((APF_CTL_VIS_Obs_2023a_B.bcmax >= APF_CTL_VIS_Obs_2023a_B.scale_c)
              || rtIsNaN(APF_CTL_VIS_Obs_2023a_B.scale_c)) {
            APF_CTL_VIS_Obs_2023a_B.scale_c = APF_CTL_VIS_Obs_2023a_B.bcmax;
          }

          APF_CTL_VIS_Obs_2023a_B.count++;
        }

        while ((APF_CTL_VIS_Obs_2023a_B.scale_c <= 1.3435752215134178E-138) &&
               (APF_CTL_VIS_Obs_2023a_B.count <= 20)) {
          APF_CTL_VIS_Obs_2023a_B.p *= 7.4428285367870146E+137;
          APF_CTL_VIS_Obs_2023a_B.temp_e *= 7.4428285367870146E+137;
          APF_CTL_VIS_Obs_2023a_B.bcmax = fabs(APF_CTL_VIS_Obs_2023a_B.temp_e);
          APF_CTL_VIS_Obs_2023a_B.scale_c = fabs(APF_CTL_VIS_Obs_2023a_B.p);
          if ((APF_CTL_VIS_Obs_2023a_B.bcmax >= APF_CTL_VIS_Obs_2023a_B.scale_c)
              || rtIsNaN(APF_CTL_VIS_Obs_2023a_B.scale_c)) {
            APF_CTL_VIS_Obs_2023a_B.scale_c = APF_CTL_VIS_Obs_2023a_B.bcmax;
          }

          APF_CTL_VIS_Obs_2023a_B.count++;
        }

        APF_CTL_VIS_Obs_2023a_B.bcmax = APF_CTL_VIS_Obs_2_rt_hypotd_snf
          (APF_CTL_VIS_Obs_2023a_B.p, APF_CTL_VIS_Obs_2023a_B.temp_e);
        *cs = sqrt((fabs(APF_CTL_VIS_Obs_2023a_B.p) /
                    APF_CTL_VIS_Obs_2023a_B.bcmax + 1.0) * 0.5);
        if (!(APF_CTL_VIS_Obs_2023a_B.p < 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.count = 1;
        } else {
          APF_CTL_VIS_Obs_2023a_B.count = -1;
        }

        *sn = -(0.5 * APF_CTL_VIS_Obs_2023a_B.temp_e /
                (APF_CTL_VIS_Obs_2023a_B.bcmax * *cs)) * static_cast<real_T>
          (APF_CTL_VIS_Obs_2023a_B.count);
        APF_CTL_VIS_Obs_2023a_B.temp_e = *a * *cs + *b * *sn;
        APF_CTL_VIS_Obs_2023a_B.p = -*a * *sn + *b * *cs;
        APF_CTL_VIS_Obs_2023a_B.bcmax = *c * *cs + *d * *sn;
        APF_CTL_VIS_Obs_2023a_B.scale_c = -*c * *sn + *d * *cs;
        *b = APF_CTL_VIS_Obs_2023a_B.p * *cs + APF_CTL_VIS_Obs_2023a_B.scale_c *
          *sn;
        *c = -APF_CTL_VIS_Obs_2023a_B.temp_e * *sn +
          APF_CTL_VIS_Obs_2023a_B.bcmax * *cs;
        APF_CTL_VIS_Obs_2023a_B.temp_e = ((APF_CTL_VIS_Obs_2023a_B.temp_e * *cs
          + APF_CTL_VIS_Obs_2023a_B.bcmax * *sn) + (-APF_CTL_VIS_Obs_2023a_B.p *
          *sn + APF_CTL_VIS_Obs_2023a_B.scale_c * *cs)) * 0.5;
        *a = APF_CTL_VIS_Obs_2023a_B.temp_e;
        *d = APF_CTL_VIS_Obs_2023a_B.temp_e;
        if (*c != 0.0) {
          if (*b != 0.0) {
            if ((*b < 0.0) == (*c < 0.0)) {
              APF_CTL_VIS_Obs_2023a_B.bcmis = sqrt(fabs(*b));
              APF_CTL_VIS_Obs_2023a_B.scale_c = sqrt(fabs(*c));
              if (!(*c < 0.0)) {
                APF_CTL_VIS_Obs_2023a_B.p = APF_CTL_VIS_Obs_2023a_B.bcmis *
                  APF_CTL_VIS_Obs_2023a_B.scale_c;
              } else {
                APF_CTL_VIS_Obs_2023a_B.p = -(APF_CTL_VIS_Obs_2023a_B.bcmis *
                  APF_CTL_VIS_Obs_2023a_B.scale_c);
              }

              APF_CTL_VIS_Obs_2023a_B.bcmax = 1.0 / sqrt(fabs(*b + *c));
              *a = APF_CTL_VIS_Obs_2023a_B.temp_e + APF_CTL_VIS_Obs_2023a_B.p;
              *d = APF_CTL_VIS_Obs_2023a_B.temp_e - APF_CTL_VIS_Obs_2023a_B.p;
              *b -= *c;
              *c = 0.0;
              APF_CTL_VIS_Obs_2023a_B.p = APF_CTL_VIS_Obs_2023a_B.bcmis *
                APF_CTL_VIS_Obs_2023a_B.bcmax;
              APF_CTL_VIS_Obs_2023a_B.bcmax *= APF_CTL_VIS_Obs_2023a_B.scale_c;
              APF_CTL_VIS_Obs_2023a_B.temp_e = *cs * APF_CTL_VIS_Obs_2023a_B.p -
                *sn * APF_CTL_VIS_Obs_2023a_B.bcmax;
              *sn = *cs * APF_CTL_VIS_Obs_2023a_B.bcmax + *sn *
                APF_CTL_VIS_Obs_2023a_B.p;
              *cs = APF_CTL_VIS_Obs_2023a_B.temp_e;
            }
          } else {
            *b = -*c;
            *c = 0.0;
            APF_CTL_VIS_Obs_2023a_B.temp_e = *cs;
            *cs = -*sn;
            *sn = APF_CTL_VIS_Obs_2023a_B.temp_e;
          }
        }
      }
    }
  }

  *rt1r = *a;
  *rt2r = *d;
  if (*c == 0.0) {
    *rt1i = 0.0;
    *rt2i = 0.0;
  } else {
    *rt1i = sqrt(fabs(*b)) * sqrt(fabs(*c));
    *rt2i = -*rt1i;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlahqr(int32_T ilo, int32_T ihi, real_T h[36],
  int32_T *info, real_T *z, real_T wr[6], real_T wi[6])
{
  boolean_T exitg1;
  boolean_T exitg2;
  boolean_T exitg3;
  *z = 1.0;
  *info = 0;
  APF_CTL_VIS_Obs_2023a_B.l = static_cast<uint8_T>(ilo - 1);
  for (APF_CTL_VIS_Obs_2023a_B.b_i_i = 0; APF_CTL_VIS_Obs_2023a_B.b_i_i <
       APF_CTL_VIS_Obs_2023a_B.l; APF_CTL_VIS_Obs_2023a_B.b_i_i++) {
    wr[APF_CTL_VIS_Obs_2023a_B.b_i_i] = h[6 * APF_CTL_VIS_Obs_2023a_B.b_i_i +
      APF_CTL_VIS_Obs_2023a_B.b_i_i];
    wi[APF_CTL_VIS_Obs_2023a_B.b_i_i] = 0.0;
  }

  for (APF_CTL_VIS_Obs_2023a_B.b_i_i = ihi + 1; APF_CTL_VIS_Obs_2023a_B.b_i_i <
       7; APF_CTL_VIS_Obs_2023a_B.b_i_i++) {
    wr[APF_CTL_VIS_Obs_2023a_B.b_i_i - 1] = h[((APF_CTL_VIS_Obs_2023a_B.b_i_i -
      1) * 6 + APF_CTL_VIS_Obs_2023a_B.b_i_i) - 1];
    wi[APF_CTL_VIS_Obs_2023a_B.b_i_i - 1] = 0.0;
  }

  if (ilo == ihi) {
    wr[ilo - 1] = h[((ilo - 1) * 6 + ilo) - 1];
    wi[ilo - 1] = 0.0;
  } else {
    for (APF_CTL_VIS_Obs_2023a_B.b_i_i = ilo; APF_CTL_VIS_Obs_2023a_B.b_i_i <=
         ihi - 3; APF_CTL_VIS_Obs_2023a_B.b_i_i++) {
      APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.b_i_i - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.b_i_i;
      h[APF_CTL_VIS_Obs_2023a_B.d_k_e + 1] = 0.0;
      h[APF_CTL_VIS_Obs_2023a_B.d_k_e + 2] = 0.0;
    }

    if (ilo <= ihi - 2) {
      h[(ihi + 6 * (ihi - 3)) - 1] = 0.0;
    }

    APF_CTL_VIS_Obs_2023a_B.smlnum_m = static_cast<real_T>((ihi - ilo) + 1) /
      2.2204460492503131E-16 * 2.2250738585072014E-308;
    APF_CTL_VIS_Obs_2023a_B.kdefl = 0;
    APF_CTL_VIS_Obs_2023a_B.b_i_i = ihi - 1;
    exitg1 = false;
    while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.b_i_i + 1 >= ilo)) {
      APF_CTL_VIS_Obs_2023a_B.l = ilo;
      APF_CTL_VIS_Obs_2023a_B.converged = false;
      APF_CTL_VIS_Obs_2023a_B.its = 0;
      exitg2 = false;
      while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.its < 301)) {
        APF_CTL_VIS_Obs_2023a_B.k_o = APF_CTL_VIS_Obs_2023a_B.b_i_i;
        exitg3 = false;
        while ((!exitg3) && (APF_CTL_VIS_Obs_2023a_B.k_o + 1 >
                             APF_CTL_VIS_Obs_2023a_B.l)) {
          APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.k_o - 1) * 6
            + APF_CTL_VIS_Obs_2023a_B.k_o;
          APF_CTL_VIS_Obs_2023a_B.h11_b = fabs(h[APF_CTL_VIS_Obs_2023a_B.d_k_e]);
          if (APF_CTL_VIS_Obs_2023a_B.h11_b <= APF_CTL_VIS_Obs_2023a_B.smlnum_m)
          {
            exitg3 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.b_m = 6 * APF_CTL_VIS_Obs_2023a_B.k_o +
              APF_CTL_VIS_Obs_2023a_B.k_o;
            APF_CTL_VIS_Obs_2023a_B.tr_n = h[APF_CTL_VIS_Obs_2023a_B.b_m];
            APF_CTL_VIS_Obs_2023a_B.s_pc = fabs(APF_CTL_VIS_Obs_2023a_B.tr_n);
            APF_CTL_VIS_Obs_2023a_B.aa_k = h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 1];
            APF_CTL_VIS_Obs_2023a_B.tst_a = fabs(APF_CTL_VIS_Obs_2023a_B.aa_k) +
              APF_CTL_VIS_Obs_2023a_B.s_pc;
            if (APF_CTL_VIS_Obs_2023a_B.tst_a == 0.0) {
              if (APF_CTL_VIS_Obs_2023a_B.k_o - 1 >= ilo) {
                APF_CTL_VIS_Obs_2023a_B.tst_a = fabs(h
                  [((APF_CTL_VIS_Obs_2023a_B.k_o - 2) * 6 +
                    APF_CTL_VIS_Obs_2023a_B.k_o) - 1]);
              }

              if (APF_CTL_VIS_Obs_2023a_B.k_o + 2 <= ihi) {
                APF_CTL_VIS_Obs_2023a_B.tst_a += fabs
                  (h[APF_CTL_VIS_Obs_2023a_B.b_m + 1]);
              }
            }

            if (APF_CTL_VIS_Obs_2023a_B.h11_b <= 2.2204460492503131E-16 *
                APF_CTL_VIS_Obs_2023a_B.tst_a) {
              APF_CTL_VIS_Obs_2023a_B.tst_a = fabs(APF_CTL_VIS_Obs_2023a_B.aa_k
                - APF_CTL_VIS_Obs_2023a_B.tr_n);
              APF_CTL_VIS_Obs_2023a_B.b_p = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.tst_a);
              if ((APF_CTL_VIS_Obs_2023a_B.s_pc >= APF_CTL_VIS_Obs_2023a_B.tst_a)
                  || APF_CTL_VIS_Obs_2023a_B.b_p) {
                APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.s_pc;
              } else {
                APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.tst_a;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.s_pc <= APF_CTL_VIS_Obs_2023a_B.tst_a)
                  || APF_CTL_VIS_Obs_2023a_B.b_p) {
                APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.s_pc;
              }

              APF_CTL_VIS_Obs_2023a_B.s_pc = APF_CTL_VIS_Obs_2023a_B.aa_k +
                APF_CTL_VIS_Obs_2023a_B.tst_a;
              APF_CTL_VIS_Obs_2023a_B.tr_n = fabs(h[APF_CTL_VIS_Obs_2023a_B.b_m
                - 1]);
              APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.aa_k /
                APF_CTL_VIS_Obs_2023a_B.s_pc * APF_CTL_VIS_Obs_2023a_B.tst_a *
                2.2204460492503131E-16;
              APF_CTL_VIS_Obs_2023a_B.b_p = rtIsNaN(APF_CTL_VIS_Obs_2023a_B.tr_n);
              if ((APF_CTL_VIS_Obs_2023a_B.h11_b <= APF_CTL_VIS_Obs_2023a_B.tr_n)
                  || APF_CTL_VIS_Obs_2023a_B.b_p) {
                APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.h11_b;
              } else {
                APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.tr_n;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.h11_b >= APF_CTL_VIS_Obs_2023a_B.tr_n)
                  || APF_CTL_VIS_Obs_2023a_B.b_p) {
                APF_CTL_VIS_Obs_2023a_B.tr_n = APF_CTL_VIS_Obs_2023a_B.h11_b;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.smlnum_m >=
                   APF_CTL_VIS_Obs_2023a_B.aa_k) || rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.aa_k)) {
                APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.smlnum_m;
              }

              if (APF_CTL_VIS_Obs_2023a_B.tr_n / APF_CTL_VIS_Obs_2023a_B.s_pc *
                  APF_CTL_VIS_Obs_2023a_B.tst_a <= APF_CTL_VIS_Obs_2023a_B.aa_k)
              {
                exitg3 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_B.k_o--;
              }
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_o--;
            }
          }
        }

        APF_CTL_VIS_Obs_2023a_B.l = APF_CTL_VIS_Obs_2023a_B.k_o + 1;
        if (APF_CTL_VIS_Obs_2023a_B.k_o + 1 > ilo) {
          h[APF_CTL_VIS_Obs_2023a_B.k_o + 6 * (APF_CTL_VIS_Obs_2023a_B.k_o - 1)]
            = 0.0;
        }

        if (APF_CTL_VIS_Obs_2023a_B.k_o + 1 >= APF_CTL_VIS_Obs_2023a_B.b_i_i) {
          APF_CTL_VIS_Obs_2023a_B.converged = true;
          exitg2 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.kdefl++;
          if (APF_CTL_VIS_Obs_2023a_B.kdefl - APF_CTL_VIS_Obs_2023a_B.kdefl / 20
              * 20 == 0) {
            APF_CTL_VIS_Obs_2023a_B.s_pc = fabs(h
              [((APF_CTL_VIS_Obs_2023a_B.b_i_i - 2) * 6 +
                APF_CTL_VIS_Obs_2023a_B.b_i_i) - 1]) + fabs(h
              [(APF_CTL_VIS_Obs_2023a_B.b_i_i - 1) * 6 +
              APF_CTL_VIS_Obs_2023a_B.b_i_i]);
            APF_CTL_VIS_Obs_2023a_B.h11_b = h[6 * APF_CTL_VIS_Obs_2023a_B.b_i_i
              + APF_CTL_VIS_Obs_2023a_B.b_i_i] + 0.75 *
              APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.h12_c = -0.4375 *
              APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.h11_b;
          } else if (APF_CTL_VIS_Obs_2023a_B.kdefl -
                     APF_CTL_VIS_Obs_2023a_B.kdefl / 10 * 10 == 0) {
            APF_CTL_VIS_Obs_2023a_B.s_tmp_j = 6 * APF_CTL_VIS_Obs_2023a_B.k_o +
              APF_CTL_VIS_Obs_2023a_B.k_o;
            APF_CTL_VIS_Obs_2023a_B.s_pc = fabs(h[((APF_CTL_VIS_Obs_2023a_B.k_o
              + 1) * 6 + APF_CTL_VIS_Obs_2023a_B.k_o) + 2]) + fabs
              (h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j + 1]);
            APF_CTL_VIS_Obs_2023a_B.h11_b = 0.75 * APF_CTL_VIS_Obs_2023a_B.s_pc
              + h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j];
            APF_CTL_VIS_Obs_2023a_B.h12_c = -0.4375 *
              APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.h11_b;
          } else {
            APF_CTL_VIS_Obs_2023a_B.b_m = (APF_CTL_VIS_Obs_2023a_B.b_i_i - 1) *
              6 + APF_CTL_VIS_Obs_2023a_B.b_i_i;
            APF_CTL_VIS_Obs_2023a_B.h11_b = h[APF_CTL_VIS_Obs_2023a_B.b_m - 1];
            APF_CTL_VIS_Obs_2023a_B.tst_a = h[APF_CTL_VIS_Obs_2023a_B.b_m];
            APF_CTL_VIS_Obs_2023a_B.b_m = 6 * APF_CTL_VIS_Obs_2023a_B.b_i_i +
              APF_CTL_VIS_Obs_2023a_B.b_i_i;
            APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.b_m - 1];
            APF_CTL_VIS_Obs_2023a_B.aa_k = h[APF_CTL_VIS_Obs_2023a_B.b_m];
          }

          APF_CTL_VIS_Obs_2023a_B.s_pc = ((fabs(APF_CTL_VIS_Obs_2023a_B.h11_b) +
            fabs(APF_CTL_VIS_Obs_2023a_B.h12_c)) + fabs
            (APF_CTL_VIS_Obs_2023a_B.tst_a)) + fabs(APF_CTL_VIS_Obs_2023a_B.aa_k);
          if (APF_CTL_VIS_Obs_2023a_B.s_pc == 0.0) {
            APF_CTL_VIS_Obs_2023a_B.h11_b = 0.0;
            APF_CTL_VIS_Obs_2023a_B.aa_k = 0.0;
            APF_CTL_VIS_Obs_2023a_B.tr_n = 0.0;
            APF_CTL_VIS_Obs_2023a_B.tst_a = 0.0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.h11_b /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.aa_k /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.tr_n = (APF_CTL_VIS_Obs_2023a_B.h11_b +
              APF_CTL_VIS_Obs_2023a_B.aa_k) / 2.0;
            APF_CTL_VIS_Obs_2023a_B.h11_b = (APF_CTL_VIS_Obs_2023a_B.h11_b -
              APF_CTL_VIS_Obs_2023a_B.tr_n) * (APF_CTL_VIS_Obs_2023a_B.aa_k -
              APF_CTL_VIS_Obs_2023a_B.tr_n) - APF_CTL_VIS_Obs_2023a_B.h12_c /
              APF_CTL_VIS_Obs_2023a_B.s_pc * (APF_CTL_VIS_Obs_2023a_B.tst_a /
              APF_CTL_VIS_Obs_2023a_B.s_pc);
            APF_CTL_VIS_Obs_2023a_B.tst_a = sqrt(fabs
              (APF_CTL_VIS_Obs_2023a_B.h11_b));
            if (APF_CTL_VIS_Obs_2023a_B.h11_b >= 0.0) {
              APF_CTL_VIS_Obs_2023a_B.h11_b = APF_CTL_VIS_Obs_2023a_B.tr_n *
                APF_CTL_VIS_Obs_2023a_B.s_pc;
              APF_CTL_VIS_Obs_2023a_B.tr_n = APF_CTL_VIS_Obs_2023a_B.h11_b;
              APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.tst_a *
                APF_CTL_VIS_Obs_2023a_B.s_pc;
              APF_CTL_VIS_Obs_2023a_B.tst_a = -APF_CTL_VIS_Obs_2023a_B.aa_k;
            } else {
              APF_CTL_VIS_Obs_2023a_B.h11_b = APF_CTL_VIS_Obs_2023a_B.tr_n +
                APF_CTL_VIS_Obs_2023a_B.tst_a;
              APF_CTL_VIS_Obs_2023a_B.tr_n -= APF_CTL_VIS_Obs_2023a_B.tst_a;
              if (fabs(APF_CTL_VIS_Obs_2023a_B.h11_b -
                       APF_CTL_VIS_Obs_2023a_B.aa_k) <= fabs
                  (APF_CTL_VIS_Obs_2023a_B.tr_n - APF_CTL_VIS_Obs_2023a_B.aa_k))
              {
                APF_CTL_VIS_Obs_2023a_B.h11_b *= APF_CTL_VIS_Obs_2023a_B.s_pc;
                APF_CTL_VIS_Obs_2023a_B.tr_n = APF_CTL_VIS_Obs_2023a_B.h11_b;
              } else {
                APF_CTL_VIS_Obs_2023a_B.tr_n *= APF_CTL_VIS_Obs_2023a_B.s_pc;
                APF_CTL_VIS_Obs_2023a_B.h11_b = APF_CTL_VIS_Obs_2023a_B.tr_n;
              }

              APF_CTL_VIS_Obs_2023a_B.aa_k = 0.0;
              APF_CTL_VIS_Obs_2023a_B.tst_a = 0.0;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.b_m = APF_CTL_VIS_Obs_2023a_B.b_i_i - 1;
          exitg3 = false;
          while ((!exitg3) && (APF_CTL_VIS_Obs_2023a_B.b_m >=
                               APF_CTL_VIS_Obs_2023a_B.k_o + 1)) {
            APF_CTL_VIS_Obs_2023a_B.s_tmp_j = (APF_CTL_VIS_Obs_2023a_B.b_m - 1) *
              6 + APF_CTL_VIS_Obs_2023a_B.b_m;
            APF_CTL_VIS_Obs_2023a_B.h21s_i = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j];
            APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j -
              1];
            APF_CTL_VIS_Obs_2023a_B.s_tmp_m = APF_CTL_VIS_Obs_2023a_B.h12_c -
              APF_CTL_VIS_Obs_2023a_B.tr_n;
            APF_CTL_VIS_Obs_2023a_B.s_pc = (fabs(APF_CTL_VIS_Obs_2023a_B.s_tmp_m)
              + fabs(APF_CTL_VIS_Obs_2023a_B.tst_a)) + fabs
              (APF_CTL_VIS_Obs_2023a_B.h21s_i);
            APF_CTL_VIS_Obs_2023a_B.h21s_i /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.s_tmp_j = 6 * APF_CTL_VIS_Obs_2023a_B.b_m +
              APF_CTL_VIS_Obs_2023a_B.b_m;
            APF_CTL_VIS_Obs_2023a_B.v_o[0] = (APF_CTL_VIS_Obs_2023a_B.s_tmp_m /
              APF_CTL_VIS_Obs_2023a_B.s_pc * APF_CTL_VIS_Obs_2023a_B.s_tmp_m +
              h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j - 1] *
              APF_CTL_VIS_Obs_2023a_B.h21s_i) - APF_CTL_VIS_Obs_2023a_B.tst_a /
              APF_CTL_VIS_Obs_2023a_B.s_pc * APF_CTL_VIS_Obs_2023a_B.aa_k;
            APF_CTL_VIS_Obs_2023a_B.s_tmp_m = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j];
            APF_CTL_VIS_Obs_2023a_B.v_o[1] = (((APF_CTL_VIS_Obs_2023a_B.h12_c +
              APF_CTL_VIS_Obs_2023a_B.s_tmp_m) - APF_CTL_VIS_Obs_2023a_B.h11_b)
              - APF_CTL_VIS_Obs_2023a_B.tr_n) * APF_CTL_VIS_Obs_2023a_B.h21s_i;
            APF_CTL_VIS_Obs_2023a_B.v_o[2] = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_j +
              1] * APF_CTL_VIS_Obs_2023a_B.h21s_i;
            APF_CTL_VIS_Obs_2023a_B.s_pc = (fabs(APF_CTL_VIS_Obs_2023a_B.v_o[0])
              + fabs(APF_CTL_VIS_Obs_2023a_B.v_o[1])) + fabs
              (APF_CTL_VIS_Obs_2023a_B.v_o[2]);
            APF_CTL_VIS_Obs_2023a_B.v_o[0] /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.v_o[1] /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            APF_CTL_VIS_Obs_2023a_B.v_o[2] /= APF_CTL_VIS_Obs_2023a_B.s_pc;
            if (APF_CTL_VIS_Obs_2023a_B.k_o + 1 == APF_CTL_VIS_Obs_2023a_B.b_m)
            {
              exitg3 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.b_m - 2) *
                6 + APF_CTL_VIS_Obs_2023a_B.b_m;
              if (fabs(h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 1]) * (fabs
                   (APF_CTL_VIS_Obs_2023a_B.v_o[1]) + fabs
                   (APF_CTL_VIS_Obs_2023a_B.v_o[2])) <= ((fabs
                    (h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 2]) + fabs
                    (APF_CTL_VIS_Obs_2023a_B.h12_c)) + fabs
                   (APF_CTL_VIS_Obs_2023a_B.s_tmp_m)) * (2.2204460492503131E-16 *
                   fabs(APF_CTL_VIS_Obs_2023a_B.v_o[0]))) {
                exitg3 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_B.b_m--;
              }
            }
          }

          for (APF_CTL_VIS_Obs_2023a_B.s_tmp_j = APF_CTL_VIS_Obs_2023a_B.b_m;
               APF_CTL_VIS_Obs_2023a_B.s_tmp_j <= APF_CTL_VIS_Obs_2023a_B.b_i_i;
               APF_CTL_VIS_Obs_2023a_B.s_tmp_j++) {
            APF_CTL_VIS_Obs_2023a_B.nr = (APF_CTL_VIS_Obs_2023a_B.b_i_i -
              APF_CTL_VIS_Obs_2023a_B.s_tmp_j) + 2;
            if (APF_CTL_VIS_Obs_2023a_B.nr >= 3) {
              APF_CTL_VIS_Obs_2023a_B.nr = 3;
            }

            if (APF_CTL_VIS_Obs_2023a_B.s_tmp_j > APF_CTL_VIS_Obs_2023a_B.b_m) {
              APF_CTL_VIS_Obs_2023a_B.ix0 = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_j -
                2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_j) - 1;
              for (APF_CTL_VIS_Obs_2023a_B.d_k_e = 0;
                   APF_CTL_VIS_Obs_2023a_B.d_k_e < APF_CTL_VIS_Obs_2023a_B.nr;
                   APF_CTL_VIS_Obs_2023a_B.d_k_e++) {
                APF_CTL_VIS_Obs_2023a_B.v_o[APF_CTL_VIS_Obs_2023a_B.d_k_e] =
                  h[APF_CTL_VIS_Obs_2023a_B.ix0 + APF_CTL_VIS_Obs_2023a_B.d_k_e];
              }
            }

            APF_CTL_VIS_Obs_2023a_B.h11_b = APF_CTL_VIS_Obs_2023a_B.v_o[0];
            APF_CTL_VIS_Obs_2023a_B.s_pc = APF_CTL_VIS_Obs_2023a_xzlarfg_l
              (APF_CTL_VIS_Obs_2023a_B.nr, &APF_CTL_VIS_Obs_2023a_B.h11_b,
               APF_CTL_VIS_Obs_2023a_B.v_o);
            if (APF_CTL_VIS_Obs_2023a_B.s_tmp_j > APF_CTL_VIS_Obs_2023a_B.b_m) {
              APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.s_tmp_j -
                2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_j;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 1] =
                APF_CTL_VIS_Obs_2023a_B.h11_b;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_e] = 0.0;
              if (APF_CTL_VIS_Obs_2023a_B.s_tmp_j <
                  APF_CTL_VIS_Obs_2023a_B.b_i_i) {
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e + 1] = 0.0;
              }
            } else if (APF_CTL_VIS_Obs_2023a_B.b_m > APF_CTL_VIS_Obs_2023a_B.k_o
                       + 1) {
              APF_CTL_VIS_Obs_2023a_B.d_k_e = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_j
                - 2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_j) - 1;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_e] *= 1.0 -
                APF_CTL_VIS_Obs_2023a_B.s_pc;
            }

            APF_CTL_VIS_Obs_2023a_B.h11_b = APF_CTL_VIS_Obs_2023a_B.v_o[1];
            APF_CTL_VIS_Obs_2023a_B.tr_n = APF_CTL_VIS_Obs_2023a_B.s_pc *
              APF_CTL_VIS_Obs_2023a_B.v_o[1];
            switch (APF_CTL_VIS_Obs_2023a_B.nr) {
             case 3:
              APF_CTL_VIS_Obs_2023a_B.aa_k = APF_CTL_VIS_Obs_2023a_B.v_o[2];
              APF_CTL_VIS_Obs_2023a_B.tst_a = APF_CTL_VIS_Obs_2023a_B.s_pc *
                APF_CTL_VIS_Obs_2023a_B.v_o[2];
              for (APF_CTL_VIS_Obs_2023a_B.nr = APF_CTL_VIS_Obs_2023a_B.s_tmp_j;
                   APF_CTL_VIS_Obs_2023a_B.nr <= APF_CTL_VIS_Obs_2023a_B.b_i_i +
                   1; APF_CTL_VIS_Obs_2023a_B.nr++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.nr - 1)
                  * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_j;
                APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.d_k_e
                  - 1];
                APF_CTL_VIS_Obs_2023a_B.s_tmp_m =
                  h[APF_CTL_VIS_Obs_2023a_B.d_k_e];
                APF_CTL_VIS_Obs_2023a_B.h21s_i = h[APF_CTL_VIS_Obs_2023a_B.d_k_e
                  + 1];
                APF_CTL_VIS_Obs_2023a_B.sum = (APF_CTL_VIS_Obs_2023a_B.h11_b *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m +
                  APF_CTL_VIS_Obs_2023a_B.h12_c) + APF_CTL_VIS_Obs_2023a_B.aa_k *
                  APF_CTL_VIS_Obs_2023a_B.h21s_i;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 1] =
                  APF_CTL_VIS_Obs_2023a_B.h12_c - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.s_pc;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e] =
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.tr_n;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e + 1] =
                  APF_CTL_VIS_Obs_2023a_B.h21s_i - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.tst_a;
              }

              if (APF_CTL_VIS_Obs_2023a_B.s_tmp_j + 3 <=
                  APF_CTL_VIS_Obs_2023a_B.b_i_i + 1) {
                APF_CTL_VIS_Obs_2023a_B.n = APF_CTL_VIS_Obs_2023a_B.s_tmp_j + 3;
              } else {
                APF_CTL_VIS_Obs_2023a_B.n = APF_CTL_VIS_Obs_2023a_B.b_i_i + 1;
              }

              for (APF_CTL_VIS_Obs_2023a_B.nr = APF_CTL_VIS_Obs_2023a_B.k_o + 1;
                   APF_CTL_VIS_Obs_2023a_B.nr <= APF_CTL_VIS_Obs_2023a_B.n;
                   APF_CTL_VIS_Obs_2023a_B.nr++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_e =
                  ((APF_CTL_VIS_Obs_2023a_B.s_tmp_j - 1) * 6 +
                   APF_CTL_VIS_Obs_2023a_B.nr) - 1;
                APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.d_k_e];
                APF_CTL_VIS_Obs_2023a_B.ix0 = (6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_j + APF_CTL_VIS_Obs_2023a_B.nr)
                  - 1;
                APF_CTL_VIS_Obs_2023a_B.s_tmp_m = h[APF_CTL_VIS_Obs_2023a_B.ix0];
                APF_CTL_VIS_Obs_2023a_B.h_tmp =
                  ((APF_CTL_VIS_Obs_2023a_B.s_tmp_j + 1) * 6 +
                   APF_CTL_VIS_Obs_2023a_B.nr) - 1;
                APF_CTL_VIS_Obs_2023a_B.h21s_i = h[APF_CTL_VIS_Obs_2023a_B.h_tmp];
                APF_CTL_VIS_Obs_2023a_B.sum = (APF_CTL_VIS_Obs_2023a_B.h11_b *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m +
                  APF_CTL_VIS_Obs_2023a_B.h12_c) + APF_CTL_VIS_Obs_2023a_B.aa_k *
                  APF_CTL_VIS_Obs_2023a_B.h21s_i;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e] = APF_CTL_VIS_Obs_2023a_B.h12_c
                  - APF_CTL_VIS_Obs_2023a_B.sum * APF_CTL_VIS_Obs_2023a_B.s_pc;
                h[APF_CTL_VIS_Obs_2023a_B.ix0] = APF_CTL_VIS_Obs_2023a_B.s_tmp_m
                  - APF_CTL_VIS_Obs_2023a_B.sum * APF_CTL_VIS_Obs_2023a_B.tr_n;
                h[APF_CTL_VIS_Obs_2023a_B.h_tmp] =
                  APF_CTL_VIS_Obs_2023a_B.h21s_i - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.tst_a;
              }
              break;

             case 2:
              for (APF_CTL_VIS_Obs_2023a_B.nr = APF_CTL_VIS_Obs_2023a_B.s_tmp_j;
                   APF_CTL_VIS_Obs_2023a_B.nr <= APF_CTL_VIS_Obs_2023a_B.b_i_i +
                   1; APF_CTL_VIS_Obs_2023a_B.nr++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_e = (APF_CTL_VIS_Obs_2023a_B.nr - 1)
                  * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_j;
                APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.d_k_e
                  - 1];
                APF_CTL_VIS_Obs_2023a_B.s_tmp_m =
                  h[APF_CTL_VIS_Obs_2023a_B.d_k_e];
                APF_CTL_VIS_Obs_2023a_B.sum = APF_CTL_VIS_Obs_2023a_B.h11_b *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m +
                  APF_CTL_VIS_Obs_2023a_B.h12_c;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e - 1] =
                  APF_CTL_VIS_Obs_2023a_B.h12_c - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.s_pc;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e] =
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m - APF_CTL_VIS_Obs_2023a_B.sum *
                  APF_CTL_VIS_Obs_2023a_B.tr_n;
              }

              for (APF_CTL_VIS_Obs_2023a_B.nr = APF_CTL_VIS_Obs_2023a_B.k_o + 1;
                   APF_CTL_VIS_Obs_2023a_B.nr <= APF_CTL_VIS_Obs_2023a_B.b_i_i +
                   1; APF_CTL_VIS_Obs_2023a_B.nr++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_e =
                  ((APF_CTL_VIS_Obs_2023a_B.s_tmp_j - 1) * 6 +
                   APF_CTL_VIS_Obs_2023a_B.nr) - 1;
                APF_CTL_VIS_Obs_2023a_B.h12_c = h[APF_CTL_VIS_Obs_2023a_B.d_k_e];
                APF_CTL_VIS_Obs_2023a_B.ix0 = (6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_j + APF_CTL_VIS_Obs_2023a_B.nr)
                  - 1;
                APF_CTL_VIS_Obs_2023a_B.s_tmp_m = h[APF_CTL_VIS_Obs_2023a_B.ix0];
                APF_CTL_VIS_Obs_2023a_B.sum = APF_CTL_VIS_Obs_2023a_B.h11_b *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_m +
                  APF_CTL_VIS_Obs_2023a_B.h12_c;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_e] = APF_CTL_VIS_Obs_2023a_B.h12_c
                  - APF_CTL_VIS_Obs_2023a_B.sum * APF_CTL_VIS_Obs_2023a_B.s_pc;
                h[APF_CTL_VIS_Obs_2023a_B.ix0] = APF_CTL_VIS_Obs_2023a_B.s_tmp_m
                  - APF_CTL_VIS_Obs_2023a_B.sum * APF_CTL_VIS_Obs_2023a_B.tr_n;
              }
              break;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.its++;
        }
      }

      if (!APF_CTL_VIS_Obs_2023a_B.converged) {
        *info = APF_CTL_VIS_Obs_2023a_B.b_i_i + 1;
        exitg1 = true;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.b_i_i + 1 == APF_CTL_VIS_Obs_2023a_B.l) {
          wr[APF_CTL_VIS_Obs_2023a_B.b_i_i] = h[6 *
            APF_CTL_VIS_Obs_2023a_B.b_i_i + APF_CTL_VIS_Obs_2023a_B.b_i_i];
          wi[APF_CTL_VIS_Obs_2023a_B.b_i_i] = 0.0;
        } else if (APF_CTL_VIS_Obs_2023a_B.l == APF_CTL_VIS_Obs_2023a_B.b_i_i) {
          APF_CTL_VIS_Obs_2023a_B.kdefl = 6 * APF_CTL_VIS_Obs_2023a_B.b_i_i +
            APF_CTL_VIS_Obs_2023a_B.b_i_i;
          APF_CTL_VIS_Obs_2023a_B.s_pc = h[APF_CTL_VIS_Obs_2023a_B.kdefl - 1];
          APF_CTL_VIS_Obs_2023a_B.its = (APF_CTL_VIS_Obs_2023a_B.b_i_i - 1) * 6
            + APF_CTL_VIS_Obs_2023a_B.b_i_i;
          APF_CTL_VIS_Obs_2023a_B.h11_b = h[APF_CTL_VIS_Obs_2023a_B.its];
          APF_CTL_VIS_Obs_2023a_B.tr_n = h[APF_CTL_VIS_Obs_2023a_B.kdefl];
          APF_CTL_VIS_Obs_2023a_xdlanv2(&h[APF_CTL_VIS_Obs_2023a_B.its - 1],
            &APF_CTL_VIS_Obs_2023a_B.s_pc, &APF_CTL_VIS_Obs_2023a_B.h11_b,
            &APF_CTL_VIS_Obs_2023a_B.tr_n, &wr[APF_CTL_VIS_Obs_2023a_B.b_i_i - 1],
            &wi[APF_CTL_VIS_Obs_2023a_B.b_i_i - 1],
            &APF_CTL_VIS_Obs_2023a_B.aa_k, &APF_CTL_VIS_Obs_2023a_B.tst_a,
            &APF_CTL_VIS_Obs_2023a_B.h12_c, &APF_CTL_VIS_Obs_2023a_B.s_tmp_m);
          wr[APF_CTL_VIS_Obs_2023a_B.b_i_i] = APF_CTL_VIS_Obs_2023a_B.aa_k;
          wi[APF_CTL_VIS_Obs_2023a_B.b_i_i] = APF_CTL_VIS_Obs_2023a_B.tst_a;
          h[APF_CTL_VIS_Obs_2023a_B.kdefl - 1] = APF_CTL_VIS_Obs_2023a_B.s_pc;
          h[APF_CTL_VIS_Obs_2023a_B.its] = APF_CTL_VIS_Obs_2023a_B.h11_b;
          h[APF_CTL_VIS_Obs_2023a_B.kdefl] = APF_CTL_VIS_Obs_2023a_B.tr_n;
        }

        APF_CTL_VIS_Obs_2023a_B.kdefl = 0;
        APF_CTL_VIS_Obs_2023a_B.b_i_i = APF_CTL_VIS_Obs_2023a_B.l - 2;
      }
    }

    if (*info != 0) {
      for (APF_CTL_VIS_Obs_2023a_B.b_i_i = 0; APF_CTL_VIS_Obs_2023a_B.b_i_i < 4;
           APF_CTL_VIS_Obs_2023a_B.b_i_i++) {
        for (APF_CTL_VIS_Obs_2023a_B.l = APF_CTL_VIS_Obs_2023a_B.b_i_i + 3;
             APF_CTL_VIS_Obs_2023a_B.l < 7; APF_CTL_VIS_Obs_2023a_B.l++) {
          h[(APF_CTL_VIS_Obs_2023a_B.l + 6 * APF_CTL_VIS_Obs_2023a_B.b_i_i) - 1]
            = 0.0;
        }
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzlascl_k(real_T cfrom, real_T cto, int32_T
  b_m, real_T A[6], int32_T iA0)
{
  APF_CTL_VIS_Obs_2023a_B.cfromc = cfrom;
  APF_CTL_VIS_Obs_2023a_B.ctoc = cto;
  APF_CTL_VIS_Obs_2023a_B.notdone_b = true;
  while (APF_CTL_VIS_Obs_2023a_B.notdone_b) {
    APF_CTL_VIS_Obs_2023a_B.cfrom1 = APF_CTL_VIS_Obs_2023a_B.cfromc *
      2.0041683600089728E-292;
    APF_CTL_VIS_Obs_2023a_B.cto1 = APF_CTL_VIS_Obs_2023a_B.ctoc /
      4.9896007738368E+291;
    if ((fabs(APF_CTL_VIS_Obs_2023a_B.cfrom1) > fabs
         (APF_CTL_VIS_Obs_2023a_B.ctoc)) && (APF_CTL_VIS_Obs_2023a_B.ctoc != 0.0))
    {
      APF_CTL_VIS_Obs_2023a_B.mul = 2.0041683600089728E-292;
      APF_CTL_VIS_Obs_2023a_B.cfromc = APF_CTL_VIS_Obs_2023a_B.cfrom1;
    } else if (fabs(APF_CTL_VIS_Obs_2023a_B.cto1) > fabs
               (APF_CTL_VIS_Obs_2023a_B.cfromc)) {
      APF_CTL_VIS_Obs_2023a_B.mul = 4.9896007738368E+291;
      APF_CTL_VIS_Obs_2023a_B.ctoc = APF_CTL_VIS_Obs_2023a_B.cto1;
    } else {
      APF_CTL_VIS_Obs_2023a_B.mul = APF_CTL_VIS_Obs_2023a_B.ctoc /
        APF_CTL_VIS_Obs_2023a_B.cfromc;
      APF_CTL_VIS_Obs_2023a_B.notdone_b = false;
    }

    for (APF_CTL_VIS_Obs_2023a_B.b_i_c = 0; APF_CTL_VIS_Obs_2023a_B.b_i_c < b_m;
         APF_CTL_VIS_Obs_2023a_B.b_i_c++) {
      APF_CTL_VIS_Obs_2023a_B.i13 = (APF_CTL_VIS_Obs_2023a_B.b_i_c + iA0) - 1;
      A[APF_CTL_VIS_Obs_2023a_B.i13] *= APF_CTL_VIS_Obs_2023a_B.mul;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_20_computeNormM(const real_T A[36])
{
  real_T y;
  boolean_T exitg2;
  y = 0.0;
  APF_CTL_VIS_Obs_2023a_B.j_d4 = 0;
  exitg2 = false;
  while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.j_d4 < 6)) {
    int32_T exitg1;
    APF_CTL_VIS_Obs_2023a_B.i_ky = 0;
    do {
      exitg1 = 0;
      if (APF_CTL_VIS_Obs_2023a_B.i_ky <= APF_CTL_VIS_Obs_2023a_B.j_d4) {
        APF_CTL_VIS_Obs_2023a_B.absx = fabs(A[6 * APF_CTL_VIS_Obs_2023a_B.j_d4 +
          APF_CTL_VIS_Obs_2023a_B.i_ky]);
        if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.absx)) {
          y = (rtNaN);
          exitg1 = 1;
        } else {
          if (APF_CTL_VIS_Obs_2023a_B.absx > y) {
            y = APF_CTL_VIS_Obs_2023a_B.absx;
          }

          APF_CTL_VIS_Obs_2023a_B.i_ky++;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.j_d4++;
        exitg1 = 2;
      }
    } while (exitg1 == 0);

    if (exitg1 == 1) {
      exitg2 = true;
    }
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_computeNormMTridiagonal(int32_T n, const real_T d[6],
  const real_T e[5], int32_T i0)
{
  real_T y;
  if (n <= 0) {
    y = 0.0;
  } else {
    boolean_T exitg1;
    y = fabs(d[(i0 + n) - 2]);
    APF_CTL_VIS_Obs_2023a_B.i_ch = -1;
    exitg1 = false;
    while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i_ch + 1 <= n - 2)) {
      APF_CTL_VIS_Obs_2023a_B.anorm_tmp = i0 + APF_CTL_VIS_Obs_2023a_B.i_ch;
      APF_CTL_VIS_Obs_2023a_B.anorm_k = fabs(d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp]);
      if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.anorm_k)) {
        y = (rtNaN);
        exitg1 = true;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.anorm_k > y) {
          y = APF_CTL_VIS_Obs_2023a_B.anorm_k;
        }

        APF_CTL_VIS_Obs_2023a_B.anorm_k = fabs
          (e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp]);
        if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.anorm_k)) {
          y = (rtNaN);
          exitg1 = true;
        } else {
          if (APF_CTL_VIS_Obs_2023a_B.anorm_k > y) {
            y = APF_CTL_VIS_Obs_2023a_B.anorm_k;
          }

          APF_CTL_VIS_Obs_2023a_B.i_ch++;
        }
      }
    }
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023_xzlascl_ka(real_T cfrom, real_T cto, int32_T
  b_m, real_T A[5], int32_T iA0)
{
  APF_CTL_VIS_Obs_2023a_B.cfromc_i = cfrom;
  APF_CTL_VIS_Obs_2023a_B.ctoc_f = cto;
  APF_CTL_VIS_Obs_2023a_B.notdone_c = true;
  while (APF_CTL_VIS_Obs_2023a_B.notdone_c) {
    APF_CTL_VIS_Obs_2023a_B.cfrom1_j = APF_CTL_VIS_Obs_2023a_B.cfromc_i *
      2.0041683600089728E-292;
    APF_CTL_VIS_Obs_2023a_B.cto1_o = APF_CTL_VIS_Obs_2023a_B.ctoc_f /
      4.9896007738368E+291;
    if ((fabs(APF_CTL_VIS_Obs_2023a_B.cfrom1_j) > fabs
         (APF_CTL_VIS_Obs_2023a_B.ctoc_f)) && (APF_CTL_VIS_Obs_2023a_B.ctoc_f !=
         0.0)) {
      APF_CTL_VIS_Obs_2023a_B.mul_f = 2.0041683600089728E-292;
      APF_CTL_VIS_Obs_2023a_B.cfromc_i = APF_CTL_VIS_Obs_2023a_B.cfrom1_j;
    } else if (fabs(APF_CTL_VIS_Obs_2023a_B.cto1_o) > fabs
               (APF_CTL_VIS_Obs_2023a_B.cfromc_i)) {
      APF_CTL_VIS_Obs_2023a_B.mul_f = 4.9896007738368E+291;
      APF_CTL_VIS_Obs_2023a_B.ctoc_f = APF_CTL_VIS_Obs_2023a_B.cto1_o;
    } else {
      APF_CTL_VIS_Obs_2023a_B.mul_f = APF_CTL_VIS_Obs_2023a_B.ctoc_f /
        APF_CTL_VIS_Obs_2023a_B.cfromc_i;
      APF_CTL_VIS_Obs_2023a_B.notdone_c = false;
    }

    for (APF_CTL_VIS_Obs_2023a_B.b_i_g = 0; APF_CTL_VIS_Obs_2023a_B.b_i_g < b_m;
         APF_CTL_VIS_Obs_2023a_B.b_i_g++) {
      APF_CTL_VIS_Obs_2023a_B.i3 = (APF_CTL_VIS_Obs_2023a_B.b_i_g + iA0) - 1;
      A[APF_CTL_VIS_Obs_2023a_B.i3] *= APF_CTL_VIS_Obs_2023a_B.mul_f;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlaev2(real_T a, real_T b, real_T c, real_T
  *rt1, real_T *rt2)
{
  APF_CTL_VIS_Obs_2023a_B.sm_h = a + c;
  APF_CTL_VIS_Obs_2023a_B.adf_k = fabs(a - c);
  APF_CTL_VIS_Obs_2023a_B.ab_h = fabs(b + b);
  if (fabs(a) > fabs(c)) {
    APF_CTL_VIS_Obs_2023a_B.acmx_b = a;
    APF_CTL_VIS_Obs_2023a_B.acmn_o = c;
  } else {
    APF_CTL_VIS_Obs_2023a_B.acmx_b = c;
    APF_CTL_VIS_Obs_2023a_B.acmn_o = a;
  }

  if (APF_CTL_VIS_Obs_2023a_B.adf_k > APF_CTL_VIS_Obs_2023a_B.ab_h) {
    APF_CTL_VIS_Obs_2023a_B.ab_h /= APF_CTL_VIS_Obs_2023a_B.adf_k;
    APF_CTL_VIS_Obs_2023a_B.adf_k *= sqrt(APF_CTL_VIS_Obs_2023a_B.ab_h *
      APF_CTL_VIS_Obs_2023a_B.ab_h + 1.0);
  } else if (APF_CTL_VIS_Obs_2023a_B.adf_k < APF_CTL_VIS_Obs_2023a_B.ab_h) {
    APF_CTL_VIS_Obs_2023a_B.adf_k /= APF_CTL_VIS_Obs_2023a_B.ab_h;
    APF_CTL_VIS_Obs_2023a_B.adf_k = sqrt(APF_CTL_VIS_Obs_2023a_B.adf_k *
      APF_CTL_VIS_Obs_2023a_B.adf_k + 1.0) * APF_CTL_VIS_Obs_2023a_B.ab_h;
  } else {
    APF_CTL_VIS_Obs_2023a_B.adf_k = APF_CTL_VIS_Obs_2023a_B.ab_h *
      1.4142135623730951;
  }

  if (APF_CTL_VIS_Obs_2023a_B.sm_h < 0.0) {
    *rt1 = (APF_CTL_VIS_Obs_2023a_B.sm_h - APF_CTL_VIS_Obs_2023a_B.adf_k) * 0.5;
    *rt2 = APF_CTL_VIS_Obs_2023a_B.acmx_b / *rt1 *
      APF_CTL_VIS_Obs_2023a_B.acmn_o - b / *rt1 * b;
  } else if (APF_CTL_VIS_Obs_2023a_B.sm_h > 0.0) {
    *rt1 = (APF_CTL_VIS_Obs_2023a_B.sm_h + APF_CTL_VIS_Obs_2023a_B.adf_k) * 0.5;
    *rt2 = APF_CTL_VIS_Obs_2023a_B.acmx_b / *rt1 *
      APF_CTL_VIS_Obs_2023a_B.acmn_o - b / *rt1 * b;
  } else {
    *rt1 = 0.5 * APF_CTL_VIS_Obs_2023a_B.adf_k;
    *rt2 = -0.5 * APF_CTL_VIS_Obs_2023a_B.adf_k;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2_insertionsort(real_T x[6], int32_T xstart, int32_T
  xend)
{
  for (APF_CTL_VIS_Obs_2023a_B.k_b = xstart + 1; APF_CTL_VIS_Obs_2023a_B.k_b <=
       xend; APF_CTL_VIS_Obs_2023a_B.k_b++) {
    boolean_T exitg1;
    APF_CTL_VIS_Obs_2023a_B.xc = x[APF_CTL_VIS_Obs_2023a_B.k_b - 1];
    APF_CTL_VIS_Obs_2023a_B.idx = APF_CTL_VIS_Obs_2023a_B.k_b - 1;
    exitg1 = false;
    while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.idx >= xstart)) {
      APF_CTL_VIS_Obs_2023a_B.d_k = x[APF_CTL_VIS_Obs_2023a_B.idx - 1];
      if (APF_CTL_VIS_Obs_2023a_B.xc < APF_CTL_VIS_Obs_2023a_B.d_k) {
        x[APF_CTL_VIS_Obs_2023a_B.idx] = APF_CTL_VIS_Obs_2023a_B.d_k;
        APF_CTL_VIS_Obs_2023a_B.idx--;
      } else {
        exitg1 = true;
      }
    }

    x[APF_CTL_VIS_Obs_2023a_B.idx] = APF_CTL_VIS_Obs_2023a_B.xc;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static int32_T APF_CTL_VIS_Obs_2023a_xdsterf(real_T d[6], real_T e[5])
{
  int32_T exitg1;
  int32_T exitg3;
  int32_T exitg4;
  int32_T info;
  boolean_T exitg2;
  info = 0;
  APF_CTL_VIS_Obs_2023a_B.jtot = 0;
  APF_CTL_VIS_Obs_2023a_B.l1 = 1;
  do {
    exitg1 = 0;
    if (APF_CTL_VIS_Obs_2023a_B.l1 > 6) {
      APF_CTL_VIS_Obs_2_insertionsort(d, 1, 6);
      exitg1 = 1;
    } else {
      if (APF_CTL_VIS_Obs_2023a_B.l1 > 1) {
        e[APF_CTL_VIS_Obs_2023a_B.l1 - 2] = 0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.b_m_i = APF_CTL_VIS_Obs_2023a_B.l1;
      exitg2 = false;
      while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.b_m_i < 6)) {
        if (fabs(e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1]) <= sqrt(fabs
             (d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1])) * sqrt(fabs
             (d[APF_CTL_VIS_Obs_2023a_B.b_m_i])) * 2.2204460492503131E-16) {
          e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1] = 0.0;
          exitg2 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.b_m_i++;
        }
      }

      APF_CTL_VIS_Obs_2023a_B.l_g = APF_CTL_VIS_Obs_2023a_B.l1;
      APF_CTL_VIS_Obs_2023a_B.lsv = APF_CTL_VIS_Obs_2023a_B.l1;
      APF_CTL_VIS_Obs_2023a_B.lend = APF_CTL_VIS_Obs_2023a_B.b_m_i;
      APF_CTL_VIS_Obs_2023a_B.lendsv_tmp = APF_CTL_VIS_Obs_2023a_B.b_m_i + 1;
      APF_CTL_VIS_Obs_2023a_B.l1 = APF_CTL_VIS_Obs_2023a_B.b_m_i + 1;
      if (APF_CTL_VIS_Obs_2023a_B.b_m_i == APF_CTL_VIS_Obs_2023a_B.l_g) {
      } else {
        APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.b_m_i -
          APF_CTL_VIS_Obs_2023a_B.l_g;
        APF_CTL_VIS_Obs_2023a_B.anorm = APF_CTL_computeNormMTridiagonal
          (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp + 1, d, e,
           APF_CTL_VIS_Obs_2023a_B.l_g);
        if (APF_CTL_VIS_Obs_2023a_B.anorm == 0.0) {
        } else {
          APF_CTL_VIS_Obs_2023a_B.iscale = 0;
          if (APF_CTL_VIS_Obs_2023a_B.anorm > 2.2346346549904327E+153) {
            APF_CTL_VIS_Obs_2023a_B.iscale = 1;
            APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.anorm,
              2.2346346549904327E+153, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp + 1,
              d, APF_CTL_VIS_Obs_2023a_B.l_g);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(APF_CTL_VIS_Obs_2023a_B.anorm,
              2.2346346549904327E+153, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp, e,
              APF_CTL_VIS_Obs_2023a_B.l_g);
          } else if (APF_CTL_VIS_Obs_2023a_B.anorm < 3.02546243347603E-123) {
            APF_CTL_VIS_Obs_2023a_B.iscale = 2;
            APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.anorm,
              3.02546243347603E-123, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp + 1,
              d, APF_CTL_VIS_Obs_2023a_B.l_g);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(APF_CTL_VIS_Obs_2023a_B.anorm,
              3.02546243347603E-123, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp, e,
              APF_CTL_VIS_Obs_2023a_B.l_g);
          }

          for (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp =
               APF_CTL_VIS_Obs_2023a_B.l_g;
               APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp <
               APF_CTL_VIS_Obs_2023a_B.b_m_i;
               APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp++) {
            APF_CTL_VIS_Obs_2023a_B.rte =
              e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1];
            e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1] =
              APF_CTL_VIS_Obs_2023a_B.rte * APF_CTL_VIS_Obs_2023a_B.rte;
          }

          if (fabs(d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1]) < fabs
              (d[APF_CTL_VIS_Obs_2023a_B.l_g - 1])) {
            APF_CTL_VIS_Obs_2023a_B.lend = APF_CTL_VIS_Obs_2023a_B.lsv;
            APF_CTL_VIS_Obs_2023a_B.l_g = APF_CTL_VIS_Obs_2023a_B.b_m_i;
          }

          if (APF_CTL_VIS_Obs_2023a_B.lend >= APF_CTL_VIS_Obs_2023a_B.l_g) {
            do {
              exitg4 = 0;
              if (APF_CTL_VIS_Obs_2023a_B.l_g != APF_CTL_VIS_Obs_2023a_B.lend) {
                APF_CTL_VIS_Obs_2023a_B.b_m_i = APF_CTL_VIS_Obs_2023a_B.l_g;
                while ((APF_CTL_VIS_Obs_2023a_B.b_m_i <
                        APF_CTL_VIS_Obs_2023a_B.lend) && (!(fabs
                         (e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1]) <= fabs
                         (d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1]) *
                         4.9303806576313238E-32 * fabs
                         (d[APF_CTL_VIS_Obs_2023a_B.b_m_i])))) {
                  APF_CTL_VIS_Obs_2023a_B.b_m_i++;
                }
              } else {
                APF_CTL_VIS_Obs_2023a_B.b_m_i = APF_CTL_VIS_Obs_2023a_B.lend;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_i < APF_CTL_VIS_Obs_2023a_B.lend)
              {
                e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1] = 0.0;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_i == APF_CTL_VIS_Obs_2023a_B.l_g)
              {
                APF_CTL_VIS_Obs_2023a_B.l_g++;
                if (APF_CTL_VIS_Obs_2023a_B.l_g > APF_CTL_VIS_Obs_2023a_B.lend)
                {
                  exitg4 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.l_g + 1 ==
                         APF_CTL_VIS_Obs_2023a_B.b_m_i) {
                APF_CTL_VIS_Obs_2023a_xdlaev2(d[APF_CTL_VIS_Obs_2023a_B.l_g - 1],
                  sqrt(e[APF_CTL_VIS_Obs_2023a_B.l_g - 1]),
                  d[APF_CTL_VIS_Obs_2023a_B.l_g], &d[APF_CTL_VIS_Obs_2023a_B.l_g
                  - 1], &APF_CTL_VIS_Obs_2023a_B.sigma);
                d[APF_CTL_VIS_Obs_2023a_B.l_g] = APF_CTL_VIS_Obs_2023a_B.sigma;
                e[APF_CTL_VIS_Obs_2023a_B.l_g - 1] = 0.0;
                APF_CTL_VIS_Obs_2023a_B.l_g += 2;
                if (APF_CTL_VIS_Obs_2023a_B.l_g > APF_CTL_VIS_Obs_2023a_B.lend)
                {
                  exitg4 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.jtot == 180) {
                exitg4 = 1;
              } else {
                APF_CTL_VIS_Obs_2023a_B.jtot++;
                APF_CTL_VIS_Obs_2023a_B.rte = sqrt(e[APF_CTL_VIS_Obs_2023a_B.l_g
                  - 1]);
                APF_CTL_VIS_Obs_2023a_B.c_c = d[APF_CTL_VIS_Obs_2023a_B.l_g - 1];
                APF_CTL_VIS_Obs_2023a_B.sigma = (d[APF_CTL_VIS_Obs_2023a_B.l_g]
                  - APF_CTL_VIS_Obs_2023a_B.c_c) / (2.0 *
                  APF_CTL_VIS_Obs_2023a_B.rte);
                APF_CTL_VIS_Obs_2023a_B.s_f = APF_CTL_VIS_Obs_2_rt_hypotd_snf
                  (APF_CTL_VIS_Obs_2023a_B.sigma, 1.0);
                if (!(APF_CTL_VIS_Obs_2023a_B.sigma >= 0.0)) {
                  APF_CTL_VIS_Obs_2023a_B.s_f = -APF_CTL_VIS_Obs_2023a_B.s_f;
                }

                APF_CTL_VIS_Obs_2023a_B.sigma = APF_CTL_VIS_Obs_2023a_B.c_c -
                  APF_CTL_VIS_Obs_2023a_B.rte / (APF_CTL_VIS_Obs_2023a_B.sigma +
                  APF_CTL_VIS_Obs_2023a_B.s_f);
                APF_CTL_VIS_Obs_2023a_B.c_c = 1.0;
                APF_CTL_VIS_Obs_2023a_B.s_f = 0.0;
                APF_CTL_VIS_Obs_2023a_B.b_gamma =
                  d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1] -
                  APF_CTL_VIS_Obs_2023a_B.sigma;
                APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.b_gamma *
                  APF_CTL_VIS_Obs_2023a_B.b_gamma;
                for (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp =
                     APF_CTL_VIS_Obs_2023a_B.b_m_i - 1;
                     APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp >=
                     APF_CTL_VIS_Obs_2023a_B.l_g;
                     APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp--) {
                  APF_CTL_VIS_Obs_2023a_B.rte =
                    e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1];
                  APF_CTL_VIS_Obs_2023a_B.r_n = APF_CTL_VIS_Obs_2023a_B.p_d +
                    APF_CTL_VIS_Obs_2023a_B.rte;
                  if (APF_CTL_VIS_Obs_2023a_B.b_m_i - 1 !=
                      APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp) {
                    e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp] =
                      APF_CTL_VIS_Obs_2023a_B.s_f * APF_CTL_VIS_Obs_2023a_B.r_n;
                  }

                  APF_CTL_VIS_Obs_2023a_B.oldc = APF_CTL_VIS_Obs_2023a_B.c_c;
                  APF_CTL_VIS_Obs_2023a_B.c_c = APF_CTL_VIS_Obs_2023a_B.p_d /
                    APF_CTL_VIS_Obs_2023a_B.r_n;
                  APF_CTL_VIS_Obs_2023a_B.s_f = APF_CTL_VIS_Obs_2023a_B.rte /
                    APF_CTL_VIS_Obs_2023a_B.r_n;
                  APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.b_gamma;
                  APF_CTL_VIS_Obs_2023a_B.r_n =
                    d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1];
                  APF_CTL_VIS_Obs_2023a_B.b_gamma = (APF_CTL_VIS_Obs_2023a_B.r_n
                    - APF_CTL_VIS_Obs_2023a_B.sigma) *
                    APF_CTL_VIS_Obs_2023a_B.c_c - APF_CTL_VIS_Obs_2023a_B.s_f *
                    APF_CTL_VIS_Obs_2023a_B.b_gamma;
                  d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp] =
                    (APF_CTL_VIS_Obs_2023a_B.r_n -
                     APF_CTL_VIS_Obs_2023a_B.b_gamma) +
                    APF_CTL_VIS_Obs_2023a_B.p_d;
                  if (APF_CTL_VIS_Obs_2023a_B.c_c != 0.0) {
                    APF_CTL_VIS_Obs_2023a_B.p_d =
                      APF_CTL_VIS_Obs_2023a_B.b_gamma *
                      APF_CTL_VIS_Obs_2023a_B.b_gamma /
                      APF_CTL_VIS_Obs_2023a_B.c_c;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.oldc *
                      APF_CTL_VIS_Obs_2023a_B.rte;
                  }
                }

                e[APF_CTL_VIS_Obs_2023a_B.l_g - 1] = APF_CTL_VIS_Obs_2023a_B.s_f
                  * APF_CTL_VIS_Obs_2023a_B.p_d;
                d[APF_CTL_VIS_Obs_2023a_B.l_g - 1] =
                  APF_CTL_VIS_Obs_2023a_B.sigma +
                  APF_CTL_VIS_Obs_2023a_B.b_gamma;
              }
            } while (exitg4 == 0);
          } else {
            do {
              exitg3 = 0;
              APF_CTL_VIS_Obs_2023a_B.b_m_i = APF_CTL_VIS_Obs_2023a_B.l_g;
              while ((APF_CTL_VIS_Obs_2023a_B.b_m_i >
                      APF_CTL_VIS_Obs_2023a_B.lend) && (!(fabs
                       (e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 2]) <= fabs
                       (d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1]) *
                       4.9303806576313238E-32 * fabs
                       (d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 2])))) {
                APF_CTL_VIS_Obs_2023a_B.b_m_i--;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_i > APF_CTL_VIS_Obs_2023a_B.lend)
              {
                e[APF_CTL_VIS_Obs_2023a_B.b_m_i - 2] = 0.0;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_i == APF_CTL_VIS_Obs_2023a_B.l_g)
              {
                APF_CTL_VIS_Obs_2023a_B.l_g--;
                if (APF_CTL_VIS_Obs_2023a_B.l_g < APF_CTL_VIS_Obs_2023a_B.lend)
                {
                  exitg3 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.l_g - 1 ==
                         APF_CTL_VIS_Obs_2023a_B.b_m_i) {
                APF_CTL_VIS_Obs_2023a_xdlaev2(d[APF_CTL_VIS_Obs_2023a_B.l_g - 1],
                  sqrt(e[APF_CTL_VIS_Obs_2023a_B.l_g - 2]),
                  d[APF_CTL_VIS_Obs_2023a_B.l_g - 2],
                  &d[APF_CTL_VIS_Obs_2023a_B.l_g - 1],
                  &APF_CTL_VIS_Obs_2023a_B.sigma);
                d[APF_CTL_VIS_Obs_2023a_B.l_g - 2] =
                  APF_CTL_VIS_Obs_2023a_B.sigma;
                e[APF_CTL_VIS_Obs_2023a_B.l_g - 2] = 0.0;
                APF_CTL_VIS_Obs_2023a_B.l_g -= 2;
                if (APF_CTL_VIS_Obs_2023a_B.l_g < APF_CTL_VIS_Obs_2023a_B.lend)
                {
                  exitg3 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.jtot == 180) {
                exitg3 = 1;
              } else {
                APF_CTL_VIS_Obs_2023a_B.jtot++;
                APF_CTL_VIS_Obs_2023a_B.rte = sqrt(e[APF_CTL_VIS_Obs_2023a_B.l_g
                  - 2]);
                APF_CTL_VIS_Obs_2023a_B.c_c = d[APF_CTL_VIS_Obs_2023a_B.l_g - 1];
                APF_CTL_VIS_Obs_2023a_B.sigma = (d[APF_CTL_VIS_Obs_2023a_B.l_g -
                  2] - APF_CTL_VIS_Obs_2023a_B.c_c) / (2.0 *
                  APF_CTL_VIS_Obs_2023a_B.rte);
                APF_CTL_VIS_Obs_2023a_B.s_f = APF_CTL_VIS_Obs_2_rt_hypotd_snf
                  (APF_CTL_VIS_Obs_2023a_B.sigma, 1.0);
                if (!(APF_CTL_VIS_Obs_2023a_B.sigma >= 0.0)) {
                  APF_CTL_VIS_Obs_2023a_B.s_f = -APF_CTL_VIS_Obs_2023a_B.s_f;
                }

                APF_CTL_VIS_Obs_2023a_B.sigma = APF_CTL_VIS_Obs_2023a_B.c_c -
                  APF_CTL_VIS_Obs_2023a_B.rte / (APF_CTL_VIS_Obs_2023a_B.sigma +
                  APF_CTL_VIS_Obs_2023a_B.s_f);
                APF_CTL_VIS_Obs_2023a_B.c_c = 1.0;
                APF_CTL_VIS_Obs_2023a_B.s_f = 0.0;
                APF_CTL_VIS_Obs_2023a_B.b_gamma =
                  d[APF_CTL_VIS_Obs_2023a_B.b_m_i - 1] -
                  APF_CTL_VIS_Obs_2023a_B.sigma;
                APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.b_gamma *
                  APF_CTL_VIS_Obs_2023a_B.b_gamma;
                for (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp =
                     APF_CTL_VIS_Obs_2023a_B.b_m_i;
                     APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp <
                     APF_CTL_VIS_Obs_2023a_B.l_g;
                     APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp++) {
                  APF_CTL_VIS_Obs_2023a_B.rte =
                    e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1];
                  APF_CTL_VIS_Obs_2023a_B.r_n = APF_CTL_VIS_Obs_2023a_B.p_d +
                    APF_CTL_VIS_Obs_2023a_B.rte;
                  if (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp !=
                      APF_CTL_VIS_Obs_2023a_B.b_m_i) {
                    e[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 2] =
                      APF_CTL_VIS_Obs_2023a_B.s_f * APF_CTL_VIS_Obs_2023a_B.r_n;
                  }

                  APF_CTL_VIS_Obs_2023a_B.oldc = APF_CTL_VIS_Obs_2023a_B.c_c;
                  APF_CTL_VIS_Obs_2023a_B.c_c = APF_CTL_VIS_Obs_2023a_B.p_d /
                    APF_CTL_VIS_Obs_2023a_B.r_n;
                  APF_CTL_VIS_Obs_2023a_B.s_f = APF_CTL_VIS_Obs_2023a_B.rte /
                    APF_CTL_VIS_Obs_2023a_B.r_n;
                  APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.b_gamma;
                  APF_CTL_VIS_Obs_2023a_B.b_gamma =
                    (d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp] -
                     APF_CTL_VIS_Obs_2023a_B.sigma) *
                    APF_CTL_VIS_Obs_2023a_B.c_c - APF_CTL_VIS_Obs_2023a_B.s_f *
                    APF_CTL_VIS_Obs_2023a_B.b_gamma;
                  d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp - 1] =
                    (d[APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp] -
                     APF_CTL_VIS_Obs_2023a_B.b_gamma) +
                    APF_CTL_VIS_Obs_2023a_B.p_d;
                  if (APF_CTL_VIS_Obs_2023a_B.c_c != 0.0) {
                    APF_CTL_VIS_Obs_2023a_B.p_d =
                      APF_CTL_VIS_Obs_2023a_B.b_gamma *
                      APF_CTL_VIS_Obs_2023a_B.b_gamma /
                      APF_CTL_VIS_Obs_2023a_B.c_c;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.p_d = APF_CTL_VIS_Obs_2023a_B.oldc *
                      APF_CTL_VIS_Obs_2023a_B.rte;
                  }
                }

                e[APF_CTL_VIS_Obs_2023a_B.l_g - 2] = APF_CTL_VIS_Obs_2023a_B.s_f
                  * APF_CTL_VIS_Obs_2023a_B.p_d;
                d[APF_CTL_VIS_Obs_2023a_B.l_g - 1] =
                  APF_CTL_VIS_Obs_2023a_B.sigma +
                  APF_CTL_VIS_Obs_2023a_B.b_gamma;
              }
            } while (exitg3 == 0);
          }

          switch (APF_CTL_VIS_Obs_2023a_B.iscale) {
           case 1:
            APF_CTL_VIS_Obs_2023a_xzlascl_k(2.2346346549904327E+153,
              APF_CTL_VIS_Obs_2023a_B.anorm, APF_CTL_VIS_Obs_2023a_B.lendsv_tmp
              - APF_CTL_VIS_Obs_2023a_B.lsv, d, APF_CTL_VIS_Obs_2023a_B.lsv);
            break;

           case 2:
            APF_CTL_VIS_Obs_2023a_xzlascl_k(3.02546243347603E-123,
              APF_CTL_VIS_Obs_2023a_B.anorm, APF_CTL_VIS_Obs_2023a_B.lendsv_tmp
              - APF_CTL_VIS_Obs_2023a_B.lsv, d, APF_CTL_VIS_Obs_2023a_B.lsv);
            break;
          }

          if (APF_CTL_VIS_Obs_2023a_B.jtot >= 180) {
            for (APF_CTL_VIS_Obs_2023a_B.jtot = 0; APF_CTL_VIS_Obs_2023a_B.jtot <
                 5; APF_CTL_VIS_Obs_2023a_B.jtot++) {
              if (e[APF_CTL_VIS_Obs_2023a_B.jtot] != 0.0) {
                info++;
              }
            }

            exitg1 = 1;
          }
        }
      }
    }
  } while (exitg1 == 0);

  return info;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_eig(const real_T A[36], creal_T V[6])
{
  boolean_T exitg1;
  APF_CTL_VIS_Obs_2023a_B.scalea_b = true;
  for (APF_CTL_VIS_Obs_2023a_B.k_c = 0; APF_CTL_VIS_Obs_2023a_B.k_c < 36;
       APF_CTL_VIS_Obs_2023a_B.k_c++) {
    if (APF_CTL_VIS_Obs_2023a_B.scalea_b) {
      APF_CTL_VIS_Obs_2023a_B.b_anrm = A[APF_CTL_VIS_Obs_2023a_B.k_c];
      if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.b_anrm) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.b_anrm)) {
        APF_CTL_VIS_Obs_2023a_B.scalea_b = false;
      }
    }
  }

  if (!APF_CTL_VIS_Obs_2023a_B.scalea_b) {
    for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
         APF_CTL_VIS_Obs_2023a_B.i_i++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_i].re = (rtNaN);
      V[APF_CTL_VIS_Obs_2023a_B.i_i].im = 0.0;
    }
  } else if (APF_CTL_VIS_Obs_202_ishermitian(A)) {
    memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_p[0], &A[0], 36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_B.b_anrm = APF_CTL_VIS_Obs_20_computeNormM(A);
    if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.b_anrm) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.b_anrm)) {
      for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
           APF_CTL_VIS_Obs_2023a_B.i_i++) {
        APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.i_i] = (rtNaN);
      }
    } else {
      APF_CTL_VIS_Obs_2023a_B.scalea_b = false;
      if ((APF_CTL_VIS_Obs_2023a_B.b_anrm > 0.0) &&
          (APF_CTL_VIS_Obs_2023a_B.b_anrm < 1.0010415475915505E-146)) {
        APF_CTL_VIS_Obs_2023a_B.scalea_b = true;
        APF_CTL_VIS_Obs_2023a_B.b_anrm = 1.0010415475915505E-146 /
          APF_CTL_VIS_Obs_2023a_B.b_anrm;
        APF_CTL_VIS_Obs_2023a_xzlascl(1.0, APF_CTL_VIS_Obs_2023a_B.b_anrm,
          APF_CTL_VIS_Obs_2023a_B.b_A_p);
      } else if (APF_CTL_VIS_Obs_2023a_B.b_anrm > 9.9895953610111751E+145) {
        APF_CTL_VIS_Obs_2023a_B.scalea_b = true;
        APF_CTL_VIS_Obs_2023a_B.b_anrm = 9.9895953610111751E+145 /
          APF_CTL_VIS_Obs_2023a_B.b_anrm;
        APF_CTL_VIS_Obs_2023a_xzlascl(1.0, APF_CTL_VIS_Obs_2023a_B.b_anrm,
          APF_CTL_VIS_Obs_2023a_B.b_A_p);
      }

      for (APF_CTL_VIS_Obs_2023a_B.k_c = 0; APF_CTL_VIS_Obs_2023a_B.k_c < 5;
           APF_CTL_VIS_Obs_2023a_B.k_c++) {
        APF_CTL_VIS_Obs_2023a_B.i_i = 6 * APF_CTL_VIS_Obs_2023a_B.k_c +
          APF_CTL_VIS_Obs_2023a_B.k_c;
        APF_CTL_VIS_Obs_2023a_B.e_i[APF_CTL_VIS_Obs_2023a_B.k_c] =
          APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.i_i + 1];
        if (APF_CTL_VIS_Obs_2023a_B.k_c + 3 <= 6) {
          APF_CTL_VIS_Obs_2023a_B.ihi_a = APF_CTL_VIS_Obs_2023a_B.k_c + 3;
        } else {
          APF_CTL_VIS_Obs_2023a_B.ihi_a = 6;
        }

        APF_CTL_VIS_Obs_2023a_B.absxk_m = APF_CTL_VIS_Obs_2023a_xzlarfg(5 -
          APF_CTL_VIS_Obs_2023a_B.k_c,
          &APF_CTL_VIS_Obs_2023a_B.e_i[APF_CTL_VIS_Obs_2023a_B.k_c],
          APF_CTL_VIS_Obs_2023a_B.b_A_p, APF_CTL_VIS_Obs_2023a_B.k_c * 6 +
          APF_CTL_VIS_Obs_2023a_B.ihi_a);
        if (APF_CTL_VIS_Obs_2023a_B.absxk_m != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.i_i + 1] = 1.0;
          for (APF_CTL_VIS_Obs_2023a_B.ihi_a = APF_CTL_VIS_Obs_2023a_B.k_c + 1;
               APF_CTL_VIS_Obs_2023a_B.ihi_a < 6; APF_CTL_VIS_Obs_2023a_B.ihi_a
               ++) {
            APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.ihi_a - 1] =
              0.0;
          }

          APF_CTL_VIS_Obs_2023a_B.ihi_a = 4 - APF_CTL_VIS_Obs_2023a_B.k_c;
          APF_CTL_VIS_Obs_2023a_B.d_tmp = 5 - APF_CTL_VIS_Obs_2023a_B.k_c;
          for (APF_CTL_VIS_Obs_2023a_B.b_jj_l = 0;
               APF_CTL_VIS_Obs_2023a_B.b_jj_l <= APF_CTL_VIS_Obs_2023a_B.ihi_a;
               APF_CTL_VIS_Obs_2023a_B.b_jj_l++) {
            APF_CTL_VIS_Obs_2023a_B.temp1_tmp = APF_CTL_VIS_Obs_2023a_B.k_c +
              APF_CTL_VIS_Obs_2023a_B.b_jj_l;
            APF_CTL_VIS_Obs_2023a_B.temp1_c = APF_CTL_VIS_Obs_2023a_B.b_A_p[(6 *
              APF_CTL_VIS_Obs_2023a_B.k_c + APF_CTL_VIS_Obs_2023a_B.temp1_tmp) +
              1] * APF_CTL_VIS_Obs_2023a_B.absxk_m;
            APF_CTL_VIS_Obs_2023a_B.temp2_f = 0.0;
            APF_CTL_VIS_Obs_2023a_B.tau_tmp_m =
              (APF_CTL_VIS_Obs_2023a_B.temp1_tmp + 1) * 6 +
              APF_CTL_VIS_Obs_2023a_B.k_c;
            APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.temp1_tmp] +=
              APF_CTL_VIS_Obs_2023a_B.b_A_p[(APF_CTL_VIS_Obs_2023a_B.tau_tmp_m +
              APF_CTL_VIS_Obs_2023a_B.b_jj_l) + 1] *
              APF_CTL_VIS_Obs_2023a_B.temp1_c;
            for (APF_CTL_VIS_Obs_2023a_B.ii_j = APF_CTL_VIS_Obs_2023a_B.b_jj_l +
                 2; APF_CTL_VIS_Obs_2023a_B.ii_j <=
                 APF_CTL_VIS_Obs_2023a_B.d_tmp; APF_CTL_VIS_Obs_2023a_B.ii_j++)
            {
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f =
                APF_CTL_VIS_Obs_2023a_B.k_c + APF_CTL_VIS_Obs_2023a_B.ii_j;
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_h =
                APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.tau_tmp_m
                + APF_CTL_VIS_Obs_2023a_B.ii_j];
              APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f
                - 1] += APF_CTL_VIS_Obs_2023a_B.tau_tmp_h *
                APF_CTL_VIS_Obs_2023a_B.temp1_c;
              APF_CTL_VIS_Obs_2023a_B.temp2_f += APF_CTL_VIS_Obs_2023a_B.b_A_p[6
                * APF_CTL_VIS_Obs_2023a_B.k_c +
                APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f] *
                APF_CTL_VIS_Obs_2023a_B.tau_tmp_h;
            }

            APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.temp1_tmp] +=
              APF_CTL_VIS_Obs_2023a_B.absxk_m * APF_CTL_VIS_Obs_2023a_B.temp2_f;
          }

          APF_CTL_VIS_Obs_2023a_B.temp1_c = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.temp1_tmp = 0;
               APF_CTL_VIS_Obs_2023a_B.temp1_tmp < APF_CTL_VIS_Obs_2023a_B.d_tmp;
               APF_CTL_VIS_Obs_2023a_B.temp1_tmp++) {
            APF_CTL_VIS_Obs_2023a_B.temp1_c += APF_CTL_VIS_Obs_2023a_B.b_A_p
              [(APF_CTL_VIS_Obs_2023a_B.i_i + APF_CTL_VIS_Obs_2023a_B.temp1_tmp)
              + 1] * APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.k_c +
              APF_CTL_VIS_Obs_2023a_B.temp1_tmp];
          }

          APF_CTL_VIS_Obs_2023a_B.temp1_c *= -0.5 *
            APF_CTL_VIS_Obs_2023a_B.absxk_m;
          if (!(APF_CTL_VIS_Obs_2023a_B.temp1_c == 0.0)) {
            for (APF_CTL_VIS_Obs_2023a_B.temp1_tmp = 0;
                 APF_CTL_VIS_Obs_2023a_B.temp1_tmp <
                 APF_CTL_VIS_Obs_2023a_B.d_tmp;
                 APF_CTL_VIS_Obs_2023a_B.temp1_tmp++) {
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_m = APF_CTL_VIS_Obs_2023a_B.k_c +
                APF_CTL_VIS_Obs_2023a_B.temp1_tmp;
              APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.tau_tmp_m] +=
                APF_CTL_VIS_Obs_2023a_B.b_A_p[(APF_CTL_VIS_Obs_2023a_B.i_i +
                APF_CTL_VIS_Obs_2023a_B.temp1_tmp) + 1] *
                APF_CTL_VIS_Obs_2023a_B.temp1_c;
            }
          }

          for (APF_CTL_VIS_Obs_2023a_B.tau_tmp_m = 0;
               APF_CTL_VIS_Obs_2023a_B.tau_tmp_m <=
               APF_CTL_VIS_Obs_2023a_B.ihi_a; APF_CTL_VIS_Obs_2023a_B.tau_tmp_m
               ++) {
            APF_CTL_VIS_Obs_2023a_B.temp1_tmp = APF_CTL_VIS_Obs_2023a_B.k_c +
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_m;
            APF_CTL_VIS_Obs_2023a_B.temp1_c = APF_CTL_VIS_Obs_2023a_B.b_A_p[(6 *
              APF_CTL_VIS_Obs_2023a_B.k_c + APF_CTL_VIS_Obs_2023a_B.temp1_tmp) +
              1];
            APF_CTL_VIS_Obs_2023a_B.temp2_f =
              APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.temp1_tmp];
            APF_CTL_VIS_Obs_2023a_B.tau_tmp_h = APF_CTL_VIS_Obs_2023a_B.temp2_f *
              APF_CTL_VIS_Obs_2023a_B.temp1_c;
            APF_CTL_VIS_Obs_2023a_B.b_jj_l = (APF_CTL_VIS_Obs_2023a_B.temp1_tmp
              + 1) * 6;
            APF_CTL_VIS_Obs_2023a_B.ii_j = APF_CTL_VIS_Obs_2023a_B.b_jj_l +
              APF_CTL_VIS_Obs_2023a_B.k_c;
            APF_CTL_VIS_Obs_2023a_B.b_A_p[(APF_CTL_VIS_Obs_2023a_B.temp1_tmp +
              APF_CTL_VIS_Obs_2023a_B.b_jj_l) + 1] =
              (APF_CTL_VIS_Obs_2023a_B.b_A_p[(APF_CTL_VIS_Obs_2023a_B.ii_j +
                APF_CTL_VIS_Obs_2023a_B.tau_tmp_m) + 1] -
               APF_CTL_VIS_Obs_2023a_B.tau_tmp_h) -
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_h;
            for (APF_CTL_VIS_Obs_2023a_B.temp1_tmp =
                 APF_CTL_VIS_Obs_2023a_B.tau_tmp_m + 2;
                 APF_CTL_VIS_Obs_2023a_B.temp1_tmp <=
                 APF_CTL_VIS_Obs_2023a_B.d_tmp;
                 APF_CTL_VIS_Obs_2023a_B.temp1_tmp++) {
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f =
                APF_CTL_VIS_Obs_2023a_B.k_c + APF_CTL_VIS_Obs_2023a_B.temp1_tmp;
              APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f
                + APF_CTL_VIS_Obs_2023a_B.b_jj_l] =
                (APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.ii_j +
                 APF_CTL_VIS_Obs_2023a_B.temp1_tmp] -
                 APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f
                 - 1] * APF_CTL_VIS_Obs_2023a_B.temp1_c) -
                APF_CTL_VIS_Obs_2023a_B.b_A_p[6 * APF_CTL_VIS_Obs_2023a_B.k_c +
                APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp_f] *
                APF_CTL_VIS_Obs_2023a_B.temp2_f;
            }
          }
        }

        APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.i_i + 1] =
          APF_CTL_VIS_Obs_2023a_B.e_i[APF_CTL_VIS_Obs_2023a_B.k_c];
        APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.k_c] =
          APF_CTL_VIS_Obs_2023a_B.b_A_p[APF_CTL_VIS_Obs_2023a_B.i_i];
        APF_CTL_VIS_Obs_2023a_B.tau_l[APF_CTL_VIS_Obs_2023a_B.k_c] =
          APF_CTL_VIS_Obs_2023a_B.absxk_m;
      }

      APF_CTL_VIS_Obs_2023a_B.wr_j[5] = APF_CTL_VIS_Obs_2023a_B.b_A_p[35];
      APF_CTL_VIS_Obs_2023a_B.k_c = APF_CTL_VIS_Obs_2023a_xdsterf
        (APF_CTL_VIS_Obs_2023a_B.wr_j, APF_CTL_VIS_Obs_2023a_B.e_i);
      if (APF_CTL_VIS_Obs_2023a_B.k_c != 0) {
        for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
             APF_CTL_VIS_Obs_2023a_B.i_i++) {
          APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.i_i] = (rtNaN);
        }
      } else if (APF_CTL_VIS_Obs_2023a_B.scalea_b) {
        APF_CTL_VIS_Obs_2023a_B.b_anrm = 1.0 / APF_CTL_VIS_Obs_2023a_B.b_anrm;
        for (APF_CTL_VIS_Obs_2023a_B.k_c = 0; APF_CTL_VIS_Obs_2023a_B.k_c < 6;
             APF_CTL_VIS_Obs_2023a_B.k_c++) {
          APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.k_c] *=
            APF_CTL_VIS_Obs_2023a_B.b_anrm;
        }
      }
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
         APF_CTL_VIS_Obs_2023a_B.i_i++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_i].re =
        APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.i_i];
      V[APF_CTL_VIS_Obs_2023a_B.i_i].im = 0.0;
    }
  } else if (APF_CTL_VIS_Obs_2_ishermitian_c(A)) {
    memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_p[0], &A[0], 36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_xzgehrd(APF_CTL_VIS_Obs_2023a_B.b_A_p, 1, 6);
    APF_CTL_VIS_Obs_2023a_xdlahqr(1, 6, APF_CTL_VIS_Obs_2023a_B.b_A_p,
      &APF_CTL_VIS_Obs_2023a_B.k_c, &APF_CTL_VIS_Obs_2023a_B.b_anrm,
      APF_CTL_VIS_Obs_2023a_B.wr_j, APF_CTL_VIS_Obs_2023a_B.wi_o);
    APF_CTL_VIS_Obs_2023a_B.ihi_a = static_cast<uint8_T>
      (APF_CTL_VIS_Obs_2023a_B.k_c);
    for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i <
         APF_CTL_VIS_Obs_2023a_B.ihi_a; APF_CTL_VIS_Obs_2023a_B.i_i++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_i].re = (rtNaN);
      V[APF_CTL_VIS_Obs_2023a_B.i_i].im = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_i = APF_CTL_VIS_Obs_2023a_B.k_c + 1;
         APF_CTL_VIS_Obs_2023a_B.i_i < 7; APF_CTL_VIS_Obs_2023a_B.i_i++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_i - 1].re = 0.0;
      V[APF_CTL_VIS_Obs_2023a_B.i_i - 1].im =
        APF_CTL_VIS_Obs_2023a_B.wi_o[APF_CTL_VIS_Obs_2023a_B.i_i - 1];
    }
  } else {
    memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_p[0], &A[0], 36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_B.b_anrm = 0.0;
    APF_CTL_VIS_Obs_2023a_B.k_c = 0;
    exitg1 = false;
    while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.k_c < 36)) {
      APF_CTL_VIS_Obs_2023a_B.absxk_m = fabs(A[APF_CTL_VIS_Obs_2023a_B.k_c]);
      if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.absxk_m)) {
        APF_CTL_VIS_Obs_2023a_B.b_anrm = (rtNaN);
        exitg1 = true;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.absxk_m > APF_CTL_VIS_Obs_2023a_B.b_anrm) {
          APF_CTL_VIS_Obs_2023a_B.b_anrm = APF_CTL_VIS_Obs_2023a_B.absxk_m;
        }

        APF_CTL_VIS_Obs_2023a_B.k_c++;
      }
    }

    if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.b_anrm) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.b_anrm)) {
      for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
           APF_CTL_VIS_Obs_2023a_B.i_i++) {
        V[APF_CTL_VIS_Obs_2023a_B.i_i].re = (rtNaN);
        V[APF_CTL_VIS_Obs_2023a_B.i_i].im = 0.0;
      }
    } else {
      APF_CTL_VIS_Obs_2023a_B.absxk_m = APF_CTL_VIS_Obs_2023a_B.b_anrm;
      APF_CTL_VIS_Obs_2023a_B.scalea_b = false;
      if ((APF_CTL_VIS_Obs_2023a_B.b_anrm > 0.0) &&
          (APF_CTL_VIS_Obs_2023a_B.b_anrm < 6.7178761075670888E-139)) {
        APF_CTL_VIS_Obs_2023a_B.scalea_b = true;
        APF_CTL_VIS_Obs_2023a_B.absxk_m = 6.7178761075670888E-139;
        APF_CTL_VIS_Obs_2023a_xzlascl(APF_CTL_VIS_Obs_2023a_B.b_anrm,
          APF_CTL_VIS_Obs_2023a_B.absxk_m, APF_CTL_VIS_Obs_2023a_B.b_A_p);
      } else if (APF_CTL_VIS_Obs_2023a_B.b_anrm > 1.4885657073574029E+138) {
        APF_CTL_VIS_Obs_2023a_B.scalea_b = true;
        APF_CTL_VIS_Obs_2023a_B.absxk_m = 1.4885657073574029E+138;
        APF_CTL_VIS_Obs_2023a_xzlascl(APF_CTL_VIS_Obs_2023a_B.b_anrm,
          APF_CTL_VIS_Obs_2023a_B.absxk_m, APF_CTL_VIS_Obs_2023a_B.b_A_p);
      }

      APF_CTL_VIS_Obs_2023a_xzgebal(APF_CTL_VIS_Obs_2023a_B.b_A_p,
        &APF_CTL_VIS_Obs_2023a_B.k_c, &APF_CTL_VIS_Obs_2023a_B.ihi_a,
        APF_CTL_VIS_Obs_2023a_B.wr_j);
      APF_CTL_VIS_Obs_2023a_xzgehrd(APF_CTL_VIS_Obs_2023a_B.b_A_p,
        APF_CTL_VIS_Obs_2023a_B.k_c, APF_CTL_VIS_Obs_2023a_B.ihi_a);
      APF_CTL_VIS_Obs_2023a_xdlahqr(APF_CTL_VIS_Obs_2023a_B.k_c,
        APF_CTL_VIS_Obs_2023a_B.ihi_a, APF_CTL_VIS_Obs_2023a_B.b_A_p,
        &APF_CTL_VIS_Obs_2023a_B.i_i, &APF_CTL_VIS_Obs_2023a_B.temp1_c,
        APF_CTL_VIS_Obs_2023a_B.wr_j, APF_CTL_VIS_Obs_2023a_B.wi_o);
      if (APF_CTL_VIS_Obs_2023a_B.scalea_b) {
        APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk_m,
          APF_CTL_VIS_Obs_2023a_B.b_anrm, 6 - APF_CTL_VIS_Obs_2023a_B.i_i,
          APF_CTL_VIS_Obs_2023a_B.wr_j, APF_CTL_VIS_Obs_2023a_B.i_i + 1);
        APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk_m,
          APF_CTL_VIS_Obs_2023a_B.b_anrm, 6 - APF_CTL_VIS_Obs_2023a_B.i_i,
          APF_CTL_VIS_Obs_2023a_B.wi_o, APF_CTL_VIS_Obs_2023a_B.i_i + 1);
        if (APF_CTL_VIS_Obs_2023a_B.i_i != 0) {
          APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk_m,
            APF_CTL_VIS_Obs_2023a_B.b_anrm, APF_CTL_VIS_Obs_2023a_B.k_c - 1,
            APF_CTL_VIS_Obs_2023a_B.wr_j, 1);
          APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk_m,
            APF_CTL_VIS_Obs_2023a_B.b_anrm, APF_CTL_VIS_Obs_2023a_B.k_c - 1,
            APF_CTL_VIS_Obs_2023a_B.wi_o, 1);
        }
      }

      if (APF_CTL_VIS_Obs_2023a_B.i_i != 0) {
        for (APF_CTL_VIS_Obs_2023a_B.ihi_a = APF_CTL_VIS_Obs_2023a_B.k_c;
             APF_CTL_VIS_Obs_2023a_B.ihi_a <= APF_CTL_VIS_Obs_2023a_B.i_i;
             APF_CTL_VIS_Obs_2023a_B.ihi_a++) {
          APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.ihi_a - 1] =
            (rtNaN);
          APF_CTL_VIS_Obs_2023a_B.wi_o[APF_CTL_VIS_Obs_2023a_B.ihi_a - 1] = 0.0;
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.i_i = 0; APF_CTL_VIS_Obs_2023a_B.i_i < 6;
           APF_CTL_VIS_Obs_2023a_B.i_i++) {
        V[APF_CTL_VIS_Obs_2023a_B.i_i].re =
          APF_CTL_VIS_Obs_2023a_B.wr_j[APF_CTL_VIS_Obs_2023a_B.i_i];
        V[APF_CTL_VIS_Obs_2023a_B.i_i].im =
          APF_CTL_VIS_Obs_2023a_B.wi_o[APF_CTL_VIS_Obs_2023a_B.i_i];
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzgehrd_j(real_T a[36], int32_T ilo, int32_T
  ihi, real_T tau[5])
{
  if ((ihi - ilo) + 1 > 1) {
    APF_CTL_VIS_Obs_2023a_B.b_n = static_cast<uint8_T>(ilo - 1);
    if (APF_CTL_VIS_Obs_2023a_B.b_n - 1 >= 0) {
      memset(&tau[0], 0, static_cast<uint32_T>(APF_CTL_VIS_Obs_2023a_B.b_n) *
             sizeof(real_T));
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_jz = ihi; APF_CTL_VIS_Obs_2023a_B.i_jz < 6;
         APF_CTL_VIS_Obs_2023a_B.i_jz++) {
      tau[APF_CTL_VIS_Obs_2023a_B.i_jz - 1] = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_jz = 0; APF_CTL_VIS_Obs_2023a_B.i_jz < 6;
         APF_CTL_VIS_Obs_2023a_B.i_jz++) {
      APF_CTL_VIS_Obs_2023a_B.work_h[APF_CTL_VIS_Obs_2023a_B.i_jz] = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_jz = ilo; APF_CTL_VIS_Obs_2023a_B.i_jz < ihi;
         APF_CTL_VIS_Obs_2023a_B.i_jz++) {
      APF_CTL_VIS_Obs_2023a_B.b_n = (APF_CTL_VIS_Obs_2023a_B.i_jz - 1) * 6;
      APF_CTL_VIS_Obs_2023a_B.in_p = APF_CTL_VIS_Obs_2023a_B.i_jz * 6 + 1;
      APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b = APF_CTL_VIS_Obs_2023a_B.b_n +
        APF_CTL_VIS_Obs_2023a_B.i_jz;
      APF_CTL_VIS_Obs_2023a_B.alpha1_o =
        a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b];
      if (APF_CTL_VIS_Obs_2023a_B.i_jz + 2 <= 6) {
        APF_CTL_VIS_Obs_2023a_B.i1 = APF_CTL_VIS_Obs_2023a_B.i_jz + 2;
      } else {
        APF_CTL_VIS_Obs_2023a_B.i1 = 6;
      }

      APF_CTL_VIS_Obs_2023a_B.tau_tmp_ot = ihi - APF_CTL_VIS_Obs_2023a_B.i_jz;
      APF_CTL_VIS_Obs_2023a_B.tau_j = APF_CTL_VIS_Obs_2023a_xzlarfg
        (APF_CTL_VIS_Obs_2023a_B.tau_tmp_ot, &APF_CTL_VIS_Obs_2023a_B.alpha1_o,
         a, APF_CTL_VIS_Obs_2023a_B.b_n + APF_CTL_VIS_Obs_2023a_B.i1);
      tau[APF_CTL_VIS_Obs_2023a_B.i_jz - 1] = APF_CTL_VIS_Obs_2023a_B.tau_j;
      a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b] = 1.0;
      APF_CTL_VIS_Obs_2023a_xzlarf(ihi, APF_CTL_VIS_Obs_2023a_B.tau_tmp_ot,
        APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b + 1,
        APF_CTL_VIS_Obs_2023a_B.tau_j, a, APF_CTL_VIS_Obs_2023a_B.in_p,
        APF_CTL_VIS_Obs_2023a_B.work_h);
      APF_CTL_VIS_Obs_2023a_xzlarf_g(APF_CTL_VIS_Obs_2023a_B.tau_tmp_ot, 6 -
        APF_CTL_VIS_Obs_2023a_B.i_jz, APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b +
        1, APF_CTL_VIS_Obs_2023a_B.tau_j, a, APF_CTL_VIS_Obs_2023a_B.i_jz +
        APF_CTL_VIS_Obs_2023a_B.in_p, APF_CTL_VIS_Obs_2023a_B.work_h);
      a[APF_CTL_VIS_Obs_2023a_B.alpha1_tmp_tmp_b] =
        APF_CTL_VIS_Obs_2023a_B.alpha1_o;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzunghr(int32_T ilo, int32_T ihi, real_T A[36],
  const real_T tau[5])
{
  APF_CTL_VIS_Obs_2023a_B.nh = ihi - ilo;
  for (APF_CTL_VIS_Obs_2023a_B.itau = ihi; APF_CTL_VIS_Obs_2023a_B.itau >= ilo +
       1; APF_CTL_VIS_Obs_2023a_B.itau--) {
    APF_CTL_VIS_Obs_2023a_B.ia = (APF_CTL_VIS_Obs_2023a_B.itau - 1) * 6;
    APF_CTL_VIS_Obs_2023a_B.b_ia = static_cast<uint8_T>
      (APF_CTL_VIS_Obs_2023a_B.itau - 1);
    memset(&A[APF_CTL_VIS_Obs_2023a_B.ia], 0, static_cast<uint32_T>
           ((APF_CTL_VIS_Obs_2023a_B.b_ia + APF_CTL_VIS_Obs_2023a_B.ia) -
            APF_CTL_VIS_Obs_2023a_B.ia) * sizeof(real_T));
    for (APF_CTL_VIS_Obs_2023a_B.f_i = APF_CTL_VIS_Obs_2023a_B.itau + 1;
         APF_CTL_VIS_Obs_2023a_B.f_i <= ihi; APF_CTL_VIS_Obs_2023a_B.f_i++) {
      APF_CTL_VIS_Obs_2023a_B.k_n = APF_CTL_VIS_Obs_2023a_B.ia +
        APF_CTL_VIS_Obs_2023a_B.f_i;
      A[APF_CTL_VIS_Obs_2023a_B.k_n - 1] = A[APF_CTL_VIS_Obs_2023a_B.k_n - 7];
    }

    if (ihi + 1 <= 6) {
      memset(&A[ihi + APF_CTL_VIS_Obs_2023a_B.ia], 0, static_cast<uint32_T>
             (((APF_CTL_VIS_Obs_2023a_B.ia - ihi) - APF_CTL_VIS_Obs_2023a_B.ia)
              + 6) * sizeof(real_T));
    }
  }

  APF_CTL_VIS_Obs_2023a_B.b_ia = static_cast<uint8_T>(ilo);
  for (APF_CTL_VIS_Obs_2023a_B.itau = 0; APF_CTL_VIS_Obs_2023a_B.itau <
       APF_CTL_VIS_Obs_2023a_B.b_ia; APF_CTL_VIS_Obs_2023a_B.itau++) {
    APF_CTL_VIS_Obs_2023a_B.ia = APF_CTL_VIS_Obs_2023a_B.itau * 6;
    for (APF_CTL_VIS_Obs_2023a_B.f_i = 0; APF_CTL_VIS_Obs_2023a_B.f_i < 6;
         APF_CTL_VIS_Obs_2023a_B.f_i++) {
      A[APF_CTL_VIS_Obs_2023a_B.ia + APF_CTL_VIS_Obs_2023a_B.f_i] = 0.0;
    }

    A[APF_CTL_VIS_Obs_2023a_B.ia + APF_CTL_VIS_Obs_2023a_B.itau] = 1.0;
  }

  for (APF_CTL_VIS_Obs_2023a_B.itau = ihi + 1; APF_CTL_VIS_Obs_2023a_B.itau < 7;
       APF_CTL_VIS_Obs_2023a_B.itau++) {
    APF_CTL_VIS_Obs_2023a_B.ia = (APF_CTL_VIS_Obs_2023a_B.itau - 1) * 6;
    for (APF_CTL_VIS_Obs_2023a_B.f_i = 0; APF_CTL_VIS_Obs_2023a_B.f_i < 6;
         APF_CTL_VIS_Obs_2023a_B.f_i++) {
      A[APF_CTL_VIS_Obs_2023a_B.ia + APF_CTL_VIS_Obs_2023a_B.f_i] = 0.0;
    }

    A[(APF_CTL_VIS_Obs_2023a_B.ia + APF_CTL_VIS_Obs_2023a_B.itau) - 1] = 1.0;
  }

  APF_CTL_VIS_Obs_2023a_B.ia = ilo * 6 + ilo;
  if (APF_CTL_VIS_Obs_2023a_B.nh >= 1) {
    for (APF_CTL_VIS_Obs_2023a_B.itau = APF_CTL_VIS_Obs_2023a_B.nh;
         APF_CTL_VIS_Obs_2023a_B.itau < APF_CTL_VIS_Obs_2023a_B.nh;
         APF_CTL_VIS_Obs_2023a_B.itau++) {
      APF_CTL_VIS_Obs_2023a_B.b_ia = APF_CTL_VIS_Obs_2023a_B.itau * 6 +
        APF_CTL_VIS_Obs_2023a_B.ia;
      memset(&A[APF_CTL_VIS_Obs_2023a_B.b_ia], 0, static_cast<uint32_T>
             ((APF_CTL_VIS_Obs_2023a_B.nh + APF_CTL_VIS_Obs_2023a_B.b_ia) -
              APF_CTL_VIS_Obs_2023a_B.b_ia) * sizeof(real_T));
      A[APF_CTL_VIS_Obs_2023a_B.b_ia + APF_CTL_VIS_Obs_2023a_B.itau] = 1.0;
    }

    APF_CTL_VIS_Obs_2023a_B.itau = (ilo + APF_CTL_VIS_Obs_2023a_B.nh) - 2;
    for (APF_CTL_VIS_Obs_2023a_B.f_i = 0; APF_CTL_VIS_Obs_2023a_B.f_i < 6;
         APF_CTL_VIS_Obs_2023a_B.f_i++) {
      APF_CTL_VIS_Obs_2023a_B.work_c[APF_CTL_VIS_Obs_2023a_B.f_i] = 0.0;
    }

    APF_CTL_VIS_Obs_2023a_B.f_i = APF_CTL_VIS_Obs_2023a_B.nh;
    while (APF_CTL_VIS_Obs_2023a_B.f_i >= 1) {
      APF_CTL_VIS_Obs_2023a_B.b_ia = ((APF_CTL_VIS_Obs_2023a_B.f_i - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.ia) + APF_CTL_VIS_Obs_2023a_B.f_i;
      if (APF_CTL_VIS_Obs_2023a_B.f_i < APF_CTL_VIS_Obs_2023a_B.nh) {
        A[APF_CTL_VIS_Obs_2023a_B.b_ia - 1] = 1.0;
        APF_CTL_VIS_Obs_2023a_B.k_n = APF_CTL_VIS_Obs_2023a_B.nh -
          APF_CTL_VIS_Obs_2023a_B.f_i;
        APF_CTL_VIS_Obs_2023a_xzlarf_g(APF_CTL_VIS_Obs_2023a_B.k_n + 1,
          APF_CTL_VIS_Obs_2023a_B.k_n, APF_CTL_VIS_Obs_2023a_B.b_ia,
          tau[APF_CTL_VIS_Obs_2023a_B.itau], A, APF_CTL_VIS_Obs_2023a_B.b_ia + 6,
          APF_CTL_VIS_Obs_2023a_B.work_c);
        APF_CTL_VIS_Obs_2023a_B.e_i4 = (APF_CTL_VIS_Obs_2023a_B.b_ia +
          APF_CTL_VIS_Obs_2023a_B.nh) - APF_CTL_VIS_Obs_2023a_B.f_i;
        for (APF_CTL_VIS_Obs_2023a_B.k_n = APF_CTL_VIS_Obs_2023a_B.b_ia + 1;
             APF_CTL_VIS_Obs_2023a_B.k_n <= APF_CTL_VIS_Obs_2023a_B.e_i4;
             APF_CTL_VIS_Obs_2023a_B.k_n++) {
          A[APF_CTL_VIS_Obs_2023a_B.k_n - 1] *=
            -tau[APF_CTL_VIS_Obs_2023a_B.itau];
        }
      }

      A[APF_CTL_VIS_Obs_2023a_B.b_ia - 1] = 1.0 -
        tau[APF_CTL_VIS_Obs_2023a_B.itau];
      APF_CTL_VIS_Obs_2023a_B.e_i4 = static_cast<uint8_T>
        (APF_CTL_VIS_Obs_2023a_B.f_i - 1);
      for (APF_CTL_VIS_Obs_2023a_B.k_n = 0; APF_CTL_VIS_Obs_2023a_B.k_n <
           APF_CTL_VIS_Obs_2023a_B.e_i4; APF_CTL_VIS_Obs_2023a_B.k_n++) {
        A[(APF_CTL_VIS_Obs_2023a_B.b_ia - APF_CTL_VIS_Obs_2023a_B.k_n) - 2] =
          0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.itau--;
      APF_CTL_VIS_Obs_2023a_B.f_i--;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlahqr_p(int32_T ilo, int32_T ihi, real_T h
  [36], int32_T iloz, int32_T ihiz, real_T z[36], int32_T *info, real_T wr[6],
  real_T wi[6])
{
  boolean_T exitg1;
  boolean_T exitg2;
  boolean_T exitg3;
  *info = 0;
  APF_CTL_VIS_Obs_2023a_B.l_h = static_cast<uint8_T>(ilo - 1);
  for (APF_CTL_VIS_Obs_2023a_B.nz = 0; APF_CTL_VIS_Obs_2023a_B.nz <
       APF_CTL_VIS_Obs_2023a_B.l_h; APF_CTL_VIS_Obs_2023a_B.nz++) {
    wr[APF_CTL_VIS_Obs_2023a_B.nz] = h[6 * APF_CTL_VIS_Obs_2023a_B.nz +
      APF_CTL_VIS_Obs_2023a_B.nz];
    wi[APF_CTL_VIS_Obs_2023a_B.nz] = 0.0;
  }

  for (APF_CTL_VIS_Obs_2023a_B.nz = ihi + 1; APF_CTL_VIS_Obs_2023a_B.nz < 7;
       APF_CTL_VIS_Obs_2023a_B.nz++) {
    wr[APF_CTL_VIS_Obs_2023a_B.nz - 1] = h[((APF_CTL_VIS_Obs_2023a_B.nz - 1) * 6
      + APF_CTL_VIS_Obs_2023a_B.nz) - 1];
    wi[APF_CTL_VIS_Obs_2023a_B.nz - 1] = 0.0;
  }

  if (ilo == ihi) {
    wr[ilo - 1] = h[((ilo - 1) * 6 + ilo) - 1];
    wi[ilo - 1] = 0.0;
  } else {
    for (APF_CTL_VIS_Obs_2023a_B.nz = ilo; APF_CTL_VIS_Obs_2023a_B.nz <= ihi - 3;
         APF_CTL_VIS_Obs_2023a_B.nz++) {
      APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.nz - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.nz;
      h[APF_CTL_VIS_Obs_2023a_B.d_k_p + 1] = 0.0;
      h[APF_CTL_VIS_Obs_2023a_B.d_k_p + 2] = 0.0;
    }

    if (ilo <= ihi - 2) {
      h[(ihi + 6 * (ihi - 3)) - 1] = 0.0;
    }

    APF_CTL_VIS_Obs_2023a_B.nz = (ihiz - iloz) + 1;
    APF_CTL_VIS_Obs_2023a_B.smlnum = static_cast<real_T>((ihi - ilo) + 1) /
      2.2204460492503131E-16 * 2.2250738585072014E-308;
    APF_CTL_VIS_Obs_2023a_B.kdefl_k = 0;
    APF_CTL_VIS_Obs_2023a_B.i_jk = ihi - 1;
    exitg1 = false;
    while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i_jk + 1 >= ilo)) {
      APF_CTL_VIS_Obs_2023a_B.l_h = ilo;
      APF_CTL_VIS_Obs_2023a_B.converged_d = false;
      APF_CTL_VIS_Obs_2023a_B.c_iy = 0;
      exitg2 = false;
      while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.c_iy < 301)) {
        APF_CTL_VIS_Obs_2023a_B.k_d1 = APF_CTL_VIS_Obs_2023a_B.i_jk;
        exitg3 = false;
        while ((!exitg3) && (APF_CTL_VIS_Obs_2023a_B.k_d1 + 1 >
                             APF_CTL_VIS_Obs_2023a_B.l_h)) {
          APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.k_d1 - 1) * 6
            + APF_CTL_VIS_Obs_2023a_B.k_d1;
          APF_CTL_VIS_Obs_2023a_B.h11 = fabs(h[APF_CTL_VIS_Obs_2023a_B.d_k_p]);
          if (APF_CTL_VIS_Obs_2023a_B.h11 <= APF_CTL_VIS_Obs_2023a_B.smlnum) {
            exitg3 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.b_m_j = 6 * APF_CTL_VIS_Obs_2023a_B.k_d1 +
              APF_CTL_VIS_Obs_2023a_B.k_d1;
            APF_CTL_VIS_Obs_2023a_B.tr = h[APF_CTL_VIS_Obs_2023a_B.b_m_j];
            APF_CTL_VIS_Obs_2023a_B.s_h = fabs(APF_CTL_VIS_Obs_2023a_B.tr);
            APF_CTL_VIS_Obs_2023a_B.aa_f = h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 1];
            APF_CTL_VIS_Obs_2023a_B.tst = fabs(APF_CTL_VIS_Obs_2023a_B.aa_f) +
              APF_CTL_VIS_Obs_2023a_B.s_h;
            if (APF_CTL_VIS_Obs_2023a_B.tst == 0.0) {
              if (APF_CTL_VIS_Obs_2023a_B.k_d1 - 1 >= ilo) {
                APF_CTL_VIS_Obs_2023a_B.tst = fabs(h
                  [((APF_CTL_VIS_Obs_2023a_B.k_d1 - 2) * 6 +
                    APF_CTL_VIS_Obs_2023a_B.k_d1) - 1]);
              }

              if (APF_CTL_VIS_Obs_2023a_B.k_d1 + 2 <= ihi) {
                APF_CTL_VIS_Obs_2023a_B.tst += fabs
                  (h[APF_CTL_VIS_Obs_2023a_B.b_m_j + 1]);
              }
            }

            if (APF_CTL_VIS_Obs_2023a_B.h11 <= 2.2204460492503131E-16 *
                APF_CTL_VIS_Obs_2023a_B.tst) {
              APF_CTL_VIS_Obs_2023a_B.tst = fabs(APF_CTL_VIS_Obs_2023a_B.aa_f -
                APF_CTL_VIS_Obs_2023a_B.tr);
              APF_CTL_VIS_Obs_2023a_B.b2 = rtIsNaN(APF_CTL_VIS_Obs_2023a_B.tst);
              if ((APF_CTL_VIS_Obs_2023a_B.s_h >= APF_CTL_VIS_Obs_2023a_B.tst) ||
                  APF_CTL_VIS_Obs_2023a_B.b2) {
                APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.s_h;
              } else {
                APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.tst;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.s_h <= APF_CTL_VIS_Obs_2023a_B.tst) ||
                  APF_CTL_VIS_Obs_2023a_B.b2) {
                APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.s_h;
              }

              APF_CTL_VIS_Obs_2023a_B.s_h = APF_CTL_VIS_Obs_2023a_B.aa_f +
                APF_CTL_VIS_Obs_2023a_B.tst;
              APF_CTL_VIS_Obs_2023a_B.tr = fabs(h[APF_CTL_VIS_Obs_2023a_B.b_m_j
                - 1]);
              APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.aa_f /
                APF_CTL_VIS_Obs_2023a_B.s_h * APF_CTL_VIS_Obs_2023a_B.tst *
                2.2204460492503131E-16;
              APF_CTL_VIS_Obs_2023a_B.b2 = rtIsNaN(APF_CTL_VIS_Obs_2023a_B.tr);
              if ((APF_CTL_VIS_Obs_2023a_B.h11 <= APF_CTL_VIS_Obs_2023a_B.tr) ||
                  APF_CTL_VIS_Obs_2023a_B.b2) {
                APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.h11;
              } else {
                APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.tr;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.h11 >= APF_CTL_VIS_Obs_2023a_B.tr) ||
                  APF_CTL_VIS_Obs_2023a_B.b2) {
                APF_CTL_VIS_Obs_2023a_B.tr = APF_CTL_VIS_Obs_2023a_B.h11;
              }

              if ((APF_CTL_VIS_Obs_2023a_B.smlnum >=
                   APF_CTL_VIS_Obs_2023a_B.aa_f) || rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.aa_f)) {
                APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.smlnum;
              }

              if (APF_CTL_VIS_Obs_2023a_B.tr / APF_CTL_VIS_Obs_2023a_B.s_h *
                  APF_CTL_VIS_Obs_2023a_B.tst <= APF_CTL_VIS_Obs_2023a_B.aa_f) {
                exitg3 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_B.k_d1--;
              }
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_d1--;
            }
          }
        }

        APF_CTL_VIS_Obs_2023a_B.l_h = APF_CTL_VIS_Obs_2023a_B.k_d1 + 1;
        if (APF_CTL_VIS_Obs_2023a_B.k_d1 + 1 > ilo) {
          h[APF_CTL_VIS_Obs_2023a_B.k_d1 + 6 * (APF_CTL_VIS_Obs_2023a_B.k_d1 - 1)]
            = 0.0;
        }

        if (APF_CTL_VIS_Obs_2023a_B.k_d1 + 1 >= APF_CTL_VIS_Obs_2023a_B.i_jk) {
          APF_CTL_VIS_Obs_2023a_B.converged_d = true;
          exitg2 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.kdefl_k++;
          if (APF_CTL_VIS_Obs_2023a_B.kdefl_k - APF_CTL_VIS_Obs_2023a_B.kdefl_k /
              20 * 20 == 0) {
            APF_CTL_VIS_Obs_2023a_B.s_h = fabs(h[((APF_CTL_VIS_Obs_2023a_B.i_jk
              - 2) * 6 + APF_CTL_VIS_Obs_2023a_B.i_jk) - 1]) + fabs(h
              [(APF_CTL_VIS_Obs_2023a_B.i_jk - 1) * 6 +
              APF_CTL_VIS_Obs_2023a_B.i_jk]);
            APF_CTL_VIS_Obs_2023a_B.h11 = h[6 * APF_CTL_VIS_Obs_2023a_B.i_jk +
              APF_CTL_VIS_Obs_2023a_B.i_jk] + 0.75 * APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.h12 = -0.4375 * APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.h11;
          } else if (APF_CTL_VIS_Obs_2023a_B.kdefl_k -
                     APF_CTL_VIS_Obs_2023a_B.kdefl_k / 10 * 10 == 0) {
            APF_CTL_VIS_Obs_2023a_B.s_tmp_p = 6 * APF_CTL_VIS_Obs_2023a_B.k_d1 +
              APF_CTL_VIS_Obs_2023a_B.k_d1;
            APF_CTL_VIS_Obs_2023a_B.s_h = fabs(h[((APF_CTL_VIS_Obs_2023a_B.k_d1
              + 1) * 6 + APF_CTL_VIS_Obs_2023a_B.k_d1) + 2]) + fabs
              (h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p + 1]);
            APF_CTL_VIS_Obs_2023a_B.h11 = 0.75 * APF_CTL_VIS_Obs_2023a_B.s_h +
              h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
            APF_CTL_VIS_Obs_2023a_B.h12 = -0.4375 * APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.h11;
          } else {
            APF_CTL_VIS_Obs_2023a_B.b_m_j = (APF_CTL_VIS_Obs_2023a_B.i_jk - 1) *
              6 + APF_CTL_VIS_Obs_2023a_B.i_jk;
            APF_CTL_VIS_Obs_2023a_B.h11 = h[APF_CTL_VIS_Obs_2023a_B.b_m_j - 1];
            APF_CTL_VIS_Obs_2023a_B.tst = h[APF_CTL_VIS_Obs_2023a_B.b_m_j];
            APF_CTL_VIS_Obs_2023a_B.b_m_j = 6 * APF_CTL_VIS_Obs_2023a_B.i_jk +
              APF_CTL_VIS_Obs_2023a_B.i_jk;
            APF_CTL_VIS_Obs_2023a_B.h12 = h[APF_CTL_VIS_Obs_2023a_B.b_m_j - 1];
            APF_CTL_VIS_Obs_2023a_B.aa_f = h[APF_CTL_VIS_Obs_2023a_B.b_m_j];
          }

          APF_CTL_VIS_Obs_2023a_B.s_h = ((fabs(APF_CTL_VIS_Obs_2023a_B.h11) +
            fabs(APF_CTL_VIS_Obs_2023a_B.h12)) + fabs
            (APF_CTL_VIS_Obs_2023a_B.tst)) + fabs(APF_CTL_VIS_Obs_2023a_B.aa_f);
          if (APF_CTL_VIS_Obs_2023a_B.s_h == 0.0) {
            APF_CTL_VIS_Obs_2023a_B.h11 = 0.0;
            APF_CTL_VIS_Obs_2023a_B.aa_f = 0.0;
            APF_CTL_VIS_Obs_2023a_B.tr = 0.0;
            APF_CTL_VIS_Obs_2023a_B.tst = 0.0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.h11 /= APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.aa_f /= APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.tr = (APF_CTL_VIS_Obs_2023a_B.h11 +
              APF_CTL_VIS_Obs_2023a_B.aa_f) / 2.0;
            APF_CTL_VIS_Obs_2023a_B.h11 = (APF_CTL_VIS_Obs_2023a_B.h11 -
              APF_CTL_VIS_Obs_2023a_B.tr) * (APF_CTL_VIS_Obs_2023a_B.aa_f -
              APF_CTL_VIS_Obs_2023a_B.tr) - APF_CTL_VIS_Obs_2023a_B.h12 /
              APF_CTL_VIS_Obs_2023a_B.s_h * (APF_CTL_VIS_Obs_2023a_B.tst /
              APF_CTL_VIS_Obs_2023a_B.s_h);
            APF_CTL_VIS_Obs_2023a_B.tst = sqrt(fabs(APF_CTL_VIS_Obs_2023a_B.h11));
            if (APF_CTL_VIS_Obs_2023a_B.h11 >= 0.0) {
              APF_CTL_VIS_Obs_2023a_B.h11 = APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.s_h;
              APF_CTL_VIS_Obs_2023a_B.tr = APF_CTL_VIS_Obs_2023a_B.h11;
              APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.tst *
                APF_CTL_VIS_Obs_2023a_B.s_h;
              APF_CTL_VIS_Obs_2023a_B.tst = -APF_CTL_VIS_Obs_2023a_B.aa_f;
            } else {
              APF_CTL_VIS_Obs_2023a_B.h11 = APF_CTL_VIS_Obs_2023a_B.tr +
                APF_CTL_VIS_Obs_2023a_B.tst;
              APF_CTL_VIS_Obs_2023a_B.tr -= APF_CTL_VIS_Obs_2023a_B.tst;
              if (fabs(APF_CTL_VIS_Obs_2023a_B.h11 -
                       APF_CTL_VIS_Obs_2023a_B.aa_f) <= fabs
                  (APF_CTL_VIS_Obs_2023a_B.tr - APF_CTL_VIS_Obs_2023a_B.aa_f)) {
                APF_CTL_VIS_Obs_2023a_B.h11 *= APF_CTL_VIS_Obs_2023a_B.s_h;
                APF_CTL_VIS_Obs_2023a_B.tr = APF_CTL_VIS_Obs_2023a_B.h11;
              } else {
                APF_CTL_VIS_Obs_2023a_B.tr *= APF_CTL_VIS_Obs_2023a_B.s_h;
                APF_CTL_VIS_Obs_2023a_B.h11 = APF_CTL_VIS_Obs_2023a_B.tr;
              }

              APF_CTL_VIS_Obs_2023a_B.aa_f = 0.0;
              APF_CTL_VIS_Obs_2023a_B.tst = 0.0;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.b_m_j = APF_CTL_VIS_Obs_2023a_B.i_jk - 1;
          exitg3 = false;
          while ((!exitg3) && (APF_CTL_VIS_Obs_2023a_B.b_m_j >=
                               APF_CTL_VIS_Obs_2023a_B.k_d1 + 1)) {
            APF_CTL_VIS_Obs_2023a_B.s_tmp_p = (APF_CTL_VIS_Obs_2023a_B.b_m_j - 1)
              * 6 + APF_CTL_VIS_Obs_2023a_B.b_m_j;
            APF_CTL_VIS_Obs_2023a_B.h21s = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
            APF_CTL_VIS_Obs_2023a_B.h12 = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p - 1];
            APF_CTL_VIS_Obs_2023a_B.s_tmp = APF_CTL_VIS_Obs_2023a_B.h12 -
              APF_CTL_VIS_Obs_2023a_B.tr;
            APF_CTL_VIS_Obs_2023a_B.s_h = (fabs(APF_CTL_VIS_Obs_2023a_B.s_tmp) +
              fabs(APF_CTL_VIS_Obs_2023a_B.tst)) + fabs
              (APF_CTL_VIS_Obs_2023a_B.h21s);
            APF_CTL_VIS_Obs_2023a_B.h21s /= APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.s_tmp_p = 6 * APF_CTL_VIS_Obs_2023a_B.b_m_j
              + APF_CTL_VIS_Obs_2023a_B.b_m_j;
            APF_CTL_VIS_Obs_2023a_B.v_c[0] = (APF_CTL_VIS_Obs_2023a_B.s_tmp /
              APF_CTL_VIS_Obs_2023a_B.s_h * APF_CTL_VIS_Obs_2023a_B.s_tmp +
              h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p - 1] *
              APF_CTL_VIS_Obs_2023a_B.h21s) - APF_CTL_VIS_Obs_2023a_B.tst /
              APF_CTL_VIS_Obs_2023a_B.s_h * APF_CTL_VIS_Obs_2023a_B.aa_f;
            APF_CTL_VIS_Obs_2023a_B.s_tmp = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
            APF_CTL_VIS_Obs_2023a_B.v_c[1] = (((APF_CTL_VIS_Obs_2023a_B.h12 +
              APF_CTL_VIS_Obs_2023a_B.s_tmp) - APF_CTL_VIS_Obs_2023a_B.h11) -
              APF_CTL_VIS_Obs_2023a_B.tr) * APF_CTL_VIS_Obs_2023a_B.h21s;
            APF_CTL_VIS_Obs_2023a_B.v_c[2] = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p +
              1] * APF_CTL_VIS_Obs_2023a_B.h21s;
            APF_CTL_VIS_Obs_2023a_B.s_h = (fabs(APF_CTL_VIS_Obs_2023a_B.v_c[0])
              + fabs(APF_CTL_VIS_Obs_2023a_B.v_c[1])) + fabs
              (APF_CTL_VIS_Obs_2023a_B.v_c[2]);
            APF_CTL_VIS_Obs_2023a_B.v_c[0] /= APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.v_c[1] /= APF_CTL_VIS_Obs_2023a_B.s_h;
            APF_CTL_VIS_Obs_2023a_B.v_c[2] /= APF_CTL_VIS_Obs_2023a_B.s_h;
            if (APF_CTL_VIS_Obs_2023a_B.k_d1 + 1 ==
                APF_CTL_VIS_Obs_2023a_B.b_m_j) {
              exitg3 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.b_m_j - 2)
                * 6 + APF_CTL_VIS_Obs_2023a_B.b_m_j;
              if (fabs(h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 1]) * (fabs
                   (APF_CTL_VIS_Obs_2023a_B.v_c[1]) + fabs
                   (APF_CTL_VIS_Obs_2023a_B.v_c[2])) <= ((fabs
                    (h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 2]) + fabs
                    (APF_CTL_VIS_Obs_2023a_B.h12)) + fabs
                   (APF_CTL_VIS_Obs_2023a_B.s_tmp)) * (2.2204460492503131E-16 *
                   fabs(APF_CTL_VIS_Obs_2023a_B.v_c[0]))) {
                exitg3 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_B.b_m_j--;
              }
            }
          }

          for (APF_CTL_VIS_Obs_2023a_B.s_tmp_p = APF_CTL_VIS_Obs_2023a_B.b_m_j;
               APF_CTL_VIS_Obs_2023a_B.s_tmp_p <= APF_CTL_VIS_Obs_2023a_B.i_jk;
               APF_CTL_VIS_Obs_2023a_B.s_tmp_p++) {
            APF_CTL_VIS_Obs_2023a_B.nr_n = (APF_CTL_VIS_Obs_2023a_B.i_jk -
              APF_CTL_VIS_Obs_2023a_B.s_tmp_p) + 2;
            if (APF_CTL_VIS_Obs_2023a_B.nr_n >= 3) {
              APF_CTL_VIS_Obs_2023a_B.nr_n = 3;
            }

            if (APF_CTL_VIS_Obs_2023a_B.s_tmp_p > APF_CTL_VIS_Obs_2023a_B.b_m_j)
            {
              APF_CTL_VIS_Obs_2023a_B.ix0_l = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                - 2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_p) - 1;
              for (APF_CTL_VIS_Obs_2023a_B.d_k_p = 0;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p < APF_CTL_VIS_Obs_2023a_B.nr_n;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p++) {
                APF_CTL_VIS_Obs_2023a_B.v_c[APF_CTL_VIS_Obs_2023a_B.d_k_p] =
                  h[APF_CTL_VIS_Obs_2023a_B.ix0_l +
                  APF_CTL_VIS_Obs_2023a_B.d_k_p];
              }
            }

            APF_CTL_VIS_Obs_2023a_B.h11 = APF_CTL_VIS_Obs_2023a_B.v_c[0];
            APF_CTL_VIS_Obs_2023a_B.s_h = APF_CTL_VIS_Obs_2023a_xzlarfg_l
              (APF_CTL_VIS_Obs_2023a_B.nr_n, &APF_CTL_VIS_Obs_2023a_B.h11,
               APF_CTL_VIS_Obs_2023a_B.v_c);
            if (APF_CTL_VIS_Obs_2023a_B.s_tmp_p > APF_CTL_VIS_Obs_2023a_B.b_m_j)
            {
              APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.s_tmp_p -
                2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_p;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 1] = APF_CTL_VIS_Obs_2023a_B.h11;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = 0.0;
              if (APF_CTL_VIS_Obs_2023a_B.s_tmp_p < APF_CTL_VIS_Obs_2023a_B.i_jk)
              {
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p + 1] = 0.0;
              }
            } else if (APF_CTL_VIS_Obs_2023a_B.b_m_j >
                       APF_CTL_VIS_Obs_2023a_B.k_d1 + 1) {
              APF_CTL_VIS_Obs_2023a_B.d_k_p = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                - 2) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_p) - 1;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_p] *= 1.0 -
                APF_CTL_VIS_Obs_2023a_B.s_h;
            }

            APF_CTL_VIS_Obs_2023a_B.h11 = APF_CTL_VIS_Obs_2023a_B.v_c[1];
            APF_CTL_VIS_Obs_2023a_B.tr = APF_CTL_VIS_Obs_2023a_B.s_h *
              APF_CTL_VIS_Obs_2023a_B.v_c[1];
            switch (APF_CTL_VIS_Obs_2023a_B.nr_n) {
             case 3:
              APF_CTL_VIS_Obs_2023a_B.aa_f = APF_CTL_VIS_Obs_2023a_B.v_c[2];
              APF_CTL_VIS_Obs_2023a_B.tst = APF_CTL_VIS_Obs_2023a_B.s_h *
                APF_CTL_VIS_Obs_2023a_B.v_c[2];
              for (APF_CTL_VIS_Obs_2023a_B.nr_n =
                   APF_CTL_VIS_Obs_2023a_B.s_tmp_p; APF_CTL_VIS_Obs_2023a_B.nr_n
                   < 7; APF_CTL_VIS_Obs_2023a_B.nr_n++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.nr_n -
                  1) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_p;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = h[APF_CTL_VIS_Obs_2023a_B.d_k_p
                  - 1];
                APF_CTL_VIS_Obs_2023a_B.h21s = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
                APF_CTL_VIS_Obs_2023a_B.h = h[APF_CTL_VIS_Obs_2023a_B.d_k_p + 1];
                APF_CTL_VIS_Obs_2023a_B.h12 = (APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp)
                  + APF_CTL_VIS_Obs_2023a_B.aa_f * APF_CTL_VIS_Obs_2023a_B.h;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 1] =
                  APF_CTL_VIS_Obs_2023a_B.s_tmp - APF_CTL_VIS_Obs_2023a_B.h12 *
                  APF_CTL_VIS_Obs_2023a_B.s_h;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p + 1] = APF_CTL_VIS_Obs_2023a_B.h
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tst;
              }

              if (APF_CTL_VIS_Obs_2023a_B.s_tmp_p + 3 <=
                  APF_CTL_VIS_Obs_2023a_B.i_jk + 1) {
                APF_CTL_VIS_Obs_2023a_B.n_j = static_cast<uint8_T>
                  (APF_CTL_VIS_Obs_2023a_B.s_tmp_p + 3);
              } else {
                APF_CTL_VIS_Obs_2023a_B.n_j = static_cast<uint8_T>
                  (APF_CTL_VIS_Obs_2023a_B.i_jk + 1);
              }

              for (APF_CTL_VIS_Obs_2023a_B.nr_n = 0;
                   APF_CTL_VIS_Obs_2023a_B.nr_n < APF_CTL_VIS_Obs_2023a_B.n_j;
                   APF_CTL_VIS_Obs_2023a_B.nr_n++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                  - 1) * 6 + APF_CTL_VIS_Obs_2023a_B.nr_n;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
                APF_CTL_VIS_Obs_2023a_B.ix0_l = 6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_p + APF_CTL_VIS_Obs_2023a_B.nr_n;
                APF_CTL_VIS_Obs_2023a_B.h21s = h[APF_CTL_VIS_Obs_2023a_B.ix0_l];
                APF_CTL_VIS_Obs_2023a_B.h_tmp_l =
                  (APF_CTL_VIS_Obs_2023a_B.s_tmp_p + 1) * 6 +
                  APF_CTL_VIS_Obs_2023a_B.nr_n;
                APF_CTL_VIS_Obs_2023a_B.h = h[APF_CTL_VIS_Obs_2023a_B.h_tmp_l];
                APF_CTL_VIS_Obs_2023a_B.h12 = (APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp)
                  + APF_CTL_VIS_Obs_2023a_B.aa_f * APF_CTL_VIS_Obs_2023a_B.h;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.s_tmp
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.s_h;
                h[APF_CTL_VIS_Obs_2023a_B.ix0_l] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
                h[APF_CTL_VIS_Obs_2023a_B.h_tmp_l] = APF_CTL_VIS_Obs_2023a_B.h -
                  APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tst;
              }

              for (APF_CTL_VIS_Obs_2023a_B.d_k_p = iloz;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p <= ihiz;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p++) {
                APF_CTL_VIS_Obs_2023a_B.nr_n = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                  - 1) * 6 + APF_CTL_VIS_Obs_2023a_B.d_k_p) - 1;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = z[APF_CTL_VIS_Obs_2023a_B.nr_n];
                APF_CTL_VIS_Obs_2023a_B.ix0_l = (6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_p +
                  APF_CTL_VIS_Obs_2023a_B.d_k_p) - 1;
                APF_CTL_VIS_Obs_2023a_B.h21s = z[APF_CTL_VIS_Obs_2023a_B.ix0_l];
                APF_CTL_VIS_Obs_2023a_B.n_j = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                  + 1) * 6 + APF_CTL_VIS_Obs_2023a_B.d_k_p) - 1;
                APF_CTL_VIS_Obs_2023a_B.h = z[APF_CTL_VIS_Obs_2023a_B.n_j];
                APF_CTL_VIS_Obs_2023a_B.h12 = (APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp)
                  + APF_CTL_VIS_Obs_2023a_B.aa_f * APF_CTL_VIS_Obs_2023a_B.h;
                z[APF_CTL_VIS_Obs_2023a_B.nr_n] = APF_CTL_VIS_Obs_2023a_B.s_tmp
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.s_h;
                z[APF_CTL_VIS_Obs_2023a_B.ix0_l] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
                z[APF_CTL_VIS_Obs_2023a_B.n_j] = APF_CTL_VIS_Obs_2023a_B.h -
                  APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tst;
              }
              break;

             case 2:
              for (APF_CTL_VIS_Obs_2023a_B.nr_n =
                   APF_CTL_VIS_Obs_2023a_B.s_tmp_p; APF_CTL_VIS_Obs_2023a_B.nr_n
                   < 7; APF_CTL_VIS_Obs_2023a_B.nr_n++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.nr_n -
                  1) * 6 + APF_CTL_VIS_Obs_2023a_B.s_tmp_p;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = h[APF_CTL_VIS_Obs_2023a_B.d_k_p
                  - 1];
                APF_CTL_VIS_Obs_2023a_B.h21s = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
                APF_CTL_VIS_Obs_2023a_B.h12 = APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p - 1] =
                  APF_CTL_VIS_Obs_2023a_B.s_tmp - APF_CTL_VIS_Obs_2023a_B.h12 *
                  APF_CTL_VIS_Obs_2023a_B.s_h;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
              }

              APF_CTL_VIS_Obs_2023a_B.n_j = static_cast<uint8_T>
                (APF_CTL_VIS_Obs_2023a_B.i_jk + 1);
              for (APF_CTL_VIS_Obs_2023a_B.nr_n = 0;
                   APF_CTL_VIS_Obs_2023a_B.nr_n < APF_CTL_VIS_Obs_2023a_B.n_j;
                   APF_CTL_VIS_Obs_2023a_B.nr_n++) {
                APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                  - 1) * 6 + APF_CTL_VIS_Obs_2023a_B.nr_n;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
                APF_CTL_VIS_Obs_2023a_B.ix0_l = 6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_p + APF_CTL_VIS_Obs_2023a_B.nr_n;
                APF_CTL_VIS_Obs_2023a_B.h21s = h[APF_CTL_VIS_Obs_2023a_B.ix0_l];
                APF_CTL_VIS_Obs_2023a_B.h12 = APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp;
                h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.s_tmp
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.s_h;
                h[APF_CTL_VIS_Obs_2023a_B.ix0_l] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
              }

              for (APF_CTL_VIS_Obs_2023a_B.d_k_p = iloz;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p <= ihiz;
                   APF_CTL_VIS_Obs_2023a_B.d_k_p++) {
                APF_CTL_VIS_Obs_2023a_B.nr_n = ((APF_CTL_VIS_Obs_2023a_B.s_tmp_p
                  - 1) * 6 + APF_CTL_VIS_Obs_2023a_B.d_k_p) - 1;
                APF_CTL_VIS_Obs_2023a_B.s_tmp = z[APF_CTL_VIS_Obs_2023a_B.nr_n];
                APF_CTL_VIS_Obs_2023a_B.ix0_l = (6 *
                  APF_CTL_VIS_Obs_2023a_B.s_tmp_p +
                  APF_CTL_VIS_Obs_2023a_B.d_k_p) - 1;
                APF_CTL_VIS_Obs_2023a_B.h21s = z[APF_CTL_VIS_Obs_2023a_B.ix0_l];
                APF_CTL_VIS_Obs_2023a_B.h12 = APF_CTL_VIS_Obs_2023a_B.h11 *
                  APF_CTL_VIS_Obs_2023a_B.h21s + APF_CTL_VIS_Obs_2023a_B.s_tmp;
                z[APF_CTL_VIS_Obs_2023a_B.nr_n] = APF_CTL_VIS_Obs_2023a_B.s_tmp
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.s_h;
                z[APF_CTL_VIS_Obs_2023a_B.ix0_l] = APF_CTL_VIS_Obs_2023a_B.h21s
                  - APF_CTL_VIS_Obs_2023a_B.h12 * APF_CTL_VIS_Obs_2023a_B.tr;
              }
              break;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.c_iy++;
        }
      }

      if (!APF_CTL_VIS_Obs_2023a_B.converged_d) {
        *info = APF_CTL_VIS_Obs_2023a_B.i_jk + 1;
        exitg1 = true;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.i_jk + 1 == APF_CTL_VIS_Obs_2023a_B.l_h) {
          wr[APF_CTL_VIS_Obs_2023a_B.i_jk] = h[6 * APF_CTL_VIS_Obs_2023a_B.i_jk
            + APF_CTL_VIS_Obs_2023a_B.i_jk];
          wi[APF_CTL_VIS_Obs_2023a_B.i_jk] = 0.0;
        } else if (APF_CTL_VIS_Obs_2023a_B.l_h == APF_CTL_VIS_Obs_2023a_B.i_jk)
        {
          APF_CTL_VIS_Obs_2023a_B.c_iy = 6 * APF_CTL_VIS_Obs_2023a_B.i_jk +
            APF_CTL_VIS_Obs_2023a_B.i_jk;
          APF_CTL_VIS_Obs_2023a_B.tr = h[APF_CTL_VIS_Obs_2023a_B.c_iy - 1];
          APF_CTL_VIS_Obs_2023a_B.kdefl_k = (APF_CTL_VIS_Obs_2023a_B.i_jk - 1) *
            6;
          APF_CTL_VIS_Obs_2023a_B.k_d1 = APF_CTL_VIS_Obs_2023a_B.kdefl_k +
            APF_CTL_VIS_Obs_2023a_B.i_jk;
          APF_CTL_VIS_Obs_2023a_B.aa_f = h[APF_CTL_VIS_Obs_2023a_B.k_d1];
          APF_CTL_VIS_Obs_2023a_B.tst = h[APF_CTL_VIS_Obs_2023a_B.c_iy];
          APF_CTL_VIS_Obs_2023a_xdlanv2(&h[APF_CTL_VIS_Obs_2023a_B.k_d1 - 1],
            &APF_CTL_VIS_Obs_2023a_B.tr, &APF_CTL_VIS_Obs_2023a_B.aa_f,
            &APF_CTL_VIS_Obs_2023a_B.tst, &wr[APF_CTL_VIS_Obs_2023a_B.i_jk - 1],
            &wi[APF_CTL_VIS_Obs_2023a_B.i_jk - 1], &APF_CTL_VIS_Obs_2023a_B.h12,
            &APF_CTL_VIS_Obs_2023a_B.s_tmp, &APF_CTL_VIS_Obs_2023a_B.s_h,
            &APF_CTL_VIS_Obs_2023a_B.h11);
          wr[APF_CTL_VIS_Obs_2023a_B.i_jk] = APF_CTL_VIS_Obs_2023a_B.h12;
          wi[APF_CTL_VIS_Obs_2023a_B.i_jk] = APF_CTL_VIS_Obs_2023a_B.s_tmp;
          h[APF_CTL_VIS_Obs_2023a_B.c_iy - 1] = APF_CTL_VIS_Obs_2023a_B.tr;
          h[APF_CTL_VIS_Obs_2023a_B.k_d1] = APF_CTL_VIS_Obs_2023a_B.aa_f;
          h[APF_CTL_VIS_Obs_2023a_B.c_iy] = APF_CTL_VIS_Obs_2023a_B.tst;
          if (APF_CTL_VIS_Obs_2023a_B.i_jk + 1 < 6) {
            APF_CTL_VIS_Obs_2023a_B.k_d1 = (APF_CTL_VIS_Obs_2023a_B.i_jk + 1) *
              6 + APF_CTL_VIS_Obs_2023a_B.i_jk;
            APF_CTL_VIS_Obs_2023a_B.b_m_j = static_cast<uint8_T>(5 -
              APF_CTL_VIS_Obs_2023a_B.i_jk);
            for (APF_CTL_VIS_Obs_2023a_B.c_iy = 0; APF_CTL_VIS_Obs_2023a_B.c_iy <
                 APF_CTL_VIS_Obs_2023a_B.b_m_j; APF_CTL_VIS_Obs_2023a_B.c_iy++)
            {
              APF_CTL_VIS_Obs_2023a_B.s_tmp_p = APF_CTL_VIS_Obs_2023a_B.c_iy * 6
                + APF_CTL_VIS_Obs_2023a_B.k_d1;
              APF_CTL_VIS_Obs_2023a_B.tr = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
              APF_CTL_VIS_Obs_2023a_B.d_k_p = (APF_CTL_VIS_Obs_2023a_B.c_iy * 6
                + APF_CTL_VIS_Obs_2023a_B.k_d1) - 1;
              APF_CTL_VIS_Obs_2023a_B.aa_f = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
              h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p] = APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.s_h - APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.h11;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.s_h + APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.h11;
            }
          }

          if (APF_CTL_VIS_Obs_2023a_B.i_jk - 1 >= 1) {
            APF_CTL_VIS_Obs_2023a_B.k_d1 = APF_CTL_VIS_Obs_2023a_B.i_jk * 6;
            APF_CTL_VIS_Obs_2023a_B.b_m_j = static_cast<uint8_T>
              (APF_CTL_VIS_Obs_2023a_B.i_jk - 1);
            for (APF_CTL_VIS_Obs_2023a_B.c_iy = 0; APF_CTL_VIS_Obs_2023a_B.c_iy <
                 APF_CTL_VIS_Obs_2023a_B.b_m_j; APF_CTL_VIS_Obs_2023a_B.c_iy++)
            {
              APF_CTL_VIS_Obs_2023a_B.s_tmp_p = APF_CTL_VIS_Obs_2023a_B.k_d1 +
                APF_CTL_VIS_Obs_2023a_B.c_iy;
              APF_CTL_VIS_Obs_2023a_B.tr = h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
              APF_CTL_VIS_Obs_2023a_B.d_k_p = APF_CTL_VIS_Obs_2023a_B.kdefl_k +
                APF_CTL_VIS_Obs_2023a_B.c_iy;
              APF_CTL_VIS_Obs_2023a_B.aa_f = h[APF_CTL_VIS_Obs_2023a_B.d_k_p];
              h[APF_CTL_VIS_Obs_2023a_B.s_tmp_p] = APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.s_h - APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.h11;
              h[APF_CTL_VIS_Obs_2023a_B.d_k_p] = APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.s_h + APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.h11;
            }
          }

          if (APF_CTL_VIS_Obs_2023a_B.nz >= 1) {
            APF_CTL_VIS_Obs_2023a_B.kdefl_k = (APF_CTL_VIS_Obs_2023a_B.kdefl_k +
              iloz) - 1;
            APF_CTL_VIS_Obs_2023a_B.c_iy = (APF_CTL_VIS_Obs_2023a_B.i_jk * 6 +
              iloz) - 1;
            APF_CTL_VIS_Obs_2023a_B.k_d1 = static_cast<uint8_T>
              (APF_CTL_VIS_Obs_2023a_B.nz);
            for (APF_CTL_VIS_Obs_2023a_B.i_jk = 0; APF_CTL_VIS_Obs_2023a_B.i_jk <
                 APF_CTL_VIS_Obs_2023a_B.k_d1; APF_CTL_VIS_Obs_2023a_B.i_jk++) {
              APF_CTL_VIS_Obs_2023a_B.b_m_j = APF_CTL_VIS_Obs_2023a_B.c_iy +
                APF_CTL_VIS_Obs_2023a_B.i_jk;
              APF_CTL_VIS_Obs_2023a_B.tr = z[APF_CTL_VIS_Obs_2023a_B.b_m_j];
              APF_CTL_VIS_Obs_2023a_B.s_tmp_p = APF_CTL_VIS_Obs_2023a_B.kdefl_k
                + APF_CTL_VIS_Obs_2023a_B.i_jk;
              APF_CTL_VIS_Obs_2023a_B.aa_f = z[APF_CTL_VIS_Obs_2023a_B.s_tmp_p];
              z[APF_CTL_VIS_Obs_2023a_B.b_m_j] = APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.s_h - APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.h11;
              z[APF_CTL_VIS_Obs_2023a_B.s_tmp_p] = APF_CTL_VIS_Obs_2023a_B.aa_f *
                APF_CTL_VIS_Obs_2023a_B.s_h + APF_CTL_VIS_Obs_2023a_B.tr *
                APF_CTL_VIS_Obs_2023a_B.h11;
            }
          }
        }

        APF_CTL_VIS_Obs_2023a_B.kdefl_k = 0;
        APF_CTL_VIS_Obs_2023a_B.i_jk = APF_CTL_VIS_Obs_2023a_B.l_h - 2;
      }
    }

    for (APF_CTL_VIS_Obs_2023a_B.nz = 0; APF_CTL_VIS_Obs_2023a_B.nz < 4;
         APF_CTL_VIS_Obs_2023a_B.nz++) {
      for (APF_CTL_VIS_Obs_2023a_B.l_h = APF_CTL_VIS_Obs_2023a_B.nz + 3;
           APF_CTL_VIS_Obs_2023a_B.l_h < 7; APF_CTL_VIS_Obs_2023a_B.l_h++) {
        h[(APF_CTL_VIS_Obs_2023a_B.l_h + 6 * APF_CTL_VIS_Obs_2023a_B.nz) - 1] =
          0.0;
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xgemv(int32_T n, const real_T x[18], real_T
  beta1, real_T y[36], int32_T iy0)
{
  APF_CTL_VIS_Obs_2023a_B.iyend = iy0 + 5;
  if (beta1 != 1.0) {
    for (APF_CTL_VIS_Obs_2023a_B.c_iy_m = iy0; APF_CTL_VIS_Obs_2023a_B.c_iy_m <=
         APF_CTL_VIS_Obs_2023a_B.iyend; APF_CTL_VIS_Obs_2023a_B.c_iy_m++) {
      if (beta1 == 0.0) {
        y[APF_CTL_VIS_Obs_2023a_B.c_iy_m - 1] = 0.0;
      } else {
        y[APF_CTL_VIS_Obs_2023a_B.c_iy_m - 1] *= beta1;
      }
    }
  }

  APF_CTL_VIS_Obs_2023a_B.ix_a = 12;
  APF_CTL_VIS_Obs_2023a_B.b_gu = (n - 1) * 6 + 1;
  for (APF_CTL_VIS_Obs_2023a_B.c_iy_m = 1; APF_CTL_VIS_Obs_2023a_B.c_iy_m <=
       APF_CTL_VIS_Obs_2023a_B.b_gu; APF_CTL_VIS_Obs_2023a_B.c_iy_m += 6) {
    for (APF_CTL_VIS_Obs_2023a_B.iyend = APF_CTL_VIS_Obs_2023a_B.c_iy_m;
         APF_CTL_VIS_Obs_2023a_B.iyend <= APF_CTL_VIS_Obs_2023a_B.c_iy_m + 5;
         APF_CTL_VIS_Obs_2023a_B.iyend++) {
      APF_CTL_VIS_Obs_2023a_B.i11 = ((iy0 + APF_CTL_VIS_Obs_2023a_B.iyend) -
        APF_CTL_VIS_Obs_2023a_B.c_iy_m) - 1;
      y[APF_CTL_VIS_Obs_2023a_B.i11] += y[APF_CTL_VIS_Obs_2023a_B.iyend - 1] *
        x[APF_CTL_VIS_Obs_2023a_B.ix_a];
    }

    APF_CTL_VIS_Obs_2023a_B.ix_a++;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_dladiv1(real_T a, real_T b, real_T c, real_T d,
  real_T *p, real_T *q)
{
  APF_CTL_VIS_Obs_2023a_B.r = d / c;
  APF_CTL_VIS_Obs_2023a_B.t = 1.0 / (d * APF_CTL_VIS_Obs_2023a_B.r + c);
  if (APF_CTL_VIS_Obs_2023a_B.r != 0.0) {
    APF_CTL_VIS_Obs_2023a_B.br = b * APF_CTL_VIS_Obs_2023a_B.r;
    if (APF_CTL_VIS_Obs_2023a_B.br != 0.0) {
      *p = (a + APF_CTL_VIS_Obs_2023a_B.br) * APF_CTL_VIS_Obs_2023a_B.t;
    } else {
      *p = b * APF_CTL_VIS_Obs_2023a_B.t * APF_CTL_VIS_Obs_2023a_B.r + a *
        APF_CTL_VIS_Obs_2023a_B.t;
    }

    APF_CTL_VIS_Obs_2023a_B.br = -a * APF_CTL_VIS_Obs_2023a_B.r;
    if (APF_CTL_VIS_Obs_2023a_B.br != 0.0) {
      *q = (b + APF_CTL_VIS_Obs_2023a_B.br) * APF_CTL_VIS_Obs_2023a_B.t;
    } else {
      *q = -a * APF_CTL_VIS_Obs_2023a_B.t * APF_CTL_VIS_Obs_2023a_B.r + b *
        APF_CTL_VIS_Obs_2023a_B.t;
    }
  } else {
    *p = (b / c * d + a) * APF_CTL_VIS_Obs_2023a_B.t;
    *q = (-a / c * d + b) * APF_CTL_VIS_Obs_2023a_B.t;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdladiv(real_T a, real_T b, real_T c, real_T d,
  real_T *p, real_T *q)
{
  APF_CTL_VIS_Obs_2023a_B.aa = a;
  APF_CTL_VIS_Obs_2023a_B.bb = b;
  APF_CTL_VIS_Obs_2023a_B.cc = c;
  APF_CTL_VIS_Obs_2023a_B.dd = d;
  APF_CTL_VIS_Obs_2023a_B.s_p = fabs(a);
  APF_CTL_VIS_Obs_2023a_B.ab = fabs(b);
  if ((APF_CTL_VIS_Obs_2023a_B.s_p >= APF_CTL_VIS_Obs_2023a_B.ab) || rtIsNaN
      (APF_CTL_VIS_Obs_2023a_B.ab)) {
    APF_CTL_VIS_Obs_2023a_B.ab = APF_CTL_VIS_Obs_2023a_B.s_p;
  }

  APF_CTL_VIS_Obs_2023a_B.cd_tmp = fabs(d);
  APF_CTL_VIS_Obs_2023a_B.cd_tmp_p = fabs(c);
  if ((APF_CTL_VIS_Obs_2023a_B.cd_tmp_p >= APF_CTL_VIS_Obs_2023a_B.cd_tmp) ||
      rtIsNaN(APF_CTL_VIS_Obs_2023a_B.cd_tmp)) {
    APF_CTL_VIS_Obs_2023a_B.cd = APF_CTL_VIS_Obs_2023a_B.cd_tmp_p;
  } else {
    APF_CTL_VIS_Obs_2023a_B.cd = APF_CTL_VIS_Obs_2023a_B.cd_tmp;
  }

  APF_CTL_VIS_Obs_2023a_B.s_p = 1.0;
  if (APF_CTL_VIS_Obs_2023a_B.ab >= 8.9884656743115785E+307) {
    APF_CTL_VIS_Obs_2023a_B.aa = 0.5 * a;
    APF_CTL_VIS_Obs_2023a_B.bb = 0.5 * b;
    APF_CTL_VIS_Obs_2023a_B.s_p = 2.0;
  }

  if (APF_CTL_VIS_Obs_2023a_B.cd >= 8.9884656743115785E+307) {
    APF_CTL_VIS_Obs_2023a_B.cc = 0.5 * c;
    APF_CTL_VIS_Obs_2023a_B.dd = 0.5 * d;
    APF_CTL_VIS_Obs_2023a_B.s_p *= 0.5;
  }

  if (APF_CTL_VIS_Obs_2023a_B.ab <= 2.0041683600089728E-292) {
    APF_CTL_VIS_Obs_2023a_B.aa *= 4.0564819207303341E+31;
    APF_CTL_VIS_Obs_2023a_B.bb *= 4.0564819207303341E+31;
    APF_CTL_VIS_Obs_2023a_B.s_p /= 4.0564819207303341E+31;
  }

  if (APF_CTL_VIS_Obs_2023a_B.cd <= 2.0041683600089728E-292) {
    APF_CTL_VIS_Obs_2023a_B.cc *= 4.0564819207303341E+31;
    APF_CTL_VIS_Obs_2023a_B.dd *= 4.0564819207303341E+31;
    APF_CTL_VIS_Obs_2023a_B.s_p *= 4.0564819207303341E+31;
  }

  if (APF_CTL_VIS_Obs_2023a_B.cd_tmp <= APF_CTL_VIS_Obs_2023a_B.cd_tmp_p) {
    APF_CTL_VIS_Obs_2023a_dladiv1(APF_CTL_VIS_Obs_2023a_B.aa,
      APF_CTL_VIS_Obs_2023a_B.bb, APF_CTL_VIS_Obs_2023a_B.cc,
      APF_CTL_VIS_Obs_2023a_B.dd, p, q);
  } else {
    APF_CTL_VIS_Obs_2023a_dladiv1(APF_CTL_VIS_Obs_2023a_B.bb,
      APF_CTL_VIS_Obs_2023a_B.aa, APF_CTL_VIS_Obs_2023a_B.dd,
      APF_CTL_VIS_Obs_2023a_B.cc, p, &APF_CTL_VIS_Obs_2023a_B.ab);
    *q = -APF_CTL_VIS_Obs_2023a_B.ab;
  }

  *p *= APF_CTL_VIS_Obs_2023a_B.s_p;
  *q *= APF_CTL_VIS_Obs_2023a_B.s_p;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlaln2(int32_T na, int32_T nw, real_T smin,
  const real_T A[36], int32_T ia0, const real_T B[18], int32_T ib0, real_T wr,
  real_T wi, real_T X[4], real_T *scale, real_T *xnorm)
{
  static const int8_T b[16] = { 1, 2, 3, 4, 2, 1, 4, 3, 3, 4, 1, 2, 4, 3, 2, 1 };

  *scale = 1.0;
  if (na == 1) {
    if (nw == 1) {
      APF_CTL_VIS_Obs_2023a_B.ur11r = A[ia0 - 1] - wr;
      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur11r);
      if (APF_CTL_VIS_Obs_2023a_B.temp < smin) {
        APF_CTL_VIS_Obs_2023a_B.ur11r = smin;
        APF_CTL_VIS_Obs_2023a_B.temp = smin;
      }

      APF_CTL_VIS_Obs_2023a_B.ur22 = B[ib0 - 1];
      APF_CTL_VIS_Obs_2023a_B.cmax = fabs(APF_CTL_VIS_Obs_2023a_B.ur22);
      if ((APF_CTL_VIS_Obs_2023a_B.temp < 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax >
           1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 2.2471164185778949E+307 *
                    APF_CTL_VIS_Obs_2023a_B.temp)) {
        *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.cmax;
      }

      X[0] = APF_CTL_VIS_Obs_2023a_B.ur22 * *scale /
        APF_CTL_VIS_Obs_2023a_B.ur11r;
      *xnorm = fabs(X[0]);
    } else {
      APF_CTL_VIS_Obs_2023a_B.ur11r = A[ia0 - 1] - wr;
      APF_CTL_VIS_Obs_2023a_B.ui11r = -wi;
      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur11r) + fabs(
        -wi);
      if (APF_CTL_VIS_Obs_2023a_B.temp < smin) {
        APF_CTL_VIS_Obs_2023a_B.ur11r = smin;
        APF_CTL_VIS_Obs_2023a_B.ui11r = 0.0;
        APF_CTL_VIS_Obs_2023a_B.temp = smin;
      }

      APF_CTL_VIS_Obs_2023a_B.ur22 = B[ib0 - 1];
      APF_CTL_VIS_Obs_2023a_B.br1 = B[ib0 + 5];
      APF_CTL_VIS_Obs_2023a_B.cmax = fabs(APF_CTL_VIS_Obs_2023a_B.ur22) + fabs
        (APF_CTL_VIS_Obs_2023a_B.br1);
      if ((APF_CTL_VIS_Obs_2023a_B.temp < 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax >
           1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 2.2471164185778949E+307 *
                    APF_CTL_VIS_Obs_2023a_B.temp)) {
        *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.cmax;
      }

      APF_CTL_VIS_Obs_2023a_xdladiv(*scale * APF_CTL_VIS_Obs_2023a_B.ur22,
        *scale * APF_CTL_VIS_Obs_2023a_B.br1, APF_CTL_VIS_Obs_2023a_B.ur11r,
        APF_CTL_VIS_Obs_2023a_B.ui11r, &X[0], &X[2]);
      *xnorm = fabs(X[0]) + fabs(X[2]);
    }
  } else {
    APF_CTL_VIS_Obs_2023a_B.cr[0] = A[ia0 - 1] - wr;
    APF_CTL_VIS_Obs_2023a_B.cr[3] = A[ia0 + 6] - wr;
    APF_CTL_VIS_Obs_2023a_B.cr[1] = A[ia0];
    APF_CTL_VIS_Obs_2023a_B.cr[2] = A[ia0 + 5];
    if (nw == 1) {
      APF_CTL_VIS_Obs_2023a_B.cmax = 0.0;
      APF_CTL_VIS_Obs_2023a_B.icmax = -1;
      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[0]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > 0.0) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 0;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[1]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 1;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[2]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 2;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[3]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 3;
      }

      if (APF_CTL_VIS_Obs_2023a_B.cmax < smin) {
        APF_CTL_VIS_Obs_2023a_B.ur11r = B[ib0 - 1];
        APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur11r);
        APF_CTL_VIS_Obs_2023a_B.cmax = fabs(B[ib0]);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= APF_CTL_VIS_Obs_2023a_B.cmax) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.cmax)) {
          APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if ((smin < 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 1.0) &&
            (APF_CTL_VIS_Obs_2023a_B.cmax > 2.2471164185778949E+307 * smin)) {
          *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.cmax;
        }

        APF_CTL_VIS_Obs_2023a_B.temp = *scale / smin;
        X[0] = APF_CTL_VIS_Obs_2023a_B.ur11r * APF_CTL_VIS_Obs_2023a_B.temp;
        X[1] = APF_CTL_VIS_Obs_2023a_B.temp * B[ib0];
        *xnorm = APF_CTL_VIS_Obs_2023a_B.temp * APF_CTL_VIS_Obs_2023a_B.cmax;
      } else {
        APF_CTL_VIS_Obs_2023a_B.ur11r = 1.0 /
          APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax];
        APF_CTL_VIS_Obs_2023a_B.lr21_tmp = APF_CTL_VIS_Obs_2023a_B.icmax << 2;
        APF_CTL_VIS_Obs_2023a_B.temp =
          APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp + 1] - 1]
          * APF_CTL_VIS_Obs_2023a_B.ur11r;
        APF_CTL_VIS_Obs_2023a_B.ui11r =
          APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp + 2] - 1];
        APF_CTL_VIS_Obs_2023a_B.ur22 =
          APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp + 3] - 1]
          - APF_CTL_VIS_Obs_2023a_B.ui11r * APF_CTL_VIS_Obs_2023a_B.temp;
        if (fabs(APF_CTL_VIS_Obs_2023a_B.ur22) < smin) {
          APF_CTL_VIS_Obs_2023a_B.ur22 = smin;
        }

        if ((APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 2) ||
            (APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 4)) {
          APF_CTL_VIS_Obs_2023a_B.br1 = B[ib0];
          APF_CTL_VIS_Obs_2023a_B.br2 = B[ib0 - 1];
        } else {
          APF_CTL_VIS_Obs_2023a_B.br1 = B[ib0 - 1];
          APF_CTL_VIS_Obs_2023a_B.br2 = B[ib0];
        }

        APF_CTL_VIS_Obs_2023a_B.br2 -= APF_CTL_VIS_Obs_2023a_B.temp *
          APF_CTL_VIS_Obs_2023a_B.br1;
        APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur22 *
          APF_CTL_VIS_Obs_2023a_B.ur11r * APF_CTL_VIS_Obs_2023a_B.br1);
        APF_CTL_VIS_Obs_2023a_B.li21 = fabs(APF_CTL_VIS_Obs_2023a_B.br2);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= APF_CTL_VIS_Obs_2023a_B.li21) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.li21)) {
          APF_CTL_VIS_Obs_2023a_B.li21 = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if (APF_CTL_VIS_Obs_2023a_B.li21 > 1.0) {
          APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur22);
          if ((APF_CTL_VIS_Obs_2023a_B.temp < 1.0) &&
              (APF_CTL_VIS_Obs_2023a_B.li21 >= 2.2471164185778949E+307 *
               APF_CTL_VIS_Obs_2023a_B.temp)) {
            *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.li21;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.ur22 = APF_CTL_VIS_Obs_2023a_B.br2 * *scale /
          APF_CTL_VIS_Obs_2023a_B.ur22;
        APF_CTL_VIS_Obs_2023a_B.temp = *scale * APF_CTL_VIS_Obs_2023a_B.br1 *
          APF_CTL_VIS_Obs_2023a_B.ur11r - APF_CTL_VIS_Obs_2023a_B.ui11r *
          APF_CTL_VIS_Obs_2023a_B.ur11r * APF_CTL_VIS_Obs_2023a_B.ur22;
        if ((APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 3) ||
            (APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 4)) {
          X[0] = APF_CTL_VIS_Obs_2023a_B.ur22;
          X[1] = APF_CTL_VIS_Obs_2023a_B.temp;
        } else {
          X[0] = APF_CTL_VIS_Obs_2023a_B.temp;
          X[1] = APF_CTL_VIS_Obs_2023a_B.ur22;
        }

        APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.temp);
        *xnorm = fabs(APF_CTL_VIS_Obs_2023a_B.ur22);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= *xnorm) || rtIsNaN(*xnorm)) {
          *xnorm = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if ((*xnorm > 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 1.0) && (*xnorm >
             2.2471164185778949E+307 / APF_CTL_VIS_Obs_2023a_B.cmax)) {
          APF_CTL_VIS_Obs_2023a_B.temp = APF_CTL_VIS_Obs_2023a_B.cmax /
            2.2471164185778949E+307;
          X[0] *= APF_CTL_VIS_Obs_2023a_B.temp;
          X[1] *= APF_CTL_VIS_Obs_2023a_B.temp;
          *xnorm *= APF_CTL_VIS_Obs_2023a_B.temp;
          *scale *= APF_CTL_VIS_Obs_2023a_B.temp;
        }
      }
    } else {
      APF_CTL_VIS_Obs_2023a_B.ci[0] = -wi;
      APF_CTL_VIS_Obs_2023a_B.ci[1] = 0.0;
      APF_CTL_VIS_Obs_2023a_B.ci[2] = 0.0;
      APF_CTL_VIS_Obs_2023a_B.ci[3] = -wi;
      APF_CTL_VIS_Obs_2023a_B.cmax = 0.0;
      APF_CTL_VIS_Obs_2023a_B.icmax = -1;
      APF_CTL_VIS_Obs_2023a_B.ur11r = fabs(-wi);
      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[0]) +
        APF_CTL_VIS_Obs_2023a_B.ur11r;
      if (APF_CTL_VIS_Obs_2023a_B.temp > 0.0) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 0;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[1]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 1;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[2]);
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 2;
      }

      APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.cr[3]) +
        APF_CTL_VIS_Obs_2023a_B.ur11r;
      if (APF_CTL_VIS_Obs_2023a_B.temp > APF_CTL_VIS_Obs_2023a_B.cmax) {
        APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        APF_CTL_VIS_Obs_2023a_B.icmax = 3;
      }

      if (APF_CTL_VIS_Obs_2023a_B.cmax < smin) {
        APF_CTL_VIS_Obs_2023a_B.ur11r = B[ib0 - 1];
        APF_CTL_VIS_Obs_2023a_B.ui11r = B[ib0 + 5];
        APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.ur11r) +
          fabs(APF_CTL_VIS_Obs_2023a_B.ui11r);
        APF_CTL_VIS_Obs_2023a_B.ur22 = B[ib0 + 6];
        APF_CTL_VIS_Obs_2023a_B.cmax = fabs(APF_CTL_VIS_Obs_2023a_B.ur22) + fabs
          (B[ib0]);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= APF_CTL_VIS_Obs_2023a_B.cmax) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.cmax)) {
          APF_CTL_VIS_Obs_2023a_B.cmax = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if ((smin < 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 1.0) &&
            (APF_CTL_VIS_Obs_2023a_B.cmax > 2.2471164185778949E+307 * smin)) {
          *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.cmax;
        }

        APF_CTL_VIS_Obs_2023a_B.temp = *scale / smin;
        X[0] = APF_CTL_VIS_Obs_2023a_B.ur11r * APF_CTL_VIS_Obs_2023a_B.temp;
        X[1] = APF_CTL_VIS_Obs_2023a_B.temp * B[ib0];
        X[2] = APF_CTL_VIS_Obs_2023a_B.ui11r * APF_CTL_VIS_Obs_2023a_B.temp;
        X[3] = APF_CTL_VIS_Obs_2023a_B.ur22 * APF_CTL_VIS_Obs_2023a_B.temp;
        *xnorm = APF_CTL_VIS_Obs_2023a_B.temp * APF_CTL_VIS_Obs_2023a_B.cmax;
      } else {
        if ((APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 1) ||
            (APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 4)) {
          if (fabs(APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax]) >
              fabs(APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.icmax])) {
            APF_CTL_VIS_Obs_2023a_B.temp =
              APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.icmax] /
              APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax];
            APF_CTL_VIS_Obs_2023a_B.ur11r = 1.0 / ((APF_CTL_VIS_Obs_2023a_B.temp
              * APF_CTL_VIS_Obs_2023a_B.temp + 1.0) *
              APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax]);
            APF_CTL_VIS_Obs_2023a_B.ui11r = -APF_CTL_VIS_Obs_2023a_B.temp *
              APF_CTL_VIS_Obs_2023a_B.ur11r;
          } else {
            APF_CTL_VIS_Obs_2023a_B.temp =
              APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax] /
              APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.icmax];
            APF_CTL_VIS_Obs_2023a_B.ui11r = -1.0 /
              ((APF_CTL_VIS_Obs_2023a_B.temp * APF_CTL_VIS_Obs_2023a_B.temp +
                1.0) * APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.icmax]);
            APF_CTL_VIS_Obs_2023a_B.ur11r = -APF_CTL_VIS_Obs_2023a_B.temp *
              APF_CTL_VIS_Obs_2023a_B.ui11r;
          }

          APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.icmax <<
            2;
          APF_CTL_VIS_Obs_2023a_B.ur22 =
            APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp +
            1] - 1];
          APF_CTL_VIS_Obs_2023a_B.temp = APF_CTL_VIS_Obs_2023a_B.ur22 *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.li21 = APF_CTL_VIS_Obs_2023a_B.ur22 *
            APF_CTL_VIS_Obs_2023a_B.ui11r;
          APF_CTL_VIS_Obs_2023a_B.br1 =
            APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp +
            2] - 1];
          APF_CTL_VIS_Obs_2023a_B.ur12s = APF_CTL_VIS_Obs_2023a_B.br1 *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.ui12s = APF_CTL_VIS_Obs_2023a_B.br1 *
            APF_CTL_VIS_Obs_2023a_B.ui11r;
          APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp =
            b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp + 3] - 1;
          APF_CTL_VIS_Obs_2023a_B.ur22 =
            APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp] -
            APF_CTL_VIS_Obs_2023a_B.br1 * APF_CTL_VIS_Obs_2023a_B.temp;
          APF_CTL_VIS_Obs_2023a_B.ui22 =
            APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp] -
            APF_CTL_VIS_Obs_2023a_B.br1 * APF_CTL_VIS_Obs_2023a_B.li21;
        } else {
          APF_CTL_VIS_Obs_2023a_B.ur11r = 1.0 /
            APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.icmax];
          APF_CTL_VIS_Obs_2023a_B.ui11r = 0.0;
          APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.icmax <<
            2;
          APF_CTL_VIS_Obs_2023a_B.lr21_tmp =
            b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp + 1] - 1;
          APF_CTL_VIS_Obs_2023a_B.temp =
            APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.lr21_tmp] *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.li21 =
            APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.lr21_tmp] *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.lr21_tmp =
            b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp + 2] - 1;
          APF_CTL_VIS_Obs_2023a_B.br1 =
            APF_CTL_VIS_Obs_2023a_B.cr[APF_CTL_VIS_Obs_2023a_B.lr21_tmp];
          APF_CTL_VIS_Obs_2023a_B.ur12s = APF_CTL_VIS_Obs_2023a_B.br1 *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.br2 =
            APF_CTL_VIS_Obs_2023a_B.ci[APF_CTL_VIS_Obs_2023a_B.lr21_tmp];
          APF_CTL_VIS_Obs_2023a_B.ui12s = APF_CTL_VIS_Obs_2023a_B.br2 *
            APF_CTL_VIS_Obs_2023a_B.ur11r;
          APF_CTL_VIS_Obs_2023a_B.ur22 =
            (APF_CTL_VIS_Obs_2023a_B.cr[b[APF_CTL_VIS_Obs_2023a_B.lr21_tmp_tmp +
             3] - 1] - APF_CTL_VIS_Obs_2023a_B.br1 *
             APF_CTL_VIS_Obs_2023a_B.temp) + APF_CTL_VIS_Obs_2023a_B.br2 *
            APF_CTL_VIS_Obs_2023a_B.li21;
          APF_CTL_VIS_Obs_2023a_B.ui22 = -APF_CTL_VIS_Obs_2023a_B.br1 *
            APF_CTL_VIS_Obs_2023a_B.li21 - APF_CTL_VIS_Obs_2023a_B.br2 *
            APF_CTL_VIS_Obs_2023a_B.temp;
        }

        APF_CTL_VIS_Obs_2023a_B.u22abs = fabs(APF_CTL_VIS_Obs_2023a_B.ur22) +
          fabs(APF_CTL_VIS_Obs_2023a_B.ui22);
        if (APF_CTL_VIS_Obs_2023a_B.u22abs < smin) {
          APF_CTL_VIS_Obs_2023a_B.ur22 = smin;
          APF_CTL_VIS_Obs_2023a_B.ui22 = 0.0;
        }

        if ((APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 2) ||
            (APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 4)) {
          APF_CTL_VIS_Obs_2023a_B.br2 = B[ib0 - 1];
          APF_CTL_VIS_Obs_2023a_B.br1 = B[ib0];
          APF_CTL_VIS_Obs_2023a_B.bi2 = B[ib0 + 5];
          APF_CTL_VIS_Obs_2023a_B.bi1 = B[ib0 + 6];
        } else {
          APF_CTL_VIS_Obs_2023a_B.br1 = B[ib0 - 1];
          APF_CTL_VIS_Obs_2023a_B.br2 = B[ib0];
          APF_CTL_VIS_Obs_2023a_B.bi1 = B[ib0 + 5];
          APF_CTL_VIS_Obs_2023a_B.bi2 = B[ib0 + 6];
        }

        APF_CTL_VIS_Obs_2023a_B.br2 = (APF_CTL_VIS_Obs_2023a_B.br2 -
          APF_CTL_VIS_Obs_2023a_B.temp * APF_CTL_VIS_Obs_2023a_B.br1) +
          APF_CTL_VIS_Obs_2023a_B.li21 * APF_CTL_VIS_Obs_2023a_B.bi1;
        APF_CTL_VIS_Obs_2023a_B.bi2 = (APF_CTL_VIS_Obs_2023a_B.bi2 -
          APF_CTL_VIS_Obs_2023a_B.li21 * APF_CTL_VIS_Obs_2023a_B.br1) -
          APF_CTL_VIS_Obs_2023a_B.temp * APF_CTL_VIS_Obs_2023a_B.bi1;
        APF_CTL_VIS_Obs_2023a_B.temp = (fabs(APF_CTL_VIS_Obs_2023a_B.ur11r) +
          fabs(APF_CTL_VIS_Obs_2023a_B.ui11r)) * APF_CTL_VIS_Obs_2023a_B.u22abs *
          (fabs(APF_CTL_VIS_Obs_2023a_B.br1) + fabs(APF_CTL_VIS_Obs_2023a_B.bi1));
        APF_CTL_VIS_Obs_2023a_B.li21 = fabs(APF_CTL_VIS_Obs_2023a_B.br2) + fabs
          (APF_CTL_VIS_Obs_2023a_B.bi2);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= APF_CTL_VIS_Obs_2023a_B.li21) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.li21)) {
          APF_CTL_VIS_Obs_2023a_B.li21 = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if ((APF_CTL_VIS_Obs_2023a_B.li21 > 1.0) &&
            (APF_CTL_VIS_Obs_2023a_B.u22abs < 1.0) &&
            (APF_CTL_VIS_Obs_2023a_B.li21 >= 2.2471164185778949E+307 *
             APF_CTL_VIS_Obs_2023a_B.u22abs)) {
          *scale = 1.0 / APF_CTL_VIS_Obs_2023a_B.li21;
          APF_CTL_VIS_Obs_2023a_B.br1 *= *scale;
          APF_CTL_VIS_Obs_2023a_B.bi1 *= *scale;
          APF_CTL_VIS_Obs_2023a_B.br2 *= *scale;
          APF_CTL_VIS_Obs_2023a_B.bi2 *= *scale;
        }

        APF_CTL_VIS_Obs_2023a_xdladiv(APF_CTL_VIS_Obs_2023a_B.br2,
          APF_CTL_VIS_Obs_2023a_B.bi2, APF_CTL_VIS_Obs_2023a_B.ur22,
          APF_CTL_VIS_Obs_2023a_B.ui22, &APF_CTL_VIS_Obs_2023a_B.li21,
          &APF_CTL_VIS_Obs_2023a_B.u22abs);
        APF_CTL_VIS_Obs_2023a_B.temp = ((APF_CTL_VIS_Obs_2023a_B.ur11r *
          APF_CTL_VIS_Obs_2023a_B.br1 - APF_CTL_VIS_Obs_2023a_B.ui11r *
          APF_CTL_VIS_Obs_2023a_B.bi1) - APF_CTL_VIS_Obs_2023a_B.ur12s *
          APF_CTL_VIS_Obs_2023a_B.li21) + APF_CTL_VIS_Obs_2023a_B.ui12s *
          APF_CTL_VIS_Obs_2023a_B.u22abs;
        APF_CTL_VIS_Obs_2023a_B.ur11r = ((APF_CTL_VIS_Obs_2023a_B.ui11r *
          APF_CTL_VIS_Obs_2023a_B.br1 + APF_CTL_VIS_Obs_2023a_B.ur11r *
          APF_CTL_VIS_Obs_2023a_B.bi1) - APF_CTL_VIS_Obs_2023a_B.ui12s *
          APF_CTL_VIS_Obs_2023a_B.li21) - APF_CTL_VIS_Obs_2023a_B.ur12s *
          APF_CTL_VIS_Obs_2023a_B.u22abs;
        if ((APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 3) ||
            (APF_CTL_VIS_Obs_2023a_B.icmax + 1 == 4)) {
          X[0] = APF_CTL_VIS_Obs_2023a_B.li21;
          X[1] = APF_CTL_VIS_Obs_2023a_B.temp;
          X[2] = APF_CTL_VIS_Obs_2023a_B.u22abs;
          X[3] = APF_CTL_VIS_Obs_2023a_B.ur11r;
        } else {
          X[0] = APF_CTL_VIS_Obs_2023a_B.temp;
          X[1] = APF_CTL_VIS_Obs_2023a_B.li21;
          X[2] = APF_CTL_VIS_Obs_2023a_B.ur11r;
          X[3] = APF_CTL_VIS_Obs_2023a_B.u22abs;
        }

        APF_CTL_VIS_Obs_2023a_B.temp = fabs(APF_CTL_VIS_Obs_2023a_B.temp) + fabs
          (APF_CTL_VIS_Obs_2023a_B.ur11r);
        *xnorm = fabs(APF_CTL_VIS_Obs_2023a_B.li21) + fabs
          (APF_CTL_VIS_Obs_2023a_B.u22abs);
        if ((APF_CTL_VIS_Obs_2023a_B.temp >= *xnorm) || rtIsNaN(*xnorm)) {
          *xnorm = APF_CTL_VIS_Obs_2023a_B.temp;
        }

        if ((*xnorm > 1.0) && (APF_CTL_VIS_Obs_2023a_B.cmax > 1.0) && (*xnorm >
             2.2471164185778949E+307 / APF_CTL_VIS_Obs_2023a_B.cmax)) {
          APF_CTL_VIS_Obs_2023a_B.temp = APF_CTL_VIS_Obs_2023a_B.cmax /
            2.2471164185778949E+307;
          X[0] *= APF_CTL_VIS_Obs_2023a_B.temp;
          X[1] *= APF_CTL_VIS_Obs_2023a_B.temp;
          X[2] *= APF_CTL_VIS_Obs_2023a_B.temp;
          X[3] *= APF_CTL_VIS_Obs_2023a_B.temp;
          *xnorm *= APF_CTL_VIS_Obs_2023a_B.temp;
          *scale *= APF_CTL_VIS_Obs_2023a_B.temp;
        }
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023_xaxpy_p5n5(int32_T n, real_T a, const real_T x
  [36], int32_T ix0, real_T y[18])
{
  if ((n >= 1) && (!(a == 0.0))) {
    for (APF_CTL_VIS_Obs_2023a_B.k_dl = 0; APF_CTL_VIS_Obs_2023a_B.k_dl < n;
         APF_CTL_VIS_Obs_2023a_B.k_dl++) {
      y[APF_CTL_VIS_Obs_2023a_B.k_dl + 12] += x[(ix0 +
        APF_CTL_VIS_Obs_2023a_B.k_dl) - 1] * a;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdtrevc3(const real_T T[36], real_T vr[36])
{
  int32_T exitg1;
  boolean_T guard1;
  memset(&APF_CTL_VIS_Obs_2023a_B.work[0], 0, 18U * sizeof(real_T));
  APF_CTL_VIS_Obs_2023a_B.x_f[0] = 0.0;
  APF_CTL_VIS_Obs_2023a_B.x_f[1] = 0.0;
  APF_CTL_VIS_Obs_2023a_B.x_f[2] = 0.0;
  APF_CTL_VIS_Obs_2023a_B.x_f[3] = 0.0;
  APF_CTL_VIS_Obs_2023a_B.work[0] = 0.0;
  for (APF_CTL_VIS_Obs_2023a_B.b_j_m = 0; APF_CTL_VIS_Obs_2023a_B.b_j_m < 5;
       APF_CTL_VIS_Obs_2023a_B.b_j_m++) {
    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 1] = 0.0;
    for (APF_CTL_VIS_Obs_2023a_B.ip = 0; APF_CTL_VIS_Obs_2023a_B.ip <=
         APF_CTL_VIS_Obs_2023a_B.b_j_m; APF_CTL_VIS_Obs_2023a_B.ip++) {
      APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 1] += fabs(T
        [(APF_CTL_VIS_Obs_2023a_B.b_j_m + 1) * 6 + APF_CTL_VIS_Obs_2023a_B.ip]);
    }
  }

  APF_CTL_VIS_Obs_2023a_B.ip = 0;
  for (APF_CTL_VIS_Obs_2023a_B.b_j_m = 5; APF_CTL_VIS_Obs_2023a_B.b_j_m >= 0;
       APF_CTL_VIS_Obs_2023a_B.b_j_m--) {
    if (APF_CTL_VIS_Obs_2023a_B.ip == -1) {
      APF_CTL_VIS_Obs_2023a_B.ip = 1;
    } else {
      if (APF_CTL_VIS_Obs_2023a_B.b_j_m + 1 == 1) {
        APF_CTL_VIS_Obs_2023a_B.ip = 0;
      } else if (T[(APF_CTL_VIS_Obs_2023a_B.b_j_m - 1) * 6 +
                 APF_CTL_VIS_Obs_2023a_B.b_j_m] == 0.0) {
        APF_CTL_VIS_Obs_2023a_B.ip = 0;
      } else {
        APF_CTL_VIS_Obs_2023a_B.ip = -1;
      }

      APF_CTL_VIS_Obs_2023a_B.T_tmp = 6 * APF_CTL_VIS_Obs_2023a_B.b_j_m +
        APF_CTL_VIS_Obs_2023a_B.b_j_m;
      APF_CTL_VIS_Obs_2023a_B.emax = T[APF_CTL_VIS_Obs_2023a_B.T_tmp];
      APF_CTL_VIS_Obs_2023a_B.wi_k = 0.0;
      if (APF_CTL_VIS_Obs_2023a_B.ip != 0) {
        APF_CTL_VIS_Obs_2023a_B.wi_k = sqrt(fabs(T
          [(APF_CTL_VIS_Obs_2023a_B.b_j_m - 1) * 6 +
          APF_CTL_VIS_Obs_2023a_B.b_j_m])) * sqrt(fabs
          (T[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1]));
      }

      APF_CTL_VIS_Obs_2023a_B.smin = (fabs(APF_CTL_VIS_Obs_2023a_B.emax) +
        APF_CTL_VIS_Obs_2023a_B.wi_k) * 2.2204460492503131E-16;
      if (!(APF_CTL_VIS_Obs_2023a_B.smin >= 6.0125050800269183E-292)) {
        APF_CTL_VIS_Obs_2023a_B.smin = 6.0125050800269183E-292;
      }

      if (APF_CTL_VIS_Obs_2023a_B.ip == 0) {
        APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12] = 1.0;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = 0;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g < APF_CTL_VIS_Obs_2023a_B.b_j_m;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp_g + 12] =
            -T[6 * APF_CTL_VIS_Obs_2023a_B.b_j_m +
            APF_CTL_VIS_Obs_2023a_B.T_tmp_g];
        }

        APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.b_j_m - 1;
        do {
          exitg1 = 0;
          if (APF_CTL_VIS_Obs_2023a_B.j_d + 1 >= 1) {
            guard1 = false;
            if (APF_CTL_VIS_Obs_2023a_B.j_d + 1 == 1) {
              guard1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.T_tmp = (APF_CTL_VIS_Obs_2023a_B.j_d - 1) *
                6;
              APF_CTL_VIS_Obs_2023a_B.c_ix = APF_CTL_VIS_Obs_2023a_B.T_tmp +
                APF_CTL_VIS_Obs_2023a_B.j_d;
              if (T[APF_CTL_VIS_Obs_2023a_B.c_ix] == 0.0) {
                guard1 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_xdlaln2(2, 1, APF_CTL_VIS_Obs_2023a_B.smin,
                  T, APF_CTL_VIS_Obs_2023a_B.c_ix, APF_CTL_VIS_Obs_2023a_B.work,
                  APF_CTL_VIS_Obs_2023a_B.j_d + 12, APF_CTL_VIS_Obs_2023a_B.emax,
                  0.0, APF_CTL_VIS_Obs_2023a_B.x_f,
                  &APF_CTL_VIS_Obs_2023a_B.scale_p,
                  &APF_CTL_VIS_Obs_2023a_B.wi_k);
                if (APF_CTL_VIS_Obs_2023a_B.wi_k > 1.0) {
                  APF_CTL_VIS_Obs_2023a_B.u0 =
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d - 1];
                  APF_CTL_VIS_Obs_2023a_B.rec =
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d];
                  if ((APF_CTL_VIS_Obs_2023a_B.u0 >= APF_CTL_VIS_Obs_2023a_B.rec)
                      || rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rec)) {
                    APF_CTL_VIS_Obs_2023a_B.rec = APF_CTL_VIS_Obs_2023a_B.u0;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.rec > 1.6632002579455995E+291 /
                      APF_CTL_VIS_Obs_2023a_B.wi_k) {
                    APF_CTL_VIS_Obs_2023a_B.x_f[0] /=
                      APF_CTL_VIS_Obs_2023a_B.wi_k;
                    APF_CTL_VIS_Obs_2023a_B.x_f[1] /=
                      APF_CTL_VIS_Obs_2023a_B.wi_k;
                    APF_CTL_VIS_Obs_2023a_B.scale_p /=
                      APF_CTL_VIS_Obs_2023a_B.wi_k;
                  }
                }

                if (APF_CTL_VIS_Obs_2023a_B.scale_p != 1.0) {
                  for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = 13;
                       APF_CTL_VIS_Obs_2023a_B.T_tmp_g <=
                       APF_CTL_VIS_Obs_2023a_B.b_j_m + 13;
                       APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp_g
                      - 1] *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 11] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[0];
                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 12] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[1];
                APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d - 1,
                  -APF_CTL_VIS_Obs_2023a_B.x_f[0], T,
                  APF_CTL_VIS_Obs_2023a_B.T_tmp + 1,
                  APF_CTL_VIS_Obs_2023a_B.work);
                APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d - 1,
                  -APF_CTL_VIS_Obs_2023a_B.x_f[1], T,
                  APF_CTL_VIS_Obs_2023a_B.j_d * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work);
                APF_CTL_VIS_Obs_2023a_B.j_d -= 2;
              }
            }

            if (guard1) {
              APF_CTL_VIS_Obs_2023a_xdlaln2(1, 1, APF_CTL_VIS_Obs_2023a_B.smin,
                T, (APF_CTL_VIS_Obs_2023a_B.j_d * 6 +
                    APF_CTL_VIS_Obs_2023a_B.j_d) + 1,
                APF_CTL_VIS_Obs_2023a_B.work, APF_CTL_VIS_Obs_2023a_B.j_d + 13,
                APF_CTL_VIS_Obs_2023a_B.emax, 0.0, APF_CTL_VIS_Obs_2023a_B.x_f,
                &APF_CTL_VIS_Obs_2023a_B.scale_p, &APF_CTL_VIS_Obs_2023a_B.wi_k);
              if ((APF_CTL_VIS_Obs_2023a_B.wi_k > 1.0) &&
                  (APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d] >
                   1.6632002579455995E+291 / APF_CTL_VIS_Obs_2023a_B.wi_k)) {
                APF_CTL_VIS_Obs_2023a_B.x_f[0] /= APF_CTL_VIS_Obs_2023a_B.wi_k;
                APF_CTL_VIS_Obs_2023a_B.scale_p /= APF_CTL_VIS_Obs_2023a_B.wi_k;
              }

              if (APF_CTL_VIS_Obs_2023a_B.scale_p != 1.0) {
                for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = 13;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp_g <=
                     APF_CTL_VIS_Obs_2023a_B.b_j_m + 13;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
                  APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp_g -
                    1] *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 12] =
                APF_CTL_VIS_Obs_2023a_B.x_f[0];
              APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d,
                -APF_CTL_VIS_Obs_2023a_B.x_f[0], T, APF_CTL_VIS_Obs_2023a_B.j_d *
                6 + 1, APF_CTL_VIS_Obs_2023a_B.work);
              APF_CTL_VIS_Obs_2023a_B.j_d--;
            }
          } else {
            exitg1 = 1;
          }
        } while (exitg1 == 0);

        if (APF_CTL_VIS_Obs_2023a_B.b_j_m + 1 > 1) {
          APF_CTL_VIS_Obs_2023a_xgemv(APF_CTL_VIS_Obs_2023a_B.b_j_m,
            APF_CTL_VIS_Obs_2023a_B.work,
            APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12], vr,
            APF_CTL_VIS_Obs_2023a_B.b_j_m * 6 + 1);
        }

        APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.b_j_m * 6;
        APF_CTL_VIS_Obs_2023a_B.j_d = -1;
        APF_CTL_VIS_Obs_2023a_B.emax = fabs(vr[APF_CTL_VIS_Obs_2023a_B.T_tmp]);
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = 0;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g < 5;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
          APF_CTL_VIS_Obs_2023a_B.smin = fabs(vr[(APF_CTL_VIS_Obs_2023a_B.T_tmp
            + APF_CTL_VIS_Obs_2023a_B.T_tmp_g) + 1]);
          if (APF_CTL_VIS_Obs_2023a_B.smin > APF_CTL_VIS_Obs_2023a_B.emax) {
            APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.T_tmp_g;
            APF_CTL_VIS_Obs_2023a_B.emax = APF_CTL_VIS_Obs_2023a_B.smin;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.emax = 1.0 / fabs(vr[(6 *
          APF_CTL_VIS_Obs_2023a_B.b_j_m + APF_CTL_VIS_Obs_2023a_B.j_d) + 1]);
        APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.b_j_m * 6 + 1;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = APF_CTL_VIS_Obs_2023a_B.T_tmp;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g <= APF_CTL_VIS_Obs_2023a_B.T_tmp +
             5; APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
          vr[APF_CTL_VIS_Obs_2023a_B.T_tmp_g - 1] *=
            APF_CTL_VIS_Obs_2023a_B.emax;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.T_tmp_g = (APF_CTL_VIS_Obs_2023a_B.b_j_m - 1) *
          6;
        APF_CTL_VIS_Obs_2023a_B.scale_p = T[APF_CTL_VIS_Obs_2023a_B.T_tmp_g +
          APF_CTL_VIS_Obs_2023a_B.b_j_m];
        APF_CTL_VIS_Obs_2023a_B.rec = T[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1];
        if (fabs(APF_CTL_VIS_Obs_2023a_B.rec) >= fabs
            (APF_CTL_VIS_Obs_2023a_B.scale_p)) {
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 5] = 1.0;
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12] =
            APF_CTL_VIS_Obs_2023a_B.wi_k / APF_CTL_VIS_Obs_2023a_B.rec;
        } else {
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 5] =
            -APF_CTL_VIS_Obs_2023a_B.wi_k / APF_CTL_VIS_Obs_2023a_B.scale_p;
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12] = 1.0;
        }

        APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 6] = 0.0;
        APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 11] = 0.0;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp = 0; APF_CTL_VIS_Obs_2023a_B.T_tmp <=
             APF_CTL_VIS_Obs_2023a_B.b_j_m - 2; APF_CTL_VIS_Obs_2023a_B.T_tmp++)
        {
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp + 6] =
            T[APF_CTL_VIS_Obs_2023a_B.T_tmp_g + APF_CTL_VIS_Obs_2023a_B.T_tmp] *
            -APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 5];
          APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp + 12] = T[6
            * APF_CTL_VIS_Obs_2023a_B.b_j_m + APF_CTL_VIS_Obs_2023a_B.T_tmp] *
            -APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12];
        }

        APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.b_j_m - 2;
        do {
          exitg1 = 0;
          if (APF_CTL_VIS_Obs_2023a_B.j_d + 1 >= 1) {
            guard1 = false;
            if (APF_CTL_VIS_Obs_2023a_B.j_d + 1 == 1) {
              guard1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.T_tmp = (APF_CTL_VIS_Obs_2023a_B.j_d - 1) *
                6;
              APF_CTL_VIS_Obs_2023a_B.c_ix = APF_CTL_VIS_Obs_2023a_B.T_tmp +
                APF_CTL_VIS_Obs_2023a_B.j_d;
              if (T[APF_CTL_VIS_Obs_2023a_B.c_ix] == 0.0) {
                guard1 = true;
              } else {
                APF_CTL_VIS_Obs_2023a_xdlaln2(2, 2, APF_CTL_VIS_Obs_2023a_B.smin,
                  T, APF_CTL_VIS_Obs_2023a_B.c_ix, APF_CTL_VIS_Obs_2023a_B.work,
                  APF_CTL_VIS_Obs_2023a_B.j_d + 6, APF_CTL_VIS_Obs_2023a_B.emax,
                  APF_CTL_VIS_Obs_2023a_B.wi_k, APF_CTL_VIS_Obs_2023a_B.x_f,
                  &APF_CTL_VIS_Obs_2023a_B.scale_p,
                  &APF_CTL_VIS_Obs_2023a_B.c_xnorm);
                if (APF_CTL_VIS_Obs_2023a_B.c_xnorm > 1.0) {
                  APF_CTL_VIS_Obs_2023a_B.u0 =
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d - 1];
                  APF_CTL_VIS_Obs_2023a_B.rec =
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d];
                  if ((APF_CTL_VIS_Obs_2023a_B.u0 >= APF_CTL_VIS_Obs_2023a_B.rec)
                      || rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rec)) {
                    APF_CTL_VIS_Obs_2023a_B.rec = APF_CTL_VIS_Obs_2023a_B.u0;
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.rec > 1.6632002579455995E+291 /
                      APF_CTL_VIS_Obs_2023a_B.c_xnorm) {
                    APF_CTL_VIS_Obs_2023a_B.rec = 1.0 /
                      APF_CTL_VIS_Obs_2023a_B.c_xnorm;
                    APF_CTL_VIS_Obs_2023a_B.x_f[0] *=
                      APF_CTL_VIS_Obs_2023a_B.rec;
                    APF_CTL_VIS_Obs_2023a_B.x_f[2] *=
                      APF_CTL_VIS_Obs_2023a_B.rec;
                    APF_CTL_VIS_Obs_2023a_B.x_f[1] *=
                      APF_CTL_VIS_Obs_2023a_B.rec;
                    APF_CTL_VIS_Obs_2023a_B.x_f[3] *=
                      APF_CTL_VIS_Obs_2023a_B.rec;
                    APF_CTL_VIS_Obs_2023a_B.scale_p *=
                      APF_CTL_VIS_Obs_2023a_B.rec;
                  }
                }

                if (APF_CTL_VIS_Obs_2023a_B.scale_p != 1.0) {
                  for (APF_CTL_VIS_Obs_2023a_B.c_ix = 7;
                       APF_CTL_VIS_Obs_2023a_B.c_ix <=
                       APF_CTL_VIS_Obs_2023a_B.b_j_m + 7;
                       APF_CTL_VIS_Obs_2023a_B.c_ix++) {
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.c_ix -
                      1] *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                  }

                  for (APF_CTL_VIS_Obs_2023a_B.c_ix = 13;
                       APF_CTL_VIS_Obs_2023a_B.c_ix <=
                       APF_CTL_VIS_Obs_2023a_B.b_j_m + 13;
                       APF_CTL_VIS_Obs_2023a_B.c_ix++) {
                    APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.c_ix -
                      1] *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 5] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[0];
                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 6] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[1];
                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 11] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[2];
                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 12] =
                  APF_CTL_VIS_Obs_2023a_B.x_f[3];
                if (APF_CTL_VIS_Obs_2023a_B.j_d - 1 >= 1) {
                  if (!(-APF_CTL_VIS_Obs_2023a_B.x_f[0] == 0.0)) {
                    for (APF_CTL_VIS_Obs_2023a_B.c_ix = 0;
                         APF_CTL_VIS_Obs_2023a_B.c_ix <=
                         APF_CTL_VIS_Obs_2023a_B.j_d - 2;
                         APF_CTL_VIS_Obs_2023a_B.c_ix++) {
                      APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.c_ix
                        + 6] += T[APF_CTL_VIS_Obs_2023a_B.T_tmp +
                        APF_CTL_VIS_Obs_2023a_B.c_ix] *
                        -APF_CTL_VIS_Obs_2023a_B.x_f[0];
                    }
                  }

                  if (!(-APF_CTL_VIS_Obs_2023a_B.x_f[1] == 0.0)) {
                    APF_CTL_VIS_Obs_2023a_B.b_ix = APF_CTL_VIS_Obs_2023a_B.j_d *
                      6;
                    for (APF_CTL_VIS_Obs_2023a_B.c_ix = 0;
                         APF_CTL_VIS_Obs_2023a_B.c_ix <=
                         APF_CTL_VIS_Obs_2023a_B.j_d - 2;
                         APF_CTL_VIS_Obs_2023a_B.c_ix++) {
                      APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.c_ix
                        + 6] += T[APF_CTL_VIS_Obs_2023a_B.b_ix +
                        APF_CTL_VIS_Obs_2023a_B.c_ix] *
                        -APF_CTL_VIS_Obs_2023a_B.x_f[1];
                    }
                  }
                }

                APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d - 1,
                  -APF_CTL_VIS_Obs_2023a_B.x_f[2], T,
                  APF_CTL_VIS_Obs_2023a_B.T_tmp + 1,
                  APF_CTL_VIS_Obs_2023a_B.work);
                APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d - 1,
                  -APF_CTL_VIS_Obs_2023a_B.x_f[3], T,
                  APF_CTL_VIS_Obs_2023a_B.j_d * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work);
                APF_CTL_VIS_Obs_2023a_B.j_d -= 2;
              }
            }

            if (guard1) {
              APF_CTL_VIS_Obs_2023a_xdlaln2(1, 2, APF_CTL_VIS_Obs_2023a_B.smin,
                T, (APF_CTL_VIS_Obs_2023a_B.j_d * 6 +
                    APF_CTL_VIS_Obs_2023a_B.j_d) + 1,
                APF_CTL_VIS_Obs_2023a_B.work, APF_CTL_VIS_Obs_2023a_B.j_d + 7,
                APF_CTL_VIS_Obs_2023a_B.emax, APF_CTL_VIS_Obs_2023a_B.wi_k,
                APF_CTL_VIS_Obs_2023a_B.x_f, &APF_CTL_VIS_Obs_2023a_B.scale_p,
                &APF_CTL_VIS_Obs_2023a_B.rec);
              if ((APF_CTL_VIS_Obs_2023a_B.rec > 1.0) &&
                  (APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d] >
                   1.6632002579455995E+291 / APF_CTL_VIS_Obs_2023a_B.rec)) {
                APF_CTL_VIS_Obs_2023a_B.x_f[0] /= APF_CTL_VIS_Obs_2023a_B.rec;
                APF_CTL_VIS_Obs_2023a_B.x_f[2] /= APF_CTL_VIS_Obs_2023a_B.rec;
                APF_CTL_VIS_Obs_2023a_B.scale_p /= APF_CTL_VIS_Obs_2023a_B.rec;
              }

              if (APF_CTL_VIS_Obs_2023a_B.scale_p != 1.0) {
                for (APF_CTL_VIS_Obs_2023a_B.T_tmp = 7;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp <=
                     APF_CTL_VIS_Obs_2023a_B.b_j_m + 7;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
                  APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1]
                    *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                }

                for (APF_CTL_VIS_Obs_2023a_B.T_tmp = 13;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp <=
                     APF_CTL_VIS_Obs_2023a_B.b_j_m + 13;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
                  APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1]
                    *= APF_CTL_VIS_Obs_2023a_B.scale_p;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 6] =
                APF_CTL_VIS_Obs_2023a_B.x_f[0];
              APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.j_d + 12] =
                APF_CTL_VIS_Obs_2023a_B.x_f[2];
              if ((APF_CTL_VIS_Obs_2023a_B.j_d >= 1) &&
                  (!(-APF_CTL_VIS_Obs_2023a_B.x_f[0] == 0.0))) {
                APF_CTL_VIS_Obs_2023a_B.c_ix = APF_CTL_VIS_Obs_2023a_B.j_d * 6;
                for (APF_CTL_VIS_Obs_2023a_B.T_tmp = 0;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp < APF_CTL_VIS_Obs_2023a_B.j_d;
                     APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
                  APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.T_tmp + 6]
                    += T[APF_CTL_VIS_Obs_2023a_B.c_ix +
                    APF_CTL_VIS_Obs_2023a_B.T_tmp] *
                    -APF_CTL_VIS_Obs_2023a_B.x_f[0];
                }
              }

              APF_CTL_VIS_Obs_2023_xaxpy_p5n5(APF_CTL_VIS_Obs_2023a_B.j_d,
                -APF_CTL_VIS_Obs_2023a_B.x_f[2], T, APF_CTL_VIS_Obs_2023a_B.j_d *
                6 + 1, APF_CTL_VIS_Obs_2023a_B.work);
              APF_CTL_VIS_Obs_2023a_B.j_d--;
            }
          } else {
            exitg1 = 1;
          }
        } while (exitg1 == 0);

        if (APF_CTL_VIS_Obs_2023a_B.b_j_m + 1 > 2) {
          APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.T_tmp_g + 6;
          APF_CTL_VIS_Obs_2023a_B.emax =
            APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 5];
          if (APF_CTL_VIS_Obs_2023a_B.emax != 1.0) {
            for (APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.T_tmp_g
                 + 1; APF_CTL_VIS_Obs_2023a_B.T_tmp <=
                 APF_CTL_VIS_Obs_2023a_B.j_d; APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
              if (APF_CTL_VIS_Obs_2023a_B.emax == 0.0) {
                vr[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1] = 0.0;
              } else {
                vr[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1] *=
                  APF_CTL_VIS_Obs_2023a_B.emax;
              }
            }
          }

          APF_CTL_VIS_Obs_2023a_B.b_ix = 6;
          APF_CTL_VIS_Obs_2023a_B.d_f = (APF_CTL_VIS_Obs_2023a_B.b_j_m - 2) * 6
            + 1;
          for (APF_CTL_VIS_Obs_2023a_B.j_d = 1; APF_CTL_VIS_Obs_2023a_B.j_d <=
               APF_CTL_VIS_Obs_2023a_B.d_f; APF_CTL_VIS_Obs_2023a_B.j_d += 6) {
            for (APF_CTL_VIS_Obs_2023a_B.c_ix = APF_CTL_VIS_Obs_2023a_B.j_d;
                 APF_CTL_VIS_Obs_2023a_B.c_ix <= APF_CTL_VIS_Obs_2023a_B.j_d + 5;
                 APF_CTL_VIS_Obs_2023a_B.c_ix++) {
              APF_CTL_VIS_Obs_2023a_B.T_tmp = (APF_CTL_VIS_Obs_2023a_B.T_tmp_g +
                APF_CTL_VIS_Obs_2023a_B.c_ix) - APF_CTL_VIS_Obs_2023a_B.j_d;
              vr[APF_CTL_VIS_Obs_2023a_B.T_tmp] +=
                vr[APF_CTL_VIS_Obs_2023a_B.c_ix - 1] *
                APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_ix];
            }

            APF_CTL_VIS_Obs_2023a_B.b_ix++;
          }

          APF_CTL_VIS_Obs_2023a_xgemv(APF_CTL_VIS_Obs_2023a_B.b_j_m - 1,
            APF_CTL_VIS_Obs_2023a_B.work,
            APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12], vr,
            APF_CTL_VIS_Obs_2023a_B.b_j_m * 6 + 1);
        } else {
          APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.T_tmp_g + 1;
          for (APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.j_d;
               APF_CTL_VIS_Obs_2023a_B.T_tmp <= APF_CTL_VIS_Obs_2023a_B.j_d + 5;
               APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
            vr[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1] *=
              APF_CTL_VIS_Obs_2023a_B.work[6];
          }

          APF_CTL_VIS_Obs_2023a_B.j_d = APF_CTL_VIS_Obs_2023a_B.b_j_m * 6 + 1;
          for (APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.j_d;
               APF_CTL_VIS_Obs_2023a_B.T_tmp <= APF_CTL_VIS_Obs_2023a_B.j_d + 5;
               APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
            vr[APF_CTL_VIS_Obs_2023a_B.T_tmp - 1] *=
              APF_CTL_VIS_Obs_2023a_B.work[APF_CTL_VIS_Obs_2023a_B.b_j_m + 12];
          }
        }

        APF_CTL_VIS_Obs_2023a_B.emax = 0.0;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp = 0; APF_CTL_VIS_Obs_2023a_B.T_tmp <
             6; APF_CTL_VIS_Obs_2023a_B.T_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.rec = fabs(vr[6 *
            APF_CTL_VIS_Obs_2023a_B.b_j_m + APF_CTL_VIS_Obs_2023a_B.T_tmp]) +
            fabs(vr[APF_CTL_VIS_Obs_2023a_B.T_tmp_g +
                 APF_CTL_VIS_Obs_2023a_B.T_tmp]);
          if ((!(APF_CTL_VIS_Obs_2023a_B.emax >= APF_CTL_VIS_Obs_2023a_B.rec)) &&
              (!rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rec))) {
            APF_CTL_VIS_Obs_2023a_B.emax = APF_CTL_VIS_Obs_2023a_B.rec;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.emax = 1.0 / APF_CTL_VIS_Obs_2023a_B.emax;
        APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.T_tmp_g + 1;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = APF_CTL_VIS_Obs_2023a_B.T_tmp;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g <= APF_CTL_VIS_Obs_2023a_B.T_tmp +
             5; APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
          vr[APF_CTL_VIS_Obs_2023a_B.T_tmp_g - 1] *=
            APF_CTL_VIS_Obs_2023a_B.emax;
        }

        APF_CTL_VIS_Obs_2023a_B.T_tmp = APF_CTL_VIS_Obs_2023a_B.b_j_m * 6 + 1;
        for (APF_CTL_VIS_Obs_2023a_B.T_tmp_g = APF_CTL_VIS_Obs_2023a_B.T_tmp;
             APF_CTL_VIS_Obs_2023a_B.T_tmp_g <= APF_CTL_VIS_Obs_2023a_B.T_tmp +
             5; APF_CTL_VIS_Obs_2023a_B.T_tmp_g++) {
          vr[APF_CTL_VIS_Obs_2023a_B.T_tmp_g - 1] *=
            APF_CTL_VIS_Obs_2023a_B.emax;
        }
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_202_eigStandard(const real_T A[36], creal_T V[36],
  creal_T D[36])
{
  boolean_T exitg1;
  memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_c[0], &A[0], 36U * sizeof(real_T));
  APF_CTL_VIS_Obs_2023a_B.anrm_c = 0.0;
  APF_CTL_VIS_Obs_2023a_B.c_k_n = 0;
  exitg1 = false;
  while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.c_k_n < 36)) {
    APF_CTL_VIS_Obs_2023a_B.absxk = fabs(A[APF_CTL_VIS_Obs_2023a_B.c_k_n]);
    if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.absxk)) {
      APF_CTL_VIS_Obs_2023a_B.anrm_c = (rtNaN);
      exitg1 = true;
    } else {
      if (APF_CTL_VIS_Obs_2023a_B.absxk > APF_CTL_VIS_Obs_2023a_B.anrm_c) {
        APF_CTL_VIS_Obs_2023a_B.anrm_c = APF_CTL_VIS_Obs_2023a_B.absxk;
      }

      APF_CTL_VIS_Obs_2023a_B.c_k_n++;
    }
  }

  if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.anrm_c) || rtIsNaN
      (APF_CTL_VIS_Obs_2023a_B.anrm_c)) {
    for (APF_CTL_VIS_Obs_2023a_B.ihi = 0; APF_CTL_VIS_Obs_2023a_B.ihi < 6;
         APF_CTL_VIS_Obs_2023a_B.ihi++) {
      APF_CTL_VIS_Obs_2023a_B.b_dt[APF_CTL_VIS_Obs_2023a_B.ihi].re = (rtNaN);
      APF_CTL_VIS_Obs_2023a_B.b_dt[APF_CTL_VIS_Obs_2023a_B.ihi].im = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.i_k = 0; APF_CTL_VIS_Obs_2023a_B.i_k < 36;
         APF_CTL_VIS_Obs_2023a_B.i_k++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_k].re = (rtNaN);
      V[APF_CTL_VIS_Obs_2023a_B.i_k].im = 0.0;
    }
  } else {
    APF_CTL_VIS_Obs_2023a_B.absxk = APF_CTL_VIS_Obs_2023a_B.anrm_c;
    APF_CTL_VIS_Obs_2023a_B.scalea = false;
    if ((APF_CTL_VIS_Obs_2023a_B.anrm_c > 0.0) &&
        (APF_CTL_VIS_Obs_2023a_B.anrm_c < 6.7178761075670888E-139)) {
      APF_CTL_VIS_Obs_2023a_B.scalea = true;
      APF_CTL_VIS_Obs_2023a_B.absxk = 6.7178761075670888E-139;
      APF_CTL_VIS_Obs_2023a_xzlascl(APF_CTL_VIS_Obs_2023a_B.anrm_c,
        APF_CTL_VIS_Obs_2023a_B.absxk, APF_CTL_VIS_Obs_2023a_B.b_A_c);
    } else if (APF_CTL_VIS_Obs_2023a_B.anrm_c > 1.4885657073574029E+138) {
      APF_CTL_VIS_Obs_2023a_B.scalea = true;
      APF_CTL_VIS_Obs_2023a_B.absxk = 1.4885657073574029E+138;
      APF_CTL_VIS_Obs_2023a_xzlascl(APF_CTL_VIS_Obs_2023a_B.anrm_c,
        APF_CTL_VIS_Obs_2023a_B.absxk, APF_CTL_VIS_Obs_2023a_B.b_A_c);
    }

    APF_CTL_VIS_Obs_2023a_xzgebal(APF_CTL_VIS_Obs_2023a_B.b_A_c,
      &APF_CTL_VIS_Obs_2023a_B.c_k_n, &APF_CTL_VIS_Obs_2023a_B.ihi,
      APF_CTL_VIS_Obs_2023a_B.scale);
    APF_CTL_VIS_Obs_2023a_xzgehrd_j(APF_CTL_VIS_Obs_2023a_B.b_A_c,
      APF_CTL_VIS_Obs_2023a_B.c_k_n, APF_CTL_VIS_Obs_2023a_B.ihi,
      APF_CTL_VIS_Obs_2023a_B.tau_a);
    memcpy(&APF_CTL_VIS_Obs_2023a_B.vr[0], &APF_CTL_VIS_Obs_2023a_B.b_A_c[0],
           36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_xzunghr(APF_CTL_VIS_Obs_2023a_B.c_k_n,
      APF_CTL_VIS_Obs_2023a_B.ihi, APF_CTL_VIS_Obs_2023a_B.vr,
      APF_CTL_VIS_Obs_2023a_B.tau_a);
    APF_CTL_VIS_Obs_2023a_xdlahqr_p(APF_CTL_VIS_Obs_2023a_B.c_k_n,
      APF_CTL_VIS_Obs_2023a_B.ihi, APF_CTL_VIS_Obs_2023a_B.b_A_c,
      APF_CTL_VIS_Obs_2023a_B.c_k_n, APF_CTL_VIS_Obs_2023a_B.ihi,
      APF_CTL_VIS_Obs_2023a_B.vr, &APF_CTL_VIS_Obs_2023a_B.info,
      APF_CTL_VIS_Obs_2023a_B.wr, APF_CTL_VIS_Obs_2023a_B.wi);
    if (APF_CTL_VIS_Obs_2023a_B.info == 0) {
      APF_CTL_VIS_Obs_2023a_xdtrevc3(APF_CTL_VIS_Obs_2023a_B.b_A_c,
        APF_CTL_VIS_Obs_2023a_B.vr);
      if (APF_CTL_VIS_Obs_2023a_B.c_k_n != APF_CTL_VIS_Obs_2023a_B.ihi) {
        for (APF_CTL_VIS_Obs_2023a_B.d_i = APF_CTL_VIS_Obs_2023a_B.c_k_n;
             APF_CTL_VIS_Obs_2023a_B.d_i <= APF_CTL_VIS_Obs_2023a_B.ihi;
             APF_CTL_VIS_Obs_2023a_B.d_i++) {
          for (APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.d_i;
               APF_CTL_VIS_Obs_2023a_B.i_k <= APF_CTL_VIS_Obs_2023a_B.d_i + 30;
               APF_CTL_VIS_Obs_2023a_B.i_k += 6) {
            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.i_k - 1] *=
              APF_CTL_VIS_Obs_2023a_B.scale[APF_CTL_VIS_Obs_2023a_B.d_i - 1];
          }
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.c_k_n - 1;
           APF_CTL_VIS_Obs_2023a_B.i_k >= 1; APF_CTL_VIS_Obs_2023a_B.i_k--) {
        APF_CTL_VIS_Obs_2023a_B.scl =
          APF_CTL_VIS_Obs_2023a_B.scale[APF_CTL_VIS_Obs_2023a_B.i_k - 1];
        if (static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_B.scl) !=
            APF_CTL_VIS_Obs_2023a_B.i_k) {
          for (APF_CTL_VIS_Obs_2023a_B.b_k = 0; APF_CTL_VIS_Obs_2023a_B.b_k < 6;
               APF_CTL_VIS_Obs_2023a_B.b_k++) {
            APF_CTL_VIS_Obs_2023a_B.b_temp_tmp = (APF_CTL_VIS_Obs_2023a_B.b_k *
              6 + APF_CTL_VIS_Obs_2023a_B.i_k) - 1;
            APF_CTL_VIS_Obs_2023a_B.b_temp =
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_temp_tmp];
            APF_CTL_VIS_Obs_2023a_B.d_i = (APF_CTL_VIS_Obs_2023a_B.b_k * 6 +
              static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_B.scl)) - 1;
            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_temp_tmp] =
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.d_i];
            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.d_i] =
              APF_CTL_VIS_Obs_2023a_B.b_temp;
          }
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.ihi + 1;
           APF_CTL_VIS_Obs_2023a_B.i_k < 7; APF_CTL_VIS_Obs_2023a_B.i_k++) {
        APF_CTL_VIS_Obs_2023a_B.scl =
          APF_CTL_VIS_Obs_2023a_B.scale[APF_CTL_VIS_Obs_2023a_B.i_k - 1];
        if (static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_B.scl) !=
            APF_CTL_VIS_Obs_2023a_B.i_k) {
          for (APF_CTL_VIS_Obs_2023a_B.b_k = 0; APF_CTL_VIS_Obs_2023a_B.b_k < 6;
               APF_CTL_VIS_Obs_2023a_B.b_k++) {
            APF_CTL_VIS_Obs_2023a_B.b_temp_tmp = (APF_CTL_VIS_Obs_2023a_B.b_k *
              6 + APF_CTL_VIS_Obs_2023a_B.i_k) - 1;
            APF_CTL_VIS_Obs_2023a_B.b_temp =
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_temp_tmp];
            APF_CTL_VIS_Obs_2023a_B.d_i = (APF_CTL_VIS_Obs_2023a_B.b_k * 6 +
              static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_B.scl)) - 1;
            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_temp_tmp] =
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.d_i];
            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.d_i] =
              APF_CTL_VIS_Obs_2023a_B.b_temp;
          }
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.ihi = 0; APF_CTL_VIS_Obs_2023a_B.ihi < 6;
           APF_CTL_VIS_Obs_2023a_B.ihi++) {
        APF_CTL_VIS_Obs_2023a_B.scl =
          APF_CTL_VIS_Obs_2023a_B.wi[APF_CTL_VIS_Obs_2023a_B.ihi];
        if (!(APF_CTL_VIS_Obs_2023a_B.scl < 0.0)) {
          if ((APF_CTL_VIS_Obs_2023a_B.ihi + 1 != 6) &&
              (APF_CTL_VIS_Obs_2023a_B.scl > 0.0)) {
            APF_CTL_VIS_Obs_2023a_B.b_k = APF_CTL_VIS_Obs_2023a_B.ihi * 6 + 1;
            APF_CTL_VIS_Obs_2023a_B.d_i = (APF_CTL_VIS_Obs_2023a_B.ihi + 1) * 6;
            APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.d_i + 1;
            APF_CTL_VIS_Obs_2023a_B.scl = 1.0 / APF_CTL_VIS_Obs_2_rt_hypotd_snf
              (APF_CTL_VIS_Obs_2023a_xnrm2_l(6, APF_CTL_VIS_Obs_2023a_B.vr,
                APF_CTL_VIS_Obs_2023a_B.b_k), APF_CTL_VIS_Obs_2023a_xnrm2_l(6,
                APF_CTL_VIS_Obs_2023a_B.vr, APF_CTL_VIS_Obs_2023a_B.d_i + 1));
            for (APF_CTL_VIS_Obs_2023a_B.b_temp_tmp =
                 APF_CTL_VIS_Obs_2023a_B.b_k; APF_CTL_VIS_Obs_2023a_B.b_temp_tmp
                 <= APF_CTL_VIS_Obs_2023a_B.b_k + 5;
                 APF_CTL_VIS_Obs_2023a_B.b_temp_tmp++) {
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_temp_tmp - 1]
                *= APF_CTL_VIS_Obs_2023a_B.scl;
            }

            for (APF_CTL_VIS_Obs_2023a_B.b_k = APF_CTL_VIS_Obs_2023a_B.i_k;
                 APF_CTL_VIS_Obs_2023a_B.b_k <= APF_CTL_VIS_Obs_2023a_B.i_k + 5;
                 APF_CTL_VIS_Obs_2023a_B.b_k++) {
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.b_k - 1] *=
                APF_CTL_VIS_Obs_2023a_B.scl;
            }

            for (APF_CTL_VIS_Obs_2023a_B.i_k = 0; APF_CTL_VIS_Obs_2023a_B.i_k <
                 6; APF_CTL_VIS_Obs_2023a_B.i_k++) {
              APF_CTL_VIS_Obs_2023a_B.scl = APF_CTL_VIS_Obs_2023a_B.vr[6 *
                APF_CTL_VIS_Obs_2023a_B.ihi + APF_CTL_VIS_Obs_2023a_B.i_k];
              APF_CTL_VIS_Obs_2023a_B.b_temp =
                APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.d_i +
                APF_CTL_VIS_Obs_2023a_B.i_k];
              APF_CTL_VIS_Obs_2023a_B.scale[APF_CTL_VIS_Obs_2023a_B.i_k] =
                APF_CTL_VIS_Obs_2023a_B.scl * APF_CTL_VIS_Obs_2023a_B.scl +
                APF_CTL_VIS_Obs_2023a_B.b_temp * APF_CTL_VIS_Obs_2023a_B.b_temp;
            }

            APF_CTL_VIS_Obs_2023a_B.b_k = 0;
            APF_CTL_VIS_Obs_2023a_B.scl = fabs(APF_CTL_VIS_Obs_2023a_B.scale[0]);
            for (APF_CTL_VIS_Obs_2023a_B.i_k = 0; APF_CTL_VIS_Obs_2023a_B.i_k <
                 5; APF_CTL_VIS_Obs_2023a_B.i_k++) {
              APF_CTL_VIS_Obs_2023a_B.b_temp = fabs
                (APF_CTL_VIS_Obs_2023a_B.scale[APF_CTL_VIS_Obs_2023a_B.i_k + 1]);
              if (APF_CTL_VIS_Obs_2023a_B.b_temp > APF_CTL_VIS_Obs_2023a_B.scl)
              {
                APF_CTL_VIS_Obs_2023a_B.b_k = APF_CTL_VIS_Obs_2023a_B.i_k + 1;
                APF_CTL_VIS_Obs_2023a_B.scl = APF_CTL_VIS_Obs_2023a_B.b_temp;
              }
            }

            APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.d_i +
              APF_CTL_VIS_Obs_2023a_B.b_k;
            APF_CTL_VIS_Obs_2023a_B.g1 =
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.i_k];
            if (APF_CTL_VIS_Obs_2023a_B.g1 == 0.0) {
              APF_CTL_VIS_Obs_2023a_B.f1 = 1.0;
              APF_CTL_VIS_Obs_2023a_B.g1 = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.f1 = APF_CTL_VIS_Obs_2023a_B.vr[6 *
                APF_CTL_VIS_Obs_2023a_B.ihi + APF_CTL_VIS_Obs_2023a_B.b_k];
              if (APF_CTL_VIS_Obs_2023a_B.f1 == 0.0) {
                APF_CTL_VIS_Obs_2023a_B.f1 = 0.0;
                APF_CTL_VIS_Obs_2023a_B.g1 = 1.0;
              } else {
                APF_CTL_VIS_Obs_2023a_B.scl = fabs(APF_CTL_VIS_Obs_2023a_B.f1);
                APF_CTL_VIS_Obs_2023a_B.b_temp = fabs(APF_CTL_VIS_Obs_2023a_B.g1);
                if ((APF_CTL_VIS_Obs_2023a_B.scl >=
                     APF_CTL_VIS_Obs_2023a_B.b_temp) || rtIsNaN
                    (APF_CTL_VIS_Obs_2023a_B.b_temp)) {
                  APF_CTL_VIS_Obs_2023a_B.b_scale = APF_CTL_VIS_Obs_2023a_B.scl;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.b_scale =
                    APF_CTL_VIS_Obs_2023a_B.b_temp;
                }

                APF_CTL_VIS_Obs_2023a_B.b_k = 0;
                if (APF_CTL_VIS_Obs_2023a_B.b_scale >= 7.4428285367870146E+137)
                {
                  do {
                    APF_CTL_VIS_Obs_2023a_B.b_k++;
                    APF_CTL_VIS_Obs_2023a_B.f1 *= 1.3435752215134178E-138;
                    APF_CTL_VIS_Obs_2023a_B.g1 *= 1.3435752215134178E-138;
                    APF_CTL_VIS_Obs_2023a_B.b_scale = fabs
                      (APF_CTL_VIS_Obs_2023a_B.f1);
                    APF_CTL_VIS_Obs_2023a_B.u1 = fabs(APF_CTL_VIS_Obs_2023a_B.g1);
                    if ((APF_CTL_VIS_Obs_2023a_B.b_scale >=
                         APF_CTL_VIS_Obs_2023a_B.u1) || rtIsNaN
                        (APF_CTL_VIS_Obs_2023a_B.u1)) {
                      APF_CTL_VIS_Obs_2023a_B.u1 =
                        APF_CTL_VIS_Obs_2023a_B.b_scale;
                    }
                  } while ((APF_CTL_VIS_Obs_2023a_B.u1 >=
                            7.4428285367870146E+137) &&
                           (APF_CTL_VIS_Obs_2023a_B.b_k < 20));

                  APF_CTL_VIS_Obs_2023a_B.b_scale =
                    APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.f1,
                    APF_CTL_VIS_Obs_2023a_B.g1);
                  APF_CTL_VIS_Obs_2023a_B.f1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                  APF_CTL_VIS_Obs_2023a_B.g1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                } else if (APF_CTL_VIS_Obs_2023a_B.b_scale <=
                           1.3435752215134178E-138) {
                  do {
                    APF_CTL_VIS_Obs_2023a_B.f1 *= 7.4428285367870146E+137;
                    APF_CTL_VIS_Obs_2023a_B.g1 *= 7.4428285367870146E+137;
                    APF_CTL_VIS_Obs_2023a_B.b_scale = fabs
                      (APF_CTL_VIS_Obs_2023a_B.f1);
                    APF_CTL_VIS_Obs_2023a_B.u1 = fabs(APF_CTL_VIS_Obs_2023a_B.g1);
                    if ((APF_CTL_VIS_Obs_2023a_B.b_scale >=
                         APF_CTL_VIS_Obs_2023a_B.u1) || rtIsNaN
                        (APF_CTL_VIS_Obs_2023a_B.u1)) {
                      APF_CTL_VIS_Obs_2023a_B.u1 =
                        APF_CTL_VIS_Obs_2023a_B.b_scale;
                    }
                  } while (APF_CTL_VIS_Obs_2023a_B.u1 <= 1.3435752215134178E-138);

                  APF_CTL_VIS_Obs_2023a_B.b_scale =
                    APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.f1,
                    APF_CTL_VIS_Obs_2023a_B.g1);
                  APF_CTL_VIS_Obs_2023a_B.f1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                  APF_CTL_VIS_Obs_2023a_B.g1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.b_scale =
                    APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.f1,
                    APF_CTL_VIS_Obs_2023a_B.g1);
                  APF_CTL_VIS_Obs_2023a_B.f1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                  APF_CTL_VIS_Obs_2023a_B.g1 /= APF_CTL_VIS_Obs_2023a_B.b_scale;
                }

                if ((APF_CTL_VIS_Obs_2023a_B.scl >
                     APF_CTL_VIS_Obs_2023a_B.b_temp) &&
                    (APF_CTL_VIS_Obs_2023a_B.f1 < 0.0)) {
                  APF_CTL_VIS_Obs_2023a_B.f1 = -APF_CTL_VIS_Obs_2023a_B.f1;
                  APF_CTL_VIS_Obs_2023a_B.g1 = -APF_CTL_VIS_Obs_2023a_B.g1;
                }
              }
            }

            APF_CTL_VIS_Obs_2023a_B.b_k = APF_CTL_VIS_Obs_2023a_B.ihi * 6;
            for (APF_CTL_VIS_Obs_2023a_B.b_temp_tmp = 0;
                 APF_CTL_VIS_Obs_2023a_B.b_temp_tmp < 6;
                 APF_CTL_VIS_Obs_2023a_B.b_temp_tmp++) {
              APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.d_i
                + APF_CTL_VIS_Obs_2023a_B.b_temp_tmp;
              APF_CTL_VIS_Obs_2023a_B.scl =
                APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp];
              APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_g =
                APF_CTL_VIS_Obs_2023a_B.b_k + APF_CTL_VIS_Obs_2023a_B.b_temp_tmp;
              APF_CTL_VIS_Obs_2023a_B.b_temp =
                APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_g];
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp] =
                APF_CTL_VIS_Obs_2023a_B.scl * APF_CTL_VIS_Obs_2023a_B.f1 -
                APF_CTL_VIS_Obs_2023a_B.b_temp * APF_CTL_VIS_Obs_2023a_B.g1;
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_g]
                = APF_CTL_VIS_Obs_2023a_B.b_temp * APF_CTL_VIS_Obs_2023a_B.f1 +
                APF_CTL_VIS_Obs_2023a_B.scl * APF_CTL_VIS_Obs_2023a_B.g1;
            }

            APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.i_k] = 0.0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.d_i = APF_CTL_VIS_Obs_2023a_B.ihi * 6 + 1;
            APF_CTL_VIS_Obs_2023a_B.scl = 1.0 / APF_CTL_VIS_Obs_2023a_xnrm2_l(6,
              APF_CTL_VIS_Obs_2023a_B.vr, APF_CTL_VIS_Obs_2023a_B.d_i);
            for (APF_CTL_VIS_Obs_2023a_B.i_k = APF_CTL_VIS_Obs_2023a_B.d_i;
                 APF_CTL_VIS_Obs_2023a_B.i_k <= APF_CTL_VIS_Obs_2023a_B.d_i + 5;
                 APF_CTL_VIS_Obs_2023a_B.i_k++) {
              APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.i_k - 1] *=
                APF_CTL_VIS_Obs_2023a_B.scl;
            }
          }
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.i_k = 0; APF_CTL_VIS_Obs_2023a_B.i_k < 36;
           APF_CTL_VIS_Obs_2023a_B.i_k++) {
        V[APF_CTL_VIS_Obs_2023a_B.i_k].re =
          APF_CTL_VIS_Obs_2023a_B.vr[APF_CTL_VIS_Obs_2023a_B.i_k];
        V[APF_CTL_VIS_Obs_2023a_B.i_k].im = 0.0;
      }

      for (APF_CTL_VIS_Obs_2023a_B.ihi = 0; APF_CTL_VIS_Obs_2023a_B.ihi < 5;
           APF_CTL_VIS_Obs_2023a_B.ihi++) {
        if ((APF_CTL_VIS_Obs_2023a_B.wi[APF_CTL_VIS_Obs_2023a_B.ihi] > 0.0) &&
            (APF_CTL_VIS_Obs_2023a_B.wi[APF_CTL_VIS_Obs_2023a_B.ihi + 1] < 0.0))
        {
          for (APF_CTL_VIS_Obs_2023a_B.d_i = 0; APF_CTL_VIS_Obs_2023a_B.d_i < 6;
               APF_CTL_VIS_Obs_2023a_B.d_i++) {
            APF_CTL_VIS_Obs_2023a_B.i_k = 6 * APF_CTL_VIS_Obs_2023a_B.ihi +
              APF_CTL_VIS_Obs_2023a_B.d_i;
            APF_CTL_VIS_Obs_2023a_B.scl = V[APF_CTL_VIS_Obs_2023a_B.i_k].re;
            APF_CTL_VIS_Obs_2023a_B.b_k = (APF_CTL_VIS_Obs_2023a_B.ihi + 1) * 6
              + APF_CTL_VIS_Obs_2023a_B.d_i;
            APF_CTL_VIS_Obs_2023a_B.b_temp = V[APF_CTL_VIS_Obs_2023a_B.b_k].re;
            V[APF_CTL_VIS_Obs_2023a_B.i_k].re = APF_CTL_VIS_Obs_2023a_B.scl;
            V[APF_CTL_VIS_Obs_2023a_B.i_k].im = APF_CTL_VIS_Obs_2023a_B.b_temp;
            V[APF_CTL_VIS_Obs_2023a_B.b_k].re = APF_CTL_VIS_Obs_2023a_B.scl;
            V[APF_CTL_VIS_Obs_2023a_B.b_k].im = -APF_CTL_VIS_Obs_2023a_B.b_temp;
          }
        }
      }
    } else {
      for (APF_CTL_VIS_Obs_2023a_B.i_k = 0; APF_CTL_VIS_Obs_2023a_B.i_k < 36;
           APF_CTL_VIS_Obs_2023a_B.i_k++) {
        V[APF_CTL_VIS_Obs_2023a_B.i_k].re = (rtNaN);
        V[APF_CTL_VIS_Obs_2023a_B.i_k].im = 0.0;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.scalea) {
      APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk,
        APF_CTL_VIS_Obs_2023a_B.anrm_c, 6 - APF_CTL_VIS_Obs_2023a_B.info,
        APF_CTL_VIS_Obs_2023a_B.wr, APF_CTL_VIS_Obs_2023a_B.info + 1);
      APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk,
        APF_CTL_VIS_Obs_2023a_B.anrm_c, 6 - APF_CTL_VIS_Obs_2023a_B.info,
        APF_CTL_VIS_Obs_2023a_B.wi, APF_CTL_VIS_Obs_2023a_B.info + 1);
      if (APF_CTL_VIS_Obs_2023a_B.info != 0) {
        APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk,
          APF_CTL_VIS_Obs_2023a_B.anrm_c, APF_CTL_VIS_Obs_2023a_B.c_k_n - 1,
          APF_CTL_VIS_Obs_2023a_B.wr, 1);
        APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.absxk,
          APF_CTL_VIS_Obs_2023a_B.anrm_c, APF_CTL_VIS_Obs_2023a_B.c_k_n - 1,
          APF_CTL_VIS_Obs_2023a_B.wi, 1);
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.info != 0) {
      for (APF_CTL_VIS_Obs_2023a_B.ihi = APF_CTL_VIS_Obs_2023a_B.c_k_n;
           APF_CTL_VIS_Obs_2023a_B.ihi <= APF_CTL_VIS_Obs_2023a_B.info;
           APF_CTL_VIS_Obs_2023a_B.ihi++) {
        APF_CTL_VIS_Obs_2023a_B.wr[APF_CTL_VIS_Obs_2023a_B.ihi - 1] = (rtNaN);
        APF_CTL_VIS_Obs_2023a_B.wi[APF_CTL_VIS_Obs_2023a_B.ihi - 1] = 0.0;
      }
    }

    for (APF_CTL_VIS_Obs_2023a_B.ihi = 0; APF_CTL_VIS_Obs_2023a_B.ihi < 6;
         APF_CTL_VIS_Obs_2023a_B.ihi++) {
      APF_CTL_VIS_Obs_2023a_B.b_dt[APF_CTL_VIS_Obs_2023a_B.ihi].re =
        APF_CTL_VIS_Obs_2023a_B.wr[APF_CTL_VIS_Obs_2023a_B.ihi];
      APF_CTL_VIS_Obs_2023a_B.b_dt[APF_CTL_VIS_Obs_2023a_B.ihi].im =
        APF_CTL_VIS_Obs_2023a_B.wi[APF_CTL_VIS_Obs_2023a_B.ihi];
    }
  }

  memset(&D[0], 0, 36U * sizeof(creal_T));
  for (APF_CTL_VIS_Obs_2023a_B.c_k_n = 0; APF_CTL_VIS_Obs_2023a_B.c_k_n < 6;
       APF_CTL_VIS_Obs_2023a_B.c_k_n++) {
    D[APF_CTL_VIS_Obs_2023a_B.c_k_n + 6 * APF_CTL_VIS_Obs_2023a_B.c_k_n] =
      APF_CTL_VIS_Obs_2023a_B.b_dt[APF_CTL_VIS_Obs_2023a_B.c_k_n];
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xzlartg(real_T f, real_T g, real_T *cs, real_T
  *sn, real_T *r)
{
  if (g == 0.0) {
    *cs = 1.0;
    *sn = 0.0;
    *r = f;
  } else if (f == 0.0) {
    *cs = 0.0;
    *sn = 1.0;
    *r = g;
  } else {
    APF_CTL_VIS_Obs_2023a_B.f1_i = f;
    APF_CTL_VIS_Obs_2023a_B.g1_g = g;
    APF_CTL_VIS_Obs_2023a_B.scale_tmp = fabs(f);
    APF_CTL_VIS_Obs_2023a_B.scale_tmp_n = fabs(g);
    if ((APF_CTL_VIS_Obs_2023a_B.scale_tmp >=
         APF_CTL_VIS_Obs_2023a_B.scale_tmp_n) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.scale_tmp_n)) {
      APF_CTL_VIS_Obs_2023a_B.scale_dd = APF_CTL_VIS_Obs_2023a_B.scale_tmp;
    } else {
      APF_CTL_VIS_Obs_2023a_B.scale_dd = APF_CTL_VIS_Obs_2023a_B.scale_tmp_n;
    }

    APF_CTL_VIS_Obs_2023a_B.count_d = -1;
    if (APF_CTL_VIS_Obs_2023a_B.scale_dd >= 7.4428285367870146E+137) {
      do {
        APF_CTL_VIS_Obs_2023a_B.count_d++;
        APF_CTL_VIS_Obs_2023a_B.f1_i *= 1.3435752215134178E-138;
        APF_CTL_VIS_Obs_2023a_B.g1_g *= 1.3435752215134178E-138;
        APF_CTL_VIS_Obs_2023a_B.scale_dd = fabs(APF_CTL_VIS_Obs_2023a_B.f1_i);
        APF_CTL_VIS_Obs_2023a_B.u1_m = fabs(APF_CTL_VIS_Obs_2023a_B.g1_g);
        if ((APF_CTL_VIS_Obs_2023a_B.scale_dd >= APF_CTL_VIS_Obs_2023a_B.u1_m) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.u1_m)) {
          APF_CTL_VIS_Obs_2023a_B.u1_m = APF_CTL_VIS_Obs_2023a_B.scale_dd;
        }
      } while ((APF_CTL_VIS_Obs_2023a_B.u1_m >= 7.4428285367870146E+137) &&
               (APF_CTL_VIS_Obs_2023a_B.count_d + 1 < 20));

      *r = APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.f1_i,
        APF_CTL_VIS_Obs_2023a_B.g1_g);
      *cs = APF_CTL_VIS_Obs_2023a_B.f1_i / *r;
      *sn = APF_CTL_VIS_Obs_2023a_B.g1_g / *r;
      for (APF_CTL_VIS_Obs_2023a_B.b_i_h = 0; APF_CTL_VIS_Obs_2023a_B.b_i_h <=
           APF_CTL_VIS_Obs_2023a_B.count_d; APF_CTL_VIS_Obs_2023a_B.b_i_h++) {
        *r *= 7.4428285367870146E+137;
      }
    } else if (APF_CTL_VIS_Obs_2023a_B.scale_dd <= 1.3435752215134178E-138) {
      do {
        APF_CTL_VIS_Obs_2023a_B.count_d++;
        APF_CTL_VIS_Obs_2023a_B.f1_i *= 7.4428285367870146E+137;
        APF_CTL_VIS_Obs_2023a_B.g1_g *= 7.4428285367870146E+137;
        APF_CTL_VIS_Obs_2023a_B.scale_dd = fabs(APF_CTL_VIS_Obs_2023a_B.f1_i);
        APF_CTL_VIS_Obs_2023a_B.u1_m = fabs(APF_CTL_VIS_Obs_2023a_B.g1_g);
        if ((APF_CTL_VIS_Obs_2023a_B.scale_dd >= APF_CTL_VIS_Obs_2023a_B.u1_m) ||
            rtIsNaN(APF_CTL_VIS_Obs_2023a_B.u1_m)) {
          APF_CTL_VIS_Obs_2023a_B.u1_m = APF_CTL_VIS_Obs_2023a_B.scale_dd;
        }
      } while (APF_CTL_VIS_Obs_2023a_B.u1_m <= 1.3435752215134178E-138);

      *r = APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.f1_i,
        APF_CTL_VIS_Obs_2023a_B.g1_g);
      *cs = APF_CTL_VIS_Obs_2023a_B.f1_i / *r;
      *sn = APF_CTL_VIS_Obs_2023a_B.g1_g / *r;
      for (APF_CTL_VIS_Obs_2023a_B.b_i_h = 0; APF_CTL_VIS_Obs_2023a_B.b_i_h <=
           APF_CTL_VIS_Obs_2023a_B.count_d; APF_CTL_VIS_Obs_2023a_B.b_i_h++) {
        *r *= 1.3435752215134178E-138;
      }
    } else {
      *r = APF_CTL_VIS_Obs_2_rt_hypotd_snf(f, g);
      *cs = f / *r;
      *sn = g / *r;
    }

    if ((APF_CTL_VIS_Obs_2023a_B.scale_tmp > APF_CTL_VIS_Obs_2023a_B.scale_tmp_n)
        && (*cs < 0.0)) {
      *cs = -*cs;
      *sn = -*sn;
      *r = -*r;
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2_rotateRight_e(int32_T n, real_T z[36], int32_T iz0,
  const real_T cs[10], int32_T ic0, int32_T is0)
{
  for (APF_CTL_VIS_Obs_2023a_B.b_j_c = 0; APF_CTL_VIS_Obs_2023a_B.b_j_c <= n - 2;
       APF_CTL_VIS_Obs_2023a_B.b_j_c++) {
    APF_CTL_VIS_Obs_2023a_B.ctemp_o = cs[(ic0 + APF_CTL_VIS_Obs_2023a_B.b_j_c) -
      1];
    APF_CTL_VIS_Obs_2023a_B.stemp_c = cs[(is0 + APF_CTL_VIS_Obs_2023a_B.b_j_c) -
      1];
    APF_CTL_VIS_Obs_2023a_B.offsetj_l = (APF_CTL_VIS_Obs_2023a_B.b_j_c * 6 + iz0)
      - 1;
    APF_CTL_VIS_Obs_2023a_B.offsetjp1_h = ((APF_CTL_VIS_Obs_2023a_B.b_j_c + 1) *
      6 + iz0) - 1;
    if ((APF_CTL_VIS_Obs_2023a_B.ctemp_o != 1.0) ||
        (APF_CTL_VIS_Obs_2023a_B.stemp_c != 0.0)) {
      for (APF_CTL_VIS_Obs_2023a_B.i_g = 0; APF_CTL_VIS_Obs_2023a_B.i_g < 6;
           APF_CTL_VIS_Obs_2023a_B.i_g++) {
        APF_CTL_VIS_Obs_2023a_B.temp_tmp_e = APF_CTL_VIS_Obs_2023a_B.offsetjp1_h
          + APF_CTL_VIS_Obs_2023a_B.i_g;
        APF_CTL_VIS_Obs_2023a_B.temp_h = z[APF_CTL_VIS_Obs_2023a_B.temp_tmp_e];
        APF_CTL_VIS_Obs_2023a_B.i8 = APF_CTL_VIS_Obs_2023a_B.offsetj_l +
          APF_CTL_VIS_Obs_2023a_B.i_g;
        z[APF_CTL_VIS_Obs_2023a_B.temp_tmp_e] = APF_CTL_VIS_Obs_2023a_B.ctemp_o *
          APF_CTL_VIS_Obs_2023a_B.temp_h - z[APF_CTL_VIS_Obs_2023a_B.i8] *
          APF_CTL_VIS_Obs_2023a_B.stemp_c;
        z[APF_CTL_VIS_Obs_2023a_B.i8] = z[APF_CTL_VIS_Obs_2023a_B.i8] *
          APF_CTL_VIS_Obs_2023a_B.ctemp_o + APF_CTL_VIS_Obs_2023a_B.stemp_c *
          APF_CTL_VIS_Obs_2023a_B.temp_h;
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_xdlaev2_n(real_T a, real_T b, real_T c, real_T
  *rt1, real_T *rt2, real_T *cs1, real_T *sn1)
{
  APF_CTL_VIS_Obs_2023a_B.sm = a + c;
  APF_CTL_VIS_Obs_2023a_B.df = a - c;
  APF_CTL_VIS_Obs_2023a_B.adf = fabs(APF_CTL_VIS_Obs_2023a_B.df);
  APF_CTL_VIS_Obs_2023a_B.tb = b + b;
  APF_CTL_VIS_Obs_2023a_B.ab_o = fabs(APF_CTL_VIS_Obs_2023a_B.tb);
  if (fabs(a) > fabs(c)) {
    APF_CTL_VIS_Obs_2023a_B.acmx = a;
    APF_CTL_VIS_Obs_2023a_B.acmn = c;
  } else {
    APF_CTL_VIS_Obs_2023a_B.acmx = c;
    APF_CTL_VIS_Obs_2023a_B.acmn = a;
  }

  if (APF_CTL_VIS_Obs_2023a_B.adf > APF_CTL_VIS_Obs_2023a_B.ab_o) {
    APF_CTL_VIS_Obs_2023a_B.b_a_k = APF_CTL_VIS_Obs_2023a_B.ab_o /
      APF_CTL_VIS_Obs_2023a_B.adf;
    APF_CTL_VIS_Obs_2023a_B.adf *= sqrt(APF_CTL_VIS_Obs_2023a_B.b_a_k *
      APF_CTL_VIS_Obs_2023a_B.b_a_k + 1.0);
  } else if (APF_CTL_VIS_Obs_2023a_B.adf < APF_CTL_VIS_Obs_2023a_B.ab_o) {
    APF_CTL_VIS_Obs_2023a_B.adf /= APF_CTL_VIS_Obs_2023a_B.ab_o;
    APF_CTL_VIS_Obs_2023a_B.adf = sqrt(APF_CTL_VIS_Obs_2023a_B.adf *
      APF_CTL_VIS_Obs_2023a_B.adf + 1.0) * APF_CTL_VIS_Obs_2023a_B.ab_o;
  } else {
    APF_CTL_VIS_Obs_2023a_B.adf = APF_CTL_VIS_Obs_2023a_B.ab_o *
      1.4142135623730951;
  }

  if (APF_CTL_VIS_Obs_2023a_B.sm < 0.0) {
    *rt1 = (APF_CTL_VIS_Obs_2023a_B.sm - APF_CTL_VIS_Obs_2023a_B.adf) * 0.5;
    APF_CTL_VIS_Obs_2023a_B.sgn1 = -1;
    *rt2 = APF_CTL_VIS_Obs_2023a_B.acmx / *rt1 * APF_CTL_VIS_Obs_2023a_B.acmn -
      b / *rt1 * b;
  } else if (APF_CTL_VIS_Obs_2023a_B.sm > 0.0) {
    *rt1 = (APF_CTL_VIS_Obs_2023a_B.sm + APF_CTL_VIS_Obs_2023a_B.adf) * 0.5;
    APF_CTL_VIS_Obs_2023a_B.sgn1 = 1;
    *rt2 = APF_CTL_VIS_Obs_2023a_B.acmx / *rt1 * APF_CTL_VIS_Obs_2023a_B.acmn -
      b / *rt1 * b;
  } else {
    *rt1 = 0.5 * APF_CTL_VIS_Obs_2023a_B.adf;
    *rt2 = -0.5 * APF_CTL_VIS_Obs_2023a_B.adf;
    APF_CTL_VIS_Obs_2023a_B.sgn1 = 1;
  }

  if (APF_CTL_VIS_Obs_2023a_B.df >= 0.0) {
    APF_CTL_VIS_Obs_2023a_B.df += APF_CTL_VIS_Obs_2023a_B.adf;
    APF_CTL_VIS_Obs_2023a_B.sgn2 = 1;
  } else {
    APF_CTL_VIS_Obs_2023a_B.df -= APF_CTL_VIS_Obs_2023a_B.adf;
    APF_CTL_VIS_Obs_2023a_B.sgn2 = -1;
  }

  if (fabs(APF_CTL_VIS_Obs_2023a_B.df) > APF_CTL_VIS_Obs_2023a_B.ab_o) {
    APF_CTL_VIS_Obs_2023a_B.tb = -APF_CTL_VIS_Obs_2023a_B.tb /
      APF_CTL_VIS_Obs_2023a_B.df;
    *sn1 = 1.0 / sqrt(APF_CTL_VIS_Obs_2023a_B.tb * APF_CTL_VIS_Obs_2023a_B.tb +
                      1.0);
    *cs1 = APF_CTL_VIS_Obs_2023a_B.tb * *sn1;
  } else if (APF_CTL_VIS_Obs_2023a_B.ab_o == 0.0) {
    *cs1 = 1.0;
    *sn1 = 0.0;
  } else {
    APF_CTL_VIS_Obs_2023a_B.tb = -APF_CTL_VIS_Obs_2023a_B.df /
      APF_CTL_VIS_Obs_2023a_B.tb;
    *cs1 = 1.0 / sqrt(APF_CTL_VIS_Obs_2023a_B.tb * APF_CTL_VIS_Obs_2023a_B.tb +
                      1.0);
    *sn1 = APF_CTL_VIS_Obs_2023a_B.tb * *cs1;
  }

  if (APF_CTL_VIS_Obs_2023a_B.sgn1 == APF_CTL_VIS_Obs_2023a_B.sgn2) {
    APF_CTL_VIS_Obs_2023a_B.tb = *cs1;
    *cs1 = -*sn1;
    *sn1 = APF_CTL_VIS_Obs_2023a_B.tb;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_202_rotateRight(int32_T n, real_T z[36], int32_T iz0,
  const real_T cs[10], int32_T ic0, int32_T is0)
{
  for (APF_CTL_VIS_Obs_2023a_B.j_k = n - 1; APF_CTL_VIS_Obs_2023a_B.j_k >= 1;
       APF_CTL_VIS_Obs_2023a_B.j_k--) {
    APF_CTL_VIS_Obs_2023a_B.ctemp = cs[(ic0 + APF_CTL_VIS_Obs_2023a_B.j_k) - 2];
    APF_CTL_VIS_Obs_2023a_B.stemp = cs[(is0 + APF_CTL_VIS_Obs_2023a_B.j_k) - 2];
    APF_CTL_VIS_Obs_2023a_B.offsetj = ((APF_CTL_VIS_Obs_2023a_B.j_k - 1) * 6 +
      iz0) - 1;
    APF_CTL_VIS_Obs_2023a_B.offsetjp1 = (APF_CTL_VIS_Obs_2023a_B.j_k * 6 + iz0)
      - 1;
    if ((APF_CTL_VIS_Obs_2023a_B.ctemp != 1.0) || (APF_CTL_VIS_Obs_2023a_B.stemp
         != 0.0)) {
      for (APF_CTL_VIS_Obs_2023a_B.i_a = 0; APF_CTL_VIS_Obs_2023a_B.i_a < 6;
           APF_CTL_VIS_Obs_2023a_B.i_a++) {
        APF_CTL_VIS_Obs_2023a_B.temp_tmp_ft = APF_CTL_VIS_Obs_2023a_B.offsetjp1
          + APF_CTL_VIS_Obs_2023a_B.i_a;
        APF_CTL_VIS_Obs_2023a_B.temp_o = z[APF_CTL_VIS_Obs_2023a_B.temp_tmp_ft];
        APF_CTL_VIS_Obs_2023a_B.i4 = APF_CTL_VIS_Obs_2023a_B.offsetj +
          APF_CTL_VIS_Obs_2023a_B.i_a;
        z[APF_CTL_VIS_Obs_2023a_B.temp_tmp_ft] = APF_CTL_VIS_Obs_2023a_B.ctemp *
          APF_CTL_VIS_Obs_2023a_B.temp_o - z[APF_CTL_VIS_Obs_2023a_B.i4] *
          APF_CTL_VIS_Obs_2023a_B.stemp;
        z[APF_CTL_VIS_Obs_2023a_B.i4] = z[APF_CTL_VIS_Obs_2023a_B.i4] *
          APF_CTL_VIS_Obs_2023a_B.ctemp + APF_CTL_VIS_Obs_2023a_B.stemp *
          APF_CTL_VIS_Obs_2023a_B.temp_o;
      }
    }
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static int32_T APF_CTL_VIS_Obs_2023a_xzsteqr(real_T d[6], real_T e[5], real_T z
  [36])
{
  int32_T exitg1;
  int32_T exitg3;
  int32_T exitg4;
  int32_T info;
  boolean_T exitg2;
  info = 0;
  memset(&APF_CTL_VIS_Obs_2023a_B.work_o[0], 0, 10U * sizeof(real_T));
  APF_CTL_VIS_Obs_2023a_B.jtot_g = 0;
  APF_CTL_VIS_Obs_2023a_B.l1_g = 1;
  do {
    exitg1 = 0;
    if (APF_CTL_VIS_Obs_2023a_B.l1_g > 6) {
      for (APF_CTL_VIS_Obs_2023a_B.i_p = 0; APF_CTL_VIS_Obs_2023a_B.i_p < 5;
           APF_CTL_VIS_Obs_2023a_B.i_p++) {
        APF_CTL_VIS_Obs_2023a_B.l1_g = APF_CTL_VIS_Obs_2023a_B.i_p;
        APF_CTL_VIS_Obs_2023a_B.p_l = d[APF_CTL_VIS_Obs_2023a_B.i_p];
        for (APF_CTL_VIS_Obs_2023a_B.jtot_g = APF_CTL_VIS_Obs_2023a_B.i_p + 2;
             APF_CTL_VIS_Obs_2023a_B.jtot_g < 7; APF_CTL_VIS_Obs_2023a_B.jtot_g
             ++) {
          APF_CTL_VIS_Obs_2023a_B.tst_n = d[APF_CTL_VIS_Obs_2023a_B.jtot_g - 1];
          if (APF_CTL_VIS_Obs_2023a_B.tst_n < APF_CTL_VIS_Obs_2023a_B.p_l) {
            APF_CTL_VIS_Obs_2023a_B.l1_g = APF_CTL_VIS_Obs_2023a_B.jtot_g - 1;
            APF_CTL_VIS_Obs_2023a_B.p_l = APF_CTL_VIS_Obs_2023a_B.tst_n;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_B.l1_g != APF_CTL_VIS_Obs_2023a_B.i_p) {
          d[APF_CTL_VIS_Obs_2023a_B.l1_g] = d[APF_CTL_VIS_Obs_2023a_B.i_p];
          d[APF_CTL_VIS_Obs_2023a_B.i_p] = APF_CTL_VIS_Obs_2023a_B.p_l;
          APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.i_p * 6;
          APF_CTL_VIS_Obs_2023a_B.l_k = APF_CTL_VIS_Obs_2023a_B.l1_g * 6;
          for (APF_CTL_VIS_Obs_2023a_B.l1_g = 0; APF_CTL_VIS_Obs_2023a_B.l1_g <
               6; APF_CTL_VIS_Obs_2023a_B.l1_g++) {
            APF_CTL_VIS_Obs_2023a_B.lsv_d = APF_CTL_VIS_Obs_2023a_B.b_m_c +
              APF_CTL_VIS_Obs_2023a_B.l1_g;
            APF_CTL_VIS_Obs_2023a_B.tst_n = z[APF_CTL_VIS_Obs_2023a_B.lsv_d];
            APF_CTL_VIS_Obs_2023a_B.jtot_g = APF_CTL_VIS_Obs_2023a_B.l_k +
              APF_CTL_VIS_Obs_2023a_B.l1_g;
            z[APF_CTL_VIS_Obs_2023a_B.lsv_d] = z[APF_CTL_VIS_Obs_2023a_B.jtot_g];
            z[APF_CTL_VIS_Obs_2023a_B.jtot_g] = APF_CTL_VIS_Obs_2023a_B.tst_n;
          }
        }
      }

      exitg1 = 1;
    } else {
      if (APF_CTL_VIS_Obs_2023a_B.l1_g > 1) {
        e[APF_CTL_VIS_Obs_2023a_B.l1_g - 2] = 0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.l1_g;
      exitg2 = false;
      while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.b_m_c < 6)) {
        APF_CTL_VIS_Obs_2023a_B.tst_n = fabs(e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]);
        if (APF_CTL_VIS_Obs_2023a_B.tst_n == 0.0) {
          exitg2 = true;
        } else if (APF_CTL_VIS_Obs_2023a_B.tst_n <= sqrt(fabs
                    (d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1])) * sqrt(fabs
                    (d[APF_CTL_VIS_Obs_2023a_B.b_m_c])) * 2.2204460492503131E-16)
        {
          e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1] = 0.0;
          exitg2 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.b_m_c++;
        }
      }

      APF_CTL_VIS_Obs_2023a_B.l_k = APF_CTL_VIS_Obs_2023a_B.l1_g;
      APF_CTL_VIS_Obs_2023a_B.lsv_d = APF_CTL_VIS_Obs_2023a_B.l1_g;
      APF_CTL_VIS_Obs_2023a_B.lend_k = APF_CTL_VIS_Obs_2023a_B.b_m_c;
      APF_CTL_VIS_Obs_2023a_B.l1_g = APF_CTL_VIS_Obs_2023a_B.b_m_c + 1;
      if (APF_CTL_VIS_Obs_2023a_B.b_m_c == APF_CTL_VIS_Obs_2023a_B.l_k) {
      } else {
        APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m = APF_CTL_VIS_Obs_2023a_B.b_m_c
          - APF_CTL_VIS_Obs_2023a_B.l_k;
        APF_CTL_VIS_Obs_2023a_B.tst_n = APF_CTL_computeNormMTridiagonal
          (APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m + 1, d, e,
           APF_CTL_VIS_Obs_2023a_B.l_k);
        APF_CTL_VIS_Obs_2023a_B.iscale_p = 0;
        if (APF_CTL_VIS_Obs_2023a_B.tst_n == 0.0) {
        } else if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.tst_n) || rtIsNaN
                   (APF_CTL_VIS_Obs_2023a_B.tst_n)) {
          for (APF_CTL_VIS_Obs_2023a_B.i_p = 0; APF_CTL_VIS_Obs_2023a_B.i_p < 6;
               APF_CTL_VIS_Obs_2023a_B.i_p++) {
            d[APF_CTL_VIS_Obs_2023a_B.i_p] = (rtNaN);
          }

          for (APF_CTL_VIS_Obs_2023a_B.jtot_g = 0;
               APF_CTL_VIS_Obs_2023a_B.jtot_g < 36;
               APF_CTL_VIS_Obs_2023a_B.jtot_g++) {
            z[APF_CTL_VIS_Obs_2023a_B.jtot_g] = (rtNaN);
          }

          exitg1 = 1;
        } else {
          if (APF_CTL_VIS_Obs_2023a_B.tst_n > 2.2346346549904327E+153) {
            APF_CTL_VIS_Obs_2023a_B.iscale_p = 1;
            APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.tst_n,
              2.2346346549904327E+153, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m +
              1, d, APF_CTL_VIS_Obs_2023a_B.l_k);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(APF_CTL_VIS_Obs_2023a_B.tst_n,
              2.2346346549904327E+153, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m,
              e, APF_CTL_VIS_Obs_2023a_B.l_k);
          } else if (APF_CTL_VIS_Obs_2023a_B.tst_n < 3.02546243347603E-123) {
            APF_CTL_VIS_Obs_2023a_B.iscale_p = 2;
            APF_CTL_VIS_Obs_2023a_xzlascl_k(APF_CTL_VIS_Obs_2023a_B.tst_n,
              3.02546243347603E-123, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m + 1,
              d, APF_CTL_VIS_Obs_2023a_B.l_k);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(APF_CTL_VIS_Obs_2023a_B.tst_n,
              3.02546243347603E-123, APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m, e,
              APF_CTL_VIS_Obs_2023a_B.l_k);
          }

          if (fabs(d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]) < fabs
              (d[APF_CTL_VIS_Obs_2023a_B.l_k - 1])) {
            APF_CTL_VIS_Obs_2023a_B.lend_k = APF_CTL_VIS_Obs_2023a_B.lsv_d;
            APF_CTL_VIS_Obs_2023a_B.l_k = APF_CTL_VIS_Obs_2023a_B.b_m_c;
          }

          if (APF_CTL_VIS_Obs_2023a_B.lend_k > APF_CTL_VIS_Obs_2023a_B.l_k) {
            do {
              exitg4 = 0;
              if (APF_CTL_VIS_Obs_2023a_B.l_k != APF_CTL_VIS_Obs_2023a_B.lend_k)
              {
                APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.l_k;
                exitg2 = false;
                while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.b_m_c <
                                     APF_CTL_VIS_Obs_2023a_B.lend_k)) {
                  APF_CTL_VIS_Obs_2023a_B.g = fabs
                    (e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]);
                  if (APF_CTL_VIS_Obs_2023a_B.g * APF_CTL_VIS_Obs_2023a_B.g <=
                      fabs(d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]) *
                      4.9303806576313238E-32 * fabs
                      (d[APF_CTL_VIS_Obs_2023a_B.b_m_c]) +
                      2.2250738585072014E-308) {
                    exitg2 = true;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.b_m_c++;
                  }
                }
              } else {
                APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.lend_k;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_c < APF_CTL_VIS_Obs_2023a_B.lend_k)
              {
                e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1] = 0.0;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_c == APF_CTL_VIS_Obs_2023a_B.l_k)
              {
                APF_CTL_VIS_Obs_2023a_B.l_k++;
                if (APF_CTL_VIS_Obs_2023a_B.l_k > APF_CTL_VIS_Obs_2023a_B.lend_k)
                {
                  exitg4 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.l_k + 1 ==
                         APF_CTL_VIS_Obs_2023a_B.b_m_c) {
                APF_CTL_VIS_Obs_2023a_xdlaev2_n(d[APF_CTL_VIS_Obs_2023a_B.l_k -
                  1], e[APF_CTL_VIS_Obs_2023a_B.l_k - 1],
                  d[APF_CTL_VIS_Obs_2023a_B.l_k], &d[APF_CTL_VIS_Obs_2023a_B.l_k
                  - 1], &APF_CTL_VIS_Obs_2023a_B.g,
                  &APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.l_k -
                  1], &APF_CTL_VIS_Obs_2023a_B.p_l);
                d[APF_CTL_VIS_Obs_2023a_B.l_k] = APF_CTL_VIS_Obs_2023a_B.g;
                APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.l_k + 4] =
                  APF_CTL_VIS_Obs_2023a_B.p_l;
                APF_CTL_VIS_Obs_202_rotateRight(2, z,
                  (APF_CTL_VIS_Obs_2023a_B.l_k - 1) * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work_o, APF_CTL_VIS_Obs_2023a_B.l_k,
                  APF_CTL_VIS_Obs_2023a_B.l_k + 5);
                e[APF_CTL_VIS_Obs_2023a_B.l_k - 1] = 0.0;
                APF_CTL_VIS_Obs_2023a_B.l_k += 2;
                if (APF_CTL_VIS_Obs_2023a_B.l_k > APF_CTL_VIS_Obs_2023a_B.lend_k)
                {
                  exitg4 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.jtot_g == 180) {
                exitg4 = 1;
              } else {
                APF_CTL_VIS_Obs_2023a_B.jtot_g++;
                APF_CTL_VIS_Obs_2023a_B.p_l = d[APF_CTL_VIS_Obs_2023a_B.l_k - 1];
                APF_CTL_VIS_Obs_2023a_B.s_pt = e[APF_CTL_VIS_Obs_2023a_B.l_k - 1];
                APF_CTL_VIS_Obs_2023a_B.g = (d[APF_CTL_VIS_Obs_2023a_B.l_k] -
                  APF_CTL_VIS_Obs_2023a_B.p_l) / (APF_CTL_VIS_Obs_2023a_B.s_pt *
                  2.0);
                APF_CTL_VIS_Obs_2023a_B.c = APF_CTL_VIS_Obs_2_rt_hypotd_snf
                  (APF_CTL_VIS_Obs_2023a_B.g, 1.0);
                if (!(APF_CTL_VIS_Obs_2023a_B.g >= 0.0)) {
                  APF_CTL_VIS_Obs_2023a_B.c = -APF_CTL_VIS_Obs_2023a_B.c;
                }

                APF_CTL_VIS_Obs_2023a_B.g = (d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]
                  - APF_CTL_VIS_Obs_2023a_B.p_l) + APF_CTL_VIS_Obs_2023a_B.s_pt /
                  (APF_CTL_VIS_Obs_2023a_B.g + APF_CTL_VIS_Obs_2023a_B.c);
                APF_CTL_VIS_Obs_2023a_B.s_pt = 1.0;
                APF_CTL_VIS_Obs_2023a_B.c = 1.0;
                APF_CTL_VIS_Obs_2023a_B.p_l = 0.0;
                for (APF_CTL_VIS_Obs_2023a_B.i_p = APF_CTL_VIS_Obs_2023a_B.b_m_c
                     - 1; APF_CTL_VIS_Obs_2023a_B.i_p >=
                     APF_CTL_VIS_Obs_2023a_B.l_k; APF_CTL_VIS_Obs_2023a_B.i_p--)
                {
                  APF_CTL_VIS_Obs_2023a_B.r_p = e[APF_CTL_VIS_Obs_2023a_B.i_p -
                    1];
                  APF_CTL_VIS_Obs_2023a_B.b_f = APF_CTL_VIS_Obs_2023a_B.c *
                    APF_CTL_VIS_Obs_2023a_B.r_p;
                  APF_CTL_VIS_Obs_2023a_xzlartg(APF_CTL_VIS_Obs_2023a_B.g,
                    APF_CTL_VIS_Obs_2023a_B.s_pt * APF_CTL_VIS_Obs_2023a_B.r_p,
                    &APF_CTL_VIS_Obs_2023a_B.c, &APF_CTL_VIS_Obs_2023a_B.b_s_i,
                    &APF_CTL_VIS_Obs_2023a_B.b_r);
                  APF_CTL_VIS_Obs_2023a_B.s_pt = APF_CTL_VIS_Obs_2023a_B.b_s_i;
                  if (APF_CTL_VIS_Obs_2023a_B.b_m_c - 1 !=
                      APF_CTL_VIS_Obs_2023a_B.i_p) {
                    e[APF_CTL_VIS_Obs_2023a_B.i_p] = APF_CTL_VIS_Obs_2023a_B.b_r;
                  }

                  APF_CTL_VIS_Obs_2023a_B.g = d[APF_CTL_VIS_Obs_2023a_B.i_p] -
                    APF_CTL_VIS_Obs_2023a_B.p_l;
                  APF_CTL_VIS_Obs_2023a_B.r_p = (d[APF_CTL_VIS_Obs_2023a_B.i_p -
                    1] - APF_CTL_VIS_Obs_2023a_B.g) *
                    APF_CTL_VIS_Obs_2023a_B.b_s_i + 2.0 *
                    APF_CTL_VIS_Obs_2023a_B.c * APF_CTL_VIS_Obs_2023a_B.b_f;
                  APF_CTL_VIS_Obs_2023a_B.p_l = APF_CTL_VIS_Obs_2023a_B.b_s_i *
                    APF_CTL_VIS_Obs_2023a_B.r_p;
                  d[APF_CTL_VIS_Obs_2023a_B.i_p] = APF_CTL_VIS_Obs_2023a_B.g +
                    APF_CTL_VIS_Obs_2023a_B.p_l;
                  APF_CTL_VIS_Obs_2023a_B.g = APF_CTL_VIS_Obs_2023a_B.c *
                    APF_CTL_VIS_Obs_2023a_B.r_p - APF_CTL_VIS_Obs_2023a_B.b_f;
                  APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.i_p - 1]
                    = APF_CTL_VIS_Obs_2023a_B.c;
                  APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.i_p + 4]
                    = -APF_CTL_VIS_Obs_2023a_B.b_s_i;
                }

                APF_CTL_VIS_Obs_202_rotateRight((APF_CTL_VIS_Obs_2023a_B.b_m_c -
                  APF_CTL_VIS_Obs_2023a_B.l_k) + 1, z,
                  (APF_CTL_VIS_Obs_2023a_B.l_k - 1) * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work_o, APF_CTL_VIS_Obs_2023a_B.l_k,
                  APF_CTL_VIS_Obs_2023a_B.l_k + 5);
                d[APF_CTL_VIS_Obs_2023a_B.l_k - 1] -=
                  APF_CTL_VIS_Obs_2023a_B.p_l;
                e[APF_CTL_VIS_Obs_2023a_B.l_k - 1] = APF_CTL_VIS_Obs_2023a_B.g;
              }
            } while (exitg4 == 0);
          } else {
            do {
              exitg3 = 0;
              if (APF_CTL_VIS_Obs_2023a_B.l_k != APF_CTL_VIS_Obs_2023a_B.lend_k)
              {
                APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.l_k;
                exitg2 = false;
                while ((!exitg2) && (APF_CTL_VIS_Obs_2023a_B.b_m_c >
                                     APF_CTL_VIS_Obs_2023a_B.lend_k)) {
                  APF_CTL_VIS_Obs_2023a_B.g = fabs
                    (e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 2]);
                  if (APF_CTL_VIS_Obs_2023a_B.g * APF_CTL_VIS_Obs_2023a_B.g <=
                      fabs(d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]) *
                      4.9303806576313238E-32 * fabs
                      (d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 2]) +
                      2.2250738585072014E-308) {
                    exitg2 = true;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.b_m_c--;
                  }
                }
              } else {
                APF_CTL_VIS_Obs_2023a_B.b_m_c = APF_CTL_VIS_Obs_2023a_B.lend_k;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_c > APF_CTL_VIS_Obs_2023a_B.lend_k)
              {
                e[APF_CTL_VIS_Obs_2023a_B.b_m_c - 2] = 0.0;
              }

              if (APF_CTL_VIS_Obs_2023a_B.b_m_c == APF_CTL_VIS_Obs_2023a_B.l_k)
              {
                APF_CTL_VIS_Obs_2023a_B.l_k--;
                if (APF_CTL_VIS_Obs_2023a_B.l_k < APF_CTL_VIS_Obs_2023a_B.lend_k)
                {
                  exitg3 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.l_k - 1 ==
                         APF_CTL_VIS_Obs_2023a_B.b_m_c) {
                APF_CTL_VIS_Obs_2023a_xdlaev2_n(d[APF_CTL_VIS_Obs_2023a_B.l_k -
                  2], e[APF_CTL_VIS_Obs_2023a_B.l_k - 2],
                  d[APF_CTL_VIS_Obs_2023a_B.l_k - 1],
                  &d[APF_CTL_VIS_Obs_2023a_B.l_k - 2],
                  &APF_CTL_VIS_Obs_2023a_B.g,
                  &APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.b_m_c
                  - 1], &APF_CTL_VIS_Obs_2023a_B.p_l);
                d[APF_CTL_VIS_Obs_2023a_B.l_k - 1] = APF_CTL_VIS_Obs_2023a_B.g;
                APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.b_m_c + 4]
                  = APF_CTL_VIS_Obs_2023a_B.p_l;
                APF_CTL_VIS_Obs_2_rotateRight_e(2, z,
                  (APF_CTL_VIS_Obs_2023a_B.l_k - 2) * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work_o, APF_CTL_VIS_Obs_2023a_B.b_m_c,
                  APF_CTL_VIS_Obs_2023a_B.b_m_c + 5);
                e[APF_CTL_VIS_Obs_2023a_B.l_k - 2] = 0.0;
                APF_CTL_VIS_Obs_2023a_B.l_k -= 2;
                if (APF_CTL_VIS_Obs_2023a_B.l_k < APF_CTL_VIS_Obs_2023a_B.lend_k)
                {
                  exitg3 = 1;
                }
              } else if (APF_CTL_VIS_Obs_2023a_B.jtot_g == 180) {
                exitg3 = 1;
              } else {
                APF_CTL_VIS_Obs_2023a_B.jtot_g++;
                APF_CTL_VIS_Obs_2023a_B.s_pt = d[APF_CTL_VIS_Obs_2023a_B.l_k - 1];
                APF_CTL_VIS_Obs_2023a_B.p_l = e[APF_CTL_VIS_Obs_2023a_B.l_k - 2];
                APF_CTL_VIS_Obs_2023a_B.g = (d[APF_CTL_VIS_Obs_2023a_B.l_k - 2]
                  - APF_CTL_VIS_Obs_2023a_B.s_pt) / (APF_CTL_VIS_Obs_2023a_B.p_l
                  * 2.0);
                APF_CTL_VIS_Obs_2023a_B.c = APF_CTL_VIS_Obs_2_rt_hypotd_snf
                  (APF_CTL_VIS_Obs_2023a_B.g, 1.0);
                if (!(APF_CTL_VIS_Obs_2023a_B.g >= 0.0)) {
                  APF_CTL_VIS_Obs_2023a_B.c = -APF_CTL_VIS_Obs_2023a_B.c;
                }

                APF_CTL_VIS_Obs_2023a_B.g = (d[APF_CTL_VIS_Obs_2023a_B.b_m_c - 1]
                  - APF_CTL_VIS_Obs_2023a_B.s_pt) + APF_CTL_VIS_Obs_2023a_B.p_l /
                  (APF_CTL_VIS_Obs_2023a_B.g + APF_CTL_VIS_Obs_2023a_B.c);
                APF_CTL_VIS_Obs_2023a_B.s_pt = 1.0;
                APF_CTL_VIS_Obs_2023a_B.c = 1.0;
                APF_CTL_VIS_Obs_2023a_B.p_l = 0.0;
                for (APF_CTL_VIS_Obs_2023a_B.i_p = APF_CTL_VIS_Obs_2023a_B.b_m_c;
                     APF_CTL_VIS_Obs_2023a_B.i_p < APF_CTL_VIS_Obs_2023a_B.l_k;
                     APF_CTL_VIS_Obs_2023a_B.i_p++) {
                  APF_CTL_VIS_Obs_2023a_B.r_p = e[APF_CTL_VIS_Obs_2023a_B.i_p -
                    1];
                  APF_CTL_VIS_Obs_2023a_B.b_f = APF_CTL_VIS_Obs_2023a_B.c *
                    APF_CTL_VIS_Obs_2023a_B.r_p;
                  APF_CTL_VIS_Obs_2023a_xzlartg(APF_CTL_VIS_Obs_2023a_B.g,
                    APF_CTL_VIS_Obs_2023a_B.s_pt * APF_CTL_VIS_Obs_2023a_B.r_p,
                    &APF_CTL_VIS_Obs_2023a_B.c, &APF_CTL_VIS_Obs_2023a_B.b_s_i,
                    &APF_CTL_VIS_Obs_2023a_B.b_r);
                  APF_CTL_VIS_Obs_2023a_B.s_pt = APF_CTL_VIS_Obs_2023a_B.b_s_i;
                  if (APF_CTL_VIS_Obs_2023a_B.i_p !=
                      APF_CTL_VIS_Obs_2023a_B.b_m_c) {
                    e[APF_CTL_VIS_Obs_2023a_B.i_p - 2] =
                      APF_CTL_VIS_Obs_2023a_B.b_r;
                  }

                  APF_CTL_VIS_Obs_2023a_B.g = d[APF_CTL_VIS_Obs_2023a_B.i_p - 1]
                    - APF_CTL_VIS_Obs_2023a_B.p_l;
                  APF_CTL_VIS_Obs_2023a_B.r_p = (d[APF_CTL_VIS_Obs_2023a_B.i_p]
                    - APF_CTL_VIS_Obs_2023a_B.g) * APF_CTL_VIS_Obs_2023a_B.b_s_i
                    + 2.0 * APF_CTL_VIS_Obs_2023a_B.c *
                    APF_CTL_VIS_Obs_2023a_B.b_f;
                  APF_CTL_VIS_Obs_2023a_B.p_l = APF_CTL_VIS_Obs_2023a_B.b_s_i *
                    APF_CTL_VIS_Obs_2023a_B.r_p;
                  d[APF_CTL_VIS_Obs_2023a_B.i_p - 1] = APF_CTL_VIS_Obs_2023a_B.g
                    + APF_CTL_VIS_Obs_2023a_B.p_l;
                  APF_CTL_VIS_Obs_2023a_B.g = APF_CTL_VIS_Obs_2023a_B.c *
                    APF_CTL_VIS_Obs_2023a_B.r_p - APF_CTL_VIS_Obs_2023a_B.b_f;
                  APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.i_p - 1]
                    = APF_CTL_VIS_Obs_2023a_B.c;
                  APF_CTL_VIS_Obs_2023a_B.work_o[APF_CTL_VIS_Obs_2023a_B.i_p + 4]
                    = APF_CTL_VIS_Obs_2023a_B.b_s_i;
                }

                APF_CTL_VIS_Obs_2_rotateRight_e((APF_CTL_VIS_Obs_2023a_B.l_k -
                  APF_CTL_VIS_Obs_2023a_B.b_m_c) + 1, z,
                  (APF_CTL_VIS_Obs_2023a_B.b_m_c - 1) * 6 + 1,
                  APF_CTL_VIS_Obs_2023a_B.work_o, APF_CTL_VIS_Obs_2023a_B.b_m_c,
                  APF_CTL_VIS_Obs_2023a_B.b_m_c + 5);
                d[APF_CTL_VIS_Obs_2023a_B.l_k - 1] -=
                  APF_CTL_VIS_Obs_2023a_B.p_l;
                e[APF_CTL_VIS_Obs_2023a_B.l_k - 2] = APF_CTL_VIS_Obs_2023a_B.g;
              }
            } while (exitg3 == 0);
          }

          switch (APF_CTL_VIS_Obs_2023a_B.iscale_p) {
           case 1:
            APF_CTL_VIS_Obs_2023a_xzlascl_k(2.2346346549904327E+153,
              APF_CTL_VIS_Obs_2023a_B.tst_n,
              APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m + 1, d,
              APF_CTL_VIS_Obs_2023a_B.lsv_d);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(2.2346346549904327E+153,
              APF_CTL_VIS_Obs_2023a_B.tst_n,
              APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m, e,
              APF_CTL_VIS_Obs_2023a_B.lsv_d);
            break;

           case 2:
            APF_CTL_VIS_Obs_2023a_xzlascl_k(3.02546243347603E-123,
              APF_CTL_VIS_Obs_2023a_B.tst_n,
              APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m + 1, d,
              APF_CTL_VIS_Obs_2023a_B.lsv_d);
            APF_CTL_VIS_Obs_2023_xzlascl_ka(3.02546243347603E-123,
              APF_CTL_VIS_Obs_2023a_B.tst_n,
              APF_CTL_VIS_Obs_2023a_B.anorm_tmp_tmp_m, e,
              APF_CTL_VIS_Obs_2023a_B.lsv_d);
            break;
          }

          if (APF_CTL_VIS_Obs_2023a_B.jtot_g >= 180) {
            for (APF_CTL_VIS_Obs_2023a_B.i_p = 0; APF_CTL_VIS_Obs_2023a_B.i_p <
                 5; APF_CTL_VIS_Obs_2023a_B.i_p++) {
              if (e[APF_CTL_VIS_Obs_2023a_B.i_p] != 0.0) {
                info++;
              }
            }

            exitg1 = 1;
          }
        }
      }
    }
  } while (exitg1 == 0);

  return info;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_eig_m(const real_T A[36], creal_T V[36],
  creal_T D[36])
{
  int32_T exitg1;
  APF_CTL_VIS_Obs_2023a_B.iscale_pe = true;
  for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 36;
       APF_CTL_VIS_Obs_2023a_B.j++) {
    if (APF_CTL_VIS_Obs_2023a_B.iscale_pe) {
      APF_CTL_VIS_Obs_2023a_B.anrm = A[APF_CTL_VIS_Obs_2023a_B.j];
      if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.anrm) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.anrm)) {
        APF_CTL_VIS_Obs_2023a_B.iscale_pe = false;
      }
    }
  }

  if (!APF_CTL_VIS_Obs_2023a_B.iscale_pe) {
    for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
         APF_CTL_VIS_Obs_2023a_B.kk++) {
      V[APF_CTL_VIS_Obs_2023a_B.kk].re = (rtNaN);
      V[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
      D[APF_CTL_VIS_Obs_2023a_B.kk].re = 0.0;
      D[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
         APF_CTL_VIS_Obs_2023a_B.j++) {
      APF_CTL_VIS_Obs_2023a_B.kk = 6 * APF_CTL_VIS_Obs_2023a_B.j +
        APF_CTL_VIS_Obs_2023a_B.j;
      D[APF_CTL_VIS_Obs_2023a_B.kk].re = (rtNaN);
      D[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
    }
  } else if (APF_CTL_VIS_Obs_202_ishermitian(A)) {
    memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A[0], &A[0], 36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_B.anrm = APF_CTL_VIS_Obs_20_computeNormM(A);
    if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.anrm) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.anrm)) {
      for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
           APF_CTL_VIS_Obs_2023a_B.j++) {
        APF_CTL_VIS_Obs_2023a_B.a__4[APF_CTL_VIS_Obs_2023a_B.j] = (rtNaN);
      }

      for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
           APF_CTL_VIS_Obs_2023a_B.kk++) {
        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.kk] = (rtNaN);
      }
    } else {
      APF_CTL_VIS_Obs_2023a_B.iscale_pe = false;
      if ((APF_CTL_VIS_Obs_2023a_B.anrm > 0.0) && (APF_CTL_VIS_Obs_2023a_B.anrm <
           1.0010415475915505E-146)) {
        APF_CTL_VIS_Obs_2023a_B.iscale_pe = true;
        APF_CTL_VIS_Obs_2023a_B.anrm = 1.0010415475915505E-146 /
          APF_CTL_VIS_Obs_2023a_B.anrm;
        APF_CTL_VIS_Obs_2023a_xzlascl(1.0, APF_CTL_VIS_Obs_2023a_B.anrm,
          APF_CTL_VIS_Obs_2023a_B.b_A);
      } else if (APF_CTL_VIS_Obs_2023a_B.anrm > 9.9895953610111751E+145) {
        APF_CTL_VIS_Obs_2023a_B.iscale_pe = true;
        APF_CTL_VIS_Obs_2023a_B.anrm = 9.9895953610111751E+145 /
          APF_CTL_VIS_Obs_2023a_B.anrm;
        APF_CTL_VIS_Obs_2023a_xzlascl(1.0, APF_CTL_VIS_Obs_2023a_B.anrm,
          APF_CTL_VIS_Obs_2023a_B.b_A);
      }

      for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 5;
           APF_CTL_VIS_Obs_2023a_B.j++) {
        APF_CTL_VIS_Obs_2023a_B.sgn = 6 * APF_CTL_VIS_Obs_2023a_B.j +
          APF_CTL_VIS_Obs_2023a_B.j;
        APF_CTL_VIS_Obs_2023a_B.e_p[APF_CTL_VIS_Obs_2023a_B.j] =
          APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn + 1];
        if (APF_CTL_VIS_Obs_2023a_B.j + 3 <= 6) {
          APF_CTL_VIS_Obs_2023a_B.kk = APF_CTL_VIS_Obs_2023a_B.j + 3;
        } else {
          APF_CTL_VIS_Obs_2023a_B.kk = 6;
        }

        APF_CTL_VIS_Obs_2023a_B.ai = APF_CTL_VIS_Obs_2023a_xzlarfg(5 -
          APF_CTL_VIS_Obs_2023a_B.j,
          &APF_CTL_VIS_Obs_2023a_B.e_p[APF_CTL_VIS_Obs_2023a_B.j],
          APF_CTL_VIS_Obs_2023a_B.b_A, APF_CTL_VIS_Obs_2023a_B.j * 6 +
          APF_CTL_VIS_Obs_2023a_B.kk);
        if (APF_CTL_VIS_Obs_2023a_B.ai != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn + 1] = 1.0;
          for (APF_CTL_VIS_Obs_2023a_B.kk = APF_CTL_VIS_Obs_2023a_B.j + 1;
               APF_CTL_VIS_Obs_2023a_B.kk < 6; APF_CTL_VIS_Obs_2023a_B.kk++) {
            APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.kk - 1] = 0.0;
          }

          APF_CTL_VIS_Obs_2023a_B.kk = 4 - APF_CTL_VIS_Obs_2023a_B.j;
          APF_CTL_VIS_Obs_2023a_B.b_i = 5 - APF_CTL_VIS_Obs_2023a_B.j;
          for (APF_CTL_VIS_Obs_2023a_B.b_jj = 0; APF_CTL_VIS_Obs_2023a_B.b_jj <=
               APF_CTL_VIS_Obs_2023a_B.kk; APF_CTL_VIS_Obs_2023a_B.b_jj++) {
            APF_CTL_VIS_Obs_2023a_B.ar_tmp = APF_CTL_VIS_Obs_2023a_B.j +
              APF_CTL_VIS_Obs_2023a_B.b_jj;
            APF_CTL_VIS_Obs_2023a_B.temp1 = APF_CTL_VIS_Obs_2023a_B.b_A[(6 *
              APF_CTL_VIS_Obs_2023a_B.j + APF_CTL_VIS_Obs_2023a_B.ar_tmp) + 1] *
              APF_CTL_VIS_Obs_2023a_B.ai;
            APF_CTL_VIS_Obs_2023a_B.temp2 = 0.0;
            APF_CTL_VIS_Obs_2023a_B.ai_tmp = (APF_CTL_VIS_Obs_2023a_B.ar_tmp + 1)
              * 6 + APF_CTL_VIS_Obs_2023a_B.j;
            APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.ar_tmp] +=
              APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.ai_tmp +
              APF_CTL_VIS_Obs_2023a_B.b_jj) + 1] * APF_CTL_VIS_Obs_2023a_B.temp1;
            for (APF_CTL_VIS_Obs_2023a_B.ii = APF_CTL_VIS_Obs_2023a_B.b_jj + 2;
                 APF_CTL_VIS_Obs_2023a_B.ii <= APF_CTL_VIS_Obs_2023a_B.b_i;
                 APF_CTL_VIS_Obs_2023a_B.ii++) {
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.j +
                APF_CTL_VIS_Obs_2023a_B.ii;
              APF_CTL_VIS_Obs_2023a_B.tau_tmp =
                APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.ai_tmp +
                APF_CTL_VIS_Obs_2023a_B.ii];
              APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp -
                1] += APF_CTL_VIS_Obs_2023a_B.tau_tmp *
                APF_CTL_VIS_Obs_2023a_B.temp1;
              APF_CTL_VIS_Obs_2023a_B.temp2 += APF_CTL_VIS_Obs_2023a_B.b_A[6 *
                APF_CTL_VIS_Obs_2023a_B.j + APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp]
                * APF_CTL_VIS_Obs_2023a_B.tau_tmp;
            }

            APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.ar_tmp] +=
              APF_CTL_VIS_Obs_2023a_B.ai * APF_CTL_VIS_Obs_2023a_B.temp2;
          }

          APF_CTL_VIS_Obs_2023a_B.temp1 = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.ar_tmp = 0;
               APF_CTL_VIS_Obs_2023a_B.ar_tmp < APF_CTL_VIS_Obs_2023a_B.b_i;
               APF_CTL_VIS_Obs_2023a_B.ar_tmp++) {
            APF_CTL_VIS_Obs_2023a_B.temp1 += APF_CTL_VIS_Obs_2023a_B.b_A
              [(APF_CTL_VIS_Obs_2023a_B.sgn + APF_CTL_VIS_Obs_2023a_B.ar_tmp) +
              1] * APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.j +
              APF_CTL_VIS_Obs_2023a_B.ar_tmp];
          }

          APF_CTL_VIS_Obs_2023a_B.temp1 *= -0.5 * APF_CTL_VIS_Obs_2023a_B.ai;
          if (!(APF_CTL_VIS_Obs_2023a_B.temp1 == 0.0)) {
            for (APF_CTL_VIS_Obs_2023a_B.ar_tmp = 0;
                 APF_CTL_VIS_Obs_2023a_B.ar_tmp < APF_CTL_VIS_Obs_2023a_B.b_i;
                 APF_CTL_VIS_Obs_2023a_B.ar_tmp++) {
              APF_CTL_VIS_Obs_2023a_B.ai_tmp = APF_CTL_VIS_Obs_2023a_B.j +
                APF_CTL_VIS_Obs_2023a_B.ar_tmp;
              APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.ai_tmp] +=
                APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.sgn +
                APF_CTL_VIS_Obs_2023a_B.ar_tmp) + 1] *
                APF_CTL_VIS_Obs_2023a_B.temp1;
            }
          }

          for (APF_CTL_VIS_Obs_2023a_B.b_jj = 0; APF_CTL_VIS_Obs_2023a_B.b_jj <=
               APF_CTL_VIS_Obs_2023a_B.kk; APF_CTL_VIS_Obs_2023a_B.b_jj++) {
            APF_CTL_VIS_Obs_2023a_B.ar_tmp = APF_CTL_VIS_Obs_2023a_B.j +
              APF_CTL_VIS_Obs_2023a_B.b_jj;
            APF_CTL_VIS_Obs_2023a_B.temp1 = APF_CTL_VIS_Obs_2023a_B.b_A[(6 *
              APF_CTL_VIS_Obs_2023a_B.j + APF_CTL_VIS_Obs_2023a_B.ar_tmp) + 1];
            APF_CTL_VIS_Obs_2023a_B.temp2 =
              APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.ar_tmp];
            APF_CTL_VIS_Obs_2023a_B.tau_tmp = APF_CTL_VIS_Obs_2023a_B.temp2 *
              APF_CTL_VIS_Obs_2023a_B.temp1;
            APF_CTL_VIS_Obs_2023a_B.ai_tmp = (APF_CTL_VIS_Obs_2023a_B.ar_tmp + 1)
              * 6;
            APF_CTL_VIS_Obs_2023a_B.ii = APF_CTL_VIS_Obs_2023a_B.ai_tmp +
              APF_CTL_VIS_Obs_2023a_B.j;
            APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.ar_tmp +
              APF_CTL_VIS_Obs_2023a_B.ai_tmp) + 1] =
              (APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.ii +
                APF_CTL_VIS_Obs_2023a_B.b_jj) + 1] -
               APF_CTL_VIS_Obs_2023a_B.tau_tmp) -
              APF_CTL_VIS_Obs_2023a_B.tau_tmp;
            for (APF_CTL_VIS_Obs_2023a_B.ar_tmp = APF_CTL_VIS_Obs_2023a_B.b_jj +
                 2; APF_CTL_VIS_Obs_2023a_B.ar_tmp <=
                 APF_CTL_VIS_Obs_2023a_B.b_i; APF_CTL_VIS_Obs_2023a_B.ar_tmp++)
            {
              APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp = APF_CTL_VIS_Obs_2023a_B.j +
                APF_CTL_VIS_Obs_2023a_B.ar_tmp;
              APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp +
                APF_CTL_VIS_Obs_2023a_B.ai_tmp] =
                (APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.ii +
                 APF_CTL_VIS_Obs_2023a_B.ar_tmp] -
                 APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp
                 - 1] * APF_CTL_VIS_Obs_2023a_B.temp1) -
                APF_CTL_VIS_Obs_2023a_B.b_A[6 * APF_CTL_VIS_Obs_2023a_B.j +
                APF_CTL_VIS_Obs_2023a_B.tau_tmp_tmp] *
                APF_CTL_VIS_Obs_2023a_B.temp2;
            }
          }
        }

        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn + 1] =
          APF_CTL_VIS_Obs_2023a_B.e_p[APF_CTL_VIS_Obs_2023a_B.j];
        APF_CTL_VIS_Obs_2023a_B.a__4[APF_CTL_VIS_Obs_2023a_B.j] =
          APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn];
        APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.j] =
          APF_CTL_VIS_Obs_2023a_B.ai;
      }

      APF_CTL_VIS_Obs_2023a_B.a__4[5] = APF_CTL_VIS_Obs_2023a_B.b_A[35];
      for (APF_CTL_VIS_Obs_2023a_B.j = 4; APF_CTL_VIS_Obs_2023a_B.j >= 0;
           APF_CTL_VIS_Obs_2023a_B.j--) {
        APF_CTL_VIS_Obs_2023a_B.ai_tmp = (APF_CTL_VIS_Obs_2023a_B.j + 1) * 6;
        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.ai_tmp] = 0.0;
        for (APF_CTL_VIS_Obs_2023a_B.sgn = APF_CTL_VIS_Obs_2023a_B.j + 3;
             APF_CTL_VIS_Obs_2023a_B.sgn < 7; APF_CTL_VIS_Obs_2023a_B.sgn++) {
          APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.sgn +
            APF_CTL_VIS_Obs_2023a_B.ai_tmp) - 1] = APF_CTL_VIS_Obs_2023a_B.b_A
            [(6 * APF_CTL_VIS_Obs_2023a_B.j + APF_CTL_VIS_Obs_2023a_B.sgn) - 1];
        }
      }

      APF_CTL_VIS_Obs_2023a_B.b_A[0] = 1.0;
      for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 5;
           APF_CTL_VIS_Obs_2023a_B.j++) {
        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.j + 1] = 0.0;
      }

      for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
           APF_CTL_VIS_Obs_2023a_B.j++) {
        APF_CTL_VIS_Obs_2023a_B.work_da[APF_CTL_VIS_Obs_2023a_B.j] = 0.0;
      }

      for (APF_CTL_VIS_Obs_2023a_B.j = 4; APF_CTL_VIS_Obs_2023a_B.j >= 0;
           APF_CTL_VIS_Obs_2023a_B.j--) {
        APF_CTL_VIS_Obs_2023a_B.sgn = (APF_CTL_VIS_Obs_2023a_B.j * 6 +
          APF_CTL_VIS_Obs_2023a_B.j) + 7;
        if (APF_CTL_VIS_Obs_2023a_B.j + 1 < 5) {
          APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn] = 1.0;
          APF_CTL_VIS_Obs_2023a_xzlarf_g(5 - APF_CTL_VIS_Obs_2023a_B.j, 4 -
            APF_CTL_VIS_Obs_2023a_B.j, APF_CTL_VIS_Obs_2023a_B.sgn + 1,
            APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.j],
            APF_CTL_VIS_Obs_2023a_B.b_A, APF_CTL_VIS_Obs_2023a_B.sgn + 7,
            APF_CTL_VIS_Obs_2023a_B.work_da);
          APF_CTL_VIS_Obs_2023a_B.kk = (APF_CTL_VIS_Obs_2023a_B.sgn -
            APF_CTL_VIS_Obs_2023a_B.j) + 5;
          for (APF_CTL_VIS_Obs_2023a_B.b_i = APF_CTL_VIS_Obs_2023a_B.sgn + 2;
               APF_CTL_VIS_Obs_2023a_B.b_i <= APF_CTL_VIS_Obs_2023a_B.kk;
               APF_CTL_VIS_Obs_2023a_B.b_i++) {
            APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.b_i - 1] *=
              -APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.j];
          }
        }

        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.sgn] = 1.0 -
          APF_CTL_VIS_Obs_2023a_B.tau[APF_CTL_VIS_Obs_2023a_B.j];
        for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk <
             APF_CTL_VIS_Obs_2023a_B.j; APF_CTL_VIS_Obs_2023a_B.kk++) {
          APF_CTL_VIS_Obs_2023a_B.b_A[(APF_CTL_VIS_Obs_2023a_B.sgn -
            APF_CTL_VIS_Obs_2023a_B.kk) - 1] = 0.0;
        }
      }

      APF_CTL_VIS_Obs_2023a_B.j = APF_CTL_VIS_Obs_2023a_xzsteqr
        (APF_CTL_VIS_Obs_2023a_B.a__4, APF_CTL_VIS_Obs_2023a_B.e_p,
         APF_CTL_VIS_Obs_2023a_B.b_A);
      if (APF_CTL_VIS_Obs_2023a_B.j != 0) {
        for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
             APF_CTL_VIS_Obs_2023a_B.j++) {
          APF_CTL_VIS_Obs_2023a_B.a__4[APF_CTL_VIS_Obs_2023a_B.j] = (rtNaN);
        }

        for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
             APF_CTL_VIS_Obs_2023a_B.kk++) {
          APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.kk] = (rtNaN);
        }
      } else if (APF_CTL_VIS_Obs_2023a_B.iscale_pe) {
        APF_CTL_VIS_Obs_2023a_B.anrm = 1.0 / APF_CTL_VIS_Obs_2023a_B.anrm;
        for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
             APF_CTL_VIS_Obs_2023a_B.j++) {
          APF_CTL_VIS_Obs_2023a_B.a__4[APF_CTL_VIS_Obs_2023a_B.j] *=
            APF_CTL_VIS_Obs_2023a_B.anrm;
        }
      }
    }

    memset(&D[0], 0, 36U * sizeof(creal_T));
    for (APF_CTL_VIS_Obs_2023a_B.j = 0; APF_CTL_VIS_Obs_2023a_B.j < 6;
         APF_CTL_VIS_Obs_2023a_B.j++) {
      APF_CTL_VIS_Obs_2023a_B.kk = 6 * APF_CTL_VIS_Obs_2023a_B.j +
        APF_CTL_VIS_Obs_2023a_B.j;
      D[APF_CTL_VIS_Obs_2023a_B.kk].re =
        APF_CTL_VIS_Obs_2023a_B.a__4[APF_CTL_VIS_Obs_2023a_B.j];
      D[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
         APF_CTL_VIS_Obs_2023a_B.kk++) {
      V[APF_CTL_VIS_Obs_2023a_B.kk].re =
        APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.kk];
      V[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
    }
  } else if (APF_CTL_VIS_Obs_2_ishermitian_c(A)) {
    memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A[0], &A[0], 36U * sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_xzgehrd_j(APF_CTL_VIS_Obs_2023a_B.b_A, 1, 6,
      APF_CTL_VIS_Obs_2023a_B.tau);
    memcpy(&APF_CTL_VIS_Obs_2023a_B.Q[0], &APF_CTL_VIS_Obs_2023a_B.b_A[0], 36U *
           sizeof(real_T));
    APF_CTL_VIS_Obs_2023a_xzunghr(1, 6, APF_CTL_VIS_Obs_2023a_B.Q,
      APF_CTL_VIS_Obs_2023a_B.tau);
    APF_CTL_VIS_Obs_2023a_xdlahqr_p(1, 6, APF_CTL_VIS_Obs_2023a_B.b_A, 1, 6,
      APF_CTL_VIS_Obs_2023a_B.Q, &APF_CTL_VIS_Obs_2023a_B.j,
      APF_CTL_VIS_Obs_2023a_B.a__4, APF_CTL_VIS_Obs_2023a_B.work_da);
    memset(&D[0], 0, 36U * sizeof(creal_T));
    APF_CTL_VIS_Obs_2023a_B.sgn = static_cast<uint8_T>(APF_CTL_VIS_Obs_2023a_B.j);
    for (APF_CTL_VIS_Obs_2023a_B.b_i = 0; APF_CTL_VIS_Obs_2023a_B.b_i <
         APF_CTL_VIS_Obs_2023a_B.sgn; APF_CTL_VIS_Obs_2023a_B.b_i++) {
      APF_CTL_VIS_Obs_2023a_B.kk = 6 * APF_CTL_VIS_Obs_2023a_B.b_i +
        APF_CTL_VIS_Obs_2023a_B.b_i;
      D[APF_CTL_VIS_Obs_2023a_B.kk].re = (rtNaN);
      D[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.sgn = APF_CTL_VIS_Obs_2023a_B.j + 1;
         APF_CTL_VIS_Obs_2023a_B.sgn < 7; APF_CTL_VIS_Obs_2023a_B.sgn++) {
      APF_CTL_VIS_Obs_2023a_B.kk = ((APF_CTL_VIS_Obs_2023a_B.sgn - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.sgn) - 1;
      D[APF_CTL_VIS_Obs_2023a_B.kk].re = 0.0;
      D[APF_CTL_VIS_Obs_2023a_B.kk].im =
        APF_CTL_VIS_Obs_2023a_B.work_da[APF_CTL_VIS_Obs_2023a_B.sgn - 1];
    }

    if (APF_CTL_VIS_Obs_2023a_B.j == 0) {
      for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
           APF_CTL_VIS_Obs_2023a_B.kk++) {
        V[APF_CTL_VIS_Obs_2023a_B.kk].re =
          APF_CTL_VIS_Obs_2023a_B.Q[APF_CTL_VIS_Obs_2023a_B.kk];
        V[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.j = 1;
      do {
        exitg1 = 0;
        if (APF_CTL_VIS_Obs_2023a_B.j <= 6) {
          if (APF_CTL_VIS_Obs_2023a_B.j != 6) {
            APF_CTL_VIS_Obs_2023a_B.kk = (APF_CTL_VIS_Obs_2023a_B.j - 1) * 6;
            APF_CTL_VIS_Obs_2023a_B.anrm =
              APF_CTL_VIS_Obs_2023a_B.b_A[APF_CTL_VIS_Obs_2023a_B.kk +
              APF_CTL_VIS_Obs_2023a_B.j];
            if (APF_CTL_VIS_Obs_2023a_B.anrm != 0.0) {
              if (APF_CTL_VIS_Obs_2023a_B.anrm < 0.0) {
                APF_CTL_VIS_Obs_2023a_B.sgn = 1;
              } else {
                APF_CTL_VIS_Obs_2023a_B.sgn = -1;
              }

              for (APF_CTL_VIS_Obs_2023a_B.b_i = 0; APF_CTL_VIS_Obs_2023a_B.b_i <
                   6; APF_CTL_VIS_Obs_2023a_B.b_i++) {
                APF_CTL_VIS_Obs_2023a_B.ar_tmp = APF_CTL_VIS_Obs_2023a_B.kk +
                  APF_CTL_VIS_Obs_2023a_B.b_i;
                APF_CTL_VIS_Obs_2023a_B.anrm = V[APF_CTL_VIS_Obs_2023a_B.ar_tmp]
                  .re;
                APF_CTL_VIS_Obs_2023a_B.ai_tmp = 6 * APF_CTL_VIS_Obs_2023a_B.j +
                  APF_CTL_VIS_Obs_2023a_B.b_i;
                APF_CTL_VIS_Obs_2023a_B.ai = V[APF_CTL_VIS_Obs_2023a_B.ai_tmp].
                  re * static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.sgn);
                if (APF_CTL_VIS_Obs_2023a_B.ai == 0.0) {
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].re =
                    APF_CTL_VIS_Obs_2023a_B.anrm / 1.4142135623730951;
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].im = 0.0;
                } else if (APF_CTL_VIS_Obs_2023a_B.anrm == 0.0) {
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].re = 0.0;
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].im =
                    APF_CTL_VIS_Obs_2023a_B.ai / 1.4142135623730951;
                } else {
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].re =
                    APF_CTL_VIS_Obs_2023a_B.anrm / 1.4142135623730951;
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].im =
                    APF_CTL_VIS_Obs_2023a_B.ai / 1.4142135623730951;
                }

                V[APF_CTL_VIS_Obs_2023a_B.ai_tmp].re =
                  V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].re;
                V[APF_CTL_VIS_Obs_2023a_B.ai_tmp].im =
                  -V[APF_CTL_VIS_Obs_2023a_B.ar_tmp].im;
              }

              APF_CTL_VIS_Obs_2023a_B.j += 2;
            } else {
              APF_CTL_VIS_Obs_2023a_B.j++;
            }
          } else {
            APF_CTL_VIS_Obs_2023a_B.j++;
          }
        } else {
          exitg1 = 1;
        }
      } while (exitg1 == 0);
    } else {
      for (APF_CTL_VIS_Obs_2023a_B.kk = 0; APF_CTL_VIS_Obs_2023a_B.kk < 36;
           APF_CTL_VIS_Obs_2023a_B.kk++) {
        V[APF_CTL_VIS_Obs_2023a_B.kk].re = (rtNaN);
        V[APF_CTL_VIS_Obs_2023a_B.kk].im = 0.0;
      }
    }
  } else {
    APF_CTL_VIS_Obs_202_eigStandard(A, V, D);
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_xdotc_b(int32_T n, const real_T x[36],
  int32_T ix0, const real_T y[36], int32_T iy0)
{
  real_T d;
  d = 0.0;
  if (n >= 1) {
    APF_CTL_VIS_Obs_2023a_B.b_is = static_cast<uint8_T>(n);
    for (APF_CTL_VIS_Obs_2023a_B.k_m = 0; APF_CTL_VIS_Obs_2023a_B.k_m <
         APF_CTL_VIS_Obs_2023a_B.b_is; APF_CTL_VIS_Obs_2023a_B.k_m++) {
      d += x[(ix0 + APF_CTL_VIS_Obs_2023a_B.k_m) - 1] * y[(iy0 +
        APF_CTL_VIS_Obs_2023a_B.k_m) - 1];
    }
  }

  return d;
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xaxpy(int32_T n, real_T a, int32_T ix0, real_T
  y[36], int32_T iy0)
{
  if (!(a == 0.0)) {
    for (APF_CTL_VIS_Obs_2023a_B.k_j = 0; APF_CTL_VIS_Obs_2023a_B.k_j < n;
         APF_CTL_VIS_Obs_2023a_B.k_j++) {
      APF_CTL_VIS_Obs_2023a_B.i14 = (iy0 + APF_CTL_VIS_Obs_2023a_B.k_j) - 1;
      y[APF_CTL_VIS_Obs_2023a_B.i14] += y[(ix0 + APF_CTL_VIS_Obs_2023a_B.k_j) -
        1] * a;
    }
  }
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static real_T APF_CTL_VIS_Obs_2023a_xnrm2_c(int32_T n, const real_T x[6],
  int32_T ix0)
{
  real_T y;
  y = 0.0;
  APF_CTL_VIS_Obs_2023a_B.scale_cq = 3.3121686421112381E-170;
  APF_CTL_VIS_Obs_2023a_B.kend = (ix0 + n) - 1;
  for (APF_CTL_VIS_Obs_2023a_B.k_d = ix0; APF_CTL_VIS_Obs_2023a_B.k_d <=
       APF_CTL_VIS_Obs_2023a_B.kend; APF_CTL_VIS_Obs_2023a_B.k_d++) {
    APF_CTL_VIS_Obs_2023a_B.absxk_c = fabs(x[APF_CTL_VIS_Obs_2023a_B.k_d - 1]);
    if (APF_CTL_VIS_Obs_2023a_B.absxk_c > APF_CTL_VIS_Obs_2023a_B.scale_cq) {
      APF_CTL_VIS_Obs_2023a_B.t_m1 = APF_CTL_VIS_Obs_2023a_B.scale_cq /
        APF_CTL_VIS_Obs_2023a_B.absxk_c;
      y = y * APF_CTL_VIS_Obs_2023a_B.t_m1 * APF_CTL_VIS_Obs_2023a_B.t_m1 + 1.0;
      APF_CTL_VIS_Obs_2023a_B.scale_cq = APF_CTL_VIS_Obs_2023a_B.absxk_c;
    } else {
      APF_CTL_VIS_Obs_2023a_B.t_m1 = APF_CTL_VIS_Obs_2023a_B.absxk_c /
        APF_CTL_VIS_Obs_2023a_B.scale_cq;
      y += APF_CTL_VIS_Obs_2023a_B.t_m1 * APF_CTL_VIS_Obs_2023a_B.t_m1;
    }
  }

  return APF_CTL_VIS_Obs_2023a_B.scale_cq * sqrt(y);
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xaxpy_j(int32_T n, real_T a, const real_T x[36],
  int32_T ix0, real_T y[6], int32_T iy0)
{
  if (!(a == 0.0)) {
    for (APF_CTL_VIS_Obs_2023a_B.k_oq = 0; APF_CTL_VIS_Obs_2023a_B.k_oq < n;
         APF_CTL_VIS_Obs_2023a_B.k_oq++) {
      APF_CTL_VIS_Obs_2023a_B.i16 = (iy0 + APF_CTL_VIS_Obs_2023a_B.k_oq) - 1;
      y[APF_CTL_VIS_Obs_2023a_B.i16] += x[(ix0 + APF_CTL_VIS_Obs_2023a_B.k_oq) -
        1] * a;
    }
  }
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xaxpy_jv(int32_T n, real_T a, const real_T x[6],
  int32_T ix0, real_T y[36], int32_T iy0)
{
  if (!(a == 0.0)) {
    for (APF_CTL_VIS_Obs_2023a_B.k_bj = 0; APF_CTL_VIS_Obs_2023a_B.k_bj < n;
         APF_CTL_VIS_Obs_2023a_B.k_bj++) {
      APF_CTL_VIS_Obs_2023a_B.i15 = (iy0 + APF_CTL_VIS_Obs_2023a_B.k_bj) - 1;
      y[APF_CTL_VIS_Obs_2023a_B.i15] += x[(ix0 + APF_CTL_VIS_Obs_2023a_B.k_bj) -
        1] * a;
    }
  }
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xswap(real_T x[36], int32_T ix0, int32_T iy0)
{
  for (APF_CTL_VIS_Obs_2023a_B.k_nl = 0; APF_CTL_VIS_Obs_2023a_B.k_nl < 6;
       APF_CTL_VIS_Obs_2023a_B.k_nl++) {
    APF_CTL_VIS_Obs_2023a_B.temp_tmp_fj = (ix0 + APF_CTL_VIS_Obs_2023a_B.k_nl) -
      1;
    APF_CTL_VIS_Obs_2023a_B.temp_l = x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_fj];
    APF_CTL_VIS_Obs_2023a_B.i10 = (iy0 + APF_CTL_VIS_Obs_2023a_B.k_nl) - 1;
    x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_fj] = x[APF_CTL_VIS_Obs_2023a_B.i10];
    x[APF_CTL_VIS_Obs_2023a_B.i10] = APF_CTL_VIS_Obs_2023a_B.temp_l;
  }
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xrotg(real_T *a, real_T *b, real_T *c, real_T *
  s)
{
  APF_CTL_VIS_Obs_2023a_B.roe = *b;
  APF_CTL_VIS_Obs_2023a_B.absa = fabs(*a);
  APF_CTL_VIS_Obs_2023a_B.absb = fabs(*b);
  if (APF_CTL_VIS_Obs_2023a_B.absa > APF_CTL_VIS_Obs_2023a_B.absb) {
    APF_CTL_VIS_Obs_2023a_B.roe = *a;
  }

  APF_CTL_VIS_Obs_2023a_B.scale_o = APF_CTL_VIS_Obs_2023a_B.absa +
    APF_CTL_VIS_Obs_2023a_B.absb;
  if (APF_CTL_VIS_Obs_2023a_B.scale_o == 0.0) {
    *s = 0.0;
    *c = 1.0;
    *a = 0.0;
    *b = 0.0;
  } else {
    APF_CTL_VIS_Obs_2023a_B.ads = APF_CTL_VIS_Obs_2023a_B.absa /
      APF_CTL_VIS_Obs_2023a_B.scale_o;
    APF_CTL_VIS_Obs_2023a_B.bds = APF_CTL_VIS_Obs_2023a_B.absb /
      APF_CTL_VIS_Obs_2023a_B.scale_o;
    APF_CTL_VIS_Obs_2023a_B.scale_o *= sqrt(APF_CTL_VIS_Obs_2023a_B.ads *
      APF_CTL_VIS_Obs_2023a_B.ads + APF_CTL_VIS_Obs_2023a_B.bds *
      APF_CTL_VIS_Obs_2023a_B.bds);
    if (APF_CTL_VIS_Obs_2023a_B.roe < 0.0) {
      APF_CTL_VIS_Obs_2023a_B.scale_o = -APF_CTL_VIS_Obs_2023a_B.scale_o;
    }

    *c = *a / APF_CTL_VIS_Obs_2023a_B.scale_o;
    *s = *b / APF_CTL_VIS_Obs_2023a_B.scale_o;
    if (APF_CTL_VIS_Obs_2023a_B.absa > APF_CTL_VIS_Obs_2023a_B.absb) {
      *b = *s;
    } else if (*c != 0.0) {
      *b = 1.0 / *c;
    } else {
      *b = 1.0;
    }

    *a = APF_CTL_VIS_Obs_2023a_B.scale_o;
  }
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_xrot(real_T x[36], int32_T ix0, int32_T iy0,
  real_T c, real_T s)
{
  for (APF_CTL_VIS_Obs_2023a_B.k_fx = 0; APF_CTL_VIS_Obs_2023a_B.k_fx < 6;
       APF_CTL_VIS_Obs_2023a_B.k_fx++) {
    APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_i = (iy0 + APF_CTL_VIS_Obs_2023a_B.k_fx)
      - 1;
    APF_CTL_VIS_Obs_2023a_B.temp_tmp = x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_i];
    APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_k = (ix0 + APF_CTL_VIS_Obs_2023a_B.k_fx)
      - 1;
    APF_CTL_VIS_Obs_2023a_B.temp_tmp_f =
      x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_k];
    x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_i] = APF_CTL_VIS_Obs_2023a_B.temp_tmp
      * c - APF_CTL_VIS_Obs_2023a_B.temp_tmp_f * s;
    x[APF_CTL_VIS_Obs_2023a_B.temp_tmp_tmp_k] =
      APF_CTL_VIS_Obs_2023a_B.temp_tmp_f * c + APF_CTL_VIS_Obs_2023a_B.temp_tmp *
      s;
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_svd_p(const real_T A[36], real_T U[36], real_T
  s[6], real_T V[36])
{
  boolean_T exitg1;
  memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_j[0], &A[0], 36U * sizeof(real_T));
  for (APF_CTL_VIS_Obs_2023a_B.i_kb = 0; APF_CTL_VIS_Obs_2023a_B.i_kb < 6;
       APF_CTL_VIS_Obs_2023a_B.i_kb++) {
    APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
    APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
    APF_CTL_VIS_Obs_2023a_B.work_m[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
  }

  memset(&U[0], 0, 36U * sizeof(real_T));
  memset(&V[0], 0, 36U * sizeof(real_T));
  for (APF_CTL_VIS_Obs_2023a_B.i_kb = 0; APF_CTL_VIS_Obs_2023a_B.i_kb < 5;
       APF_CTL_VIS_Obs_2023a_B.i_kb++) {
    APF_CTL_VIS_Obs_2023a_B.qp1_h = APF_CTL_VIS_Obs_2023a_B.i_kb + 2;
    APF_CTL_VIS_Obs_2023a_B.qs_j = 6 * APF_CTL_VIS_Obs_2023a_B.i_kb +
      APF_CTL_VIS_Obs_2023a_B.i_kb;
    APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qs_j + 1;
    APF_CTL_VIS_Obs_2023a_B.apply_transform_n = false;
    APF_CTL_VIS_Obs_2023a_B.nrm_p = APF_CTL_VIS_Obs_2023a_xnrm2_l(6 -
      APF_CTL_VIS_Obs_2023a_B.i_kb, APF_CTL_VIS_Obs_2023a_B.b_A_j,
      APF_CTL_VIS_Obs_2023a_B.qs_j + 1);
    if (APF_CTL_VIS_Obs_2023a_B.nrm_p > 0.0) {
      APF_CTL_VIS_Obs_2023a_B.apply_transform_n = true;
      if (APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.qs_j] < 0.0) {
        APF_CTL_VIS_Obs_2023a_B.nrm_p = -APF_CTL_VIS_Obs_2023a_B.nrm_p;
      }

      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb] =
        APF_CTL_VIS_Obs_2023a_B.nrm_p;
      if (fabs(APF_CTL_VIS_Obs_2023a_B.nrm_p) >= 1.0020841800044864E-292) {
        APF_CTL_VIS_Obs_2023a_B.nrm_p = 1.0 / APF_CTL_VIS_Obs_2023a_B.nrm_p;
        APF_CTL_VIS_Obs_2023a_B.qjj_g = (APF_CTL_VIS_Obs_2023a_B.qs_j -
          APF_CTL_VIS_Obs_2023a_B.i_kb) + 6;
        for (APF_CTL_VIS_Obs_2023a_B.e_k_l = APF_CTL_VIS_Obs_2023a_B.qq_j;
             APF_CTL_VIS_Obs_2023a_B.e_k_l <= APF_CTL_VIS_Obs_2023a_B.qjj_g;
             APF_CTL_VIS_Obs_2023a_B.e_k_l++) {
          APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1] *=
            APF_CTL_VIS_Obs_2023a_B.nrm_p;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = (APF_CTL_VIS_Obs_2023a_B.qs_j -
          APF_CTL_VIS_Obs_2023a_B.i_kb) + 6;
        for (APF_CTL_VIS_Obs_2023a_B.e_k_l = APF_CTL_VIS_Obs_2023a_B.qq_j;
             APF_CTL_VIS_Obs_2023a_B.e_k_l <= APF_CTL_VIS_Obs_2023a_B.qjj_g;
             APF_CTL_VIS_Obs_2023a_B.e_k_l++) {
          APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1] /=
            APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb];
        }
      }

      APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.qs_j]++;
      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb] =
        -APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb];
    } else {
      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
         APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
      APF_CTL_VIS_Obs_2023a_B.qjj_g = (APF_CTL_VIS_Obs_2023a_B.qq_j - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.i_kb;
      if (APF_CTL_VIS_Obs_2023a_B.apply_transform_n) {
        APF_CTL_VIS_Obs_2023a_xaxpy(6 - APF_CTL_VIS_Obs_2023a_B.i_kb,
          -(APF_CTL_VIS_Obs_2023a_xdotc_b(6 - APF_CTL_VIS_Obs_2023a_B.i_kb,
          APF_CTL_VIS_Obs_2023a_B.b_A_j, APF_CTL_VIS_Obs_2023a_B.qs_j + 1,
          APF_CTL_VIS_Obs_2023a_B.b_A_j, APF_CTL_VIS_Obs_2023a_B.qjj_g + 1) /
            APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.qs_j]),
          APF_CTL_VIS_Obs_2023a_B.qs_j + 1, APF_CTL_VIS_Obs_2023a_B.b_A_j,
          APF_CTL_VIS_Obs_2023a_B.qjj_g + 1);
      }

      APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] =
        APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.qjj_g];
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.i_kb + 1;
         APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
      APF_CTL_VIS_Obs_2023a_B.qs_j = (6 * APF_CTL_VIS_Obs_2023a_B.i_kb +
        APF_CTL_VIS_Obs_2023a_B.qq_j) - 1;
      U[APF_CTL_VIS_Obs_2023a_B.qs_j] =
        APF_CTL_VIS_Obs_2023a_B.b_A_j[APF_CTL_VIS_Obs_2023a_B.qs_j];
    }

    if (APF_CTL_VIS_Obs_2023a_B.i_kb + 1 <= 4) {
      APF_CTL_VIS_Obs_2023a_B.nrm_p = APF_CTL_VIS_Obs_2023a_xnrm2_c(5 -
        APF_CTL_VIS_Obs_2023a_B.i_kb, APF_CTL_VIS_Obs_2023a_B.e_n,
        APF_CTL_VIS_Obs_2023a_B.i_kb + 2);
      if (APF_CTL_VIS_Obs_2023a_B.nrm_p == 0.0) {
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb + 1] < 0.0)
        {
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] =
            -APF_CTL_VIS_Obs_2023a_B.nrm_p;
        } else {
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] =
            APF_CTL_VIS_Obs_2023a_B.nrm_p;
        }

        APF_CTL_VIS_Obs_2023a_B.nrm_p =
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb];
        if (fabs(APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb]) >=
            1.0020841800044864E-292) {
          APF_CTL_VIS_Obs_2023a_B.nrm_p = 1.0 /
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb];
          for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
               APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++)
          {
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] *=
              APF_CTL_VIS_Obs_2023a_B.nrm_p;
          }
        } else {
          for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
               APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++)
          {
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] /=
              APF_CTL_VIS_Obs_2023a_B.nrm_p;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb + 1]++;
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] =
          -APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb];
        for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
             APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
          APF_CTL_VIS_Obs_2023a_B.work_m[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] = 0.0;
        }

        for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
             APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
          APF_CTL_VIS_Obs_2023a_xaxpy_j(5 - APF_CTL_VIS_Obs_2023a_B.i_kb,
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1],
            APF_CTL_VIS_Obs_2023a_B.b_A_j, (APF_CTL_VIS_Obs_2023a_B.i_kb + 6 *
            (APF_CTL_VIS_Obs_2023a_B.qq_j - 1)) + 2,
            APF_CTL_VIS_Obs_2023a_B.work_m, APF_CTL_VIS_Obs_2023a_B.i_kb + 2);
        }

        for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
             APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
          APF_CTL_VIS_Obs_2023a_xaxpy_jv(5 - APF_CTL_VIS_Obs_2023a_B.i_kb,
            -APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] /
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb + 1],
            APF_CTL_VIS_Obs_2023a_B.work_m, APF_CTL_VIS_Obs_2023a_B.i_kb + 2,
            APF_CTL_VIS_Obs_2023a_B.b_A_j, (APF_CTL_VIS_Obs_2023a_B.i_kb + 6 *
            (APF_CTL_VIS_Obs_2023a_B.qq_j - 1)) + 2);
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
           APF_CTL_VIS_Obs_2023a_B.qq_j < 7; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
        V[(APF_CTL_VIS_Obs_2023a_B.qq_j + 6 * APF_CTL_VIS_Obs_2023a_B.i_kb) - 1]
          = APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1];
      }
    }
  }

  APF_CTL_VIS_Obs_2023a_B.i_kb = 4;
  APF_CTL_VIS_Obs_2023a_B.b_s_o[5] = APF_CTL_VIS_Obs_2023a_B.b_A_j[35];
  APF_CTL_VIS_Obs_2023a_B.e_n[4] = APF_CTL_VIS_Obs_2023a_B.b_A_j[34];
  APF_CTL_VIS_Obs_2023a_B.e_n[5] = 0.0;
  for (APF_CTL_VIS_Obs_2023a_B.qp1_h = 0; APF_CTL_VIS_Obs_2023a_B.qp1_h < 6;
       APF_CTL_VIS_Obs_2023a_B.qp1_h++) {
    U[APF_CTL_VIS_Obs_2023a_B.qp1_h + 30] = 0.0;
  }

  U[35] = 1.0;
  for (APF_CTL_VIS_Obs_2023a_B.qp1_h = 4; APF_CTL_VIS_Obs_2023a_B.qp1_h >= 0;
       APF_CTL_VIS_Obs_2023a_B.qp1_h--) {
    APF_CTL_VIS_Obs_2023a_B.qq_j = 6 * APF_CTL_VIS_Obs_2023a_B.qp1_h +
      APF_CTL_VIS_Obs_2023a_B.qp1_h;
    if (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qp1_h] != 0.0) {
      for (APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.qp1_h + 2;
           APF_CTL_VIS_Obs_2023a_B.qs_j < 7; APF_CTL_VIS_Obs_2023a_B.qs_j++) {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = ((APF_CTL_VIS_Obs_2023a_B.qs_j - 1) * 6
          + APF_CTL_VIS_Obs_2023a_B.qp1_h) + 1;
        APF_CTL_VIS_Obs_2023a_xaxpy(6 - APF_CTL_VIS_Obs_2023a_B.qp1_h,
          -(APF_CTL_VIS_Obs_2023a_xdotc_b(6 - APF_CTL_VIS_Obs_2023a_B.qp1_h, U,
          APF_CTL_VIS_Obs_2023a_B.qq_j + 1, U, APF_CTL_VIS_Obs_2023a_B.qjj_g) /
            U[APF_CTL_VIS_Obs_2023a_B.qq_j]), APF_CTL_VIS_Obs_2023a_B.qq_j + 1,
          U, APF_CTL_VIS_Obs_2023a_B.qjj_g);
      }

      for (APF_CTL_VIS_Obs_2023a_B.qjj_g = APF_CTL_VIS_Obs_2023a_B.qp1_h + 1;
           APF_CTL_VIS_Obs_2023a_B.qjj_g < 7; APF_CTL_VIS_Obs_2023a_B.qjj_g++) {
        APF_CTL_VIS_Obs_2023a_B.qs_j = (6 * APF_CTL_VIS_Obs_2023a_B.qp1_h +
          APF_CTL_VIS_Obs_2023a_B.qjj_g) - 1;
        U[APF_CTL_VIS_Obs_2023a_B.qs_j] = -U[APF_CTL_VIS_Obs_2023a_B.qs_j];
      }

      U[APF_CTL_VIS_Obs_2023a_B.qq_j]++;
      for (APF_CTL_VIS_Obs_2023a_B.qq_j = 0; APF_CTL_VIS_Obs_2023a_B.qq_j <
           APF_CTL_VIS_Obs_2023a_B.qp1_h; APF_CTL_VIS_Obs_2023a_B.qq_j++) {
        U[APF_CTL_VIS_Obs_2023a_B.qq_j + 6 * APF_CTL_VIS_Obs_2023a_B.qp1_h] =
          0.0;
      }
    } else {
      for (APF_CTL_VIS_Obs_2023a_B.qs_j = 0; APF_CTL_VIS_Obs_2023a_B.qs_j < 6;
           APF_CTL_VIS_Obs_2023a_B.qs_j++) {
        U[APF_CTL_VIS_Obs_2023a_B.qs_j + 6 * APF_CTL_VIS_Obs_2023a_B.qp1_h] =
          0.0;
      }

      U[APF_CTL_VIS_Obs_2023a_B.qq_j] = 1.0;
    }
  }

  for (APF_CTL_VIS_Obs_2023a_B.qp1_h = 5; APF_CTL_VIS_Obs_2023a_B.qp1_h >= 0;
       APF_CTL_VIS_Obs_2023a_B.qp1_h--) {
    if ((APF_CTL_VIS_Obs_2023a_B.qp1_h + 1 <= 4) &&
        (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qp1_h] != 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.qq_j = (6 * APF_CTL_VIS_Obs_2023a_B.qp1_h +
        APF_CTL_VIS_Obs_2023a_B.qp1_h) + 2;
      for (APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.qp1_h + 2;
           APF_CTL_VIS_Obs_2023a_B.qs_j < 7; APF_CTL_VIS_Obs_2023a_B.qs_j++) {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = ((APF_CTL_VIS_Obs_2023a_B.qs_j - 1) * 6
          + APF_CTL_VIS_Obs_2023a_B.qp1_h) + 2;
        APF_CTL_VIS_Obs_2023a_xaxpy(5 - APF_CTL_VIS_Obs_2023a_B.qp1_h,
          -(APF_CTL_VIS_Obs_2023a_xdotc_b(5 - APF_CTL_VIS_Obs_2023a_B.qp1_h, V,
          APF_CTL_VIS_Obs_2023a_B.qq_j, V, APF_CTL_VIS_Obs_2023a_B.qjj_g) /
            V[APF_CTL_VIS_Obs_2023a_B.qq_j - 1]), APF_CTL_VIS_Obs_2023a_B.qq_j,
          V, APF_CTL_VIS_Obs_2023a_B.qjj_g);
      }
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq_j = 0; APF_CTL_VIS_Obs_2023a_B.qq_j < 6;
         APF_CTL_VIS_Obs_2023a_B.qq_j++) {
      V[APF_CTL_VIS_Obs_2023a_B.qq_j + 6 * APF_CTL_VIS_Obs_2023a_B.qp1_h] = 0.0;
    }

    V[APF_CTL_VIS_Obs_2023a_B.qp1_h + 6 * APF_CTL_VIS_Obs_2023a_B.qp1_h] = 1.0;
  }

  APF_CTL_VIS_Obs_2023a_B.qp1_h = 0;
  APF_CTL_VIS_Obs_2023a_B.nrm_p = 0.0;
  for (APF_CTL_VIS_Obs_2023a_B.qq_j = 0; APF_CTL_VIS_Obs_2023a_B.qq_j < 6;
       APF_CTL_VIS_Obs_2023a_B.qq_j++) {
    APF_CTL_VIS_Obs_2023a_B.r_nj =
      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j];
    if (APF_CTL_VIS_Obs_2023a_B.r_nj != 0.0) {
      APF_CTL_VIS_Obs_2023a_B.rt_p = fabs(APF_CTL_VIS_Obs_2023a_B.r_nj);
      APF_CTL_VIS_Obs_2023a_B.r_nj /= APF_CTL_VIS_Obs_2023a_B.rt_p;
      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] =
        APF_CTL_VIS_Obs_2023a_B.rt_p;
      if (APF_CTL_VIS_Obs_2023a_B.qq_j + 1 < 6) {
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j] /=
          APF_CTL_VIS_Obs_2023a_B.r_nj;
      }

      APF_CTL_VIS_Obs_2023a_B.qs_j = 6 * APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
      for (APF_CTL_VIS_Obs_2023a_B.qjj_g = APF_CTL_VIS_Obs_2023a_B.qs_j;
           APF_CTL_VIS_Obs_2023a_B.qjj_g <= APF_CTL_VIS_Obs_2023a_B.qs_j + 5;
           APF_CTL_VIS_Obs_2023a_B.qjj_g++) {
        U[APF_CTL_VIS_Obs_2023a_B.qjj_g - 1] *= APF_CTL_VIS_Obs_2023a_B.r_nj;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.qq_j + 1 < 6) {
      APF_CTL_VIS_Obs_2023a_B.r_nj =
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j];
      if (APF_CTL_VIS_Obs_2023a_B.r_nj != 0.0) {
        APF_CTL_VIS_Obs_2023a_B.rt_p = fabs(APF_CTL_VIS_Obs_2023a_B.r_nj);
        APF_CTL_VIS_Obs_2023a_B.r_nj = APF_CTL_VIS_Obs_2023a_B.rt_p /
          APF_CTL_VIS_Obs_2023a_B.r_nj;
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j] =
          APF_CTL_VIS_Obs_2023a_B.rt_p;
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j + 1] *=
          APF_CTL_VIS_Obs_2023a_B.r_nj;
        APF_CTL_VIS_Obs_2023a_B.qs_j = (APF_CTL_VIS_Obs_2023a_B.qq_j + 1) * 6 +
          1;
        for (APF_CTL_VIS_Obs_2023a_B.qjj_g = APF_CTL_VIS_Obs_2023a_B.qs_j;
             APF_CTL_VIS_Obs_2023a_B.qjj_g <= APF_CTL_VIS_Obs_2023a_B.qs_j + 5;
             APF_CTL_VIS_Obs_2023a_B.qjj_g++) {
          V[APF_CTL_VIS_Obs_2023a_B.qjj_g - 1] *= APF_CTL_VIS_Obs_2023a_B.r_nj;
        }
      }
    }

    APF_CTL_VIS_Obs_2023a_B.r_nj = fabs
      (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j]);
    APF_CTL_VIS_Obs_2023a_B.rt_p = fabs
      (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j]);
    if ((APF_CTL_VIS_Obs_2023a_B.r_nj >= APF_CTL_VIS_Obs_2023a_B.rt_p) ||
        rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rt_p)) {
      APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.r_nj;
    }

    if ((!(APF_CTL_VIS_Obs_2023a_B.nrm_p >= APF_CTL_VIS_Obs_2023a_B.rt_p)) &&
        (!rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rt_p))) {
      APF_CTL_VIS_Obs_2023a_B.nrm_p = APF_CTL_VIS_Obs_2023a_B.rt_p;
    }
  }

  while ((APF_CTL_VIS_Obs_2023a_B.i_kb + 2 > 0) &&
         (APF_CTL_VIS_Obs_2023a_B.qp1_h < 75)) {
    APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.i_kb + 1;
    exitg1 = false;
    while (!(exitg1 || (APF_CTL_VIS_Obs_2023a_B.qq_j == 0))) {
      APF_CTL_VIS_Obs_2023a_B.rt_p = fabs
        (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1]);
      if (APF_CTL_VIS_Obs_2023a_B.rt_p <= (fabs
           (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j - 1]) +
           fabs(APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j])) *
          2.2204460492503131E-16) {
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] = 0.0;
        exitg1 = true;
      } else if ((APF_CTL_VIS_Obs_2023a_B.rt_p <= 1.0020841800044864E-292) ||
                 ((APF_CTL_VIS_Obs_2023a_B.qp1_h > 20) &&
                  (APF_CTL_VIS_Obs_2023a_B.rt_p <= 2.2204460492503131E-16 *
                   APF_CTL_VIS_Obs_2023a_B.nrm_p))) {
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] = 0.0;
        exitg1 = true;
      } else {
        APF_CTL_VIS_Obs_2023a_B.qq_j--;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.i_kb + 1 == APF_CTL_VIS_Obs_2023a_B.qq_j) {
      APF_CTL_VIS_Obs_2023a_B.qjj_g = 4;
    } else {
      APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.i_kb + 2;
      APF_CTL_VIS_Obs_2023a_B.qjj_g = APF_CTL_VIS_Obs_2023a_B.i_kb + 2;
      exitg1 = false;
      while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.qjj_g >=
                           APF_CTL_VIS_Obs_2023a_B.qq_j)) {
        APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.qjj_g;
        if (APF_CTL_VIS_Obs_2023a_B.qjj_g == APF_CTL_VIS_Obs_2023a_B.qq_j) {
          exitg1 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rt_p = 0.0;
          if (APF_CTL_VIS_Obs_2023a_B.qjj_g < APF_CTL_VIS_Obs_2023a_B.i_kb + 2)
          {
            APF_CTL_VIS_Obs_2023a_B.rt_p = fabs
              (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qjj_g - 1]);
          }

          if (APF_CTL_VIS_Obs_2023a_B.qjj_g > APF_CTL_VIS_Obs_2023a_B.qq_j + 1)
          {
            APF_CTL_VIS_Obs_2023a_B.rt_p += fabs
              (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qjj_g - 2]);
          }

          APF_CTL_VIS_Obs_2023a_B.r_nj = fabs
            (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qjj_g - 1]);
          if ((APF_CTL_VIS_Obs_2023a_B.r_nj <= 2.2204460492503131E-16 *
               APF_CTL_VIS_Obs_2023a_B.rt_p) || (APF_CTL_VIS_Obs_2023a_B.r_nj <=
               1.0020841800044864E-292)) {
            APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qjj_g - 1] =
              0.0;
            exitg1 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.qjj_g--;
          }
        }
      }

      if (APF_CTL_VIS_Obs_2023a_B.qs_j == APF_CTL_VIS_Obs_2023a_B.qq_j) {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = 3;
      } else if (APF_CTL_VIS_Obs_2023a_B.i_kb + 2 ==
                 APF_CTL_VIS_Obs_2023a_B.qs_j) {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = 1;
      } else {
        APF_CTL_VIS_Obs_2023a_B.qjj_g = 2;
        APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qs_j;
      }
    }

    switch (APF_CTL_VIS_Obs_2023a_B.qjj_g) {
     case 1:
      APF_CTL_VIS_Obs_2023a_B.rt_p =
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb];
      APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] = 0.0;
      for (APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.i_kb + 1;
           APF_CTL_VIS_Obs_2023a_B.qs_j >= APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
           APF_CTL_VIS_Obs_2023a_B.qs_j--) {
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qs_j - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt_p, &APF_CTL_VIS_Obs_2023a_B.sqds_o,
           &APF_CTL_VIS_Obs_2023a_B.smm1_k);
        if (APF_CTL_VIS_Obs_2023a_B.qs_j > APF_CTL_VIS_Obs_2023a_B.qq_j + 1) {
          APF_CTL_VIS_Obs_2023a_B.r_nj =
            APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qs_j - 2];
          APF_CTL_VIS_Obs_2023a_B.rt_p = -APF_CTL_VIS_Obs_2023a_B.smm1_k *
            APF_CTL_VIS_Obs_2023a_B.r_nj;
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qs_j - 2] =
            APF_CTL_VIS_Obs_2023a_B.r_nj * APF_CTL_VIS_Obs_2023a_B.sqds_o;
        }

        APF_CTL_VIS_Obs_2023a_xrot(V, 6 * (APF_CTL_VIS_Obs_2023a_B.qs_j - 1) + 1,
          6 * (APF_CTL_VIS_Obs_2023a_B.i_kb + 1) + 1,
          APF_CTL_VIS_Obs_2023a_B.sqds_o, APF_CTL_VIS_Obs_2023a_B.smm1_k);
      }
      break;

     case 2:
      APF_CTL_VIS_Obs_2023a_B.rt_p =
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1];
      APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j - 1] = 0.0;
      for (APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
           APF_CTL_VIS_Obs_2023a_B.qs_j <= APF_CTL_VIS_Obs_2023a_B.i_kb + 2;
           APF_CTL_VIS_Obs_2023a_B.qs_j++) {
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qs_j - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt_p, &APF_CTL_VIS_Obs_2023a_B.sqds_o,
           &APF_CTL_VIS_Obs_2023a_B.smm1_k);
        APF_CTL_VIS_Obs_2023a_B.r_nj =
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qs_j - 1];
        APF_CTL_VIS_Obs_2023a_B.rt_p = -APF_CTL_VIS_Obs_2023a_B.smm1_k *
          APF_CTL_VIS_Obs_2023a_B.r_nj;
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qs_j - 1] =
          APF_CTL_VIS_Obs_2023a_B.r_nj * APF_CTL_VIS_Obs_2023a_B.sqds_o;
        APF_CTL_VIS_Obs_2023a_xrot(U, 6 * (APF_CTL_VIS_Obs_2023a_B.qs_j - 1) + 1,
          6 * (APF_CTL_VIS_Obs_2023a_B.qq_j - 1) + 1,
          APF_CTL_VIS_Obs_2023a_B.sqds_o, APF_CTL_VIS_Obs_2023a_B.smm1_k);
      }
      break;

     case 3:
      APF_CTL_VIS_Obs_2023a_B.sqds_o =
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb + 1];
      APF_CTL_VIS_Obs_2023a_B.r_nj = fabs(APF_CTL_VIS_Obs_2023a_B.sqds_o);
      APF_CTL_VIS_Obs_2023a_B.rt_p = fabs
        (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb]);
      if ((APF_CTL_VIS_Obs_2023a_B.r_nj >= APF_CTL_VIS_Obs_2023a_B.rt_p) ||
          rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rt_p)) {
        APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.r_nj;
      }

      APF_CTL_VIS_Obs_2023a_B.r_nj = fabs
        (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb]);
      if ((APF_CTL_VIS_Obs_2023a_B.rt_p >= APF_CTL_VIS_Obs_2023a_B.r_nj) ||
          rtIsNaN(APF_CTL_VIS_Obs_2023a_B.r_nj)) {
        APF_CTL_VIS_Obs_2023a_B.r_nj = APF_CTL_VIS_Obs_2023a_B.rt_p;
      }

      APF_CTL_VIS_Obs_2023a_B.rt_p = fabs
        (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j]);
      if ((APF_CTL_VIS_Obs_2023a_B.r_nj >= APF_CTL_VIS_Obs_2023a_B.rt_p) ||
          rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rt_p)) {
        APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.r_nj;
      }

      APF_CTL_VIS_Obs_2023a_B.r_nj = fabs
        (APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j]);
      if ((APF_CTL_VIS_Obs_2023a_B.rt_p >= APF_CTL_VIS_Obs_2023a_B.r_nj) ||
          rtIsNaN(APF_CTL_VIS_Obs_2023a_B.r_nj)) {
        APF_CTL_VIS_Obs_2023a_B.r_nj = APF_CTL_VIS_Obs_2023a_B.rt_p;
      }

      APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.sqds_o /
        APF_CTL_VIS_Obs_2023a_B.r_nj;
      APF_CTL_VIS_Obs_2023a_B.smm1_k =
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb] /
        APF_CTL_VIS_Obs_2023a_B.r_nj;
      APF_CTL_VIS_Obs_2023a_B.emm1_n =
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] /
        APF_CTL_VIS_Obs_2023a_B.r_nj;
      APF_CTL_VIS_Obs_2023a_B.sqds_o =
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] /
        APF_CTL_VIS_Obs_2023a_B.r_nj;
      APF_CTL_VIS_Obs_2023a_B.smm1_k = ((APF_CTL_VIS_Obs_2023a_B.smm1_k +
        APF_CTL_VIS_Obs_2023a_B.rt_p) * (APF_CTL_VIS_Obs_2023a_B.smm1_k -
        APF_CTL_VIS_Obs_2023a_B.rt_p) + APF_CTL_VIS_Obs_2023a_B.emm1_n *
        APF_CTL_VIS_Obs_2023a_B.emm1_n) / 2.0;
      APF_CTL_VIS_Obs_2023a_B.emm1_n *= APF_CTL_VIS_Obs_2023a_B.rt_p;
      APF_CTL_VIS_Obs_2023a_B.emm1_n *= APF_CTL_VIS_Obs_2023a_B.emm1_n;
      if ((APF_CTL_VIS_Obs_2023a_B.smm1_k != 0.0) ||
          (APF_CTL_VIS_Obs_2023a_B.emm1_n != 0.0)) {
        APF_CTL_VIS_Obs_2023a_B.shift_g = sqrt(APF_CTL_VIS_Obs_2023a_B.smm1_k *
          APF_CTL_VIS_Obs_2023a_B.smm1_k + APF_CTL_VIS_Obs_2023a_B.emm1_n);
        if (APF_CTL_VIS_Obs_2023a_B.smm1_k < 0.0) {
          APF_CTL_VIS_Obs_2023a_B.shift_g = -APF_CTL_VIS_Obs_2023a_B.shift_g;
        }

        APF_CTL_VIS_Obs_2023a_B.shift_g = APF_CTL_VIS_Obs_2023a_B.emm1_n /
          (APF_CTL_VIS_Obs_2023a_B.smm1_k + APF_CTL_VIS_Obs_2023a_B.shift_g);
      } else {
        APF_CTL_VIS_Obs_2023a_B.shift_g = 0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.rt_p = (APF_CTL_VIS_Obs_2023a_B.sqds_o +
        APF_CTL_VIS_Obs_2023a_B.rt_p) * (APF_CTL_VIS_Obs_2023a_B.sqds_o -
        APF_CTL_VIS_Obs_2023a_B.rt_p) + APF_CTL_VIS_Obs_2023a_B.shift_g;
      APF_CTL_VIS_Obs_2023a_B.r_nj =
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.qq_j] /
        APF_CTL_VIS_Obs_2023a_B.r_nj * APF_CTL_VIS_Obs_2023a_B.sqds_o;
      for (APF_CTL_VIS_Obs_2023a_B.e_k_l = APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
           APF_CTL_VIS_Obs_2023a_B.e_k_l <= APF_CTL_VIS_Obs_2023a_B.i_kb + 1;
           APF_CTL_VIS_Obs_2023a_B.e_k_l++) {
        APF_CTL_VIS_Obs_2023a_xrotg(&APF_CTL_VIS_Obs_2023a_B.rt_p,
          &APF_CTL_VIS_Obs_2023a_B.r_nj, &APF_CTL_VIS_Obs_2023a_B.sqds_o,
          &APF_CTL_VIS_Obs_2023a_B.smm1_k);
        if (APF_CTL_VIS_Obs_2023a_B.e_k_l > APF_CTL_VIS_Obs_2023a_B.qq_j + 1) {
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l - 2] =
            APF_CTL_VIS_Obs_2023a_B.rt_p;
        }

        APF_CTL_VIS_Obs_2023a_B.emm1_n =
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1];
        APF_CTL_VIS_Obs_2023a_B.r_nj =
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1];
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1] =
          APF_CTL_VIS_Obs_2023a_B.emm1_n * APF_CTL_VIS_Obs_2023a_B.sqds_o -
          APF_CTL_VIS_Obs_2023a_B.r_nj * APF_CTL_VIS_Obs_2023a_B.smm1_k;
        APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.smm1_k *
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l];
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l] *=
          APF_CTL_VIS_Obs_2023a_B.sqds_o;
        APF_CTL_VIS_Obs_2023a_B.qs_j = (APF_CTL_VIS_Obs_2023a_B.e_k_l - 1) * 6 +
          1;
        APF_CTL_VIS_Obs_2023a_B.qjj_g = 6 * APF_CTL_VIS_Obs_2023a_B.e_k_l + 1;
        APF_CTL_VIS_Obs_2023a_xrot(V, APF_CTL_VIS_Obs_2023a_B.qs_j,
          APF_CTL_VIS_Obs_2023a_B.qjj_g, APF_CTL_VIS_Obs_2023a_B.sqds_o,
          APF_CTL_VIS_Obs_2023a_B.smm1_k);
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1] =
          APF_CTL_VIS_Obs_2023a_B.r_nj * APF_CTL_VIS_Obs_2023a_B.sqds_o +
          APF_CTL_VIS_Obs_2023a_B.emm1_n * APF_CTL_VIS_Obs_2023a_B.smm1_k;
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt_p, &APF_CTL_VIS_Obs_2023a_B.sqds_o,
           &APF_CTL_VIS_Obs_2023a_B.smm1_k);
        APF_CTL_VIS_Obs_2023a_B.r_nj =
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l - 1];
        APF_CTL_VIS_Obs_2023a_B.rt_p = APF_CTL_VIS_Obs_2023a_B.r_nj *
          APF_CTL_VIS_Obs_2023a_B.sqds_o + APF_CTL_VIS_Obs_2023a_B.smm1_k *
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l];
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l] =
          APF_CTL_VIS_Obs_2023a_B.r_nj * -APF_CTL_VIS_Obs_2023a_B.smm1_k +
          APF_CTL_VIS_Obs_2023a_B.sqds_o *
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.e_k_l];
        APF_CTL_VIS_Obs_2023a_B.r_nj = APF_CTL_VIS_Obs_2023a_B.smm1_k *
          APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l];
        APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.e_k_l] *=
          APF_CTL_VIS_Obs_2023a_B.sqds_o;
        APF_CTL_VIS_Obs_2023a_xrot(U, APF_CTL_VIS_Obs_2023a_B.qs_j,
          APF_CTL_VIS_Obs_2023a_B.qjj_g, APF_CTL_VIS_Obs_2023a_B.sqds_o,
          APF_CTL_VIS_Obs_2023a_B.smm1_k);
      }

      APF_CTL_VIS_Obs_2023a_B.e_n[APF_CTL_VIS_Obs_2023a_B.i_kb] =
        APF_CTL_VIS_Obs_2023a_B.rt_p;
      APF_CTL_VIS_Obs_2023a_B.qp1_h++;
      break;

     default:
      if (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] < 0.0) {
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] =
          -APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j];
        APF_CTL_VIS_Obs_2023a_B.qp1_h = 6 * APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
        for (APF_CTL_VIS_Obs_2023a_B.qs_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
             APF_CTL_VIS_Obs_2023a_B.qs_j <= APF_CTL_VIS_Obs_2023a_B.qp1_h + 5;
             APF_CTL_VIS_Obs_2023a_B.qs_j++) {
          V[APF_CTL_VIS_Obs_2023a_B.qs_j - 1] = -V[APF_CTL_VIS_Obs_2023a_B.qs_j
            - 1];
        }
      }

      APF_CTL_VIS_Obs_2023a_B.qp1_h = APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
      while ((APF_CTL_VIS_Obs_2023a_B.qq_j + 1 < 6) &&
             (APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] <
              APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qp1_h])) {
        APF_CTL_VIS_Obs_2023a_B.rt_p =
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j];
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qq_j] =
          APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qp1_h];
        APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.qp1_h] =
          APF_CTL_VIS_Obs_2023a_B.rt_p;
        APF_CTL_VIS_Obs_2023a_B.qs_j = 6 * APF_CTL_VIS_Obs_2023a_B.qq_j + 1;
        APF_CTL_VIS_Obs_2023a_B.qjj_g = (APF_CTL_VIS_Obs_2023a_B.qq_j + 1) * 6 +
          1;
        APF_CTL_VIS_Obs_2023a_xswap(V, APF_CTL_VIS_Obs_2023a_B.qs_j,
          APF_CTL_VIS_Obs_2023a_B.qjj_g);
        APF_CTL_VIS_Obs_2023a_xswap(U, APF_CTL_VIS_Obs_2023a_B.qs_j,
          APF_CTL_VIS_Obs_2023a_B.qjj_g);
        APF_CTL_VIS_Obs_2023a_B.qq_j = APF_CTL_VIS_Obs_2023a_B.qp1_h;
        APF_CTL_VIS_Obs_2023a_B.qp1_h++;
      }

      APF_CTL_VIS_Obs_2023a_B.qp1_h = 0;
      APF_CTL_VIS_Obs_2023a_B.i_kb--;
      break;
    }
  }

  for (APF_CTL_VIS_Obs_2023a_B.i_kb = 0; APF_CTL_VIS_Obs_2023a_B.i_kb < 6;
       APF_CTL_VIS_Obs_2023a_B.i_kb++) {
    s[APF_CTL_VIS_Obs_2023a_B.i_kb] =
      APF_CTL_VIS_Obs_2023a_B.b_s_o[APF_CTL_VIS_Obs_2023a_B.i_kb];
  }
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static void APF_CTL_VIS_Obs_2023a_chol(real_T A[36], int32_T *flag, int32_T
  *jmax)
{
  boolean_T exitg1;
  *flag = 0;
  APF_CTL_VIS_Obs_2023a_B.b_j_n = 0;
  exitg1 = false;
  while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.b_j_n < 6)) {
    APF_CTL_VIS_Obs_2023a_B.idxA1j = APF_CTL_VIS_Obs_2023a_B.b_j_n * 6;
    APF_CTL_VIS_Obs_2023a_B.idxAjj = APF_CTL_VIS_Obs_2023a_B.idxA1j +
      APF_CTL_VIS_Obs_2023a_B.b_j_n;
    APF_CTL_VIS_Obs_2023a_B.ssq = 0.0;
    if (APF_CTL_VIS_Obs_2023a_B.b_j_n >= 1) {
      for (APF_CTL_VIS_Obs_2023a_B.k_fn = 0; APF_CTL_VIS_Obs_2023a_B.k_fn <
           APF_CTL_VIS_Obs_2023a_B.b_j_n; APF_CTL_VIS_Obs_2023a_B.k_fn++) {
        APF_CTL_VIS_Obs_2023a_B.b_c_h = A[APF_CTL_VIS_Obs_2023a_B.idxA1j +
          APF_CTL_VIS_Obs_2023a_B.k_fn];
        APF_CTL_VIS_Obs_2023a_B.ssq += APF_CTL_VIS_Obs_2023a_B.b_c_h *
          APF_CTL_VIS_Obs_2023a_B.b_c_h;
      }
    }

    APF_CTL_VIS_Obs_2023a_B.ssq = A[APF_CTL_VIS_Obs_2023a_B.idxAjj] -
      APF_CTL_VIS_Obs_2023a_B.ssq;
    if (APF_CTL_VIS_Obs_2023a_B.ssq > 0.0) {
      APF_CTL_VIS_Obs_2023a_B.ssq = sqrt(APF_CTL_VIS_Obs_2023a_B.ssq);
      A[APF_CTL_VIS_Obs_2023a_B.idxAjj] = APF_CTL_VIS_Obs_2023a_B.ssq;
      if (APF_CTL_VIS_Obs_2023a_B.b_j_n + 1 < 6) {
        if (APF_CTL_VIS_Obs_2023a_B.b_j_n != 0) {
          APF_CTL_VIS_Obs_2023a_B.d_n = ((4 - APF_CTL_VIS_Obs_2023a_B.b_j_n) * 6
            + APF_CTL_VIS_Obs_2023a_B.idxA1j) + 7;
          for (APF_CTL_VIS_Obs_2023a_B.k_fn = APF_CTL_VIS_Obs_2023a_B.idxA1j + 7;
               APF_CTL_VIS_Obs_2023a_B.k_fn <= APF_CTL_VIS_Obs_2023a_B.d_n;
               APF_CTL_VIS_Obs_2023a_B.k_fn += 6) {
            APF_CTL_VIS_Obs_2023a_B.b_c_h = 0.0;
            APF_CTL_VIS_Obs_2023a_B.e_e = (APF_CTL_VIS_Obs_2023a_B.k_fn +
              APF_CTL_VIS_Obs_2023a_B.b_j_n) - 1;
            for (APF_CTL_VIS_Obs_2023a_B.ia_b = APF_CTL_VIS_Obs_2023a_B.k_fn;
                 APF_CTL_VIS_Obs_2023a_B.ia_b <= APF_CTL_VIS_Obs_2023a_B.e_e;
                 APF_CTL_VIS_Obs_2023a_B.ia_b++) {
              APF_CTL_VIS_Obs_2023a_B.b_c_h += A[(APF_CTL_VIS_Obs_2023a_B.idxA1j
                + APF_CTL_VIS_Obs_2023a_B.ia_b) - APF_CTL_VIS_Obs_2023a_B.k_fn] *
                A[APF_CTL_VIS_Obs_2023a_B.ia_b - 1];
            }

            APF_CTL_VIS_Obs_2023a_B.ia_b = (div_nde_s32_floor
              ((APF_CTL_VIS_Obs_2023a_B.k_fn - APF_CTL_VIS_Obs_2023a_B.idxA1j) -
               7, 6) * 6 + APF_CTL_VIS_Obs_2023a_B.idxAjj) + 6;
            A[APF_CTL_VIS_Obs_2023a_B.ia_b] -= APF_CTL_VIS_Obs_2023a_B.b_c_h;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.ssq = 1.0 / APF_CTL_VIS_Obs_2023a_B.ssq;
        APF_CTL_VIS_Obs_2023a_B.k_fn = ((4 - APF_CTL_VIS_Obs_2023a_B.b_j_n) * 6
          + APF_CTL_VIS_Obs_2023a_B.idxAjj) + 7;
        for (APF_CTL_VIS_Obs_2023a_B.idxA1j = APF_CTL_VIS_Obs_2023a_B.idxAjj + 7;
             APF_CTL_VIS_Obs_2023a_B.idxA1j <= APF_CTL_VIS_Obs_2023a_B.k_fn;
             APF_CTL_VIS_Obs_2023a_B.idxA1j += 6) {
          A[APF_CTL_VIS_Obs_2023a_B.idxA1j - 1] *= APF_CTL_VIS_Obs_2023a_B.ssq;
        }
      }

      APF_CTL_VIS_Obs_2023a_B.b_j_n++;
    } else {
      A[APF_CTL_VIS_Obs_2023a_B.idxAjj] = APF_CTL_VIS_Obs_2023a_B.ssq;
      *flag = APF_CTL_VIS_Obs_2023a_B.b_j_n + 1;
      exitg1 = true;
    }
  }

  if (*flag == 0) {
    *jmax = 6;
  } else {
    *jmax = *flag - 1;
  }

  for (APF_CTL_VIS_Obs_2023a_B.b_j_n = 0; APF_CTL_VIS_Obs_2023a_B.b_j_n <= *jmax
       - 2; APF_CTL_VIS_Obs_2023a_B.b_j_n++) {
    for (APF_CTL_VIS_Obs_2023a_B.idxAjj = APF_CTL_VIS_Obs_2023a_B.b_j_n + 2;
         APF_CTL_VIS_Obs_2023a_B.idxAjj <= *jmax; APF_CTL_VIS_Obs_2023a_B.idxAjj
         ++) {
      A[(APF_CTL_VIS_Obs_2023a_B.idxAjj + 6 * APF_CTL_VIS_Obs_2023a_B.b_j_n) - 1]
        = 0.0;
    }
  }
}

static real_T APF_CTL_VIS_Obs_2_rt_atan2d_snf(real_T u0, real_T u1)
{
  real_T y;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = (rtNaN);
  } else if (rtIsInf(u0) && rtIsInf(u1)) {
    if (u0 > 0.0) {
      APF_CTL_VIS_Obs_2023a_B.i5 = 1;
    } else {
      APF_CTL_VIS_Obs_2023a_B.i5 = -1;
    }

    if (u1 > 0.0) {
      APF_CTL_VIS_Obs_2023a_B.i6 = 1;
    } else {
      APF_CTL_VIS_Obs_2023a_B.i6 = -1;
    }

    y = atan2(static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.i5),
              static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.i6));
  } else if (u1 == 0.0) {
    if (u0 > 0.0) {
      y = RT_PI / 2.0;
    } else if (u0 < 0.0) {
      y = -(RT_PI / 2.0);
    } else {
      y = 0.0;
    }
  } else {
    y = atan2(u0, u1);
  }

  return y;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static creal_T APF_CTL_VIS_Obs_2023a_minimum(const creal_T x[6])
{
  creal_T ex;
  ex = x[0];
  for (APF_CTL_VIS_Obs_2023a_B.k_a = 0; APF_CTL_VIS_Obs_2023a_B.k_a < 5;
       APF_CTL_VIS_Obs_2023a_B.k_a++) {
    APF_CTL_VIS_Obs_2023a_B.x_re = x[APF_CTL_VIS_Obs_2023a_B.k_a + 1].re;
    APF_CTL_VIS_Obs_2023a_B.x_im = x[APF_CTL_VIS_Obs_2023a_B.k_a + 1].im;
    if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.x_re) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.x_im)) {
      APF_CTL_VIS_Obs_2023a_B.p_n = false;
    } else if (rtIsNaN(ex.re) || rtIsNaN(ex.im)) {
      APF_CTL_VIS_Obs_2023a_B.p_n = true;
    } else {
      if ((fabs(ex.re) > 8.9884656743115785E+307) || (fabs(ex.im) >
           8.9884656743115785E+307) || ((fabs(APF_CTL_VIS_Obs_2023a_B.x_re) >
            8.9884656743115785E+307) || (fabs(APF_CTL_VIS_Obs_2023a_B.x_im) >
            8.9884656743115785E+307))) {
        APF_CTL_VIS_Obs_2023a_B.c_x = APF_CTL_VIS_Obs_2_rt_hypotd_snf(ex.re /
          2.0, ex.im / 2.0);
        APF_CTL_VIS_Obs_2023a_B.b_y = APF_CTL_VIS_Obs_2_rt_hypotd_snf
          (APF_CTL_VIS_Obs_2023a_B.x_re / 2.0, APF_CTL_VIS_Obs_2023a_B.x_im /
           2.0);
      } else {
        APF_CTL_VIS_Obs_2023a_B.c_x = APF_CTL_VIS_Obs_2_rt_hypotd_snf(ex.re,
          ex.im);
        APF_CTL_VIS_Obs_2023a_B.b_y = APF_CTL_VIS_Obs_2_rt_hypotd_snf
          (APF_CTL_VIS_Obs_2023a_B.x_re, APF_CTL_VIS_Obs_2023a_B.x_im);
      }

      if (APF_CTL_VIS_Obs_2023a_B.c_x == APF_CTL_VIS_Obs_2023a_B.b_y) {
        APF_CTL_VIS_Obs_2023a_B.c_x = APF_CTL_VIS_Obs_2_rt_atan2d_snf(ex.im,
          ex.re);
        APF_CTL_VIS_Obs_2023a_B.b_y = APF_CTL_VIS_Obs_2_rt_atan2d_snf
          (APF_CTL_VIS_Obs_2023a_B.x_im, APF_CTL_VIS_Obs_2023a_B.x_re);
        if (APF_CTL_VIS_Obs_2023a_B.c_x == APF_CTL_VIS_Obs_2023a_B.b_y) {
          if (ex.re != APF_CTL_VIS_Obs_2023a_B.x_re) {
            if (APF_CTL_VIS_Obs_2023a_B.c_x >= 0.0) {
              APF_CTL_VIS_Obs_2023a_B.c_x = APF_CTL_VIS_Obs_2023a_B.x_re;
              APF_CTL_VIS_Obs_2023a_B.b_y = ex.re;
            } else {
              APF_CTL_VIS_Obs_2023a_B.c_x = ex.re;
              APF_CTL_VIS_Obs_2023a_B.b_y = APF_CTL_VIS_Obs_2023a_B.x_re;
            }
          } else if (ex.re < 0.0) {
            APF_CTL_VIS_Obs_2023a_B.c_x = APF_CTL_VIS_Obs_2023a_B.x_im;
            APF_CTL_VIS_Obs_2023a_B.b_y = ex.im;
          } else {
            APF_CTL_VIS_Obs_2023a_B.c_x = ex.im;
            APF_CTL_VIS_Obs_2023a_B.b_y = APF_CTL_VIS_Obs_2023a_B.x_im;
          }

          if (APF_CTL_VIS_Obs_2023a_B.c_x == APF_CTL_VIS_Obs_2023a_B.b_y) {
            APF_CTL_VIS_Obs_2023a_B.c_x = 0.0;
            APF_CTL_VIS_Obs_2023a_B.b_y = 0.0;
          }
        }
      }

      APF_CTL_VIS_Obs_2023a_B.p_n = (APF_CTL_VIS_Obs_2023a_B.c_x >
        APF_CTL_VIS_Obs_2023a_B.b_y);
    }

    if (APF_CTL_VIS_Obs_2023a_B.p_n) {
      ex.re = APF_CTL_VIS_Obs_2023a_B.x_re;
      ex.im = APF_CTL_VIS_Obs_2023a_B.x_im;
    }
  }

  return ex;
}

// Function for MATLAB Function: '<S355>/MATLAB Function2'
static real_T APF_CTL_VIS_Obs_2023a_eps(real_T x)
{
  real_T r;
  APF_CTL_VIS_Obs_2023a_B.absx_i = fabs(x);
  if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.absx_i) || rtIsNaN
      (APF_CTL_VIS_Obs_2023a_B.absx_i)) {
    r = (rtNaN);
  } else if (APF_CTL_VIS_Obs_2023a_B.absx_i < 4.4501477170144028E-308) {
    r = 4.94065645841247E-324;
  } else {
    frexp(APF_CTL_VIS_Obs_2023a_B.absx_i, &APF_CTL_VIS_Obs_2023a_B.exponent);
    r = ldexp(1.0, APF_CTL_VIS_Obs_2023a_B.exponent - 53);
  }

  return r;
}

static void APF_CTL_VIS_Ob_binary_expand_op(real_T in1_data[], int32_T in1_size
  [2], const real_T in2[36], int32_T in3, int32_T in4)
{
  // Outputs for IfAction SubSystem: '<Root>/Phase #3: Experiment' incorporates:
  //   ActionPort: '<S9>/Action Port'

  // Outputs for IfAction SubSystem: '<S9>/Change RED Behavior' incorporates:
  //   ActionPort: '<S89>/Action Port'

  // Outputs for IfAction SubSystem: '<S89>/Sub-Phase #4' incorporates:
  //   ActionPort: '<S247>/Action Port'

  // If: '<S89>/Experiment Sub-Phases' incorporates:
  //   If: '<Root>/Separate Phases'
  //   If: '<S9>/This IF block determines whether or not to run the RED sim//exp '
  //   MATLAB Function: '<S355>/MATLAB Function2'
  //   MATLAB Function: '<S360>/MATLAB Function2'

  if (in4 < 1) {
    APF_CTL_VIS_Obs_2023a_B.i12 = -1;
  } else {
    APF_CTL_VIS_Obs_2023a_B.i12 = in4 - 1;
  }

  if (in4 < 1) {
    APF_CTL_VIS_Obs_2023a_B.stride_1_1 = -1;
  } else {
    APF_CTL_VIS_Obs_2023a_B.stride_1_1 = in4 - 1;
  }

  in1_size[0] = 1;
  APF_CTL_VIS_Obs_2023a_B.loop_ub_n = APF_CTL_VIS_Obs_2023a_B.stride_1_1 + 1 ==
    1 ? APF_CTL_VIS_Obs_2023a_B.i12 + 1 : APF_CTL_VIS_Obs_2023a_B.stride_1_1 + 1;
  in1_size[1] = APF_CTL_VIS_Obs_2023a_B.loop_ub_n;
  APF_CTL_VIS_Obs_2023a_B.stride_0_1 = (APF_CTL_VIS_Obs_2023a_B.i12 + 1 != 1);
  APF_CTL_VIS_Obs_2023a_B.stride_1_1 = (APF_CTL_VIS_Obs_2023a_B.stride_1_1 + 1
    != 1);
  for (APF_CTL_VIS_Obs_2023a_B.i12 = 0; APF_CTL_VIS_Obs_2023a_B.i12 <
       APF_CTL_VIS_Obs_2023a_B.loop_ub_n; APF_CTL_VIS_Obs_2023a_B.i12++) {
    in1_data[APF_CTL_VIS_Obs_2023a_B.i12] = in2[APF_CTL_VIS_Obs_2023a_B.i12 *
      APF_CTL_VIS_Obs_2023a_B.stride_0_1 * 6 + in3] *
      in2[APF_CTL_VIS_Obs_2023a_B.i12 * APF_CTL_VIS_Obs_2023a_B.stride_1_1 * 6 +
      in4];
  }

  // End of If: '<S89>/Experiment Sub-Phases'
  // End of Outputs for SubSystem: '<S89>/Sub-Phase #4'
  // End of Outputs for SubSystem: '<S9>/Change RED Behavior'
  // End of Outputs for SubSystem: '<Root>/Phase #3: Experiment'
}

// Function for MATLAB Function: '<S382>/MATLAB Function'
static void APF_CTL_VIS_Obs_2023a_Cardioid(const real_T state_red[6], const
  real_T state_black[6], const real_T b_shape[5], real_T *alpha, real_T *d)
{
  APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp = sin(state_black[2]);
  APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp_j = cos(state_black[2]);
  APF_CTL_VIS_Obs_2023a_B.alpha_pol = (APF_CTL_VIS_Obs_2_rt_atan2d_snf
    (state_red[0] - (0.165 * APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp_j +
                     state_black[0]), (state_red[1] - 0.165 *
    APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp) - state_black[1]) +
    1.5707963267948966) + state_black[2];
  APF_CTL_VIS_Obs_2023a_B.trueCount = 0;
  APF_CTL_VIS_Obs_2023a_B.b1 = ((APF_CTL_VIS_Obs_2023a_B.alpha_pol <
    -3.1415926535897931) || (APF_CTL_VIS_Obs_2023a_B.alpha_pol >
    3.1415926535897931));
  if (APF_CTL_VIS_Obs_2023a_B.b1) {
    for (APF_CTL_VIS_Obs_2023a_B.i_c = 0; APF_CTL_VIS_Obs_2023a_B.i_c < 1;
         APF_CTL_VIS_Obs_2023a_B.i_c++) {
      APF_CTL_VIS_Obs_2023a_B.trueCount++;
    }
  }

  if (APF_CTL_VIS_Obs_2023a_B.trueCount - 1 >= 0) {
    if (rtIsNaN(APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931)) {
      APF_CTL_VIS_Obs_2023a_B.varargout_1 = (rtNaN);
    } else if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931))
    {
      APF_CTL_VIS_Obs_2023a_B.varargout_1 = (rtNaN);
    } else if (APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931 == 0.0) {
      APF_CTL_VIS_Obs_2023a_B.varargout_1 = 0.0;
    } else {
      APF_CTL_VIS_Obs_2023a_B.varargout_1 = fmod
        (APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931,
         6.2831853071795862);
      APF_CTL_VIS_Obs_2023a_B.rEQ0_n = (APF_CTL_VIS_Obs_2023a_B.varargout_1 ==
        0.0);
      if (!APF_CTL_VIS_Obs_2023a_B.rEQ0_n) {
        APF_CTL_VIS_Obs_2023a_B.q = fabs((APF_CTL_VIS_Obs_2023a_B.alpha_pol +
          3.1415926535897931) / 6.2831853071795862);
        APF_CTL_VIS_Obs_2023a_B.rEQ0_n = !(fabs(APF_CTL_VIS_Obs_2023a_B.q -
          floor(APF_CTL_VIS_Obs_2023a_B.q + 0.5)) > 2.2204460492503131E-16 *
          APF_CTL_VIS_Obs_2023a_B.q);
      }

      if (APF_CTL_VIS_Obs_2023a_B.rEQ0_n) {
        APF_CTL_VIS_Obs_2023a_B.varargout_1 = 0.0;
      } else if (APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931 < 0.0) {
        APF_CTL_VIS_Obs_2023a_B.varargout_1 += 6.2831853071795862;
      }
    }

    APF_CTL_VIS_Obs_2023a_B.varargin_1_data =
      APF_CTL_VIS_Obs_2023a_B.varargout_1;
  }

  if (APF_CTL_VIS_Obs_2023a_B.trueCount - 1 >= 0) {
    APF_CTL_VIS_Obs_2023a_B.i_c = 0;
    APF_CTL_VIS_Obs_2023a_B.tmp_data = ((APF_CTL_VIS_Obs_2023a_B.varargin_1_data
      == 0.0) && (APF_CTL_VIS_Obs_2023a_B.alpha_pol + 3.1415926535897931 > 0.0));
  }

  APF_CTL_VIS_Obs_2023a_B.i_c = 0;
  if (APF_CTL_VIS_Obs_2023a_B.tmp_data && (APF_CTL_VIS_Obs_2023a_B.trueCount - 1
       >= 0)) {
    APF_CTL_VIS_Obs_2023a_B.varargin_1_data = 6.2831853071795862;
  }

  APF_CTL_VIS_Obs_2023a_B.q = APF_CTL_VIS_Obs_2023a_B.alpha_pol;
  APF_CTL_VIS_Obs_2023a_B.trueCount = 0;
  if (APF_CTL_VIS_Obs_2023a_B.b1) {
    for (APF_CTL_VIS_Obs_2023a_B.i_c = 0; APF_CTL_VIS_Obs_2023a_B.i_c < 1;
         APF_CTL_VIS_Obs_2023a_B.i_c++) {
      APF_CTL_VIS_Obs_2023a_B.q = APF_CTL_VIS_Obs_2023a_B.varargin_1_data -
        3.1415926535897931;
      APF_CTL_VIS_Obs_2023a_B.trueCount++;
    }
  }

  if ((APF_CTL_VIS_Obs_2023a_B.q >= 0.0) && (APF_CTL_VIS_Obs_2023a_B.q <
       1.5707963267948966)) {
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = cos(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.varargout_1 = sin(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = 2.0 * b_shape[3] * b_shape[0] * b_shape
      [0] * APF_CTL_VIS_Obs_2023a_B.alpha_pol / (b_shape[0] * b_shape[0] *
      (APF_CTL_VIS_Obs_2023a_B.alpha_pol * APF_CTL_VIS_Obs_2023a_B.alpha_pol) +
      b_shape[3] * b_shape[3] * (APF_CTL_VIS_Obs_2023a_B.varargout_1 *
      APF_CTL_VIS_Obs_2023a_B.varargout_1));
  } else if ((APF_CTL_VIS_Obs_2023a_B.q >= 1.5707963267948966) &&
             (APF_CTL_VIS_Obs_2023a_B.q < 3.1415926535897931)) {
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = cos(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.varargout_1 = sin(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = -2.0 * b_shape[4] * b_shape[1] *
      b_shape[1] * APF_CTL_VIS_Obs_2023a_B.alpha_pol / (b_shape[1] * b_shape[1] *
      (APF_CTL_VIS_Obs_2023a_B.alpha_pol * APF_CTL_VIS_Obs_2023a_B.alpha_pol) +
      b_shape[4] * b_shape[4] * (APF_CTL_VIS_Obs_2023a_B.varargout_1 *
      APF_CTL_VIS_Obs_2023a_B.varargout_1));
  } else if ((APF_CTL_VIS_Obs_2023a_B.q >= -3.1415926535897931) &&
             (APF_CTL_VIS_Obs_2023a_B.q < -1.5707963267948966)) {
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = cos(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.varargout_1 = sin(APF_CTL_VIS_Obs_2023a_B.q);
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = 2.0 * b_shape[4] * b_shape[2] / sqrt(4.0
      * b_shape[4] * b_shape[4] * (APF_CTL_VIS_Obs_2023a_B.varargout_1 *
      APF_CTL_VIS_Obs_2023a_B.varargout_1) + b_shape[2] * b_shape[2] *
      (APF_CTL_VIS_Obs_2023a_B.alpha_pol * APF_CTL_VIS_Obs_2023a_B.alpha_pol));
  } else if (APF_CTL_VIS_Obs_2023a_B.q >= -1.5707963267948966) {
    if (APF_CTL_VIS_Obs_2023a_B.q < 0.0) {
      APF_CTL_VIS_Obs_2023a_B.alpha_pol = cos(APF_CTL_VIS_Obs_2023a_B.q);
      APF_CTL_VIS_Obs_2023a_B.varargout_1 = sin(APF_CTL_VIS_Obs_2023a_B.q);
      APF_CTL_VIS_Obs_2023a_B.alpha_pol = 2.0 * b_shape[3] * b_shape[2] / sqrt
        (4.0 * b_shape[4] * b_shape[4] * (APF_CTL_VIS_Obs_2023a_B.varargout_1 *
          APF_CTL_VIS_Obs_2023a_B.varargout_1) + b_shape[2] * b_shape[2] *
         (APF_CTL_VIS_Obs_2023a_B.alpha_pol * APF_CTL_VIS_Obs_2023a_B.alpha_pol));
    } else {
      APF_CTL_VIS_Obs_2023a_B.alpha_pol = 0.0;
    }
  } else {
    APF_CTL_VIS_Obs_2023a_B.alpha_pol = 0.0;
  }

  APF_CTL_VIS_Obs_2023a_B.varargout_1 = APF_CTL_VIS_Obs_2023a_B.alpha_pol * cos
    (APF_CTL_VIS_Obs_2023a_B.q);
  APF_CTL_VIS_Obs_2023a_B.q = APF_CTL_VIS_Obs_2023a_B.alpha_pol * sin
    (APF_CTL_VIS_Obs_2023a_B.q);
  APF_CTL_VIS_Obs_2023a_B.alpha_pol = APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp_j *
    APF_CTL_VIS_Obs_2023a_B.varargout_1 + -APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp
    * APF_CTL_VIS_Obs_2023a_B.q;
  APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp = APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp *
    APF_CTL_VIS_Obs_2023a_B.varargout_1 +
    APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp_j * APF_CTL_VIS_Obs_2023a_B.q;
  *alpha = APF_CTL_VIS_Obs_2_rt_atan2d_snf(APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp,
    APF_CTL_VIS_Obs_2023a_B.alpha_pol);
  *d = APF_CTL_VIS_Obs_2_rt_hypotd_snf(APF_CTL_VIS_Obs_2023a_B.alpha_pol,
    APF_CTL_VIS_Obs_2023a_B.alpha_pol_tmp);
}

// Function for MATLAB Function: '<S382>/MATLAB Function'
static real_T APF_CTL_VIS_Obs_2023a_norm(const real_T x[3])
{
  real_T y;
  APF_CTL_VIS_Obs_2023a_B.scale_cy = 3.3121686421112381E-170;
  APF_CTL_VIS_Obs_2023a_B.absxk_n = fabs(x[0]);
  if (APF_CTL_VIS_Obs_2023a_B.absxk_n > 3.3121686421112381E-170) {
    y = 1.0;
    APF_CTL_VIS_Obs_2023a_B.scale_cy = APF_CTL_VIS_Obs_2023a_B.absxk_n;
  } else {
    APF_CTL_VIS_Obs_2023a_B.t_h = APF_CTL_VIS_Obs_2023a_B.absxk_n /
      3.3121686421112381E-170;
    y = APF_CTL_VIS_Obs_2023a_B.t_h * APF_CTL_VIS_Obs_2023a_B.t_h;
  }

  APF_CTL_VIS_Obs_2023a_B.absxk_n = fabs(x[1]);
  if (APF_CTL_VIS_Obs_2023a_B.absxk_n > APF_CTL_VIS_Obs_2023a_B.scale_cy) {
    APF_CTL_VIS_Obs_2023a_B.t_h = APF_CTL_VIS_Obs_2023a_B.scale_cy /
      APF_CTL_VIS_Obs_2023a_B.absxk_n;
    y = y * APF_CTL_VIS_Obs_2023a_B.t_h * APF_CTL_VIS_Obs_2023a_B.t_h + 1.0;
    APF_CTL_VIS_Obs_2023a_B.scale_cy = APF_CTL_VIS_Obs_2023a_B.absxk_n;
  } else {
    APF_CTL_VIS_Obs_2023a_B.t_h = APF_CTL_VIS_Obs_2023a_B.absxk_n /
      APF_CTL_VIS_Obs_2023a_B.scale_cy;
    y += APF_CTL_VIS_Obs_2023a_B.t_h * APF_CTL_VIS_Obs_2023a_B.t_h;
  }

  APF_CTL_VIS_Obs_2023a_B.absxk_n = fabs(x[2]);
  if (APF_CTL_VIS_Obs_2023a_B.absxk_n > APF_CTL_VIS_Obs_2023a_B.scale_cy) {
    APF_CTL_VIS_Obs_2023a_B.t_h = APF_CTL_VIS_Obs_2023a_B.scale_cy /
      APF_CTL_VIS_Obs_2023a_B.absxk_n;
    y = y * APF_CTL_VIS_Obs_2023a_B.t_h * APF_CTL_VIS_Obs_2023a_B.t_h + 1.0;
    APF_CTL_VIS_Obs_2023a_B.scale_cy = APF_CTL_VIS_Obs_2023a_B.absxk_n;
  } else {
    APF_CTL_VIS_Obs_2023a_B.t_h = APF_CTL_VIS_Obs_2023a_B.absxk_n /
      APF_CTL_VIS_Obs_2023a_B.scale_cy;
    y += APF_CTL_VIS_Obs_2023a_B.t_h * APF_CTL_VIS_Obs_2023a_B.t_h;
  }

  return APF_CTL_VIS_Obs_2023a_B.scale_cy * sqrt(y);
}

static real_T APF_CTL_VIS_Obs_202_rt_powd_snf(real_T u0, real_T u1)
{
  real_T y;
  if (rtIsNaN(u0) || rtIsNaN(u1)) {
    y = (rtNaN);
  } else {
    APF_CTL_VIS_Obs_2023a_B.d1 = fabs(u0);
    APF_CTL_VIS_Obs_2023a_B.d2 = fabs(u1);
    if (rtIsInf(u1)) {
      if (APF_CTL_VIS_Obs_2023a_B.d1 == 1.0) {
        y = 1.0;
      } else if (APF_CTL_VIS_Obs_2023a_B.d1 > 1.0) {
        if (u1 > 0.0) {
          y = (rtInf);
        } else {
          y = 0.0;
        }
      } else if (u1 > 0.0) {
        y = 0.0;
      } else {
        y = (rtInf);
      }
    } else if (APF_CTL_VIS_Obs_2023a_B.d2 == 0.0) {
      y = 1.0;
    } else if (APF_CTL_VIS_Obs_2023a_B.d2 == 1.0) {
      if (u1 > 0.0) {
        y = u0;
      } else {
        y = 1.0 / u0;
      }
    } else if (u1 == 2.0) {
      y = u0 * u0;
    } else if ((u1 == 0.5) && (u0 >= 0.0)) {
      y = sqrt(u0);
    } else if ((u0 < 0.0) && (u1 > floor(u1))) {
      y = (rtNaN);
    } else {
      y = pow(u0, u1);
    }
  }

  return y;
}

static real_T APF__rt_urand_Upu32_Yd_f_pw_snf(uint32_T *u)
{
  // Uniform random number generator (random number between 0 and 1)

  // #define IA      16807                      magic multiplier = 7^5
  // #define IM      2147483647                 modulus = 2^31-1
  // #define IQ      127773                     IM div IA
  // #define IR      2836                       IM modulo IA
  // #define S       4.656612875245797e-10      reciprocal of 2^31-1
  // test = IA * (seed % IQ) - IR * (seed/IQ)
  // seed = test < 0 ? (test + IM) : test
  // return (seed*S)

  APF_CTL_VIS_Obs_2023a_B.lo = *u % 127773U * 16807U;
  APF_CTL_VIS_Obs_2023a_B.hi = *u / 127773U * 2836U;
  if (APF_CTL_VIS_Obs_2023a_B.lo < APF_CTL_VIS_Obs_2023a_B.hi) {
    *u = 2147483647U - (APF_CTL_VIS_Obs_2023a_B.hi - APF_CTL_VIS_Obs_2023a_B.lo);
  } else {
    *u = APF_CTL_VIS_Obs_2023a_B.lo - APF_CTL_VIS_Obs_2023a_B.hi;
  }

  return static_cast<real_T>(*u) * 4.6566128752457969E-10;
}

static real_T APF__rt_nrand_Upu32_Yd_f_pw_snf(uint32_T *u)
{
  real_T y;

  // Normal (Gaussian) random number generator
  do {
    APF_CTL_VIS_Obs_2023a_B.sr = 2.0 * APF__rt_urand_Upu32_Yd_f_pw_snf(u) - 1.0;
    APF_CTL_VIS_Obs_2023a_B.si = 2.0 * APF__rt_urand_Upu32_Yd_f_pw_snf(u) - 1.0;
    APF_CTL_VIS_Obs_2023a_B.si = APF_CTL_VIS_Obs_2023a_B.sr *
      APF_CTL_VIS_Obs_2023a_B.sr + APF_CTL_VIS_Obs_2023a_B.si *
      APF_CTL_VIS_Obs_2023a_B.si;
  } while (APF_CTL_VIS_Obs_2023a_B.si > 1.0);

  y = sqrt(-2.0 * log(APF_CTL_VIS_Obs_2023a_B.si) / APF_CTL_VIS_Obs_2023a_B.si) *
    APF_CTL_VIS_Obs_2023a_B.sr;
  return y;
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static real_T APF_CTL_VIS_Obs_2023a_xnrm2(int32_T n, const real_T x[36], int32_T
  ix0)
{
  real_T y;
  y = 0.0;
  APF_CTL_VIS_Obs_2023a_B.scale_h = 3.3121686421112381E-170;
  APF_CTL_VIS_Obs_2023a_B.kend_i = (ix0 + n) - 1;
  for (APF_CTL_VIS_Obs_2023a_B.k_nq = ix0; APF_CTL_VIS_Obs_2023a_B.k_nq <=
       APF_CTL_VIS_Obs_2023a_B.kend_i; APF_CTL_VIS_Obs_2023a_B.k_nq++) {
    APF_CTL_VIS_Obs_2023a_B.absxk_fn = fabs(x[APF_CTL_VIS_Obs_2023a_B.k_nq - 1]);
    if (APF_CTL_VIS_Obs_2023a_B.absxk_fn > APF_CTL_VIS_Obs_2023a_B.scale_h) {
      APF_CTL_VIS_Obs_2023a_B.t_i = APF_CTL_VIS_Obs_2023a_B.scale_h /
        APF_CTL_VIS_Obs_2023a_B.absxk_fn;
      y = y * APF_CTL_VIS_Obs_2023a_B.t_i * APF_CTL_VIS_Obs_2023a_B.t_i + 1.0;
      APF_CTL_VIS_Obs_2023a_B.scale_h = APF_CTL_VIS_Obs_2023a_B.absxk_fn;
    } else {
      APF_CTL_VIS_Obs_2023a_B.t_i = APF_CTL_VIS_Obs_2023a_B.absxk_fn /
        APF_CTL_VIS_Obs_2023a_B.scale_h;
      y += APF_CTL_VIS_Obs_2023a_B.t_i * APF_CTL_VIS_Obs_2023a_B.t_i;
    }
  }

  return APF_CTL_VIS_Obs_2023a_B.scale_h * sqrt(y);
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static real_T APF_CTL_VIS_Obs_2023a_xdotc(int32_T n, const real_T x[36], int32_T
  ix0, const real_T y[36], int32_T iy0)
{
  real_T d;
  d = 0.0;
  APF_CTL_VIS_Obs_2023a_B.b_mt = static_cast<uint8_T>(n);
  for (APF_CTL_VIS_Obs_2023a_B.k_i = 0; APF_CTL_VIS_Obs_2023a_B.k_i <
       APF_CTL_VIS_Obs_2023a_B.b_mt; APF_CTL_VIS_Obs_2023a_B.k_i++) {
    d += x[(ix0 + APF_CTL_VIS_Obs_2023a_B.k_i) - 1] * y[(iy0 +
      APF_CTL_VIS_Obs_2023a_B.k_i) - 1];
  }

  return d;
}

// Function for MATLAB Function: '<S611>/Dynamics Model'
static void APF_CTL_VIS_Obs_2023a_svd(const real_T A[36], real_T U[36], real_T
  s[6], real_T V[36])
{
  boolean_T exitg1;
  memcpy(&APF_CTL_VIS_Obs_2023a_B.b_A_n[0], &A[0], 36U * sizeof(real_T));
  for (APF_CTL_VIS_Obs_2023a_B.i_h = 0; APF_CTL_VIS_Obs_2023a_B.i_h < 6;
       APF_CTL_VIS_Obs_2023a_B.i_h++) {
    APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
    APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
    APF_CTL_VIS_Obs_2023a_B.work_j[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
  }

  memset(&U[0], 0, 36U * sizeof(real_T));
  memset(&APF_CTL_VIS_Obs_2023a_B.Vf[0], 0, 36U * sizeof(real_T));
  for (APF_CTL_VIS_Obs_2023a_B.i_h = 0; APF_CTL_VIS_Obs_2023a_B.i_h < 5;
       APF_CTL_VIS_Obs_2023a_B.i_h++) {
    APF_CTL_VIS_Obs_2023a_B.qp1 = APF_CTL_VIS_Obs_2023a_B.i_h + 2;
    APF_CTL_VIS_Obs_2023a_B.qs = 6 * APF_CTL_VIS_Obs_2023a_B.i_h +
      APF_CTL_VIS_Obs_2023a_B.i_h;
    APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qs + 1;
    APF_CTL_VIS_Obs_2023a_B.apply_transform = false;
    APF_CTL_VIS_Obs_2023a_B.nrm = APF_CTL_VIS_Obs_2023a_xnrm2(6 -
      APF_CTL_VIS_Obs_2023a_B.i_h, APF_CTL_VIS_Obs_2023a_B.b_A_n,
      APF_CTL_VIS_Obs_2023a_B.qs + 1);
    if (APF_CTL_VIS_Obs_2023a_B.nrm > 0.0) {
      APF_CTL_VIS_Obs_2023a_B.apply_transform = true;
      if (APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.qs] < 0.0) {
        APF_CTL_VIS_Obs_2023a_B.nrm = -APF_CTL_VIS_Obs_2023a_B.nrm;
      }

      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h] =
        APF_CTL_VIS_Obs_2023a_B.nrm;
      if (fabs(APF_CTL_VIS_Obs_2023a_B.nrm) >= 1.0020841800044864E-292) {
        APF_CTL_VIS_Obs_2023a_B.nrm = 1.0 / APF_CTL_VIS_Obs_2023a_B.nrm;
        APF_CTL_VIS_Obs_2023a_B.qjj = (APF_CTL_VIS_Obs_2023a_B.qs -
          APF_CTL_VIS_Obs_2023a_B.i_h) + 6;
        for (APF_CTL_VIS_Obs_2023a_B.e_k = APF_CTL_VIS_Obs_2023a_B.qq;
             APF_CTL_VIS_Obs_2023a_B.e_k <= APF_CTL_VIS_Obs_2023a_B.qjj;
             APF_CTL_VIS_Obs_2023a_B.e_k++) {
          APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.e_k - 1] *=
            APF_CTL_VIS_Obs_2023a_B.nrm;
        }
      } else {
        APF_CTL_VIS_Obs_2023a_B.qjj = (APF_CTL_VIS_Obs_2023a_B.qs -
          APF_CTL_VIS_Obs_2023a_B.i_h) + 6;
        for (APF_CTL_VIS_Obs_2023a_B.e_k = APF_CTL_VIS_Obs_2023a_B.qq;
             APF_CTL_VIS_Obs_2023a_B.e_k <= APF_CTL_VIS_Obs_2023a_B.qjj;
             APF_CTL_VIS_Obs_2023a_B.e_k++) {
          APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.e_k - 1] /=
            APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h];
        }
      }

      APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.qs]++;
      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h] =
        -APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h];
    } else {
      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
         APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
      APF_CTL_VIS_Obs_2023a_B.qjj = (APF_CTL_VIS_Obs_2023a_B.qq - 1) * 6 +
        APF_CTL_VIS_Obs_2023a_B.i_h;
      if (APF_CTL_VIS_Obs_2023a_B.apply_transform) {
        APF_CTL_VIS_Obs_2023a_xaxpy(6 - APF_CTL_VIS_Obs_2023a_B.i_h,
          -(APF_CTL_VIS_Obs_2023a_xdotc(6 - APF_CTL_VIS_Obs_2023a_B.i_h,
          APF_CTL_VIS_Obs_2023a_B.b_A_n, APF_CTL_VIS_Obs_2023a_B.qs + 1,
          APF_CTL_VIS_Obs_2023a_B.b_A_n, APF_CTL_VIS_Obs_2023a_B.qjj + 1) /
            APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.qs]),
          APF_CTL_VIS_Obs_2023a_B.qs + 1, APF_CTL_VIS_Obs_2023a_B.b_A_n,
          APF_CTL_VIS_Obs_2023a_B.qjj + 1);
      }

      APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] =
        APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.qjj];
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.i_h + 1;
         APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
      APF_CTL_VIS_Obs_2023a_B.qs = (6 * APF_CTL_VIS_Obs_2023a_B.i_h +
        APF_CTL_VIS_Obs_2023a_B.qq) - 1;
      U[APF_CTL_VIS_Obs_2023a_B.qs] =
        APF_CTL_VIS_Obs_2023a_B.b_A_n[APF_CTL_VIS_Obs_2023a_B.qs];
    }

    if (APF_CTL_VIS_Obs_2023a_B.i_h + 1 <= 4) {
      APF_CTL_VIS_Obs_2023a_B.nrm = APF_CTL_VIS_Obs_2023a_xnrm2_c(5 -
        APF_CTL_VIS_Obs_2023a_B.i_h, APF_CTL_VIS_Obs_2023a_B.e,
        APF_CTL_VIS_Obs_2023a_B.i_h + 2);
      if (APF_CTL_VIS_Obs_2023a_B.nrm == 0.0) {
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
      } else {
        if (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h + 1] < 0.0) {
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] =
            -APF_CTL_VIS_Obs_2023a_B.nrm;
        } else {
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] =
            APF_CTL_VIS_Obs_2023a_B.nrm;
        }

        APF_CTL_VIS_Obs_2023a_B.nrm =
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h];
        if (fabs(APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h]) >=
            1.0020841800044864E-292) {
          APF_CTL_VIS_Obs_2023a_B.nrm = 1.0 /
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h];
          for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
               APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] *=
              APF_CTL_VIS_Obs_2023a_B.nrm;
          }
        } else {
          for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
               APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] /=
              APF_CTL_VIS_Obs_2023a_B.nrm;
          }
        }

        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h + 1]++;
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] =
          -APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h];
        for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
             APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
          APF_CTL_VIS_Obs_2023a_B.work_j[APF_CTL_VIS_Obs_2023a_B.qq - 1] = 0.0;
        }

        for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
             APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
          APF_CTL_VIS_Obs_2023a_xaxpy_j(5 - APF_CTL_VIS_Obs_2023a_B.i_h,
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1],
            APF_CTL_VIS_Obs_2023a_B.b_A_n, (APF_CTL_VIS_Obs_2023a_B.i_h + 6 *
            (APF_CTL_VIS_Obs_2023a_B.qq - 1)) + 2,
            APF_CTL_VIS_Obs_2023a_B.work_j, APF_CTL_VIS_Obs_2023a_B.i_h + 2);
        }

        for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
             APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
          APF_CTL_VIS_Obs_2023a_xaxpy_jv(5 - APF_CTL_VIS_Obs_2023a_B.i_h,
            -APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] /
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h + 1],
            APF_CTL_VIS_Obs_2023a_B.work_j, APF_CTL_VIS_Obs_2023a_B.i_h + 2,
            APF_CTL_VIS_Obs_2023a_B.b_A_n, (APF_CTL_VIS_Obs_2023a_B.i_h + 6 *
            (APF_CTL_VIS_Obs_2023a_B.qq - 1)) + 2);
        }
      }

      for (APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
           APF_CTL_VIS_Obs_2023a_B.qq < 7; APF_CTL_VIS_Obs_2023a_B.qq++) {
        APF_CTL_VIS_Obs_2023a_B.Vf[(APF_CTL_VIS_Obs_2023a_B.qq + 6 *
          APF_CTL_VIS_Obs_2023a_B.i_h) - 1] =
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1];
      }
    }
  }

  APF_CTL_VIS_Obs_2023a_B.i_h = 4;
  APF_CTL_VIS_Obs_2023a_B.b_s[5] = APF_CTL_VIS_Obs_2023a_B.b_A_n[35];
  APF_CTL_VIS_Obs_2023a_B.e[4] = APF_CTL_VIS_Obs_2023a_B.b_A_n[34];
  APF_CTL_VIS_Obs_2023a_B.e[5] = 0.0;
  for (APF_CTL_VIS_Obs_2023a_B.qp1 = 0; APF_CTL_VIS_Obs_2023a_B.qp1 < 6;
       APF_CTL_VIS_Obs_2023a_B.qp1++) {
    U[APF_CTL_VIS_Obs_2023a_B.qp1 + 30] = 0.0;
  }

  U[35] = 1.0;
  for (APF_CTL_VIS_Obs_2023a_B.qp1 = 4; APF_CTL_VIS_Obs_2023a_B.qp1 >= 0;
       APF_CTL_VIS_Obs_2023a_B.qp1--) {
    APF_CTL_VIS_Obs_2023a_B.qq = 6 * APF_CTL_VIS_Obs_2023a_B.qp1 +
      APF_CTL_VIS_Obs_2023a_B.qp1;
    if (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qp1] != 0.0) {
      for (APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.qp1 + 2;
           APF_CTL_VIS_Obs_2023a_B.qs < 7; APF_CTL_VIS_Obs_2023a_B.qs++) {
        APF_CTL_VIS_Obs_2023a_B.qjj = ((APF_CTL_VIS_Obs_2023a_B.qs - 1) * 6 +
          APF_CTL_VIS_Obs_2023a_B.qp1) + 1;
        APF_CTL_VIS_Obs_2023a_xaxpy(6 - APF_CTL_VIS_Obs_2023a_B.qp1,
          -(APF_CTL_VIS_Obs_2023a_xdotc(6 - APF_CTL_VIS_Obs_2023a_B.qp1, U,
          APF_CTL_VIS_Obs_2023a_B.qq + 1, U, APF_CTL_VIS_Obs_2023a_B.qjj) /
            U[APF_CTL_VIS_Obs_2023a_B.qq]), APF_CTL_VIS_Obs_2023a_B.qq + 1, U,
          APF_CTL_VIS_Obs_2023a_B.qjj);
      }

      for (APF_CTL_VIS_Obs_2023a_B.qjj = APF_CTL_VIS_Obs_2023a_B.qp1 + 1;
           APF_CTL_VIS_Obs_2023a_B.qjj < 7; APF_CTL_VIS_Obs_2023a_B.qjj++) {
        APF_CTL_VIS_Obs_2023a_B.qs = (6 * APF_CTL_VIS_Obs_2023a_B.qp1 +
          APF_CTL_VIS_Obs_2023a_B.qjj) - 1;
        U[APF_CTL_VIS_Obs_2023a_B.qs] = -U[APF_CTL_VIS_Obs_2023a_B.qs];
      }

      U[APF_CTL_VIS_Obs_2023a_B.qq]++;
      for (APF_CTL_VIS_Obs_2023a_B.qq = 0; APF_CTL_VIS_Obs_2023a_B.qq <
           APF_CTL_VIS_Obs_2023a_B.qp1; APF_CTL_VIS_Obs_2023a_B.qq++) {
        U[APF_CTL_VIS_Obs_2023a_B.qq + 6 * APF_CTL_VIS_Obs_2023a_B.qp1] = 0.0;
      }
    } else {
      for (APF_CTL_VIS_Obs_2023a_B.qs = 0; APF_CTL_VIS_Obs_2023a_B.qs < 6;
           APF_CTL_VIS_Obs_2023a_B.qs++) {
        U[APF_CTL_VIS_Obs_2023a_B.qs + 6 * APF_CTL_VIS_Obs_2023a_B.qp1] = 0.0;
      }

      U[APF_CTL_VIS_Obs_2023a_B.qq] = 1.0;
    }
  }

  for (APF_CTL_VIS_Obs_2023a_B.qp1 = 5; APF_CTL_VIS_Obs_2023a_B.qp1 >= 0;
       APF_CTL_VIS_Obs_2023a_B.qp1--) {
    if ((APF_CTL_VIS_Obs_2023a_B.qp1 + 1 <= 4) &&
        (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qp1] != 0.0)) {
      APF_CTL_VIS_Obs_2023a_B.qq = (6 * APF_CTL_VIS_Obs_2023a_B.qp1 +
        APF_CTL_VIS_Obs_2023a_B.qp1) + 2;
      for (APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.qp1 + 2;
           APF_CTL_VIS_Obs_2023a_B.qs < 7; APF_CTL_VIS_Obs_2023a_B.qs++) {
        APF_CTL_VIS_Obs_2023a_B.qjj = ((APF_CTL_VIS_Obs_2023a_B.qs - 1) * 6 +
          APF_CTL_VIS_Obs_2023a_B.qp1) + 2;
        APF_CTL_VIS_Obs_2023a_xaxpy(5 - APF_CTL_VIS_Obs_2023a_B.qp1,
          -(APF_CTL_VIS_Obs_2023a_xdotc(5 - APF_CTL_VIS_Obs_2023a_B.qp1,
          APF_CTL_VIS_Obs_2023a_B.Vf, APF_CTL_VIS_Obs_2023a_B.qq,
          APF_CTL_VIS_Obs_2023a_B.Vf, APF_CTL_VIS_Obs_2023a_B.qjj) /
            APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qq - 1]),
          APF_CTL_VIS_Obs_2023a_B.qq, APF_CTL_VIS_Obs_2023a_B.Vf,
          APF_CTL_VIS_Obs_2023a_B.qjj);
      }
    }

    for (APF_CTL_VIS_Obs_2023a_B.qq = 0; APF_CTL_VIS_Obs_2023a_B.qq < 6;
         APF_CTL_VIS_Obs_2023a_B.qq++) {
      APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qq + 6 *
        APF_CTL_VIS_Obs_2023a_B.qp1] = 0.0;
    }

    APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qp1 + 6 *
      APF_CTL_VIS_Obs_2023a_B.qp1] = 1.0;
  }

  APF_CTL_VIS_Obs_2023a_B.qp1 = 0;
  APF_CTL_VIS_Obs_2023a_B.nrm = 0.0;
  for (APF_CTL_VIS_Obs_2023a_B.qq = 0; APF_CTL_VIS_Obs_2023a_B.qq < 6;
       APF_CTL_VIS_Obs_2023a_B.qq++) {
    APF_CTL_VIS_Obs_2023a_B.r_i =
      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq];
    if (APF_CTL_VIS_Obs_2023a_B.r_i != 0.0) {
      APF_CTL_VIS_Obs_2023a_B.rt = fabs(APF_CTL_VIS_Obs_2023a_B.r_i);
      APF_CTL_VIS_Obs_2023a_B.r_i /= APF_CTL_VIS_Obs_2023a_B.rt;
      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] =
        APF_CTL_VIS_Obs_2023a_B.rt;
      if (APF_CTL_VIS_Obs_2023a_B.qq + 1 < 6) {
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq] /=
          APF_CTL_VIS_Obs_2023a_B.r_i;
      }

      APF_CTL_VIS_Obs_2023a_B.qs = 6 * APF_CTL_VIS_Obs_2023a_B.qq + 1;
      for (APF_CTL_VIS_Obs_2023a_B.qjj = APF_CTL_VIS_Obs_2023a_B.qs;
           APF_CTL_VIS_Obs_2023a_B.qjj <= APF_CTL_VIS_Obs_2023a_B.qs + 5;
           APF_CTL_VIS_Obs_2023a_B.qjj++) {
        U[APF_CTL_VIS_Obs_2023a_B.qjj - 1] *= APF_CTL_VIS_Obs_2023a_B.r_i;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.qq + 1 < 6) {
      APF_CTL_VIS_Obs_2023a_B.r_i =
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq];
      if (APF_CTL_VIS_Obs_2023a_B.r_i != 0.0) {
        APF_CTL_VIS_Obs_2023a_B.rt = fabs(APF_CTL_VIS_Obs_2023a_B.r_i);
        APF_CTL_VIS_Obs_2023a_B.r_i = APF_CTL_VIS_Obs_2023a_B.rt /
          APF_CTL_VIS_Obs_2023a_B.r_i;
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq] =
          APF_CTL_VIS_Obs_2023a_B.rt;
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq + 1] *=
          APF_CTL_VIS_Obs_2023a_B.r_i;
        APF_CTL_VIS_Obs_2023a_B.qs = (APF_CTL_VIS_Obs_2023a_B.qq + 1) * 6 + 1;
        for (APF_CTL_VIS_Obs_2023a_B.qjj = APF_CTL_VIS_Obs_2023a_B.qs;
             APF_CTL_VIS_Obs_2023a_B.qjj <= APF_CTL_VIS_Obs_2023a_B.qs + 5;
             APF_CTL_VIS_Obs_2023a_B.qjj++) {
          APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qjj - 1] *=
            APF_CTL_VIS_Obs_2023a_B.r_i;
        }
      }
    }

    APF_CTL_VIS_Obs_2023a_B.r_i = fabs
      (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq]);
    APF_CTL_VIS_Obs_2023a_B.rt = fabs
      (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq]);
    if ((APF_CTL_VIS_Obs_2023a_B.r_i >= APF_CTL_VIS_Obs_2023a_B.rt) || rtIsNaN
        (APF_CTL_VIS_Obs_2023a_B.rt)) {
      APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.r_i;
    }

    if ((!(APF_CTL_VIS_Obs_2023a_B.nrm >= APF_CTL_VIS_Obs_2023a_B.rt)) &&
        (!rtIsNaN(APF_CTL_VIS_Obs_2023a_B.rt))) {
      APF_CTL_VIS_Obs_2023a_B.nrm = APF_CTL_VIS_Obs_2023a_B.rt;
    }
  }

  while ((APF_CTL_VIS_Obs_2023a_B.i_h + 2 > 0) && (APF_CTL_VIS_Obs_2023a_B.qp1 <
          75)) {
    APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.i_h + 1;
    exitg1 = false;
    while (!(exitg1 || (APF_CTL_VIS_Obs_2023a_B.qq == 0))) {
      APF_CTL_VIS_Obs_2023a_B.rt = fabs
        (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1]);
      if (APF_CTL_VIS_Obs_2023a_B.rt <= (fabs
           (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq - 1]) + fabs
           (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq])) *
          2.2204460492503131E-16) {
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] = 0.0;
        exitg1 = true;
      } else if ((APF_CTL_VIS_Obs_2023a_B.rt <= 1.0020841800044864E-292) ||
                 ((APF_CTL_VIS_Obs_2023a_B.qp1 > 20) &&
                  (APF_CTL_VIS_Obs_2023a_B.rt <= 2.2204460492503131E-16 *
                   APF_CTL_VIS_Obs_2023a_B.nrm))) {
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] = 0.0;
        exitg1 = true;
      } else {
        APF_CTL_VIS_Obs_2023a_B.qq--;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_B.i_h + 1 == APF_CTL_VIS_Obs_2023a_B.qq) {
      APF_CTL_VIS_Obs_2023a_B.qjj = 4;
    } else {
      APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.i_h + 2;
      APF_CTL_VIS_Obs_2023a_B.qjj = APF_CTL_VIS_Obs_2023a_B.i_h + 2;
      exitg1 = false;
      while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.qjj >=
                           APF_CTL_VIS_Obs_2023a_B.qq)) {
        APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.qjj;
        if (APF_CTL_VIS_Obs_2023a_B.qjj == APF_CTL_VIS_Obs_2023a_B.qq) {
          exitg1 = true;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rt = 0.0;
          if (APF_CTL_VIS_Obs_2023a_B.qjj < APF_CTL_VIS_Obs_2023a_B.i_h + 2) {
            APF_CTL_VIS_Obs_2023a_B.rt = fabs
              (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qjj - 1]);
          }

          if (APF_CTL_VIS_Obs_2023a_B.qjj > APF_CTL_VIS_Obs_2023a_B.qq + 1) {
            APF_CTL_VIS_Obs_2023a_B.rt += fabs
              (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qjj - 2]);
          }

          APF_CTL_VIS_Obs_2023a_B.r_i = fabs
            (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qjj - 1]);
          if ((APF_CTL_VIS_Obs_2023a_B.r_i <= 2.2204460492503131E-16 *
               APF_CTL_VIS_Obs_2023a_B.rt) || (APF_CTL_VIS_Obs_2023a_B.r_i <=
               1.0020841800044864E-292)) {
            APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qjj - 1] = 0.0;
            exitg1 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.qjj--;
          }
        }
      }

      if (APF_CTL_VIS_Obs_2023a_B.qs == APF_CTL_VIS_Obs_2023a_B.qq) {
        APF_CTL_VIS_Obs_2023a_B.qjj = 3;
      } else if (APF_CTL_VIS_Obs_2023a_B.i_h + 2 == APF_CTL_VIS_Obs_2023a_B.qs)
      {
        APF_CTL_VIS_Obs_2023a_B.qjj = 1;
      } else {
        APF_CTL_VIS_Obs_2023a_B.qjj = 2;
        APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qs;
      }
    }

    switch (APF_CTL_VIS_Obs_2023a_B.qjj) {
     case 1:
      APF_CTL_VIS_Obs_2023a_B.rt =
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h];
      APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] = 0.0;
      for (APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.i_h + 1;
           APF_CTL_VIS_Obs_2023a_B.qs >= APF_CTL_VIS_Obs_2023a_B.qq + 1;
           APF_CTL_VIS_Obs_2023a_B.qs--) {
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qs - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt, &APF_CTL_VIS_Obs_2023a_B.sqds,
           &APF_CTL_VIS_Obs_2023a_B.smm1);
        if (APF_CTL_VIS_Obs_2023a_B.qs > APF_CTL_VIS_Obs_2023a_B.qq + 1) {
          APF_CTL_VIS_Obs_2023a_B.r_i =
            APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qs - 2];
          APF_CTL_VIS_Obs_2023a_B.rt = -APF_CTL_VIS_Obs_2023a_B.smm1 *
            APF_CTL_VIS_Obs_2023a_B.r_i;
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qs - 2] =
            APF_CTL_VIS_Obs_2023a_B.r_i * APF_CTL_VIS_Obs_2023a_B.sqds;
        }

        APF_CTL_VIS_Obs_2023a_xrot(APF_CTL_VIS_Obs_2023a_B.Vf, 6 *
          (APF_CTL_VIS_Obs_2023a_B.qs - 1) + 1, 6 * (APF_CTL_VIS_Obs_2023a_B.i_h
          + 1) + 1, APF_CTL_VIS_Obs_2023a_B.sqds, APF_CTL_VIS_Obs_2023a_B.smm1);
      }
      break;

     case 2:
      APF_CTL_VIS_Obs_2023a_B.rt =
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1];
      APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq - 1] = 0.0;
      for (APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.qq + 1;
           APF_CTL_VIS_Obs_2023a_B.qs <= APF_CTL_VIS_Obs_2023a_B.i_h + 2;
           APF_CTL_VIS_Obs_2023a_B.qs++) {
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qs - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt, &APF_CTL_VIS_Obs_2023a_B.sqds,
           &APF_CTL_VIS_Obs_2023a_B.smm1);
        APF_CTL_VIS_Obs_2023a_B.r_i =
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qs - 1];
        APF_CTL_VIS_Obs_2023a_B.rt = -APF_CTL_VIS_Obs_2023a_B.smm1 *
          APF_CTL_VIS_Obs_2023a_B.r_i;
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qs - 1] =
          APF_CTL_VIS_Obs_2023a_B.r_i * APF_CTL_VIS_Obs_2023a_B.sqds;
        APF_CTL_VIS_Obs_2023a_xrot(U, 6 * (APF_CTL_VIS_Obs_2023a_B.qs - 1) + 1,
          6 * (APF_CTL_VIS_Obs_2023a_B.qq - 1) + 1, APF_CTL_VIS_Obs_2023a_B.sqds,
          APF_CTL_VIS_Obs_2023a_B.smm1);
      }
      break;

     case 3:
      APF_CTL_VIS_Obs_2023a_B.sqds =
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h + 1];
      APF_CTL_VIS_Obs_2023a_B.r_i = fabs(APF_CTL_VIS_Obs_2023a_B.sqds);
      APF_CTL_VIS_Obs_2023a_B.rt = fabs
        (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h]);
      if ((APF_CTL_VIS_Obs_2023a_B.r_i >= APF_CTL_VIS_Obs_2023a_B.rt) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.rt)) {
        APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.r_i;
      }

      APF_CTL_VIS_Obs_2023a_B.r_i = fabs
        (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h]);
      if ((APF_CTL_VIS_Obs_2023a_B.rt >= APF_CTL_VIS_Obs_2023a_B.r_i) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.r_i)) {
        APF_CTL_VIS_Obs_2023a_B.r_i = APF_CTL_VIS_Obs_2023a_B.rt;
      }

      APF_CTL_VIS_Obs_2023a_B.rt = fabs
        (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq]);
      if ((APF_CTL_VIS_Obs_2023a_B.r_i >= APF_CTL_VIS_Obs_2023a_B.rt) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.rt)) {
        APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.r_i;
      }

      APF_CTL_VIS_Obs_2023a_B.r_i = fabs
        (APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq]);
      if ((APF_CTL_VIS_Obs_2023a_B.rt >= APF_CTL_VIS_Obs_2023a_B.r_i) || rtIsNaN
          (APF_CTL_VIS_Obs_2023a_B.r_i)) {
        APF_CTL_VIS_Obs_2023a_B.r_i = APF_CTL_VIS_Obs_2023a_B.rt;
      }

      APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.sqds /
        APF_CTL_VIS_Obs_2023a_B.r_i;
      APF_CTL_VIS_Obs_2023a_B.smm1 =
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.i_h] /
        APF_CTL_VIS_Obs_2023a_B.r_i;
      APF_CTL_VIS_Obs_2023a_B.emm1 =
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] /
        APF_CTL_VIS_Obs_2023a_B.r_i;
      APF_CTL_VIS_Obs_2023a_B.sqds =
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] /
        APF_CTL_VIS_Obs_2023a_B.r_i;
      APF_CTL_VIS_Obs_2023a_B.smm1 = ((APF_CTL_VIS_Obs_2023a_B.smm1 +
        APF_CTL_VIS_Obs_2023a_B.rt) * (APF_CTL_VIS_Obs_2023a_B.smm1 -
        APF_CTL_VIS_Obs_2023a_B.rt) + APF_CTL_VIS_Obs_2023a_B.emm1 *
        APF_CTL_VIS_Obs_2023a_B.emm1) / 2.0;
      APF_CTL_VIS_Obs_2023a_B.emm1 *= APF_CTL_VIS_Obs_2023a_B.rt;
      APF_CTL_VIS_Obs_2023a_B.emm1 *= APF_CTL_VIS_Obs_2023a_B.emm1;
      if ((APF_CTL_VIS_Obs_2023a_B.smm1 != 0.0) || (APF_CTL_VIS_Obs_2023a_B.emm1
           != 0.0)) {
        APF_CTL_VIS_Obs_2023a_B.shift = sqrt(APF_CTL_VIS_Obs_2023a_B.smm1 *
          APF_CTL_VIS_Obs_2023a_B.smm1 + APF_CTL_VIS_Obs_2023a_B.emm1);
        if (APF_CTL_VIS_Obs_2023a_B.smm1 < 0.0) {
          APF_CTL_VIS_Obs_2023a_B.shift = -APF_CTL_VIS_Obs_2023a_B.shift;
        }

        APF_CTL_VIS_Obs_2023a_B.shift = APF_CTL_VIS_Obs_2023a_B.emm1 /
          (APF_CTL_VIS_Obs_2023a_B.smm1 + APF_CTL_VIS_Obs_2023a_B.shift);
      } else {
        APF_CTL_VIS_Obs_2023a_B.shift = 0.0;
      }

      APF_CTL_VIS_Obs_2023a_B.rt = (APF_CTL_VIS_Obs_2023a_B.sqds +
        APF_CTL_VIS_Obs_2023a_B.rt) * (APF_CTL_VIS_Obs_2023a_B.sqds -
        APF_CTL_VIS_Obs_2023a_B.rt) + APF_CTL_VIS_Obs_2023a_B.shift;
      APF_CTL_VIS_Obs_2023a_B.r_i =
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.qq] /
        APF_CTL_VIS_Obs_2023a_B.r_i * APF_CTL_VIS_Obs_2023a_B.sqds;
      for (APF_CTL_VIS_Obs_2023a_B.e_k = APF_CTL_VIS_Obs_2023a_B.qq + 1;
           APF_CTL_VIS_Obs_2023a_B.e_k <= APF_CTL_VIS_Obs_2023a_B.i_h + 1;
           APF_CTL_VIS_Obs_2023a_B.e_k++) {
        APF_CTL_VIS_Obs_2023a_xrotg(&APF_CTL_VIS_Obs_2023a_B.rt,
          &APF_CTL_VIS_Obs_2023a_B.r_i, &APF_CTL_VIS_Obs_2023a_B.sqds,
          &APF_CTL_VIS_Obs_2023a_B.smm1);
        if (APF_CTL_VIS_Obs_2023a_B.e_k > APF_CTL_VIS_Obs_2023a_B.qq + 1) {
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k - 2] =
            APF_CTL_VIS_Obs_2023a_B.rt;
        }

        APF_CTL_VIS_Obs_2023a_B.emm1 =
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k - 1];
        APF_CTL_VIS_Obs_2023a_B.r_i =
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k - 1];
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k - 1] =
          APF_CTL_VIS_Obs_2023a_B.emm1 * APF_CTL_VIS_Obs_2023a_B.sqds -
          APF_CTL_VIS_Obs_2023a_B.r_i * APF_CTL_VIS_Obs_2023a_B.smm1;
        APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.smm1 *
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k];
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k] *=
          APF_CTL_VIS_Obs_2023a_B.sqds;
        APF_CTL_VIS_Obs_2023a_B.qs = (APF_CTL_VIS_Obs_2023a_B.e_k - 1) * 6 + 1;
        APF_CTL_VIS_Obs_2023a_B.qjj = 6 * APF_CTL_VIS_Obs_2023a_B.e_k + 1;
        APF_CTL_VIS_Obs_2023a_xrot(APF_CTL_VIS_Obs_2023a_B.Vf,
          APF_CTL_VIS_Obs_2023a_B.qs, APF_CTL_VIS_Obs_2023a_B.qjj,
          APF_CTL_VIS_Obs_2023a_B.sqds, APF_CTL_VIS_Obs_2023a_B.smm1);
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k - 1] =
          APF_CTL_VIS_Obs_2023a_B.r_i * APF_CTL_VIS_Obs_2023a_B.sqds +
          APF_CTL_VIS_Obs_2023a_B.emm1 * APF_CTL_VIS_Obs_2023a_B.smm1;
        APF_CTL_VIS_Obs_2023a_xrotg
          (&APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k - 1],
           &APF_CTL_VIS_Obs_2023a_B.rt, &APF_CTL_VIS_Obs_2023a_B.sqds,
           &APF_CTL_VIS_Obs_2023a_B.smm1);
        APF_CTL_VIS_Obs_2023a_B.r_i =
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k - 1];
        APF_CTL_VIS_Obs_2023a_B.rt = APF_CTL_VIS_Obs_2023a_B.r_i *
          APF_CTL_VIS_Obs_2023a_B.sqds + APF_CTL_VIS_Obs_2023a_B.smm1 *
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k];
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k] =
          APF_CTL_VIS_Obs_2023a_B.r_i * -APF_CTL_VIS_Obs_2023a_B.smm1 +
          APF_CTL_VIS_Obs_2023a_B.sqds *
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.e_k];
        APF_CTL_VIS_Obs_2023a_B.r_i = APF_CTL_VIS_Obs_2023a_B.smm1 *
          APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k];
        APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.e_k] *=
          APF_CTL_VIS_Obs_2023a_B.sqds;
        APF_CTL_VIS_Obs_2023a_xrot(U, APF_CTL_VIS_Obs_2023a_B.qs,
          APF_CTL_VIS_Obs_2023a_B.qjj, APF_CTL_VIS_Obs_2023a_B.sqds,
          APF_CTL_VIS_Obs_2023a_B.smm1);
      }

      APF_CTL_VIS_Obs_2023a_B.e[APF_CTL_VIS_Obs_2023a_B.i_h] =
        APF_CTL_VIS_Obs_2023a_B.rt;
      APF_CTL_VIS_Obs_2023a_B.qp1++;
      break;

     default:
      if (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] < 0.0) {
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] =
          -APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq];
        APF_CTL_VIS_Obs_2023a_B.qp1 = 6 * APF_CTL_VIS_Obs_2023a_B.qq + 1;
        for (APF_CTL_VIS_Obs_2023a_B.qs = APF_CTL_VIS_Obs_2023a_B.qp1;
             APF_CTL_VIS_Obs_2023a_B.qs <= APF_CTL_VIS_Obs_2023a_B.qp1 + 5;
             APF_CTL_VIS_Obs_2023a_B.qs++) {
          APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qs - 1] =
            -APF_CTL_VIS_Obs_2023a_B.Vf[APF_CTL_VIS_Obs_2023a_B.qs - 1];
        }
      }

      APF_CTL_VIS_Obs_2023a_B.qp1 = APF_CTL_VIS_Obs_2023a_B.qq + 1;
      while ((APF_CTL_VIS_Obs_2023a_B.qq + 1 < 6) &&
             (APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] <
              APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qp1])) {
        APF_CTL_VIS_Obs_2023a_B.rt =
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq];
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qq] =
          APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qp1];
        APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qp1] =
          APF_CTL_VIS_Obs_2023a_B.rt;
        APF_CTL_VIS_Obs_2023a_B.qs = 6 * APF_CTL_VIS_Obs_2023a_B.qq + 1;
        APF_CTL_VIS_Obs_2023a_B.qjj = (APF_CTL_VIS_Obs_2023a_B.qq + 1) * 6 + 1;
        APF_CTL_VIS_Obs_2023a_xswap(APF_CTL_VIS_Obs_2023a_B.Vf,
          APF_CTL_VIS_Obs_2023a_B.qs, APF_CTL_VIS_Obs_2023a_B.qjj);
        APF_CTL_VIS_Obs_2023a_xswap(U, APF_CTL_VIS_Obs_2023a_B.qs,
          APF_CTL_VIS_Obs_2023a_B.qjj);
        APF_CTL_VIS_Obs_2023a_B.qq = APF_CTL_VIS_Obs_2023a_B.qp1;
        APF_CTL_VIS_Obs_2023a_B.qp1++;
      }

      APF_CTL_VIS_Obs_2023a_B.qp1 = 0;
      APF_CTL_VIS_Obs_2023a_B.i_h--;
      break;
    }
  }

  for (APF_CTL_VIS_Obs_2023a_B.qp1 = 0; APF_CTL_VIS_Obs_2023a_B.qp1 < 6;
       APF_CTL_VIS_Obs_2023a_B.qp1++) {
    s[APF_CTL_VIS_Obs_2023a_B.qp1] =
      APF_CTL_VIS_Obs_2023a_B.b_s[APF_CTL_VIS_Obs_2023a_B.qp1];
    for (APF_CTL_VIS_Obs_2023a_B.i_h = 0; APF_CTL_VIS_Obs_2023a_B.i_h < 6;
         APF_CTL_VIS_Obs_2023a_B.i_h++) {
      V[APF_CTL_VIS_Obs_2023a_B.i_h + 6 * APF_CTL_VIS_Obs_2023a_B.qp1] =
        APF_CTL_VIS_Obs_2023a_B.Vf[6 * APF_CTL_VIS_Obs_2023a_B.qp1 +
        APF_CTL_VIS_Obs_2023a_B.i_h];
    }
  }
}

static void APF_CTL_VIS_Obs__rt_invd3x3_snf(const real_T u[9], real_T y[9])
{
  memcpy(&APF_CTL_VIS_Obs_2023a_B.x[0], &u[0], 9U * sizeof(real_T));
  APF_CTL_VIS_Obs_2023a_B.p1 = 1;
  APF_CTL_VIS_Obs_2023a_B.p2 = 3;
  APF_CTL_VIS_Obs_2023a_B.p3 = 6;
  APF_CTL_VIS_Obs_2023a_B.absx11 = fabs(u[0]);
  APF_CTL_VIS_Obs_2023a_B.absx21 = fabs(u[1]);
  APF_CTL_VIS_Obs_2023a_B.absx31 = fabs(u[2]);
  if ((APF_CTL_VIS_Obs_2023a_B.absx21 > APF_CTL_VIS_Obs_2023a_B.absx11) &&
      (APF_CTL_VIS_Obs_2023a_B.absx21 > APF_CTL_VIS_Obs_2023a_B.absx31)) {
    APF_CTL_VIS_Obs_2023a_B.p1 = 4;
    APF_CTL_VIS_Obs_2023a_B.p2 = 0;
    APF_CTL_VIS_Obs_2023a_B.x[0] = u[1];
    APF_CTL_VIS_Obs_2023a_B.x[1] = u[0];
    APF_CTL_VIS_Obs_2023a_B.x[3] = u[4];
    APF_CTL_VIS_Obs_2023a_B.x[4] = u[3];
    APF_CTL_VIS_Obs_2023a_B.x[6] = u[7];
    APF_CTL_VIS_Obs_2023a_B.x[7] = u[6];
  } else if (APF_CTL_VIS_Obs_2023a_B.absx31 > APF_CTL_VIS_Obs_2023a_B.absx11) {
    APF_CTL_VIS_Obs_2023a_B.p1 = 7;
    APF_CTL_VIS_Obs_2023a_B.p3 = 0;
    APF_CTL_VIS_Obs_2023a_B.x[2] = APF_CTL_VIS_Obs_2023a_B.x[0];
    APF_CTL_VIS_Obs_2023a_B.x[0] = u[2];
    APF_CTL_VIS_Obs_2023a_B.x[5] = APF_CTL_VIS_Obs_2023a_B.x[3];
    APF_CTL_VIS_Obs_2023a_B.x[3] = u[5];
    APF_CTL_VIS_Obs_2023a_B.x[8] = APF_CTL_VIS_Obs_2023a_B.x[6];
    APF_CTL_VIS_Obs_2023a_B.x[6] = u[8];
  }

  APF_CTL_VIS_Obs_2023a_B.absx11 = APF_CTL_VIS_Obs_2023a_B.x[1] /
    APF_CTL_VIS_Obs_2023a_B.x[0];
  APF_CTL_VIS_Obs_2023a_B.x[1] = APF_CTL_VIS_Obs_2023a_B.absx11;
  APF_CTL_VIS_Obs_2023a_B.absx21 = APF_CTL_VIS_Obs_2023a_B.x[2] /
    APF_CTL_VIS_Obs_2023a_B.x[0];
  APF_CTL_VIS_Obs_2023a_B.x[2] = APF_CTL_VIS_Obs_2023a_B.absx21;
  APF_CTL_VIS_Obs_2023a_B.x[4] -= APF_CTL_VIS_Obs_2023a_B.absx11 *
    APF_CTL_VIS_Obs_2023a_B.x[3];
  APF_CTL_VIS_Obs_2023a_B.x[5] -= APF_CTL_VIS_Obs_2023a_B.absx21 *
    APF_CTL_VIS_Obs_2023a_B.x[3];
  APF_CTL_VIS_Obs_2023a_B.x[7] -= APF_CTL_VIS_Obs_2023a_B.absx11 *
    APF_CTL_VIS_Obs_2023a_B.x[6];
  APF_CTL_VIS_Obs_2023a_B.x[8] -= APF_CTL_VIS_Obs_2023a_B.absx21 *
    APF_CTL_VIS_Obs_2023a_B.x[6];
  if (fabs(APF_CTL_VIS_Obs_2023a_B.x[5]) > fabs(APF_CTL_VIS_Obs_2023a_B.x[4])) {
    APF_CTL_VIS_Obs_2023a_B.itmp = APF_CTL_VIS_Obs_2023a_B.p2;
    APF_CTL_VIS_Obs_2023a_B.p2 = APF_CTL_VIS_Obs_2023a_B.p3;
    APF_CTL_VIS_Obs_2023a_B.p3 = APF_CTL_VIS_Obs_2023a_B.itmp;
    APF_CTL_VIS_Obs_2023a_B.x[1] = APF_CTL_VIS_Obs_2023a_B.absx21;
    APF_CTL_VIS_Obs_2023a_B.x[2] = APF_CTL_VIS_Obs_2023a_B.absx11;
    APF_CTL_VIS_Obs_2023a_B.absx11 = APF_CTL_VIS_Obs_2023a_B.x[4];
    APF_CTL_VIS_Obs_2023a_B.x[4] = APF_CTL_VIS_Obs_2023a_B.x[5];
    APF_CTL_VIS_Obs_2023a_B.x[5] = APF_CTL_VIS_Obs_2023a_B.absx11;
    APF_CTL_VIS_Obs_2023a_B.absx11 = APF_CTL_VIS_Obs_2023a_B.x[7];
    APF_CTL_VIS_Obs_2023a_B.x[7] = APF_CTL_VIS_Obs_2023a_B.x[8];
    APF_CTL_VIS_Obs_2023a_B.x[8] = APF_CTL_VIS_Obs_2023a_B.absx11;
  }

  APF_CTL_VIS_Obs_2023a_B.absx11 = APF_CTL_VIS_Obs_2023a_B.x[5] /
    APF_CTL_VIS_Obs_2023a_B.x[4];
  APF_CTL_VIS_Obs_2023a_B.x[8] -= APF_CTL_VIS_Obs_2023a_B.absx11 *
    APF_CTL_VIS_Obs_2023a_B.x[7];
  APF_CTL_VIS_Obs_2023a_B.absx21 = (APF_CTL_VIS_Obs_2023a_B.x[1] *
    APF_CTL_VIS_Obs_2023a_B.absx11 - APF_CTL_VIS_Obs_2023a_B.x[2]) /
    APF_CTL_VIS_Obs_2023a_B.x[8];
  APF_CTL_VIS_Obs_2023a_B.absx31 = -(APF_CTL_VIS_Obs_2023a_B.x[7] *
    APF_CTL_VIS_Obs_2023a_B.absx21 + APF_CTL_VIS_Obs_2023a_B.x[1]) /
    APF_CTL_VIS_Obs_2023a_B.x[4];
  y[APF_CTL_VIS_Obs_2023a_B.p1 - 1] = ((1.0 - APF_CTL_VIS_Obs_2023a_B.x[3] *
    APF_CTL_VIS_Obs_2023a_B.absx31) - APF_CTL_VIS_Obs_2023a_B.x[6] *
    APF_CTL_VIS_Obs_2023a_B.absx21) / APF_CTL_VIS_Obs_2023a_B.x[0];
  y[APF_CTL_VIS_Obs_2023a_B.p1] = APF_CTL_VIS_Obs_2023a_B.absx31;
  y[APF_CTL_VIS_Obs_2023a_B.p1 + 1] = APF_CTL_VIS_Obs_2023a_B.absx21;
  APF_CTL_VIS_Obs_2023a_B.absx21 = -APF_CTL_VIS_Obs_2023a_B.absx11 /
    APF_CTL_VIS_Obs_2023a_B.x[8];
  APF_CTL_VIS_Obs_2023a_B.absx31 = (1.0 - APF_CTL_VIS_Obs_2023a_B.x[7] *
    APF_CTL_VIS_Obs_2023a_B.absx21) / APF_CTL_VIS_Obs_2023a_B.x[4];
  y[APF_CTL_VIS_Obs_2023a_B.p2] = -(APF_CTL_VIS_Obs_2023a_B.x[3] *
    APF_CTL_VIS_Obs_2023a_B.absx31 + APF_CTL_VIS_Obs_2023a_B.x[6] *
    APF_CTL_VIS_Obs_2023a_B.absx21) / APF_CTL_VIS_Obs_2023a_B.x[0];
  y[APF_CTL_VIS_Obs_2023a_B.p2 + 1] = APF_CTL_VIS_Obs_2023a_B.absx31;
  y[APF_CTL_VIS_Obs_2023a_B.p2 + 2] = APF_CTL_VIS_Obs_2023a_B.absx21;
  APF_CTL_VIS_Obs_2023a_B.absx21 = 1.0 / APF_CTL_VIS_Obs_2023a_B.x[8];
  APF_CTL_VIS_Obs_2023a_B.absx31 = -APF_CTL_VIS_Obs_2023a_B.x[7] *
    APF_CTL_VIS_Obs_2023a_B.absx21 / APF_CTL_VIS_Obs_2023a_B.x[4];
  y[APF_CTL_VIS_Obs_2023a_B.p3] = -(APF_CTL_VIS_Obs_2023a_B.x[3] *
    APF_CTL_VIS_Obs_2023a_B.absx31 + APF_CTL_VIS_Obs_2023a_B.x[6] *
    APF_CTL_VIS_Obs_2023a_B.absx21) / APF_CTL_VIS_Obs_2023a_B.x[0];
  y[APF_CTL_VIS_Obs_2023a_B.p3 + 1] = APF_CTL_VIS_Obs_2023a_B.absx31;
  y[APF_CTL_VIS_Obs_2023a_B.p3 + 2] = APF_CTL_VIS_Obs_2023a_B.absx21;
}

// Model step function
void APF_CTL_VIS_Obs_2023a_step(void)
{
  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    // set solver stop time
    rtsiSetSolverStopTime(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                          ((APF_CTL_VIS_Obs_2023a_M->Timing.clockTick0+1)*
      APF_CTL_VIS_Obs_2023a_M->Timing.stepSize0));
  }                                    // end MajorTimeStep

  // Update absolute time of base rate at minor time step
  if (rtmIsMinorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    APF_CTL_VIS_Obs_2023a_M->Timing.t[0] = rtsiGetT
      (&APF_CTL_VIS_Obs_2023a_M->solverInfo);
  }

  {
    real_T *lastU;
    char_T *sErr;
    static const int8_T b[8] = { -1, -1, 0, 0, 1, 1, 0, 0 };

    static const int8_T c[8] = { 0, 0, 1, 1, 0, 0, -1, -1 };

    static const int8_T d_a[9] = { 1, 0, 0, 0, 1, 0, 0, 0, 1 };

    static const int8_T l[18] = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0,
      0, 1 };

    static const int8_T c_b[36] = { 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1,
      0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1 };

    boolean_T exitg1;
    boolean_T guard1;
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // S-Function (sdspFromNetwork): '<S2>/UDP Receive1'
      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
      APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 20;
      LibOutputs_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U],
                         &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[0U],
                         &APF_CTL_VIS_Obs_2023a_B.ntIdx1);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of S-Function (sdspFromNetwork): '<S2>/UDP Receive1'

      // S-Function (byte2any): '<S2>/Byte Unpack'

      // Unpack: <S2>/Byte Unpack
      (void) memcpy(&APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o1,
                    &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[0],
                    4);
      (void) memcpy(&APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o2,
                    &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[4],
                    4);
      (void) memcpy(&APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o3,
                    &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[8],
                    4);
      (void) memcpy(&APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o4,
                    &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[12],
                    4);
      (void) memcpy(&APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o5,
                    &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1_k[16],
                    4);

      // DataTypeConversion: '<S2>/Data Type Conversion' incorporates:
      //   DataStoreWrite: '<S2>/Data Store Write'

      APF_CTL_VIS_Obs_2023a_DW.TX2_data1 = APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o1;

      // DataStoreWrite: '<S2>/Data Store Write'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // DataTypeConversion: '<S2>/Data Type Conversion1' incorporates:
      //   DataStoreWrite: '<S2>/Data Store Write1'

      APF_CTL_VIS_Obs_2023a_DW.TX2_data2 = APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o2;

      // DataStoreWrite: '<S2>/Data Store Write1'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // DataTypeConversion: '<S2>/Data Type Conversion2' incorporates:
      //   DataStoreWrite: '<S2>/Data Store Write2'

      APF_CTL_VIS_Obs_2023a_DW.TX2_data3 = APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o3;

      // DataStoreWrite: '<S2>/Data Store Write2'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // DataTypeConversion: '<S2>/Data Type Conversion3' incorporates:
      //   DataStoreWrite: '<S2>/Data Store Write3'

      APF_CTL_VIS_Obs_2023a_DW.TX2_data4 = APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o4;

      // DataStoreWrite: '<S2>/Data Store Write3'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // DataTypeConversion: '<S2>/Data Type Conversion4' incorporates:
      //   DataStoreWrite: '<S2>/Data Store Write4'

      APF_CTL_VIS_Obs_2023a_DW.TX2_data5 = APF_CTL_VIS_Obs_2023a_B.ByteUnpack_o5;

      // DataStoreWrite: '<S2>/Data Store Write4'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // DataStoreWrite: '<S18>/Data Store Write' incorporates:
      //   Constant: '<S18>/Constant'

      APF_CTL_VIS_Obs_2023a_DW.isSim = APF_CTL_VIS_Obs_2023a_P.simMode;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S18>/Data Store Write'
    }

    // If: '<Root>/Separate Phases' incorporates:
    //   Constant: '<Root>/Constant'
    //   Constant: '<Root>/Constant1'
    //   Constant: '<Root>/Constant2'
    //   Constant: '<Root>/Constant3'
    //   Constant: '<Root>/Constant4'
    //   Constant: '<Root>/Constant6'
    //   DataStoreRead: '<Root>/Universal_Time25'

    APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
          APF_CTL_VIS_Obs_2023a_P.Phase0_End) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
      } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                  APF_CTL_VIS_Obs_2023a_P.Phase1_End) &&
                 (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                  APF_CTL_VIS_Obs_2023a_P.Phase0_End)) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 1;
      } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                  APF_CTL_VIS_Obs_2023a_P.Phase2_End) &&
                 (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                  APF_CTL_VIS_Obs_2023a_P.Phase1_End)) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 2;
      } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                  APF_CTL_VIS_Obs_2023a_P.Phase3_End) &&
                 (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                  APF_CTL_VIS_Obs_2023a_P.Phase2_End)) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 3;
      } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                  APF_CTL_VIS_Obs_2023a_P.Phase4_End) &&
                 (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                  APF_CTL_VIS_Obs_2023a_P.Phase3_End)) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 4;
      } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                  APF_CTL_VIS_Obs_2023a_P.Phase5_End) &&
                 (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                  APF_CTL_VIS_Obs_2023a_P.Phase4_End)) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 5;
      } else if (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                 APF_CTL_VIS_Obs_2023a_P.Phase5_End) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 6;
      }

      APF_CTL_VIS_Obs_2023a_DW.SeparatePhases_ActiveSubsystem =
        APF_CTL_VIS_Obs_2023a_B.rtAction;
    } else {
      APF_CTL_VIS_Obs_2023a_B.rtAction =
        APF_CTL_VIS_Obs_2023a_DW.SeparatePhases_ActiveSubsystem;
    }

    switch (APF_CTL_VIS_Obs_2023a_B.rtAction) {
     case 0:
      // Outputs for IfAction SubSystem: '<Root>/Phase #0: Synchronization' incorporates:
      //   ActionPort: '<S6>/Action Port'

      APF_CTL_V_Phase0Synchronization(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.Float_State,
        &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
        &APF_CTL_VIS_Obs_2023a_DW.WhoAmI, &APF_CTL_VIS_Obs_2023a_DW.isSim,
        &APF_CTL_VIS_Obs_2023a_DW.Phase0Synchronization,
        &APF_CTL_VIS_Obs_2023a_P.Phase0Synchronization);

      // End of Outputs for SubSystem: '<Root>/Phase #0: Synchronization'
      break;

     case 1:
      // Outputs for IfAction SubSystem: '<Root>/Phase #1: Start Floating ' incorporates:
      //   ActionPort: '<S7>/Action Port'

      APF_CTL_V_Phase0Synchronization(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.Float_State,
        &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
        &APF_CTL_VIS_Obs_2023a_DW.WhoAmI, &APF_CTL_VIS_Obs_2023a_DW.isSim,
        &APF_CTL_VIS_Obs_2023a_DW.Phase1StartFloating,
        &APF_CTL_VIS_Obs_2023a_P.Phase1StartFloating);

      // End of Outputs for SubSystem: '<Root>/Phase #1: Start Floating '
      break;

     case 2:
      // Outputs for IfAction SubSystem: '<Root>/Phase #2: Initial Position' incorporates:
      //   ActionPort: '<S8>/Action Port'

      // If: '<S8>/This IF block determines whether or not to run the BLUE sim//exp' incorporates:
      //   DataStoreRead: '<S8>/Data Store Read'
      //   DataStoreRead: '<S8>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 3.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_l2 =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_l2;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S8>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S33>/Action Port'

        // Sum: '<S33>/Subtract' incorporates:
        //   Constant: '<S33>/Desired Px (BLACK)'
        //   DataStoreRead: '<S33>/BLACK_Px'

        APF_CTL_VIS_Obs_2023a_B.Subtract_d =
          APF_CTL_VIS_Obs_2023a_P.init_states_BLACK[0] -
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Px;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S42>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fp) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i =
              APF_CTL_VIS_Obs_2023a_B.Subtract_d;
          }

          // Delay: '<S42>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_mm =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i;
        }

        // Sum: '<S42>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract_d -
          APF_CTL_VIS_Obs_2023a_B.Delay1_mm;

        // If: '<S42>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ba =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ba;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S42>/Hold this value' incorporates:
          //   ActionPort: '<S43>/Action Port'

          // SignalConversion generated from: '<S43>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdy =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S42>/Hold this value'
        }

        // End of If: '<S42>/if we went through a "step"'

        // Sum: '<S37>/Sum3' incorporates:
        //   DataStoreWrite: '<S33>/BLACK_Fx'
        //   Gain: '<S37>/kd_xb'
        //   Gain: '<S37>/kp_xb'
        //   Gain: '<S42>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate *
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdy *
          APF_CTL_VIS_Obs_2023a_P.Kd_xb + APF_CTL_VIS_Obs_2023a_P.Kp_xb *
          APF_CTL_VIS_Obs_2023a_B.Subtract_d;

        // Sum: '<S33>/Subtract1' incorporates:
        //   Constant: '<S33>/Desired Py (BLACK)'
        //   DataStoreRead: '<S33>/BLACK_Py '

        APF_CTL_VIS_Obs_2023a_B.Subtract1_g =
          APF_CTL_VIS_Obs_2023a_P.init_states_BLACK[1] -
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Py;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S44>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_ig) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c =
              APF_CTL_VIS_Obs_2023a_B.Subtract1_g;
          }

          // Delay: '<S44>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_hm =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c;
        }

        // Sum: '<S44>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract1_g
          - APF_CTL_VIS_Obs_2023a_B.Delay1_hm;

        // If: '<S44>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_il =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_il;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S44>/Hold this value' incorporates:
          //   ActionPort: '<S45>/Action Port'

          // SignalConversion generated from: '<S45>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cd =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S44>/Hold this value'
        }

        // End of If: '<S44>/if we went through a "step"'

        // Sum: '<S38>/Sum3' incorporates:
        //   DataStoreWrite: '<S33>/BLACK_Fy'
        //   Gain: '<S38>/kd_yb'
        //   Gain: '<S38>/kp_yb'
        //   Gain: '<S44>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate *
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cd *
          APF_CTL_VIS_Obs_2023a_P.Kd_yb + APF_CTL_VIS_Obs_2023a_P.Kp_yb *
          APF_CTL_VIS_Obs_2023a_B.Subtract1_g;

        // MATLAB Function: '<S39>/MATLAB Function2' incorporates:
        //   Constant: '<S33>/Desired Attitude (BLACK)'

        APF_CTL_VIS_Obs_MATLABFunction2
          (APF_CTL_VIS_Obs_2023a_P.init_states_BLACK[2],
           APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
           APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f);

        // MATLAB Function: '<S39>/MATLAB Function3' incorporates:
        //   DataStoreRead: '<S33>/BLACK_Rz'

        APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

        // Sum: '<S39>/Subtract2'
        APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] -=
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
        APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] -=
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];

        // MATLAB Function: '<S39>/MATLAB Function4'
        APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f, &APF_CTL_VIS_Obs_2023a_B.e_out_m);
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S40>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_p) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c1 =
              APF_CTL_VIS_Obs_2023a_B.e_out_m;
          }

          // Delay: '<S40>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_aj =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c1;
        }

        // Sum: '<S40>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_m -
          APF_CTL_VIS_Obs_2023a_B.Delay1_aj;

        // If: '<S40>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_m =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_m;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S40>/Hold this value' incorporates:
          //   ActionPort: '<S41>/Action Port'

          // SignalConversion generated from: '<S41>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyi =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S40>/Hold this value'
        }

        // End of If: '<S40>/if we went through a "step"'

        // Sum: '<S36>/Sum3' incorporates:
        //   DataStoreWrite: '<S33>/BLACK_Tz'
        //   Gain: '<S36>/kd_tb'
        //   Gain: '<S36>/kp_tb'
        //   Gain: '<S40>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate *
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyi *
          APF_CTL_VIS_Obs_2023a_P.Kd_tb + APF_CTL_VIS_Obs_2023a_P.Kp_tb *
          APF_CTL_VIS_Obs_2023a_B.e_out_m;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // DataStoreWrite: '<S33>/Data Store Write3' incorporates:
          //   Constant: '<S33>/Puck State'

          APF_CTL_VIS_Obs_2023a_DW.Float_State =
            APF_CTL_VIS_Obs_2023a_P.PuckState_Value_o;
        }

        // End of Outputs for SubSystem: '<S8>/Change BLACK Behavior'
      }

      // End of If: '<S8>/This IF block determines whether or not to run the BLUE sim//exp' 

      // If: '<S8>/This IF block determines whether or not to run the BLACK sim//exp' incorporates:
      //   DataStoreRead: '<S8>/Data Store Read'
      //   DataStoreRead: '<S8>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 2.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_h2 =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_h2;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S8>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S34>/Action Port'

        // Sum: '<S34>/Subtract' incorporates:
        //   Constant: '<S34>/Desired Px (BLUE)'
        //   DataStoreRead: '<S34>/BLUE_Px'

        APF_CTL_VIS_Obs_2023a_B.Subtract_n =
          APF_CTL_VIS_Obs_2023a_P.init_states_BLUE[0] -
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Px;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S55>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_o) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mw =
              APF_CTL_VIS_Obs_2023a_B.Subtract_n;
          }

          // Delay: '<S55>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_p4 =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mw;
        }

        // Sum: '<S55>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract_n -
          APF_CTL_VIS_Obs_2023a_B.Delay1_p4;

        // If: '<S55>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_e =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_e;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S55>/Hold this value' incorporates:
          //   ActionPort: '<S56>/Action Port'

          // SignalConversion generated from: '<S56>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_e = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S55>/Hold this value'
        }

        // End of If: '<S55>/if we went through a "step"'

        // Sum: '<S50>/Sum3' incorporates:
        //   DataStoreWrite: '<S34>/BLUE_Fx'
        //   Gain: '<S50>/kd_xb'
        //   Gain: '<S50>/kp_xb'
        //   Gain: '<S55>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_e *
          APF_CTL_VIS_Obs_2023a_P.Kd_xblue + APF_CTL_VIS_Obs_2023a_P.Kp_xblue *
          APF_CTL_VIS_Obs_2023a_B.Subtract_n;

        // Sum: '<S34>/Subtract1' incorporates:
        //   Constant: '<S34>/Desired Py (BLUE)'
        //   DataStoreRead: '<S34>/BLUE_Py '

        APF_CTL_VIS_Obs_2023a_B.Subtract1_ld =
          APF_CTL_VIS_Obs_2023a_P.init_states_BLUE[1] -
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Py;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S57>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_n) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_et =
              APF_CTL_VIS_Obs_2023a_B.Subtract1_ld;
          }

          // Delay: '<S57>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_j =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_et;
        }

        // Sum: '<S57>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract1_ld
          - APF_CTL_VIS_Obs_2023a_B.Delay1_j;

        // If: '<S57>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_f =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_f;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S57>/Hold this value' incorporates:
          //   ActionPort: '<S58>/Action Port'

          // SignalConversion generated from: '<S58>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyix =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S57>/Hold this value'
        }

        // End of If: '<S57>/if we went through a "step"'

        // Sum: '<S51>/Sum3' incorporates:
        //   DataStoreWrite: '<S34>/BLUE_Fy'
        //   Gain: '<S51>/kd_yb'
        //   Gain: '<S51>/kp_yb'
        //   Gain: '<S57>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate *
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyix *
          APF_CTL_VIS_Obs_2023a_P.Kd_yblue + APF_CTL_VIS_Obs_2023a_P.Kp_yblue *
          APF_CTL_VIS_Obs_2023a_B.Subtract1_ld;

        // MATLAB Function: '<S52>/MATLAB Function2' incorporates:
        //   Constant: '<S34>/Desired Attitude (BLUE)'

        APF_CTL_VIS_Obs_MATLABFunction2
          (APF_CTL_VIS_Obs_2023a_P.init_states_BLUE[2],
           APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
           APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f);

        // MATLAB Function: '<S52>/MATLAB Function3' incorporates:
        //   DataStoreRead: '<S34>/BLUE_Rz'

        APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

        // Sum: '<S52>/Subtract2'
        APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] -=
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
        APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] -=
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];

        // MATLAB Function: '<S52>/MATLAB Function4'
        APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f, &APF_CTL_VIS_Obs_2023a_B.e_out_md);
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S53>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_bb) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a =
              APF_CTL_VIS_Obs_2023a_B.e_out_md;
          }

          // Delay: '<S53>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_ej =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a;
        }

        // Sum: '<S53>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_md -
          APF_CTL_VIS_Obs_2023a_B.Delay1_ej;

        // If: '<S53>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jh =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jh;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S53>/Hold this value' incorporates:
          //   ActionPort: '<S54>/Action Port'

          // SignalConversion generated from: '<S54>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_o = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S53>/Hold this value'
        }

        // End of If: '<S53>/if we went through a "step"'

        // Sum: '<S49>/Sum3' incorporates:
        //   DataStoreWrite: '<S34>/BLUE_Tz'
        //   Gain: '<S49>/kd_tb'
        //   Gain: '<S49>/kp_tb'
        //   Gain: '<S53>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_o *
          APF_CTL_VIS_Obs_2023a_P.Kd_tblue + APF_CTL_VIS_Obs_2023a_P.Kp_tblue *
          APF_CTL_VIS_Obs_2023a_B.e_out_md;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // DataStoreWrite: '<S34>/Data Store Write3' incorporates:
          //   Constant: '<S34>/Puck State'

          APF_CTL_VIS_Obs_2023a_DW.Float_State =
            APF_CTL_VIS_Obs_2023a_P.PuckState_Value;
        }

        // End of Outputs for SubSystem: '<S8>/Change BLUE Behavior'
      }

      // End of If: '<S8>/This IF block determines whether or not to run the BLACK sim//exp' 

      // If: '<S8>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S8>/Data Store Read'
      //   DataStoreRead: '<S8>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_gv =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_gv;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S8>/Change RED Behavior' incorporates:
        //   ActionPort: '<S35>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // MATLAB Function: '<S65>/MATLAB Function2' incorporates:
          //   Constant: '<S35>/Constant'

          APF_CTL_VIS_Obs_MATLABFunction2
            (APF_CTL_VIS_Obs_2023a_P.init_states_RED[2],
             APF_CTL_VIS_Obs_2023a_B.Oy, APF_CTL_VIS_Obs_2023a_B.Ox);
        }

        // MATLAB Function: '<S65>/MATLAB Function3' incorporates:
        //   DataStoreRead: '<S35>/RED_Rz'

        APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m);

        // Sum: '<S65>/Subtract2'
        APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[0] = APF_CTL_VIS_Obs_2023a_B.Ox[0] -
          APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[0];
        APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[1] = APF_CTL_VIS_Obs_2023a_B.Ox[1] -
          APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[1];

        // MATLAB Function: '<S65>/MATLAB Function4'
        APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.Oy,
          APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m, &APF_CTL_VIS_Obs_2023a_B.e_out_k);
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S67>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_g) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gi =
              APF_CTL_VIS_Obs_2023a_B.e_out_k;
          }

          // Delay: '<S67>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_lo =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gi;
        }

        // Sum: '<S67>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_k -
          APF_CTL_VIS_Obs_2023a_B.Delay1_lo;

        // If: '<S67>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_n =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_n;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S67>/Hold this value' incorporates:
          //   ActionPort: '<S68>/Action Port'

          // SignalConversion generated from: '<S68>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0c =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S67>/Hold this value'
        }

        // End of If: '<S67>/if we went through a "step"'

        // Sum: '<S62>/Sum3' incorporates:
        //   DataStoreWrite: '<S35>/RED_Tz'
        //   Gain: '<S62>/kd_tr'
        //   Gain: '<S62>/kp_tr'
        //   Gain: '<S67>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.RED_Tz = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
          * APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0c *
          APF_CTL_VIS_Obs_2023a_P.Kd_tr + APF_CTL_VIS_Obs_2023a_P.Kp_tr *
          APF_CTL_VIS_Obs_2023a_B.e_out_k;

        // Sum: '<S35>/Subtract' incorporates:
        //   Constant: '<S35>/Constant1'
        //   DataStoreRead: '<S35>/RED_Px'

        APF_CTL_VIS_Obs_2023a_B.Subtract_j =
          APF_CTL_VIS_Obs_2023a_P.init_states_RED[0] -
          APF_CTL_VIS_Obs_2023a_DW.RED_Px;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S69>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_a) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m =
              APF_CTL_VIS_Obs_2023a_B.Subtract_j;
          }

          // Delay: '<S69>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_nm =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m;
        }

        // Sum: '<S69>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract_j -
          APF_CTL_VIS_Obs_2023a_B.Delay1_nm;

        // If: '<S69>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_c =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_c;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S69>/Hold this value' incorporates:
          //   ActionPort: '<S70>/Action Port'

          // SignalConversion generated from: '<S70>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0 =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S69>/Hold this value'
        }

        // End of If: '<S69>/if we went through a "step"'

        // Sum: '<S63>/Sum3' incorporates:
        //   DataStoreWrite: '<S35>/RED_Fx'
        //   Gain: '<S63>/kd_xr'
        //   Gain: '<S63>/kp_xr'
        //   Gain: '<S69>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.RED_Fx = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
          * APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0 *
          APF_CTL_VIS_Obs_2023a_P.Kd_xr + APF_CTL_VIS_Obs_2023a_P.Kp_xr *
          APF_CTL_VIS_Obs_2023a_B.Subtract_j;

        // Sum: '<S35>/Subtract1' incorporates:
        //   Constant: '<S35>/Constant3'
        //   DataStoreRead: '<S35>/RED_Py '

        APF_CTL_VIS_Obs_2023a_B.Subtract1_n =
          APF_CTL_VIS_Obs_2023a_P.init_states_RED[1] -
          APF_CTL_VIS_Obs_2023a_DW.RED_Py;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Delay: '<S71>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_b) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ej =
              APF_CTL_VIS_Obs_2023a_B.Subtract1_n;
          }

          // Delay: '<S71>/Delay1'
          APF_CTL_VIS_Obs_2023a_B.Delay1_ag =
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ej;
        }

        // Sum: '<S71>/Sum6'
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract1_n
          - APF_CTL_VIS_Obs_2023a_B.Delay1_ag;

        // If: '<S71>/if we went through a "step"'
        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          }

          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_j =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_j;
        }

        if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
          // Outputs for IfAction SubSystem: '<S71>/Hold this value' incorporates:
          //   ActionPort: '<S72>/Action Port'

          // SignalConversion generated from: '<S72>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S71>/Hold this value'
        }

        // End of If: '<S71>/if we went through a "step"'

        // Sum: '<S64>/Sum3' incorporates:
        //   DataStoreWrite: '<S35>/RED_Fy'
        //   Gain: '<S64>/kd_yr'
        //   Gain: '<S64>/kp_yr'
        //   Gain: '<S71>/divide by delta T'

        APF_CTL_VIS_Obs_2023a_DW.RED_Fy = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
          * APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi *
          APF_CTL_VIS_Obs_2023a_P.Kd_yr + APF_CTL_VIS_Obs_2023a_P.Kp_yr *
          APF_CTL_VIS_Obs_2023a_B.Subtract1_n;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // DataStoreWrite: '<S35>/Data Store Write3' incorporates:
          //   Constant: '<S35>/Puck State'

          APF_CTL_VIS_Obs_2023a_DW.Float_State =
            APF_CTL_VIS_Obs_2023a_P.PuckState_Value_h;

          // If: '<S35>/If' incorporates:
          //   Constant: '<S35>/Constant4'

          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo) &&
              ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
               (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
               (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
               (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0))) {
            // Outputs for IfAction SubSystem: '<S35>/RED+ARM' incorporates:
            //   ActionPort: '<S66>/Action Port'

            APF_CTL_VIS_Obs_2023a_REDARM
              (&APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
               &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
               &APF_CTL_VIS_Obs_2023a_DW.isSim,
               &APF_CTL_VIS_Obs_2023a_B.REDARM_e,
               &APF_CTL_VIS_Obs_2023a_DW.REDARM_e,
               &APF_CTL_VIS_Obs_2023a_P.REDARM_e);

            // End of Outputs for SubSystem: '<S35>/RED+ARM'
          }

          // End of If: '<S35>/If'
        }

        // End of Outputs for SubSystem: '<S8>/Change RED Behavior'
      }

      // End of If: '<S8>/This IF block determines whether or not to run the RED sim//exp ' 
      // End of Outputs for SubSystem: '<Root>/Phase #2: Initial Position'
      break;

     case 3:
      // Outputs for IfAction SubSystem: '<Root>/Phase #3: Experiment' incorporates:
      //   ActionPort: '<S9>/Action Port'

      // If: '<S9>/This IF block determines whether or not to run the BLACK sim//exp' incorporates:
      //   DataStoreRead: '<S9>/Data Store Read'
      //   DataStoreRead: '<S9>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 2.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_n =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_n;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S9>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S87>/Action Port'

        // If: '<S87>/Experiment Sub-Phases' incorporates:
        //   Constant: '<S87>/Constant1'
        //   Constant: '<S87>/Constant2'
        //   Constant: '<S87>/Constant3'
        //   Constant: '<S87>/Constant4'
        //   DataStoreRead: '<S87>/Universal_Time'

        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
              APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 1;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 2;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase4_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 3;
          }

          APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_l =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_l;
        }

        switch (APF_CTL_VIS_Obs_2023a_B.rtAction) {
         case 0:
          // Outputs for IfAction SubSystem: '<S87>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S90>/Action Port'

          APF_CTL_VIS_Obs_2023a_SubPhase1(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Px,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase1);

          // End of Outputs for SubSystem: '<S87>/Sub-Phase #1'
          break;

         case 1:
          // Outputs for IfAction SubSystem: '<S87>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S91>/Action Port'

          APF_CTL_VIS_Obs_2023a_SubPhase1(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Px,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase2);

          // End of Outputs for SubSystem: '<S87>/Sub-Phase #2 '
          break;

         case 2:
          // Outputs for IfAction SubSystem: '<S87>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S92>/Action Port'

          APF_CTL_VIS_Obs_2023a_SubPhase1(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Px,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
            &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase3,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase3,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase3);

          // End of Outputs for SubSystem: '<S87>/Sub-Phase #3 '
          break;

         case 3:
          // Outputs for IfAction SubSystem: '<S87>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S93>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S149>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos_c =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_k;
          }

          // Step: '<S149>/End Time' incorporates:
          //   Step: '<S150>/End Time'
          //   Step: '<S151>/End Time'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_black) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndTime_Y0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndTime_YFinal;
          }

          // Switch: '<S149>/Switch' incorporates:
          //   Constant: '<S149>/End Pos'
          //   Step: '<S149>/End Time'

          if (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.StartPos_c;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.BLACK_end[0];
          }

          // Sum: '<S93>/Subtract' incorporates:
          //   DataStoreRead: '<S93>/BLACK_Px'
          //   Switch: '<S149>/Switch'

          APF_CTL_VIS_Obs_2023a_B.Subtract_k =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 -
            APF_CTL_VIS_Obs_2023a_DW.BLACK_Px;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S154>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_c) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pn =
                APF_CTL_VIS_Obs_2023a_B.Subtract_k;
            }

            // Delay: '<S154>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_p =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pn;
          }

          // Sum: '<S154>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract_k
            - APF_CTL_VIS_Obs_2023a_B.Delay1_p;

          // If: '<S154>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_o =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_o;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S154>/Hold this value' incorporates:
            //   ActionPort: '<S155>/Action Port'

            // SignalConversion generated from: '<S155>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20asdt =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S154>/Hold this value'
          }

          // End of If: '<S154>/if we went through a "step"'

          // Sum: '<S146>/Sum3' incorporates:
          //   DataStoreWrite: '<S93>/BLACK_Fx'
          //   Gain: '<S146>/kd_xb'
          //   Gain: '<S146>/kp_xb'
          //   Gain: '<S154>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate *
            APF_CTL_VIS_Obs_2023a_B.In1_g20asdt * APF_CTL_VIS_Obs_2023a_P.Kd_xb
            + APF_CTL_VIS_Obs_2023a_P.Kp_xb * APF_CTL_VIS_Obs_2023a_B.Subtract_k;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S150>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos_m =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_c;
          }

          // Step: '<S150>/End Time'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_black) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndTime_Y0_i;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndTime_YFinal_i;
          }

          // Switch: '<S150>/Switch' incorporates:
          //   Constant: '<S150>/End Pos'
          //   Step: '<S150>/End Time'

          if (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_j) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.StartPos_m;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.BLACK_end[1];
          }

          // Sum: '<S93>/Subtract1' incorporates:
          //   DataStoreRead: '<S93>/BLACK_Py '
          //   Switch: '<S150>/Switch'

          APF_CTL_VIS_Obs_2023a_B.Subtract1_l =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 -
            APF_CTL_VIS_Obs_2023a_DW.BLACK_Py;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S156>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_j) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_na =
                APF_CTL_VIS_Obs_2023a_B.Subtract1_l;
            }

            // Delay: '<S156>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_c =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_na;
          }

          // Sum: '<S156>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
            APF_CTL_VIS_Obs_2023a_B.Subtract1_l -
            APF_CTL_VIS_Obs_2023a_B.Delay1_c;

          // If: '<S156>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_op =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_op;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S156>/Hold this value' incorporates:
            //   ActionPort: '<S157>/Action Port'

            // SignalConversion generated from: '<S157>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20asd =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S156>/Hold this value'
          }

          // End of If: '<S156>/if we went through a "step"'

          // Sum: '<S147>/Sum3' incorporates:
          //   DataStoreWrite: '<S93>/BLACK_Fy'
          //   Gain: '<S147>/kd_yb'
          //   Gain: '<S147>/kp_yb'
          //   Gain: '<S156>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate *
            APF_CTL_VIS_Obs_2023a_B.In1_g20asd * APF_CTL_VIS_Obs_2023a_P.Kd_yb +
            APF_CTL_VIS_Obs_2023a_P.Kp_yb * APF_CTL_VIS_Obs_2023a_B.Subtract1_l;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S151>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos_j =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_e;
          }

          // Step: '<S151>/End Time'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_black) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.EndTime_Y0_p;
          } else {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.EndTime_YFinal_m;
          }

          // Switch: '<S151>/Switch' incorporates:
          //   Constant: '<S151>/End Pos'
          //   Step: '<S151>/End Time'

          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_p) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.StartPos_j;
          } else {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_P.BLACK_end
              [2];
          }

          // MATLAB Function: '<S148>/MATLAB Function2' incorporates:
          //   Switch: '<S151>/Switch'

          APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_B.Sum6_gv,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

          // MATLAB Function: '<S148>/MATLAB Function3' incorporates:
          //   DataStoreRead: '<S93>/BLACK_Rz'

          APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m);

          // Sum: '<S148>/Subtract2'
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[0];
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[1];

          // MATLAB Function: '<S148>/MATLAB Function4'
          APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c,
            &APF_CTL_VIS_Obs_2023a_B.e_out_b);
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S152>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fo) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p2 =
                APF_CTL_VIS_Obs_2023a_B.e_out_b;
            }

            // Delay: '<S152>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_h =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p2;
          }

          // Sum: '<S152>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_b -
            APF_CTL_VIS_Obs_2023a_B.Delay1_h;

          // If: '<S152>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_b =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_b;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S152>/Hold this value' incorporates:
            //   ActionPort: '<S153>/Action Port'

            // SignalConversion generated from: '<S153>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20asdtg =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S152>/Hold this value'
          }

          // End of If: '<S152>/if we went through a "step"'

          // Sum: '<S145>/Sum3' incorporates:
          //   DataStoreWrite: '<S93>/BLACK_Tz'
          //   Gain: '<S145>/kd_tb'
          //   Gain: '<S145>/kp_tb'
          //   Gain: '<S152>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate *
            APF_CTL_VIS_Obs_2023a_B.In1_g20asdtg * APF_CTL_VIS_Obs_2023a_P.Kd_tb
            + APF_CTL_VIS_Obs_2023a_P.Kp_tb * APF_CTL_VIS_Obs_2023a_B.e_out_b;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DataStoreWrite: '<S93>/Data Store Write3' incorporates:
            //   Constant: '<S93>/Puck State'

            APF_CTL_VIS_Obs_2023a_DW.Float_State =
              APF_CTL_VIS_Obs_2023a_P.PuckState_Value_c;
          }

          // End of Outputs for SubSystem: '<S87>/Sub-Phase #4'
          break;
        }

        // End of If: '<S87>/Experiment Sub-Phases'
        // End of Outputs for SubSystem: '<S9>/Change BLACK Behavior'
      }

      // End of If: '<S9>/This IF block determines whether or not to run the BLACK sim//exp' 

      // If: '<S9>/This IF block determines whether or not to run the BLUE sim//exp' incorporates:
      //   DataStoreRead: '<S9>/Data Store Read'
      //   DataStoreRead: '<S9>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 3.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_al =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_al;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S9>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S88>/Action Port'

        // If: '<S88>/Experiment Sub-Phases' incorporates:
        //   Constant: '<S88>/Constant1'
        //   Constant: '<S88>/Constant2'
        //   Constant: '<S88>/Constant3'
        //   Constant: '<S88>/Constant4'
        //   DataStoreRead: '<S88>/Universal_Time'

        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
              APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 1;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 2;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase4_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 3;
          }

          APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_c =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_c;
        }

        switch (APF_CTL_VIS_Obs_2023a_B.rtAction) {
         case 0:
          // Outputs for IfAction SubSystem: '<S88>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S161>/Action Port'

          APF_CTL_VIS_Obs_202_SubPhase1_g(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Px, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1_g,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_g,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase1_g);

          // End of Outputs for SubSystem: '<S88>/Sub-Phase #1'
          break;

         case 1:
          // Outputs for IfAction SubSystem: '<S88>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S162>/Action Port'

          APF_CTL_VIS_Obs_202_SubPhase1_g(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Px, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2_c,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_c,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase2_c);

          // End of Outputs for SubSystem: '<S88>/Sub-Phase #2 '
          break;

         case 2:
          // Outputs for IfAction SubSystem: '<S88>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S163>/Action Port'

          APF_CTL_VIS_Obs_202_SubPhase1_g(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Px, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Py,
            &APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase3_e,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase3_e,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase3_e);

          // End of Outputs for SubSystem: '<S88>/Sub-Phase #3 '
          break;

         case 3:
          // Outputs for IfAction SubSystem: '<S88>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S164>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S232>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE;
          }

          // Step: '<S232>/End Pos' incorporates:
          //   Step: '<S233>/End Pos'
          //   Step: '<S234>/End Pos'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_blue) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndPos_Y0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndPos_YFinal;
          }

          // Switch: '<S232>/Switch' incorporates:
          //   Constant: '<S232>/End Time'
          //   Step: '<S232>/End Pos'

          if (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_n) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.StartPos;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.BLUE_end[0];
          }

          // Sum: '<S164>/Subtract' incorporates:
          //   DataStoreRead: '<S164>/BLUE_Px'
          //   Switch: '<S232>/Switch'

          APF_CTL_VIS_Obs_2023a_B.Subtract_p =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 -
            APF_CTL_VIS_Obs_2023a_DW.BLUE_Px;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S237>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_d) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_b =
                APF_CTL_VIS_Obs_2023a_B.Subtract_p;
            }

            // Delay: '<S237>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_n =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_b;
          }

          // Sum: '<S237>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract_p
            - APF_CTL_VIS_Obs_2023a_B.Delay1_n;

          // If: '<S237>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_p =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_p;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S237>/Hold this value' incorporates:
            //   ActionPort: '<S238>/Action Port'

            // SignalConversion generated from: '<S238>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20a = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S237>/Hold this value'
          }

          // End of If: '<S237>/if we went through a "step"'

          // Sum: '<S229>/Sum3' incorporates:
          //   DataStoreWrite: '<S164>/BLUE_Fx'
          //   Gain: '<S229>/kd_xb'
          //   Gain: '<S229>/kp_xb'
          //   Gain: '<S237>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g20a *
            APF_CTL_VIS_Obs_2023a_P.Kd_xblue + APF_CTL_VIS_Obs_2023a_P.Kp_xblue *
            APF_CTL_VIS_Obs_2023a_B.Subtract_p;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S233>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos_l =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_b;
          }

          // Step: '<S233>/End Pos'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_blue) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndPos_Y0_i;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.EndPos_YFinal_f;
          }

          // Switch: '<S233>/Switch' incorporates:
          //   Constant: '<S233>/End Time'
          //   Step: '<S233>/End Pos'

          if (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_n0) {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.StartPos_l;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.BLUE_end[1];
          }

          // Sum: '<S164>/Subtract1' incorporates:
          //   DataStoreRead: '<S164>/BLUE_Py '
          //   Switch: '<S233>/Switch'

          APF_CTL_VIS_Obs_2023a_B.Subtract1 =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 -
            APF_CTL_VIS_Obs_2023a_DW.BLUE_Py;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S239>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_d4) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_e =
                APF_CTL_VIS_Obs_2023a_B.Subtract1;
            }

            // Delay: '<S239>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_d =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_e;
          }

          // Sum: '<S239>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract1
            - APF_CTL_VIS_Obs_2023a_B.Delay1_d;

          // If: '<S239>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_i =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_i;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S239>/Hold this value' incorporates:
            //   ActionPort: '<S240>/Action Port'

            // SignalConversion generated from: '<S240>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S239>/Hold this value'
          }

          // End of If: '<S239>/if we went through a "step"'

          // Sum: '<S230>/Sum3' incorporates:
          //   DataStoreWrite: '<S164>/BLUE_Fy'
          //   Gain: '<S230>/kd_yb'
          //   Gain: '<S230>/kp_yb'
          //   Gain: '<S239>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g20 *
            APF_CTL_VIS_Obs_2023a_P.Kd_yblue + APF_CTL_VIS_Obs_2023a_P.Kp_yblue *
            APF_CTL_VIS_Obs_2023a_B.Subtract1;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DiscreteIntegrator: '<S234>/Start Pos'
            APF_CTL_VIS_Obs_2023a_B.StartPos_e =
              APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_p;
          }

          // Step: '<S234>/End Pos'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv <
              APF_CTL_VIS_Obs_2023a_P.end_time_blue) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.EndPos_Y0_p;
          } else {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.EndPos_YFinal_n;
          }

          // Switch: '<S234>/Switch' incorporates:
          //   Constant: '<S234>/End Time'
          //   Step: '<S234>/End Pos'

          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv >
              APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_p5) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.StartPos_e;
          } else {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_P.BLUE_end[2];
          }

          // MATLAB Function: '<S231>/MATLAB Function2' incorporates:
          //   Switch: '<S234>/Switch'

          APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_B.Sum6_gv,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

          // MATLAB Function: '<S231>/MATLAB Function3' incorporates:
          //   DataStoreRead: '<S164>/Data Store Read'

          APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz,
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m);

          // Sum: '<S231>/Subtract2'
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[0];
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[1];

          // MATLAB Function: '<S231>/MATLAB Function4'
          APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c,
            &APF_CTL_VIS_Obs_2023a_B.e_out_pv);
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S235>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_l) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_do =
                APF_CTL_VIS_Obs_2023a_B.e_out_pv;
            }

            // Delay: '<S235>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_fa =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_do;
          }

          // Sum: '<S235>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_pv -
            APF_CTL_VIS_Obs_2023a_B.Delay1_fa;

          // If: '<S235>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_k =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_k;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S235>/Hold this value' incorporates:
            //   ActionPort: '<S236>/Action Port'

            // SignalConversion generated from: '<S236>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g20as =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S235>/Hold this value'
          }

          // End of If: '<S235>/if we went through a "step"'

          // Sum: '<S228>/Sum3' incorporates:
          //   DataStoreWrite: '<S164>/BLUE_Tz'
          //   Gain: '<S228>/kd_tb'
          //   Gain: '<S228>/kp_tb'
          //   Gain: '<S235>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g20as
            * APF_CTL_VIS_Obs_2023a_P.Kd_tblue +
            APF_CTL_VIS_Obs_2023a_P.Kp_tblue * APF_CTL_VIS_Obs_2023a_B.e_out_pv;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DataStoreWrite: '<S164>/Data Store Write1' incorporates:
            //   Constant: '<S164>/Puck State'

            APF_CTL_VIS_Obs_2023a_DW.Float_State =
              APF_CTL_VIS_Obs_2023a_P.PuckState_Value_g;
          }

          // End of Outputs for SubSystem: '<S88>/Sub-Phase #4'
          break;
        }

        // End of If: '<S88>/Experiment Sub-Phases'
        // End of Outputs for SubSystem: '<S9>/Change BLUE Behavior'
      }

      // End of If: '<S9>/This IF block determines whether or not to run the BLUE sim//exp' 

      // If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S9>/Data Store Read'
      //   DataStoreRead: '<S9>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_fg =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_fg;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S9>/Change RED Behavior' incorporates:
        //   ActionPort: '<S89>/Action Port'

        // If: '<S89>/Experiment Sub-Phases' incorporates:
        //   Constant: '<S89>/Constant1'
        //   Constant: '<S89>/Constant2'
        //   Constant: '<S89>/Constant3'
        //   Constant: '<S89>/Constant4'
        //   DataStoreRead: '<S89>/Universal_Time'

        APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          if (APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
              APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase1_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 1;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase2_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 2;
          } else if ((APF_CTL_VIS_Obs_2023a_DW.Univ_Time <
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase4_End) &&
                     (APF_CTL_VIS_Obs_2023a_DW.Univ_Time >=
                      APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End)) {
            APF_CTL_VIS_Obs_2023a_B.rtAction = 3;
          }

          APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSubsy =
            APF_CTL_VIS_Obs_2023a_B.rtAction;
        } else {
          APF_CTL_VIS_Obs_2023a_B.rtAction =
            APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSubsy;
        }

        switch (APF_CTL_VIS_Obs_2023a_B.rtAction) {
         case 0:
          // Outputs for IfAction SubSystem: '<S89>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S244>/Action Port'

          APF_CTL_VIS_Obs_202_SubPhase1_p(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Px, &APF_CTL_VIS_Obs_2023a_DW.RED_Py,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time, &APF_CTL_VIS_Obs_2023a_DW.isSim,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1_p,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_p,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase1_p);

          // End of Outputs for SubSystem: '<S89>/Sub-Phase #1'
          break;

         case 1:
          // Outputs for IfAction SubSystem: '<S89>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S245>/Action Port'

          APF_CTL_VIS_Obs_202_SubPhase1_p(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_DW.Float_State,
            &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Px, &APF_CTL_VIS_Obs_2023a_DW.RED_Py,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
            &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
            &APF_CTL_VIS_Obs_2023a_DW.Univ_Time, &APF_CTL_VIS_Obs_2023a_DW.isSim,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2_p,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_p,
            &APF_CTL_VIS_Obs_2023a_P.SubPhase2_p);

          // End of Outputs for SubSystem: '<S89>/Sub-Phase #2 '
          break;

         case 2:
          // Outputs for IfAction SubSystem: '<S89>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S246>/Action Port'

          // MATLAB Function: '<S344>/MATLAB Function' incorporates:
          //   Constant: '<S321>/Constant'
          //   Constant: '<S321>/Desired Rate '
          //   Constant: '<S343>/Constant1'
          //   DataStoreRead: '<S343>/Universal_Time'
          //   Product: '<S321>/Product'
          //   Sum: '<S321>/Sum'
          //   Sum: '<S343>/Subtract'

          APF_CTL_VIS_Obs__MATLABFunction
            (APF_CTL_VIS_Obs_2023a_P.DesiredRate_Value *
             (APF_CTL_VIS_Obs_2023a_DW.Univ_Time -
              APF_CTL_VIS_Obs_2023a_P.Phase2_End) +
             APF_CTL_VIS_Obs_2023a_P.Constant_Value_n,
             &APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o);

          // MATLAB Function: '<S317>/MATLAB Function2'
          APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o,
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f);

          // MATLAB Function: '<S317>/MATLAB Function3' incorporates:
          //   DataStoreRead: '<S246>/RED_Rz'

          APF_CTL_VIS_Obs_MATLABFunction3(APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

          // Sum: '<S317>/Subtract2'
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];

          // MATLAB Function: '<S317>/MATLAB Function4'
          APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f,
            &APF_CTL_VIS_Obs_2023a_B.e_out_p);
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S323>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_da =
                APF_CTL_VIS_Obs_2023a_B.e_out_p;
            }

            // Delay: '<S323>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_e =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_da;
          }

          // Sum: '<S323>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.e_out_p -
            APF_CTL_VIS_Obs_2023a_B.Delay1_e;

          // If: '<S323>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSubs =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSubs;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S323>/Hold this value' incorporates:
            //   ActionPort: '<S324>/Action Port'

            // SignalConversion generated from: '<S324>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g2 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S323>/Hold this value'
          }

          // End of If: '<S323>/if we went through a "step"'

          // Sum: '<S314>/Sum3' incorporates:
          //   DataStoreWrite: '<S246>/RED_Tz'
          //   Gain: '<S314>/kd_tr'
          //   Gain: '<S314>/kp_tr'
          //   Gain: '<S323>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.RED_Tz = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g2 *
            APF_CTL_VIS_Obs_2023a_P.Kd_tr + APF_CTL_VIS_Obs_2023a_P.Kp_tr *
            APF_CTL_VIS_Obs_2023a_B.e_out_p;

          // Sum: '<S322>/Subtract3' incorporates:
          //   Constant: '<S322>/Constant2'
          //   DataStoreRead: '<S346>/Universal_Time'

          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_DW.Univ_Time
            - APF_CTL_VIS_Obs_2023a_P.Phase2_End;

          // MATLAB Function: '<S246>/MATLAB Function'
          APF_CTL_VIS_Ob_MATLABFunction_o(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
            &APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o);

          // Sum: '<S246>/Subtract' incorporates:
          //   DataStoreRead: '<S246>/RED_Px1'

          APF_CTL_VIS_Obs_2023a_B.Subtract = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o -
            APF_CTL_VIS_Obs_2023a_DW.RED_Px;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S325>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_f) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3 =
                APF_CTL_VIS_Obs_2023a_B.Subtract;
            }

            // Delay: '<S325>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_l =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3;
          }

          // Sum: '<S325>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.Subtract -
            APF_CTL_VIS_Obs_2023a_B.Delay1_l;

          // If: '<S325>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_h =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_h;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S325>/Hold this value' incorporates:
            //   ActionPort: '<S326>/Action Port'

            // SignalConversion generated from: '<S326>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;

            // End of Outputs for SubSystem: '<S325>/Hold this value'
          }

          // End of If: '<S325>/if we went through a "step"'

          // Sum: '<S315>/Sum3' incorporates:
          //   DataStoreWrite: '<S246>/RED_Fx'
          //   Gain: '<S315>/kd_xr'
          //   Gain: '<S315>/kp_xr'
          //   Gain: '<S325>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.RED_Fx = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g *
            APF_CTL_VIS_Obs_2023a_P.Kd_xr + APF_CTL_VIS_Obs_2023a_P.Kp_xr *
            APF_CTL_VIS_Obs_2023a_B.Subtract;

          // MATLAB Function: '<S246>/MATLAB Function1'
          APF_CTL_VIS_Obs_MATLABFunction1(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
            &APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o);

          // Sum: '<S246>/Subtract2' incorporates:
          //   DataStoreRead: '<S246>/RED_Py '

          APF_CTL_VIS_Obs_2023a_B.Subtract2 = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o
            - APF_CTL_VIS_Obs_2023a_DW.RED_Py;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S327>/Delay1'
            if (APF_CTL_VIS_Obs_2023a_DW.icLoad_i) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_g =
                APF_CTL_VIS_Obs_2023a_B.Subtract2;
            }

            // Delay: '<S327>/Delay1'
            APF_CTL_VIS_Obs_2023a_B.Delay1_a =
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_g;
          }

          // Sum: '<S327>/Sum6'
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Subtract2
            - APF_CTL_VIS_Obs_2023a_B.Delay1_a;

          // If: '<S327>/if we went through a "step"'
          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_l =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_l;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S327>/Hold this value' incorporates:
            //   ActionPort: '<S328>/Action Port'

            // SignalConversion generated from: '<S328>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // End of Outputs for SubSystem: '<S327>/Hold this value'
          }

          // End of If: '<S327>/if we went through a "step"'

          // Sum: '<S316>/Sum3' incorporates:
          //   DataStoreWrite: '<S246>/RED_Fy'
          //   Gain: '<S316>/kd_yr'
          //   Gain: '<S316>/kp_yr'
          //   Gain: '<S327>/divide by delta T'

          APF_CTL_VIS_Obs_2023a_DW.RED_Fy = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1 *
            APF_CTL_VIS_Obs_2023a_P.Kd_yr + APF_CTL_VIS_Obs_2023a_P.Kp_yr *
            APF_CTL_VIS_Obs_2023a_B.Subtract2;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // DataStoreWrite: '<S246>/Data Store Write3' incorporates:
            //   Constant: '<S246>/Puck State'

            APF_CTL_VIS_Obs_2023a_DW.Float_State =
              APF_CTL_VIS_Obs_2023a_P.PuckState_Value_gv;

            // If: '<S246>/If' incorporates:
            //   Constant: '<S246>/Constant1'

            if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo) &&
                ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
                 (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
                 (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
                 (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0))) {
              // Outputs for IfAction SubSystem: '<S246>/RED+ARM' incorporates:
              //   ActionPort: '<S320>/Action Port'

              APF_CTL_VIS_Obs_2023a_REDARM
                (&APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                 &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
                 &APF_CTL_VIS_Obs_2023a_DW.isSim,
                 &APF_CTL_VIS_Obs_2023a_B.REDARM_m,
                 &APF_CTL_VIS_Obs_2023a_DW.REDARM_m,
                 &APF_CTL_VIS_Obs_2023a_P.REDARM_m);

              // End of Outputs for SubSystem: '<S246>/RED+ARM'
            }

            // End of If: '<S246>/If'
          }

          // End of Outputs for SubSystem: '<S89>/Sub-Phase #3 '
          break;

         case 3:
          // Outputs for IfAction SubSystem: '<S89>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S247>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S354>/Delay'
            APF_CTL_VIS_Obs_2023a_B.Delay[0] =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[0];
            APF_CTL_VIS_Obs_2023a_B.Delay[1] =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[1];
            APF_CTL_VIS_Obs_2023a_B.Delay[2] =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[2];
          }

          // MATLAB Function: '<S354>/MATLAB Function' incorporates:
          //   DataStoreRead: '<S347>/Data Store Read1'
          //   DataStoreRead: '<S347>/Data Store Read7'
          //   DataStoreRead: '<S347>/Data Store Read8'

          if (fabs(APF_CTL_VIS_Obs_2023a_DW.TX2_data1 -
                   APF_CTL_VIS_Obs_2023a_B.Delay[0]) < 1.0E-10) {
            APF_CTL_VIS_Obs_2023a_B.y_p[0] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.y_p[1] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.y_p[2] = (rtNaN);
          } else {
            APF_CTL_VIS_Obs_2023a_B.y_p[0] = APF_CTL_VIS_Obs_2023a_DW.TX2_data1;
            APF_CTL_VIS_Obs_2023a_B.y_p[1] = APF_CTL_VIS_Obs_2023a_DW.TX2_data2;
            APF_CTL_VIS_Obs_2023a_B.y_p[2] = APF_CTL_VIS_Obs_2023a_DW.TX2_data3;
          }

          // End of MATLAB Function: '<S354>/MATLAB Function'

          // MATLAB Function: '<S347>/Ryan's Transform' incorporates:
          //   DataStoreRead: '<S347>/Data Store Read10'
          //   DataStoreRead: '<S347>/Data Store Read11'
          //   DataStoreRead: '<S347>/Data Store Read9'
          //   MATLAB Function: '<S348>/Ryan's Transform'

          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0] =
            APF_CTL_VIS_Obs_2023a_B.y_p[0] / 100.0;
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] =
            APF_CTL_VIS_Obs_2023a_B.y_p[1] / 100.0;
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2] =
            APF_CTL_VIS_Obs_2023a_B.y_p[2] * 3.1415926535897931 / 180.0;
          if (rtIsNaN(APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931)) {
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = (rtNaN);
          } else if (rtIsInf(APF_CTL_VIS_Obs_2023a_DW.RED_Rz +
                             3.1415926535897931)) {
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = (rtNaN);
          } else if (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931 == 0.0)
          {
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = fmod
              (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931,
               6.2831853071795862);
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW ==
              0.0);
            if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = fabs
                ((APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931) /
                 6.2831853071795862);
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = !(fabs
                (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o - floor
                 (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o + 0.5)) >
                2.2204460492503131E-16 * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o);
            }

            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
            } else if (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931 <
                       0.0) {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW += 6.2831853071795862;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.Derivative3 = APF_CTL_VIS_Obs_2023a_P.delta *
            3.1415926535897931 / 180.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
            (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW - 3.1415926535897931) +
            APF_CTL_VIS_Obs_2023a_B.Derivative3;
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = sin
            (APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0);
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 = cos
            (APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0);
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[0] =
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3] =
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[6] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[1] =
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[4] =
            -APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[7] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[2] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[5] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[8] = 1.0;
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];
          for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
               APF_CTL_VIS_Obs_2023a_B.i_m++) {
            APF_CTL_VIS_Obs_2023a_B.y_p[APF_CTL_VIS_Obs_2023a_B.i_m] =
              (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m
               + 3] * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
               APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m]
               * APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) +
              APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m
              + 6] * APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
          }

          APF_CTL_VIS_Obs_2023a_B.y_p[0] += APF_CTL_VIS_Obs_2023a_DW.RED_Px;
          APF_CTL_VIS_Obs_2023a_B.y_p[1] = -APF_CTL_VIS_Obs_2023a_B.y_p[1] +
            APF_CTL_VIS_Obs_2023a_DW.RED_Py;
          APF_CTL_VIS_Obs_2023a_B.y_p[2] = ((APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW -
            3.1415926535897931) +
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2]) -
            1.5707963267948966;

          // End of MATLAB Function: '<S347>/Ryan's Transform'
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                 APF_CTL_VIS_Obs_2023a_B.i++) {
              // Delay: '<S355>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.i] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE[APF_CTL_VIS_Obs_2023a_B.i];
            }

            // InitialCondition: '<S355>/IC'
            if (APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime) {
              APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime = false;

              // InitialCondition: '<S355>/IC'
              memcpy(&APF_CTL_VIS_Obs_2023a_B.IC[0],
                     &APF_CTL_VIS_Obs_2023a_P.P_IC_Black[0], 36U * sizeof(real_T));
            } else {
              // InitialCondition: '<S355>/IC' incorporates:
              //   Delay: '<S355>/Delay'
              //   Delay: '<S360>/Delay'

              memcpy(&APF_CTL_VIS_Obs_2023a_B.IC[0],
                     &APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_e[0], 36U * sizeof
                     (real_T));
            }

            // End of InitialCondition: '<S355>/IC'

            // Delay: '<S355>/Delay3'
            APF_CTL_VIS_Obs_2023a_B.Delay3 =
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE;

            // Delay: '<S355>/Delay2'
            APF_CTL_VIS_Obs_2023a_B.Delay2 =
              APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE;
          }

          // MATLAB Function: '<S355>/MATLAB Function2' incorporates:
          //   Constant: '<S355>/Constant'
          //   Delay: '<S355>/Delay1'
          //   InitialCondition: '<S355>/IC'
          //   Reshape: '<S355>/Reshape4'

          APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
          APF_CTL_VIS_Obs_2023a_B.k_l = 0;
          exitg1 = false;
          while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.k_l < 6)) {
            if (!(APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.k_l] ==
                  0.0)) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              exitg1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_l++;
            }
          }

          guard1 = false;
          if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            guard1 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
            for (APF_CTL_VIS_Obs_2023a_B.k_l = 0; APF_CTL_VIS_Obs_2023a_B.k_l <
                 6; APF_CTL_VIS_Obs_2023a_B.k_l++) {
              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.k_l]);
              }
            }

            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              guard1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_l = 0;
              memset(&APF_CTL_VIS_Obs_2023a_B.X_Cal[0], 0, 78U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   36; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.lamda_Black + 6.0) *
                  APF_CTL_VIS_Obs_2023a_B.IC[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              APF_CTL_VIS_Obs_2023a_eig(APF_CTL_VIS_Obs_2023a_B.b_D,
                APF_CTL_VIS_Obs_2023a_B.b_x);
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                APF_CTL_VIS_Obs_2023a_B.c_x_h[APF_CTL_VIS_Obs_2023a_B.i] =
                  (APF_CTL_VIS_Obs_2023a_B.b_x[APF_CTL_VIS_Obs_2023a_B.i].re <=
                   0.0);
              }

              APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              APF_CTL_VIS_Obs_2023a_B.i_m = 0;
              exitg1 = false;
              while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i_m < 6)) {
                if (APF_CTL_VIS_Obs_2023a_B.c_x_h[APF_CTL_VIS_Obs_2023a_B.i_m])
                {
                  APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
                  exitg1 = true;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.i_m++;
                }
              }

              if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                memcpy(&APF_CTL_VIS_Obs_2023a_B.increment[0],
                       &APF_CTL_VIS_Obs_2023a_B.b_D[0], 36U * sizeof(real_T));
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.d_j = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                    APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.d_j] =
                      (APF_CTL_VIS_Obs_2023a_B.b_D[6 * APF_CTL_VIS_Obs_2023a_B.i
                       + APF_CTL_VIS_Obs_2023a_B.i_m] +
                       APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.d_j])
                      * 0.5;
                  }
                }

                if (APF_CTL_VIS_Obs_2023a_P.method == 1.0) {
                  APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                        APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.i_m];
                      if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) || rtIsNaN
                          (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW)) {
                        APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
                      }
                    }
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                    APF_CTL_VIS_Obs_2023a_svd_p(APF_CTL_VIS_Obs_2023a_B.b_B,
                      APF_CTL_VIS_Obs_2023a_B.increment,
                      APF_CTL_VIS_Obs_2023a_B.s, APF_CTL_VIS_Obs_2023a_B.b_D);
                  } else {
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        (rtNaN);
                    }
                  }

                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m] *
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i];
                      }

                      APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                        APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                        =
                        (APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                         + APF_CTL_VIS_Obs_2023a_B.Sum6_gv) / 2.0;
                    }
                  }
                } else if (APF_CTL_VIS_Obs_2023a_P.method == 2.0) {
                  APF_CTL_VIS_Obs_2023a_eig_m(APF_CTL_VIS_Obs_2023a_B.b_B,
                    APF_CTL_VIS_Obs_2023a_B.V, APF_CTL_VIS_Obs_2023a_B.D);
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
                      APF_CTL_VIS_Obs_2023a_B.D[APF_CTL_VIS_Obs_2023a_B.i_m].re;
                    if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv >= 0.0) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        0.0;
                    }
                  }

                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                          APF_CTL_VIS_Obs_2023a_B.V[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m].re *
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.i +
                          APF_CTL_VIS_Obs_2023a_B.d_j];
                      }

                      APF_CTL_VIS_Obs_2023a_B.V_p[APF_CTL_VIS_Obs_2023a_B.i_m +
                        6 * APF_CTL_VIS_Obs_2023a_B.i] =
                        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                    }

                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                          APF_CTL_VIS_Obs_2023a_B.V_p[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m] *
                          APF_CTL_VIS_Obs_2023a_B.V[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i].re;
                      }

                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m
                        + 6 * APF_CTL_VIS_Obs_2023a_B.i] =
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                    }
                  }
                }

                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.d_j = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                    APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.d_j] =
                      (APF_CTL_VIS_Obs_2023a_B.increment[6 *
                       APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m]
                       + APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.d_j])
                      * 0.5;
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.i = 1;
                APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                exitg1 = false;
                while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i != 0)) {
                  memcpy(&APF_CTL_VIS_Obs_2023a_B.increment[0],
                         &APF_CTL_VIS_Obs_2023a_B.b_D[0], 36U * sizeof(real_T));
                  APF_CTL_VIS_Obs_2023a_chol(APF_CTL_VIS_Obs_2023a_B.increment,
                    &APF_CTL_VIS_Obs_2023a_B.i, &APF_CTL_VIS_Obs_2023a_B.i_m);
                  APF_CTL_VIS_Obs_2023a_B.d_j++;
                  if (APF_CTL_VIS_Obs_2023a_B.i != 0) {
                    APF_CTL_VIS_Obs_2023a_eig(APF_CTL_VIS_Obs_2023a_B.b_D,
                      APF_CTL_VIS_Obs_2023a_B.b_x);
                    APF_CTL_VIS_Obs_2023a_B.eig_min =
                      APF_CTL_VIS_Obs_2023a_minimum(APF_CTL_VIS_Obs_2023a_B.b_x);
                    if (APF_CTL_VIS_Obs_2023a_B.d_j <= 500) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = static_cast<real_T>
                        (APF_CTL_VIS_Obs_2023a_B.d_j *
                         APF_CTL_VIS_Obs_2023a_B.d_j) *
                        -APF_CTL_VIS_Obs_2023a_B.eig_min.re +
                        APF_CTL_VIS_Obs_2023a_eps
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re);
                      for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                           APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                           APF_CTL_VIS_Obs_2023a_B.i_m++) {
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m]
                          = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW *
                          static_cast<real_T>(c_b[APF_CTL_VIS_Obs_2023a_B.i_m]);
                      }
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = (static_cast<real_T>
                        (APF_CTL_VIS_Obs_2023a_B.d_j *
                         APF_CTL_VIS_Obs_2023a_B.d_j) * fabs
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re) +
                        APF_CTL_VIS_Obs_2023a_eps
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re)) * exp((
                        static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.d_j) - 500.0)
                        * 0.1);
                      for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                           APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                           APF_CTL_VIS_Obs_2023a_B.i_m++) {
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m]
                          = APF_CTL_VIS_Obs_2023a_B.Sum6_gv * static_cast<real_T>
                          (c_b[APF_CTL_VIS_Obs_2023a_B.i_m]);
                      }
                    }

                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] +=
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m];
                    }
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.d_j > 1000) {
                    exitg1 = true;
                  }
                }
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.increment[0], 0, 36U * sizeof
                     (real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                  APF_CTL_VIS_Obs_2023a_B.loop_ub = -1;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.loop_ub = APF_CTL_VIS_Obs_2023a_B.i -
                    1;
                }

                APF_CTL_VIS_Obs_2023a_B.d_x_size[0] = 1;
                APF_CTL_VIS_Obs_2023a_B.d_x_size[1] =
                  APF_CTL_VIS_Obs_2023a_B.loop_ub + 1;
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m <=
                     APF_CTL_VIS_Obs_2023a_B.loop_ub;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                    APF_CTL_VIS_Obs_2023a_B.increment[6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i];
                  APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW *
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }

                APF_CTL_VIS_Obs_2023a_B.d_j = APF_CTL_VIS_Obs_2023a_B.loop_ub +
                  1;
                if (APF_CTL_VIS_Obs_2023a_B.loop_ub + 1 == 0) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                    APF_CTL_VIS_Obs_2023a_B.d_x_data[0];
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 2;
                       APF_CTL_VIS_Obs_2023a_B.i_m <=
                       APF_CTL_VIS_Obs_2023a_B.d_j; APF_CTL_VIS_Obs_2023a_B.i_m
                       ++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m
                      - 1];
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                  APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                  = sqrt
                  (APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                   - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW);
                APF_CTL_VIS_Obs_2023a_B.d_g = 4 - APF_CTL_VIS_Obs_2023a_B.i;
                if (4 - APF_CTL_VIS_Obs_2023a_B.i >= 0) {
                  if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset = -1;
                    APF_CTL_VIS_Obs_2023a_B.xoffset = -1;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset =
                      APF_CTL_VIS_Obs_2023a_B.i - 1;
                    APF_CTL_VIS_Obs_2023a_B.xoffset = APF_CTL_VIS_Obs_2023a_B.i
                      - 1;
                  }
                }

                for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                     APF_CTL_VIS_Obs_2023a_B.d_j <= APF_CTL_VIS_Obs_2023a_B.d_g;
                     APF_CTL_VIS_Obs_2023a_B.d_j++) {
                  APF_CTL_VIS_Obs_2023a_B.b_j = (APF_CTL_VIS_Obs_2023a_B.i +
                    APF_CTL_VIS_Obs_2023a_B.d_j) + 1;
                  if (APF_CTL_VIS_Obs_2023a_B.b_xoffset + 1 ==
                      APF_CTL_VIS_Obs_2023a_B.xoffset + 1) {
                    if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                      APF_CTL_VIS_Obs_2023a_B.loop_ub = -1;
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.loop_ub =
                        APF_CTL_VIS_Obs_2023a_B.i - 1;
                    }

                    APF_CTL_VIS_Obs_2023a_B.d_x_size[0] = 1;
                    APF_CTL_VIS_Obs_2023a_B.d_x_size[1] =
                      APF_CTL_VIS_Obs_2023a_B.loop_ub + 1;
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m <=
                         APF_CTL_VIS_Obs_2023a_B.loop_ub;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m]
                        = APF_CTL_VIS_Obs_2023a_B.increment[6 *
                        APF_CTL_VIS_Obs_2023a_B.i_m +
                        APF_CTL_VIS_Obs_2023a_B.b_j] *
                        APF_CTL_VIS_Obs_2023a_B.increment[6 *
                        APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i];
                    }
                  } else {
                    APF_CTL_VIS_Ob_binary_expand_op
                      (APF_CTL_VIS_Obs_2023a_B.d_x_data,
                       APF_CTL_VIS_Obs_2023a_B.d_x_size,
                       APF_CTL_VIS_Obs_2023a_B.increment,
                       APF_CTL_VIS_Obs_2023a_B.b_j, APF_CTL_VIS_Obs_2023a_B.i);
                  }

                  APF_CTL_VIS_Obs_2023a_B.loop_ub =
                    APF_CTL_VIS_Obs_2023a_B.d_x_size[1];
                  if (APF_CTL_VIS_Obs_2023a_B.d_x_size[1] == 0) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[0];
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 2;
                         APF_CTL_VIS_Obs_2023a_B.i_m <=
                         APF_CTL_VIS_Obs_2023a_B.loop_ub;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                        APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m
                        - 1];
                    }
                  }

                  APF_CTL_VIS_Obs_2023a_B.b_j += 6 * APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j]
                    = (APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.b_j]
                       - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) /
                    APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] = 0.0;
                }

                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i] =
                  APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    (APF_CTL_VIS_Obs_2023a_B.i + 1)] =
                    APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.i_m]
                    + APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 6;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i] = 0.0;
                }

                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                  APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    (APF_CTL_VIS_Obs_2023a_B.b_xoffset + 7)] =
                    APF_CTL_VIS_Obs_2023a_B.Delay1[APF_CTL_VIS_Obs_2023a_B.i_m]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   9; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m]
                  = d_a[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.b_j = (APF_CTL_VIS_Obs_2023a_B.i_m + 3) *
                  6;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j] =
                  static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp) *
                  APF_CTL_VIS_Obs_2023a_P.dt;
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 1]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j +
                  1] = static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp)
                  * APF_CTL_VIS_Obs_2023a_P.dt;
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 2]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j +
                  2] = static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp)
                  * APF_CTL_VIS_Obs_2023a_P.dt;
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 3] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 4] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1];
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 5] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2];
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_P.dt *
                APF_CTL_VIS_Obs_2023a_P.dt;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[0] = 1.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[1] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[2] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[3] = 1.0;
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 2.0 * APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[2] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[8] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[14] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o /
                (2.0 * APF_CTL_VIS_Obs_2023a_P.J);
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.B[0] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = 0.0 *
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.B[1] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.B[12] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_P.dt / APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[3] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0 *
                APF_CTL_VIS_Obs_2023a_P.dt / APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[4] =
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
              APF_CTL_VIS_Obs_2023a_B.B[15] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[6] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.B[7] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.B[13] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[9] =
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
              APF_CTL_VIS_Obs_2023a_B.B[10] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.B[16] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[5] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[11] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[17] = APF_CTL_VIS_Obs_2023a_P.dt /
                APF_CTL_VIS_Obs_2023a_P.J;
              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.increment[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.X_Cal[6 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.i_m +
                    6 * APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    ((APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                      * APF_CTL_VIS_Obs_2023a_P.Constant_Value_o[1] +
                      APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_P.Constant_Value_o[0]) +
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 12]
                     * APF_CTL_VIS_Obs_2023a_P.Constant_Value_o[2]) +
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 1.0 /
                ((APF_CTL_VIS_Obs_2023a_P.lamda_Black + 6.0) * 2.0);
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
                APF_CTL_VIS_Obs_2023a_P.lamda_Black /
                (APF_CTL_VIS_Obs_2023a_P.lamda_Black + 6.0);
              APF_CTL_VIS_Obs_2023a_B.v_d[0] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.b_v[0] = (1.0 -
                APF_CTL_VIS_Obs_2023a_P.alpha_Black *
                APF_CTL_VIS_Obs_2023a_P.alpha_Black) +
                (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
                 APF_CTL_VIS_Obs_2023a_P.beta_Black);
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.v_d[APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                APF_CTL_VIS_Obs_2023a_B.b_v[APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.w_m[0], 0, 169U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.w_m[APF_CTL_VIS_Obs_2023a_B.i_m + 13 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.v_d[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.w_c[0], 0, 169U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                APF_CTL_VIS_Obs_2023a_B.w_c[APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                  13 * APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                  APF_CTL_VIS_Obs_2023a_B.b_v[APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       13; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.w_m[13 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.xoffset = (APF_CTL_VIS_Obs_2023a_B.i_m +
                  1) * 6;
                for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                     APF_CTL_VIS_Obs_2023a_B.b_xoffset < 6;
                     APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.b_xoffset] +=
                    APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.xoffset
                    + APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.e_x[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.e_x_m[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.e_x_m[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.e_x[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                    =
                    APF_CTL_VIS_Obs_2023a_P.Q_Black[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                    + APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 3;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_P.H[3 * APF_CTL_VIS_Obs_2023a_B.i +
                      APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 3 *
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                      APF_CTL_VIS_Obs_2023a_B.w_m[13 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i + 3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.f_x[0];
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.f_x[1];
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.f_x[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = (APF_CTL_VIS_Obs_2023a_B.i_m
                  + 1) * 3;
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset
                  + 1];
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset
                  + 2];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m]
                  = APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] -
                  APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1;
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  - APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2;
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              }

              memcpy(&APF_CTL_VIS_Obs_2023a_B.Z_Cal[0],
                     &APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[0], 39U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m + 13] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m
                  + 1];
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m + 26] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m
                  + 2];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.i_m +
                    3 * APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.f_x[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                    APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_P.R_Black[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    + APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.f_x[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                    6 * APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                  6];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                  12];
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i
                     + 3] *
                     APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
                     APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
                     APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i])
                    + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i
                    + 6] * APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.y_p[0]);
              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.y_p[1]);
              }

              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.y_p[2]);
              }

              if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = 1000.0;
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = 1000.0;
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = 1000.0;
              } else {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = APF_CTL_VIS_Obs_2023a_B.y_p
                  [0];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = APF_CTL_VIS_Obs_2023a_B.y_p
                  [1];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = APF_CTL_VIS_Obs_2023a_B.y_p
                  [2];
              }

              if (APF_CTL_VIS_Obs_2023a_B.Delay2 == 1.0) {
                APF_CTL_VIS_Obs_2023a_B.Reject_Sum_b =
                  APF_CTL_VIS_Obs_2023a_B.Delay3 + 1.0;
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  (APF_CTL_VIS_Obs_2023a_B.Delay3 + 1.0) *
                  APF_CTL_VIS_Obs_2023a_P.thresh_Factor_Black +
                  APF_CTL_VIS_Obs_2023a_P.thresh_Black;
              } else {
                APF_CTL_VIS_Obs_2023a_B.Reject_Sum_b = 0.0;
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  APF_CTL_VIS_Obs_2023a_P.thresh_Black;
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 -
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 -
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 -
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[2] =
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = 0.0;
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +=
                  ((APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + 1] *
                    APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
                    APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m] *
                    APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) +
                   APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 2] *
                   APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) *
                  APF_CTL_VIS_Obs_2023a_B.Sum_b[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              APF_CTL_VIS_Obs_2023a_B.b_xoffset =
                !(APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 <
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h);
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = (APF_CTL_VIS_Obs_2023a_B.b_xoffset ==
                0);
              APF_CTL_VIS_Obs_2023a_B.Z_k[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.Z_k[1] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.Z_k[2] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Reject_j =
                (APF_CTL_VIS_Obs_2023a_B.b_xoffset == 0);
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.d_j = 6 * APF_CTL_VIS_Obs_2023a_B.i +
                    APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                    APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.d_j] *
                    APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i];
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.d_j] =
                    (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                     APF_CTL_VIS_Obs_2023a_B.i + 1] *
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                     + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3
                     * APF_CTL_VIS_Obs_2023a_B.i] *
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m]) +
                    APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i + 2] *
                    APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 12];
                }

                if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                  APF_CTL_VIS_Obs_2023a_B.States_a[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] +
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.States_a[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  if (APF_CTL_VIS_Obs_2023a_B.Reject_j) {
                    APF_CTL_VIS_Obs_2023a_B.xoffset = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                    APF_CTL_VIS_Obs_2023a_B.P_K_g[APF_CTL_VIS_Obs_2023a_B.xoffset]
                      =
                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.xoffset]
                      - ((APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m
                          + 6] *
                          APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i +
                          6] +
                          APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m]
                          * APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i])
                         + APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m
                         + 12] *
                         APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i +
                         12]);
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.P_K_g[APF_CTL_VIS_Obs_2023a_B.i_m +
                      6 * APF_CTL_VIS_Obs_2023a_B.i] =
                      APF_CTL_VIS_Obs_2023a_B.increment[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m];
                  }
                }
              }
            }
          }

          if (guard1) {
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN(APF_CTL_VIS_Obs_2023a_B.y_p[0]);
            if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.y_p[1]);
            }

            if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.y_p[2]);
            }

            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                APF_CTL_VIS_Obs_2023a_B.States_a[APF_CTL_VIS_Obs_2023a_B.i] =
                  (rtNaN);
              }

              APF_CTL_VIS_Obs_2023a_B.k_l = 1;
              memcpy(&APF_CTL_VIS_Obs_2023a_B.P_K_g[0],
                     &APF_CTL_VIS_Obs_2023a_B.IC[0], 36U * sizeof(real_T));
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum_b = 0.0;
              APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.States_a[0] = APF_CTL_VIS_Obs_2023a_B.y_p
                [0];
              APF_CTL_VIS_Obs_2023a_B.States_a[3] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.States_a[1] = APF_CTL_VIS_Obs_2023a_B.y_p
                [1];
              APF_CTL_VIS_Obs_2023a_B.States_a[4] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.States_a[2] = APF_CTL_VIS_Obs_2023a_B.y_p
                [2];
              APF_CTL_VIS_Obs_2023a_B.States_a[5] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.k_l = 0;
              memcpy(&APF_CTL_VIS_Obs_2023a_B.P_K_g[0],
                     &APF_CTL_VIS_Obs_2023a_B.IC[0], 36U * sizeof(real_T));
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum_b = 0.0;
              APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
            }
          }

          APF_CTL_VIS_Obs_2023a_B.Reject = APF_CTL_VIS_Obs_2023a_B.b_xoffset;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S379>/Delay'
            APF_CTL_VIS_Obs_2023a_B.Delay_a =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_h;
          }

          // MATLAB Function: '<S379>/Switch logic' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'
          //   MATLAB Function: '<S355>/MATLAB Function2'

          if (APF_CTL_VIS_Obs_2023a_B.k_l == 1) {
            APF_CTL_VIS_Obs_2023a_DW.Phase = 1.0;
            APF_CTL_VIS_Obs_2023a_B.k = 0.0;
          } else {
            APF_CTL_VIS_Obs_2023a_B.k = APF_CTL_VIS_Obs_2023a_B.Delay_a + 1.0;
            if (APF_CTL_VIS_Obs_2023a_B.Delay_a + 1.0 <=
                APF_CTL_VIS_Obs_2023a_P.Time_Look / APF_CTL_VIS_Obs_2023a_P.Hz)
            {
              APF_CTL_VIS_Obs_2023a_DW.Phase = 2.0;
            } else {
              APF_CTL_VIS_Obs_2023a_DW.Phase = 3.0;
            }
          }

          // End of MATLAB Function: '<S379>/Switch logic'

          // If: '<S350>/If2' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 1.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S350>/Target Finder' incorporates:
            //   ActionPort: '<S380>/Action Port'

            // MATLAB Function: '<S406>/MATLAB Function' incorporates:
            //   Constant: '<S403>/Desired Rate (RED)'
            //   Constant: '<S405>/Constant1'
            //   DataStoreRead: '<S405>/Universal_Time'
            //   Gain: '<S403>/Gain'
            //   Product: '<S403>/Product'
            //   Sum: '<S405>/Subtract'

            APF_CTL_VIS_Obs__MATLABFunction(APF_CTL_VIS_Obs_2023a_P.Gain_Gain *
              APF_CTL_VIS_Obs_2023a_P.Red_Rate *
              (APF_CTL_VIS_Obs_2023a_DW.Univ_Time -
               APF_CTL_VIS_Obs_2023a_P.Phase3_SubPhase3_End),
              &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW);

            // SignalConversion generated from: '<S380>/Desired States' incorporates:
            //   Constant: '<S403>/Constant'
            //   Constant: '<S404>/Constant1'
            //   Constant: '<S404>/Constant2'
            //   Sum: '<S403>/Sum'

            APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[0] =
              APF_CTL_VIS_Obs_2023a_P.RED_ini[0];
            APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[1] =
              APF_CTL_VIS_Obs_2023a_P.RED_ini[1];
            APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[2] =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +
              APF_CTL_VIS_Obs_2023a_P.RED_ini[2];

            // End of Outputs for SubSystem: '<S350>/Target Finder'
          }

          // End of If: '<S350>/If2'

          // DataStoreRead: '<S351>/Data Store Read3'
          APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l =
            APF_CTL_VIS_Obs_2023a_DW.RED_Rz;

          // If: '<S350>/If1' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 2.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S350>/Target Tracker' incorporates:
            //   ActionPort: '<S381>/Action Port'

            // MATLAB Function: '<S408>/Looking Angle' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'

            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Px - (APF_CTL_VIS_Obs_2023a_P.r_off *
              cos(APF_CTL_VIS_Obs_2023a_B.States_a[2]) +
              APF_CTL_VIS_Obs_2023a_B.States_a[0]);
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py - (APF_CTL_VIS_Obs_2023a_P.r_off *
              sin(APF_CTL_VIS_Obs_2023a_B.States_a[2]) +
              APF_CTL_VIS_Obs_2023a_B.States_a[1]);
            APF_CTL_VIS_Obs_2023a_B.theta_desired =
              APF_CTL_VIS_Obs_2_rt_atan2d_snf
              (APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1],
               APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0]) + 3.1415926535897931;
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // SignalConversion generated from: '<S381>/Desired States' incorporates:
              //   Constant: '<S409>/Constant1'
              //   Constant: '<S409>/Constant2'
              //   DiscreteTransferFcn: '<S381>/Discrete Transfer Fcn1'

              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[0] =
                APF_CTL_VIS_Obs_2023a_P.RED_ini[0];
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[1] =
                APF_CTL_VIS_Obs_2023a_P.RED_ini[1];
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[2] =
                APF_CTL_VIS_Obs_2023a_P.DiscreteTransferFcn1_NumCoef *
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTransferFcn1_states;
            }

            // End of Outputs for SubSystem: '<S350>/Target Tracker'
          }

          // End of If: '<S350>/If1'
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Delay: '<S359>/Delay'
            APF_CTL_VIS_Obs_2023a_B.Delay_k[0] =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[0];
            APF_CTL_VIS_Obs_2023a_B.Delay_k[1] =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[1];
          }

          // SignalConversion generated from: '<S361>/ SFunction ' incorporates:
          //   DataStoreRead: '<S348>/Data Store Read1'
          //   DataStoreRead: '<S348>/Data Store Read7'
          //   MATLAB Function: '<S359>/MATLAB Function'

          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] =
            APF_CTL_VIS_Obs_2023a_DW.TX2_data4;
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] =
            APF_CTL_VIS_Obs_2023a_DW.TX2_data5;

          // MATLAB Function: '<S359>/MATLAB Function' incorporates:
          //   DataStoreRead: '<S348>/Data Store Read1'
          //   DataStoreRead: '<S348>/Data Store Read7'

          if (fabs(APF_CTL_VIS_Obs_2023a_DW.TX2_data4 -
                   APF_CTL_VIS_Obs_2023a_B.Delay_k[0]) < 1.0E-10) {
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1] = (rtNaN);
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data4;
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data5;
          }

          APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
          APF_CTL_VIS_Obs_2023a_B.k_l = 0;
          exitg1 = false;
          while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.k_l < 2)) {
            if (!(APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[APF_CTL_VIS_Obs_2023a_B.k_l]
                  < 1.0E-10)) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              exitg1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_l++;
            }
          }

          if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1] = (rtNaN);
          }

          // MATLAB Function: '<S348>/Ryan's Transform' incorporates:
          //   DataStoreRead: '<S347>/Data Store Read10'
          //   DataStoreRead: '<S347>/Data Store Read11'
          //   DataStoreRead: '<S347>/Data Store Read9'

          APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
            (APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0]);
          if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
              (APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1]);
          }

          if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] = (rtNaN);
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2] = (rtNaN);
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];
            if (rtIsNaN(APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931)) {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = (rtNaN);
            } else if (rtIsInf(APF_CTL_VIS_Obs_2023a_DW.RED_Rz +
                               3.1415926535897931)) {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = (rtNaN);
            } else if (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931 ==
                       0.0) {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = fmod
                (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931,
                 6.2831853071795862);
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW ==
                0.0);
              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = fabs
                  ((APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931) /
                   6.2831853071795862);
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = !(fabs
                  (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o - floor
                   (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o + 0.5)) >
                  2.2204460492503131E-16 * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o);
              }

              if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
              } else if (APF_CTL_VIS_Obs_2023a_DW.RED_Rz + 3.1415926535897931 <
                         0.0) {
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW += 6.2831853071795862;
              }
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW - 3.1415926535897931) +
              APF_CTL_VIS_Obs_2023a_B.Derivative3;
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = sin
              (APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0);
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 = cos
              (APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0);
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3] =
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[6] = 0.0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[4] =
              -APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[7] = 0.0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[2] = 0.0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[5] = 0.0;
            APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[8] = 1.0;
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];
            for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                 3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
              APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[APF_CTL_VIS_Obs_2023a_B.i_m]
                =
                (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m
                 + 3] * APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +
                 APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m]
                 * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o) +
                APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m
                + 6] * APF_CTL_VIS_Obs_2023a_DW.RED_Rz;
            }

            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0] +=
              APF_CTL_VIS_Obs_2023a_DW.RED_Px;
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] =
              -APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] +
              APF_CTL_VIS_Obs_2023a_DW.RED_Py;
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2] =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW - 3.1415926535897931;
          }

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                 APF_CTL_VIS_Obs_2023a_B.i++) {
              // Delay: '<S360>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.i] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p[APF_CTL_VIS_Obs_2023a_B.i];
            }

            // Delay: '<S360>/Delay' incorporates:
            //   Delay: '<S355>/Delay'

            memcpy(&APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_e[0],
                   &APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_a[0], 36U * sizeof
                   (real_T));

            // InitialCondition: '<S360>/IC'
            if (APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime_b) {
              APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime_b = false;

              // InitialCondition: '<S360>/IC'
              memcpy(&APF_CTL_VIS_Obs_2023a_B.IC_e[0],
                     &APF_CTL_VIS_Obs_2023a_P.P_IC_Blue[0], 36U * sizeof(real_T));
            } else {
              // InitialCondition: '<S360>/IC' incorporates:
              //   Delay: '<S355>/Delay'
              //   Delay: '<S360>/Delay'

              memcpy(&APF_CTL_VIS_Obs_2023a_B.IC_e[0],
                     &APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_e[0], 36U * sizeof
                     (real_T));
            }

            // End of InitialCondition: '<S360>/IC'

            // Delay: '<S360>/Delay3'
            APF_CTL_VIS_Obs_2023a_B.Delay3_f =
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_o;

            // Delay: '<S360>/Delay2'
            APF_CTL_VIS_Obs_2023a_B.Delay2_b =
              APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_h;
          }

          // MATLAB Function: '<S360>/MATLAB Function2' incorporates:
          //   Constant: '<S360>/Constant'
          //   DataStoreWrite: '<S350>/Data Store Write4'
          //   Delay: '<S360>/Delay1'
          //   InitialCondition: '<S360>/IC'
          //   Reshape: '<S360>/Reshape4'

          APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
          APF_CTL_VIS_Obs_2023a_B.k_l = 0;
          exitg1 = false;
          while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.k_l < 6)) {
            if (!(APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.k_l] ==
                  0.0)) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              exitg1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_l++;
            }
          }

          guard1 = false;
          if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            guard1 = true;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
            for (APF_CTL_VIS_Obs_2023a_B.k_l = 0; APF_CTL_VIS_Obs_2023a_B.k_l <
                 6; APF_CTL_VIS_Obs_2023a_B.k_l++) {
              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.k_l]);
              }
            }

            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              guard1 = true;
            } else {
              APF_CTL_VIS_Obs_2023a_B.k_l = 0;
              memset(&APF_CTL_VIS_Obs_2023a_B.X_Cal[0], 0, 78U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   36; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.lamda_Blue + 6.0) *
                  APF_CTL_VIS_Obs_2023a_B.IC_e[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              APF_CTL_VIS_Obs_2023a_eig(APF_CTL_VIS_Obs_2023a_B.b_D,
                APF_CTL_VIS_Obs_2023a_B.b_x);
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                APF_CTL_VIS_Obs_2023a_B.c_x_h[APF_CTL_VIS_Obs_2023a_B.i] =
                  (APF_CTL_VIS_Obs_2023a_B.b_x[APF_CTL_VIS_Obs_2023a_B.i].re <=
                   0.0);
              }

              APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              APF_CTL_VIS_Obs_2023a_B.i_m = 0;
              exitg1 = false;
              while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i_m < 6)) {
                if (APF_CTL_VIS_Obs_2023a_B.c_x_h[APF_CTL_VIS_Obs_2023a_B.i_m])
                {
                  APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
                  exitg1 = true;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.i_m++;
                }
              }

              if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                memcpy(&APF_CTL_VIS_Obs_2023a_B.increment[0],
                       &APF_CTL_VIS_Obs_2023a_B.b_D[0], 36U * sizeof(real_T));
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.d_j = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                    APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.d_j] =
                      (APF_CTL_VIS_Obs_2023a_B.b_D[6 * APF_CTL_VIS_Obs_2023a_B.i
                       + APF_CTL_VIS_Obs_2023a_B.i_m] +
                       APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.d_j])
                      * 0.5;
                  }
                }

                if (APF_CTL_VIS_Obs_2023a_P.method == 1.0) {
                  APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                        APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.i_m];
                      if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) || rtIsNaN
                          (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW)) {
                        APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
                      }
                    }
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                    APF_CTL_VIS_Obs_2023a_svd_p(APF_CTL_VIS_Obs_2023a_B.b_B,
                      APF_CTL_VIS_Obs_2023a_B.increment,
                      APF_CTL_VIS_Obs_2023a_B.s, APF_CTL_VIS_Obs_2023a_B.b_D);
                  } else {
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        (rtNaN);
                    }
                  }

                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m] *
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i];
                      }

                      APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                        APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                        =
                        (APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                         + APF_CTL_VIS_Obs_2023a_B.Sum6_gv) / 2.0;
                    }
                  }
                } else if (APF_CTL_VIS_Obs_2023a_P.method == 2.0) {
                  APF_CTL_VIS_Obs_2023a_eig_m(APF_CTL_VIS_Obs_2023a_B.b_B,
                    APF_CTL_VIS_Obs_2023a_B.V, APF_CTL_VIS_Obs_2023a_B.D);
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
                      APF_CTL_VIS_Obs_2023a_B.D[APF_CTL_VIS_Obs_2023a_B.i_m].re;
                    if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv >= 0.0) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] =
                        0.0;
                    }
                  }

                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                       APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                       APF_CTL_VIS_Obs_2023a_B.i_m++) {
                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                          APF_CTL_VIS_Obs_2023a_B.V[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m].re *
                          APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                          APF_CTL_VIS_Obs_2023a_B.i +
                          APF_CTL_VIS_Obs_2023a_B.d_j];
                      }

                      APF_CTL_VIS_Obs_2023a_B.V_p[APF_CTL_VIS_Obs_2023a_B.i_m +
                        6 * APF_CTL_VIS_Obs_2023a_B.i] =
                        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                    }

                    for (APF_CTL_VIS_Obs_2023a_B.i = 0;
                         APF_CTL_VIS_Obs_2023a_B.i < 6;
                         APF_CTL_VIS_Obs_2023a_B.i++) {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                      for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                           APF_CTL_VIS_Obs_2023a_B.d_j < 6;
                           APF_CTL_VIS_Obs_2023a_B.d_j++) {
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                          APF_CTL_VIS_Obs_2023a_B.V_p[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i_m] *
                          APF_CTL_VIS_Obs_2023a_B.V[6 *
                          APF_CTL_VIS_Obs_2023a_B.d_j +
                          APF_CTL_VIS_Obs_2023a_B.i].re;
                      }

                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m
                        + 6 * APF_CTL_VIS_Obs_2023a_B.i] =
                        APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                    }
                  }
                }

                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.d_j = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                    APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.d_j] =
                      (APF_CTL_VIS_Obs_2023a_B.increment[6 *
                       APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m]
                       + APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.d_j])
                      * 0.5;
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.i = 1;
                APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                exitg1 = false;
                while ((!exitg1) && (APF_CTL_VIS_Obs_2023a_B.i != 0)) {
                  memcpy(&APF_CTL_VIS_Obs_2023a_B.increment[0],
                         &APF_CTL_VIS_Obs_2023a_B.b_D[0], 36U * sizeof(real_T));
                  APF_CTL_VIS_Obs_2023a_chol(APF_CTL_VIS_Obs_2023a_B.increment,
                    &APF_CTL_VIS_Obs_2023a_B.i, &APF_CTL_VIS_Obs_2023a_B.i_m);
                  APF_CTL_VIS_Obs_2023a_B.d_j++;
                  if (APF_CTL_VIS_Obs_2023a_B.i != 0) {
                    APF_CTL_VIS_Obs_2023a_eig(APF_CTL_VIS_Obs_2023a_B.b_D,
                      APF_CTL_VIS_Obs_2023a_B.b_x);
                    APF_CTL_VIS_Obs_2023a_B.eig_min =
                      APF_CTL_VIS_Obs_2023a_minimum(APF_CTL_VIS_Obs_2023a_B.b_x);
                    if (APF_CTL_VIS_Obs_2023a_B.d_j <= 500) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = static_cast<real_T>
                        (APF_CTL_VIS_Obs_2023a_B.d_j *
                         APF_CTL_VIS_Obs_2023a_B.d_j) *
                        -APF_CTL_VIS_Obs_2023a_B.eig_min.re +
                        APF_CTL_VIS_Obs_2023a_eps
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re);
                      for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                           APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                           APF_CTL_VIS_Obs_2023a_B.i_m++) {
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m]
                          = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW *
                          static_cast<real_T>(c_b[APF_CTL_VIS_Obs_2023a_B.i_m]);
                      }
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.Sum6_gv = (static_cast<real_T>
                        (APF_CTL_VIS_Obs_2023a_B.d_j *
                         APF_CTL_VIS_Obs_2023a_B.d_j) * fabs
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re) +
                        APF_CTL_VIS_Obs_2023a_eps
                        (APF_CTL_VIS_Obs_2023a_B.eig_min.re)) * exp((
                        static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.d_j) - 500.0)
                        * 0.1);
                      for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                           APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                           APF_CTL_VIS_Obs_2023a_B.i_m++) {
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m]
                          = APF_CTL_VIS_Obs_2023a_B.Sum6_gv * static_cast<real_T>
                          (c_b[APF_CTL_VIS_Obs_2023a_B.i_m]);
                      }
                    }

                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m < 36;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] +=
                        APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.i_m];
                    }
                  }

                  if (APF_CTL_VIS_Obs_2023a_B.d_j > 1000) {
                    exitg1 = true;
                  }
                }
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.increment[0], 0, 36U * sizeof
                     (real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                  APF_CTL_VIS_Obs_2023a_B.loop_ub = -1;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.loop_ub = APF_CTL_VIS_Obs_2023a_B.i -
                    1;
                }

                APF_CTL_VIS_Obs_2023a_B.d_x_size[0] = 1;
                APF_CTL_VIS_Obs_2023a_B.d_x_size[1] =
                  APF_CTL_VIS_Obs_2023a_B.loop_ub + 1;
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m <=
                     APF_CTL_VIS_Obs_2023a_B.loop_ub;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                    APF_CTL_VIS_Obs_2023a_B.increment[6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i];
                  APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW *
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }

                APF_CTL_VIS_Obs_2023a_B.d_j = APF_CTL_VIS_Obs_2023a_B.loop_ub +
                  1;
                if (APF_CTL_VIS_Obs_2023a_B.loop_ub + 1 == 0) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                    APF_CTL_VIS_Obs_2023a_B.d_x_data[0];
                  for (APF_CTL_VIS_Obs_2023a_B.i_m = 2;
                       APF_CTL_VIS_Obs_2023a_B.i_m <=
                       APF_CTL_VIS_Obs_2023a_B.d_j; APF_CTL_VIS_Obs_2023a_B.i_m
                       ++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m
                      - 1];
                  }
                }

                APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                  APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                  = sqrt
                  (APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                   - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW);
                APF_CTL_VIS_Obs_2023a_B.d_g = 4 - APF_CTL_VIS_Obs_2023a_B.i;
                if (4 - APF_CTL_VIS_Obs_2023a_B.i >= 0) {
                  if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                    APF_CTL_VIS_Obs_2023a_B.P_K_tmp = -1;
                    APF_CTL_VIS_Obs_2023a_B.vcol = -1;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.P_K_tmp = APF_CTL_VIS_Obs_2023a_B.i
                      - 1;
                    APF_CTL_VIS_Obs_2023a_B.vcol = APF_CTL_VIS_Obs_2023a_B.i - 1;
                  }
                }

                for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                     APF_CTL_VIS_Obs_2023a_B.d_j <= APF_CTL_VIS_Obs_2023a_B.d_g;
                     APF_CTL_VIS_Obs_2023a_B.d_j++) {
                  APF_CTL_VIS_Obs_2023a_B.b_j = (APF_CTL_VIS_Obs_2023a_B.i +
                    APF_CTL_VIS_Obs_2023a_B.d_j) + 1;
                  if (APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1 ==
                      APF_CTL_VIS_Obs_2023a_B.vcol + 1) {
                    if (APF_CTL_VIS_Obs_2023a_B.i < 1) {
                      APF_CTL_VIS_Obs_2023a_B.loop_ub = -1;
                    } else {
                      APF_CTL_VIS_Obs_2023a_B.loop_ub =
                        APF_CTL_VIS_Obs_2023a_B.i - 1;
                    }

                    APF_CTL_VIS_Obs_2023a_B.d_x_size[0] = 1;
                    APF_CTL_VIS_Obs_2023a_B.d_x_size[1] =
                      APF_CTL_VIS_Obs_2023a_B.loop_ub + 1;
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                         APF_CTL_VIS_Obs_2023a_B.i_m <=
                         APF_CTL_VIS_Obs_2023a_B.loop_ub;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m]
                        = APF_CTL_VIS_Obs_2023a_B.increment[6 *
                        APF_CTL_VIS_Obs_2023a_B.i_m +
                        APF_CTL_VIS_Obs_2023a_B.b_j] *
                        APF_CTL_VIS_Obs_2023a_B.increment[6 *
                        APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i];
                    }
                  } else {
                    APF_CTL_VIS_Ob_binary_expand_op
                      (APF_CTL_VIS_Obs_2023a_B.d_x_data,
                       APF_CTL_VIS_Obs_2023a_B.d_x_size,
                       APF_CTL_VIS_Obs_2023a_B.increment,
                       APF_CTL_VIS_Obs_2023a_B.b_j, APF_CTL_VIS_Obs_2023a_B.i);
                  }

                  APF_CTL_VIS_Obs_2023a_B.loop_ub =
                    APF_CTL_VIS_Obs_2023a_B.d_x_size[1];
                  if (APF_CTL_VIS_Obs_2023a_B.d_x_size[1] == 0) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                      APF_CTL_VIS_Obs_2023a_B.d_x_data[0];
                    for (APF_CTL_VIS_Obs_2023a_B.i_m = 2;
                         APF_CTL_VIS_Obs_2023a_B.i_m <=
                         APF_CTL_VIS_Obs_2023a_B.loop_ub;
                         APF_CTL_VIS_Obs_2023a_B.i_m++) {
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                        APF_CTL_VIS_Obs_2023a_B.d_x_data[APF_CTL_VIS_Obs_2023a_B.i_m
                        - 1];
                    }
                  }

                  APF_CTL_VIS_Obs_2023a_B.b_j += 6 * APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j]
                    = (APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.b_j]
                       - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) /
                    APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] = 0.0;
                }

                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i] =
                  APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    (APF_CTL_VIS_Obs_2023a_B.i + 1)] =
                    APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.i_m]
                    + APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 6;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i] = 0.0;
                }

                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                  APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    (APF_CTL_VIS_Obs_2023a_B.b_xoffset + 7)] =
                    APF_CTL_VIS_Obs_2023a_B.Delay1_f[APF_CTL_VIS_Obs_2023a_B.i_m]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   9; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i_m]
                  = d_a[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.b_j = (APF_CTL_VIS_Obs_2023a_B.i_m + 3) *
                  6;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j] =
                  static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp) *
                  APF_CTL_VIS_Obs_2023a_P.dt;
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 1]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j +
                  1] = static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp)
                  * APF_CTL_VIS_Obs_2023a_P.dt;
                APF_CTL_VIS_Obs_2023a_B.increment_tmp = static_cast<int32_T>
                  (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 2]);
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2] =
                  APF_CTL_VIS_Obs_2023a_B.increment_tmp;
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.b_j +
                  2] = static_cast<real_T>(APF_CTL_VIS_Obs_2023a_B.increment_tmp)
                  * APF_CTL_VIS_Obs_2023a_P.dt;
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 3] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 4] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1];
                APF_CTL_VIS_Obs_2023a_B.increment[6 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 5] = l[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2];
              }

              APF_CTL_VIS_Obs_2023a_B.Derivative2 = APF_CTL_VIS_Obs_2023a_P.dt *
                APF_CTL_VIS_Obs_2023a_P.dt;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[0] = 1.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[1] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[2] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[3] = 1.0;
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 2.0 * APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[2] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[8] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[14] = APF_CTL_VIS_Obs_2023a_P.dt *
                APF_CTL_VIS_Obs_2023a_P.dt / (2.0 * APF_CTL_VIS_Obs_2023a_P.J);
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                APF_CTL_VIS_Obs_2023a_B.Derivative2 /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.B[0] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = 0.0 *
                APF_CTL_VIS_Obs_2023a_B.Derivative2 /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.B[1] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.B[12] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_P.dt / APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[3] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0 *
                APF_CTL_VIS_Obs_2023a_P.dt / APF_CTL_VIS_Obs_2023a_P.m;
              APF_CTL_VIS_Obs_2023a_B.B[4] =
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
              APF_CTL_VIS_Obs_2023a_B.B[15] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[6] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.B[7] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.B[13] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[9] =
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
              APF_CTL_VIS_Obs_2023a_B.B[10] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.B[16] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[5] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[11] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.B[17] = APF_CTL_VIS_Obs_2023a_P.dt /
                APF_CTL_VIS_Obs_2023a_P.J;
              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.increment[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.X_Cal[6 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.i_m +
                    6 * APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    ((APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                      * APF_CTL_VIS_Obs_2023a_P.Constant_Value_g[1] +
                      APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_P.Constant_Value_g[0]) +
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 12]
                     * APF_CTL_VIS_Obs_2023a_P.Constant_Value_g[2]) +
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 1.0 /
                ((APF_CTL_VIS_Obs_2023a_P.lamda_Blue + 6.0) * 2.0);
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
                APF_CTL_VIS_Obs_2023a_P.lamda_Blue /
                (APF_CTL_VIS_Obs_2023a_P.lamda_Blue + 6.0);
              APF_CTL_VIS_Obs_2023a_B.v_d[0] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.b_v[0] = (1.0 -
                APF_CTL_VIS_Obs_2023a_P.alpha_Blue *
                APF_CTL_VIS_Obs_2023a_P.alpha_Blue) +
                (APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
                 APF_CTL_VIS_Obs_2023a_P.beta_Blue);
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.v_d[APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                APF_CTL_VIS_Obs_2023a_B.b_v[APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.w_m[0], 0, 169U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.w_m[APF_CTL_VIS_Obs_2023a_B.i_m + 13 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.v_d[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              memset(&APF_CTL_VIS_Obs_2023a_B.w_c[0], 0, 169U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                APF_CTL_VIS_Obs_2023a_B.w_c[APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                  13 * APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                  APF_CTL_VIS_Obs_2023a_B.b_v[APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 6;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       13; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.w_m[13 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.xoffset = (APF_CTL_VIS_Obs_2023a_B.i_m +
                  1) * 6;
                for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                     APF_CTL_VIS_Obs_2023a_B.b_xoffset < 6;
                     APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.b_xoffset] +=
                    APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.xoffset
                    + APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.e_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.e_x[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.e_x_m[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.e_x_m[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.e_x[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.increment_tmp = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                    =
                    APF_CTL_VIS_Obs_2023a_P.Q_Blue[APF_CTL_VIS_Obs_2023a_B.increment_tmp]
                    + APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.b_xoffset = 0;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset < 13;
                   APF_CTL_VIS_Obs_2023a_B.b_xoffset++) {
                for (APF_CTL_VIS_Obs_2023a_B.i_m = 0;
                     APF_CTL_VIS_Obs_2023a_B.i_m < 3;
                     APF_CTL_VIS_Obs_2023a_B.i_m++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                       6; APF_CTL_VIS_Obs_2023a_B.i++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_P.H[3 * APF_CTL_VIS_Obs_2023a_B.i +
                      APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                      APF_CTL_VIS_Obs_2023a_B.i];
                  }

                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 3 *
                    APF_CTL_VIS_Obs_2023a_B.b_xoffset] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                      APF_CTL_VIS_Obs_2023a_B.w_m[13 *
                      APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i + 3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.f_x[0];
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.f_x[1];
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.f_x[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   12; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = (APF_CTL_VIS_Obs_2023a_B.i_m
                  + 1) * 3;
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset];
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset
                  + 1];
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                  APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.b_xoffset
                  + 2];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m]
                  = APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] -
                  APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1;
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  - APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 2;
                APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                  - APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              }

              memcpy(&APF_CTL_VIS_Obs_2023a_B.Z_Cal[0],
                     &APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[0], 39U * sizeof(real_T));
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m + 13] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m
                  + 1];
                APF_CTL_VIS_Obs_2023a_B.f_x[APF_CTL_VIS_Obs_2023a_B.i_m + 26] =
                  APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 * APF_CTL_VIS_Obs_2023a_B.i_m
                  + 2];
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[APF_CTL_VIS_Obs_2023a_B.i_m +
                    3 * APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                      APF_CTL_VIS_Obs_2023a_B.Z_Cal_b[3 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.f_x[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 3 *
                    APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_P.R_Blue[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    + APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   13; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.b_xoffset = 6 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + APF_CTL_VIS_Obs_2023a_B.i;
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    =
                    APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.b_xoffset]
                    - APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i];
                }
              }

              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     13; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal_k1[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.w_c[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = 0.0;
                  for (APF_CTL_VIS_Obs_2023a_B.d_j = 0;
                       APF_CTL_VIS_Obs_2023a_B.d_j < 13;
                       APF_CTL_VIS_Obs_2023a_B.d_j++) {
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +=
                      APF_CTL_VIS_Obs_2023a_B.X_Cal[6 *
                      APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m]
                      * APF_CTL_VIS_Obs_2023a_B.f_x[13 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.d_j];
                  }

                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                    6 * APF_CTL_VIS_Obs_2023a_B.i] =
                    APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
                }

                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                  6];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m +
                  12];
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                    APF_CTL_VIS_Obs_2023a_B.i] =
                    (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i
                     + 3] *
                     APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
                     APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
                     APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i])
                    + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[APF_CTL_VIS_Obs_2023a_B.i
                    + 6] * APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0]);
              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1]);
              }

              if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2]);
              }

              if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = 1000.0;
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = 1000.0;
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = 1000.0;
              } else {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 =
                  APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 =
                  APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 =
                  APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];
              }

              if (APF_CTL_VIS_Obs_2023a_B.Delay2_b == 1.0) {
                APF_CTL_VIS_Obs_2023a_B.Reject_Sum =
                  APF_CTL_VIS_Obs_2023a_B.Delay3_f + 1.0;
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  (APF_CTL_VIS_Obs_2023a_B.Delay3_f + 1.0) *
                  APF_CTL_VIS_Obs_2023a_P.thresh_Factor_Blue +
                  APF_CTL_VIS_Obs_2023a_P.thresh_Blue;
              } else {
                APF_CTL_VIS_Obs_2023a_B.Reject_Sum = 0.0;
                APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
                  APF_CTL_VIS_Obs_2023a_P.thresh_Blue;
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 -
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 -
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 -
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Sum_b[2] =
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = 0.0;
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +=
                  ((APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m + 1] *
                    APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
                    APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i_m] *
                    APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) +
                   APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                   APF_CTL_VIS_Obs_2023a_B.i_m + 2] *
                   APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) *
                  APF_CTL_VIS_Obs_2023a_B.Sum_b[APF_CTL_VIS_Obs_2023a_B.i_m];
              }

              APF_CTL_VIS_Obs_2023a_B.b_xoffset =
                !(APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 <
                  APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h);
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = (APF_CTL_VIS_Obs_2023a_B.b_xoffset ==
                0);
              APF_CTL_VIS_Obs_2023a_B.Z_k[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.Z_k[1] = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
              APF_CTL_VIS_Obs_2023a_B.Z_k[2] = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.Reject_j =
                (APF_CTL_VIS_Obs_2023a_B.b_xoffset == 0);
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   6; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     3; APF_CTL_VIS_Obs_2023a_B.i++) {
                  APF_CTL_VIS_Obs_2023a_B.d_j = 6 * APF_CTL_VIS_Obs_2023a_B.i +
                    APF_CTL_VIS_Obs_2023a_B.i_m;
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                    APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.d_j] *
                    APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i];
                  APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.d_j] =
                    (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                     APF_CTL_VIS_Obs_2023a_B.i + 1] *
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                     + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3
                     * APF_CTL_VIS_Obs_2023a_B.i] *
                     APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m]) +
                    APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                    APF_CTL_VIS_Obs_2023a_B.i + 2] *
                    APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i_m + 12];
                }

                if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
                  APF_CTL_VIS_Obs_2023a_B.States[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] +
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                } else {
                  APF_CTL_VIS_Obs_2023a_B.States[APF_CTL_VIS_Obs_2023a_B.i_m] =
                    APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
                }

                for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i <
                     6; APF_CTL_VIS_Obs_2023a_B.i++) {
                  if (APF_CTL_VIS_Obs_2023a_B.Reject_j) {
                    APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m;
                    APF_CTL_VIS_Obs_2023a_B.P_K[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
                      =
                      APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
                      - ((APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m
                          + 6] *
                          APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i +
                          6] +
                          APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m]
                          * APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i])
                         + APF_CTL_VIS_Obs_2023a_B.X_Cal_l[APF_CTL_VIS_Obs_2023a_B.i_m
                         + 12] *
                         APF_CTL_VIS_Obs_2023a_B.B[APF_CTL_VIS_Obs_2023a_B.i +
                         12]);
                  } else {
                    APF_CTL_VIS_Obs_2023a_B.P_K[APF_CTL_VIS_Obs_2023a_B.i_m + 6 *
                      APF_CTL_VIS_Obs_2023a_B.i] =
                      APF_CTL_VIS_Obs_2023a_B.increment[6 *
                      APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m];
                  }
                }
              }
            }
          }

          if (guard1) {
            APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
              (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0]);
            if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1]);
            }

            if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.rEQ0 = rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2]);
            }

            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                   APF_CTL_VIS_Obs_2023a_B.i++) {
                APF_CTL_VIS_Obs_2023a_B.States[APF_CTL_VIS_Obs_2023a_B.i] =
                  (rtNaN);
              }

              APF_CTL_VIS_Obs_2023a_B.k_l = 1;
              memcpy(&APF_CTL_VIS_Obs_2023a_B.P_K[0],
                     &APF_CTL_VIS_Obs_2023a_B.IC_e[0], 36U * sizeof(real_T));
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.States[0] =
                APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];
              APF_CTL_VIS_Obs_2023a_B.States[3] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.States[1] =
                APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];
              APF_CTL_VIS_Obs_2023a_B.States[4] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.States[2] =
                APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];
              APF_CTL_VIS_Obs_2023a_B.States[5] = 0.0;
              APF_CTL_VIS_Obs_2023a_B.k_l = 0;
              memcpy(&APF_CTL_VIS_Obs_2023a_B.P_K[0],
                     &APF_CTL_VIS_Obs_2023a_B.IC_e[0], 36U * sizeof(real_T));
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum = 0.0;
            }
          }

          APF_CTL_VIS_Obs_2023a_DW.Blue_Detection = APF_CTL_VIS_Obs_2023a_B.k_l;

          // End of MATLAB Function: '<S360>/MATLAB Function2'

          // If: '<S350>/If' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'
          //   Delay: '<S387>/Delay3'
          //   Delay: '<S389>/Delay1'
          //   Delay: '<S393>/Delay3'
          //   MATLAB Function: '<S386>/MATLAB Function1'
          //   MATLAB Function: '<S387>/MATLAB Function1'
          //   MATLAB Function: '<S389>/MATLAB Function1'
          //   MATLAB Function: '<S393>/MATLAB Function1'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 3.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S350>/APF' incorporates:
            //   ActionPort: '<S378>/Action Port'

            // SignalConversion generated from: '<S384>/ SFunction ' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   DataStoreRead: '<S351>/Data Store Read4'
            //   DataStoreRead: '<S351>/Data Store Read5'
            //   DataStoreRead: '<S351>/Data Store Read6'
            //   MATLAB Function: '<S382>/MATLAB Function'

            APF_CTL_VIS_Obs_2023a_B.s[0] = APF_CTL_VIS_Obs_2023a_DW.RED_Px;
            APF_CTL_VIS_Obs_2023a_B.s[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Py;
            APF_CTL_VIS_Obs_2023a_B.s[2] =
              APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l;
            APF_CTL_VIS_Obs_2023a_B.s[3] = APF_CTL_VIS_Obs_2023a_DW.RED_Vx;
            APF_CTL_VIS_Obs_2023a_B.s[4] = APF_CTL_VIS_Obs_2023a_DW.RED_Vy;
            APF_CTL_VIS_Obs_2023a_B.s[5] = APF_CTL_VIS_Obs_2023a_DW.RED_RzD;

            // MATLAB Function: '<S382>/MATLAB Function' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   DataStoreWrite: '<S350>/Data Store Write4'

            if (APF_CTL_VIS_Obs_2023a_DW.Blue_Detection == 0.0) {
              APF_CTL_VIS_Obs_2023a_B.r_ct[0] = APF_CTL_VIS_Obs_2023a_DW.RED_Px
                - APF_CTL_VIS_Obs_2023a_B.States_a[0];
              APF_CTL_VIS_Obs_2023a_B.r_ct[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Py
                - APF_CTL_VIS_Obs_2023a_B.States_a[1];
              APF_CTL_VIS_Obs_2023a_B.r_ct[2] =
                APF_CTL_VIS_Obs_2023a_B.States_a[2] -
                APF_CTL_VIS_Obs_2023a_B.States_a[2];
              APF_CTL_VIS_Obs_2023a_B.r_co[0] = APF_CTL_VIS_Obs_2023a_DW.RED_Px
                - APF_CTL_VIS_Obs_2023a_B.States[0];
              APF_CTL_VIS_Obs_2023a_B.r_co[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Py
                - APF_CTL_VIS_Obs_2023a_B.States[1];
              APF_CTL_VIS_Obs_2023a_B.r_co[2] = APF_CTL_VIS_Obs_2023a_B.States[2]
                - APF_CTL_VIS_Obs_2023a_B.States[2];
              APF_CTL_VIS_Obs_2023a_Cardioid(APF_CTL_VIS_Obs_2023a_B.s,
                APF_CTL_VIS_Obs_2023a_B.States_a, APF_CTL_VIS_Obs_2023a_P.shape,
                &APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0,
                &APF_CTL_VIS_Obs_2023a_B.d);
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_norm
                (APF_CTL_VIS_Obs_2023a_B.r_ct);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t71 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t16 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[2] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = -APF_CTL_VIS_Obs_2023a_B.r_co
                [2];
              APF_CTL_VIS_Obs_2023a_B.t37 = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = 0.0;
              APF_CTL_VIS_Obs_2023a_B.dv[0] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [0] - APF_CTL_VIS_Obs_2023a_P.r_hold * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2])) +
                APF_CTL_VIS_Obs_2023a_P.r_off * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.dv[1] = (APF_CTL_VIS_Obs_2023a_P.r_off *
                sin(APF_CTL_VIS_Obs_2023a_B.States_a[2]) +
                APF_CTL_VIS_Obs_2023a_B.States_a[1]) +
                APF_CTL_VIS_Obs_2023a_P.r_hold * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.dv[2] = APF_CTL_VIS_Obs_2023a_B.States_a[2]
                + 3.1415926535897931;
              APF_CTL_VIS_Obs_2023a_B.dv[3] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [3] - APF_CTL_VIS_Obs_2023a_P.r_hold * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5]) +
                APF_CTL_VIS_Obs_2023a_P.r_off * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[4] = (APF_CTL_VIS_Obs_2023a_P.r_hold *
                cos(APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5] +
                APF_CTL_VIS_Obs_2023a_B.States_a[4]) +
                APF_CTL_VIS_Obs_2023a_P.r_off * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[5] = APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                -APF_CTL_VIS_Obs_2023a_B.r_co[1];
              APF_CTL_VIS_Obs_2023a_B.Derivative3 =
                -APF_CTL_VIS_Obs_2023a_B.r_co[0];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1;
                APF_CTL_VIS_Obs_2023a_B.vcol = 3 * APF_CTL_VIS_Obs_2023a_B.i_m +
                  2;
                APF_CTL_VIS_Obs_2023a_B.t37 += ((APF_CTL_VIS_Obs_2023a_P.P_b[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] * APF_CTL_VIS_Obs_2023a_B.t71 +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp] *
                  APF_CTL_VIS_Obs_2023a_B.t16) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.vcol] *
                  -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1) *
                  APF_CTL_VIS_Obs_2023a_B.r_cb[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +=
                  ((APF_CTL_VIS_Obs_2023a_P.Nmat[3 * APF_CTL_VIS_Obs_2023a_B.i_m]
                    * APF_CTL_VIS_Obs_2023a_B.Derivative3 +
                    APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
                    * APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) +
                   APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.vcol] *
                   APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) *
                  APF_CTL_VIS_Obs_2023a_B.r_co[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.Sum_b[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] -
                  APF_CTL_VIS_Obs_2023a_B.dv[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.dv1[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m + 3]
                   * APF_CTL_VIS_Obs_2023a_B.r_co[1] +
                   APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_co[0]) +
                  APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.r_co[2];
                APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 3] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[1] +
                   APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[0]) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              }

              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 2.0 * APF_CTL_VIS_Obs_2023a_P.kr
                * exp(APF_CTL_VIS_Obs_2023a_B.t37);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = 2.0 *
                APF_CTL_VIS_Obs_2023a_P.psi / APF_CTL_VIS_Obs_2023a_P.sigma *
                exp(APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o /
                    APF_CTL_VIS_Obs_2023a_P.sigma);
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Sum_b
                [1];
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.Sum_b
                [0];
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.Sum_b[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[APF_CTL_VIS_Obs_2023a_B.i_m]
                  = (((APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m +
                       3] * APF_CTL_VIS_Obs_2023a_P.ka *
                       APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +
                       APF_CTL_VIS_Obs_2023a_P.ka *
                       APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m] *
                       APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o) +
                      APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m +
                      6] * APF_CTL_VIS_Obs_2023a_P.ka *
                      APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) -
                     APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
                     APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m]) -
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
                  APF_CTL_VIS_Obs_2023a_B.dv1[APF_CTL_VIS_Obs_2023a_B.i_m];
              }
            } else {
              APF_CTL_VIS_Obs_2023a_B.r_ct[0] = APF_CTL_VIS_Obs_2023a_DW.RED_Px
                - APF_CTL_VIS_Obs_2023a_B.States_a[0];
              APF_CTL_VIS_Obs_2023a_B.r_ct[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Py
                - APF_CTL_VIS_Obs_2023a_B.States_a[1];
              APF_CTL_VIS_Obs_2023a_B.r_ct[2] =
                APF_CTL_VIS_Obs_2023a_B.States_a[2] -
                APF_CTL_VIS_Obs_2023a_B.States_a[2];
              APF_CTL_VIS_Obs_2023a_Cardioid(APF_CTL_VIS_Obs_2023a_B.s,
                APF_CTL_VIS_Obs_2023a_B.States_a, APF_CTL_VIS_Obs_2023a_P.shape,
                &APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0,
                &APF_CTL_VIS_Obs_2023a_B.d);
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_norm
                (APF_CTL_VIS_Obs_2023a_B.r_ct);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.r_ct[0] =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.r_ct[1] =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] /
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
              APF_CTL_VIS_Obs_2023a_B.r_cb[2] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.dv[0] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [0] - APF_CTL_VIS_Obs_2023a_P.r_hold *
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv) + APF_CTL_VIS_Obs_2023a_P.r_off
                * APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.dv[1] = (APF_CTL_VIS_Obs_2023a_P.r_off *
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv +
                APF_CTL_VIS_Obs_2023a_B.States_a[1]) +
                APF_CTL_VIS_Obs_2023a_P.r_hold *
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.dv[2] = APF_CTL_VIS_Obs_2023a_B.States_a[2]
                + 3.1415926535897931;
              APF_CTL_VIS_Obs_2023a_B.dv[3] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [3] - APF_CTL_VIS_Obs_2023a_P.r_hold *
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
                APF_CTL_VIS_Obs_2023a_B.States_a[5]) +
                APF_CTL_VIS_Obs_2023a_P.r_off * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[4] = (APF_CTL_VIS_Obs_2023a_P.r_hold *
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
                APF_CTL_VIS_Obs_2023a_B.States_a[5] +
                APF_CTL_VIS_Obs_2023a_B.States_a[4]) +
                APF_CTL_VIS_Obs_2023a_P.r_off * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[5] = APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.r_ct[1];
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[0];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +=
                  ((APF_CTL_VIS_Obs_2023a_P.P_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m
                    + 1] * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
                    APF_CTL_VIS_Obs_2023a_P.P_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m]
                    * APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) +
                   APF_CTL_VIS_Obs_2023a_P.P_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m +
                   2] * -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1) *
                  APF_CTL_VIS_Obs_2023a_B.r_cb[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.Sum_b[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m] -
                  APF_CTL_VIS_Obs_2023a_B.dv[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 3] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[1] +
                   APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[0]) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              }

              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 2.0 * APF_CTL_VIS_Obs_2023a_P.kr
                * exp(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW);
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Sum_b
                [1];
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.Sum_b
                [0];
              APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
                APF_CTL_VIS_Obs_2023a_B.Sum_b[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[APF_CTL_VIS_Obs_2023a_B.i_m]
                  = ((APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m +
                      3] * APF_CTL_VIS_Obs_2023a_P.ka *
                      APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +
                      APF_CTL_VIS_Obs_2023a_P.ka *
                      APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m] *
                      APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o) +
                     APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                     * APF_CTL_VIS_Obs_2023a_P.ka *
                     APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0) -
                  APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
                  APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m];
              }
            }

            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_B.Delay_l[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[0];

              // Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[0];

              // Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_B.Delay_l[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[1];

              // Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[1];

              // Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_B.Delay_l[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[2];

              // Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[2];

              // Delay: '<S387>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[0];
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[1];
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[2];
            }

            // MATLAB Function: '<S386>/MATLAB Function1' incorporates:
            //   MATLAB Function: '<S387>/MATLAB Function1'
            //   MATLAB Function: '<S389>/MATLAB Function1'
            //   MATLAB Function: '<S393>/MATLAB Function1'

            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_l[0];
            APF_CTL_VIS_Obs_2023a_B.Eg_n[0] = APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

            // MATLAB Function: '<S386>/MATLAB Function1'
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = sqrt
              (APF_CTL_VIS_Obs_2023a_B.Delay1_i[0] +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) / sqrt
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
            APF_CTL_VIS_Obs_2023a_B.Etheta[0] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
               APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2) +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[0];

            // MATLAB Function: '<S386>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   MATLAB Function: '<S387>/MATLAB Function1'
            //   MATLAB Function: '<S389>/MATLAB Function1'
            //   MATLAB Function: '<S393>/MATLAB Function1'

            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_DW.RED_Px
              - APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_l[1];
            APF_CTL_VIS_Obs_2023a_B.Eg_n[1] = APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

            // MATLAB Function: '<S386>/MATLAB Function1'
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = sqrt
              (APF_CTL_VIS_Obs_2023a_B.Delay1_i[1] +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) / sqrt
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
            APF_CTL_VIS_Obs_2023a_B.Etheta[1] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
               APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2) +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[1];

            // MATLAB Function: '<S386>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   MATLAB Function: '<S387>/MATLAB Function1'
            //   MATLAB Function: '<S389>/MATLAB Function1'
            //   MATLAB Function: '<S393>/MATLAB Function1'

            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py -
              APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;
            APF_CTL_VIS_Obs_2023a_B.Derivative3 =
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              APF_CTL_VIS_Obs_2023a_B.Derivative3 +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_l[2];
            APF_CTL_VIS_Obs_2023a_B.Eg_n[2] = APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

            // MATLAB Function: '<S386>/MATLAB Function1'
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = sqrt
              (APF_CTL_VIS_Obs_2023a_B.Delay1_i[2] +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) / sqrt
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
               APF_CTL_VIS_Obs_2023a_P.adadelta_epsilon) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];
            APF_CTL_VIS_Obs_2023a_B.Etheta[2] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma) *
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
               APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2) +
              APF_CTL_VIS_Obs_2023a_P.adadelta_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay1_i[2];

            // MATLAB Function: '<S387>/MATLAB Function1' incorporates:
            //   Delay: '<S387>/Delay3'
            //   MATLAB Function: '<S386>/MATLAB Function1'

            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[0];
            APF_CTL_VIS_Obs_2023a_B.Gt[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;

            // MATLAB Function: '<S387>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   Delay: '<S387>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = APF_CTL_VIS_Obs_2023a_DW.RED_Px
              - APF_CTL_VIS_Obs_2023a_P.adagrad_eta / sqrt
              (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 +
               APF_CTL_VIS_Obs_2023a_P.adagrad_epsilon) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[1];
            APF_CTL_VIS_Obs_2023a_B.Gt[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;

            // MATLAB Function: '<S387>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   Delay: '<S387>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = APF_CTL_VIS_Obs_2023a_DW.RED_Py
              - APF_CTL_VIS_Obs_2023a_P.adagrad_eta / sqrt
              (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 +
               APF_CTL_VIS_Obs_2023a_P.adagrad_epsilon) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.Derivative3 +
              APF_CTL_VIS_Obs_2023a_B.Delay3_m[2];
            APF_CTL_VIS_Obs_2023a_B.Gt[2] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[0];

              // Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[0];

              // Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[1];

              // Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[1];

              // Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[2];

              // Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[2];
            }

            // MATLAB Function: '<S388>/MATLAB Function1' incorporates:
            //   Clock: '<S388>/Clock'
            //   Constant: '<S388>/Constant'
            //   Delay: '<S387>/Delay3'
            //   Delay: '<S388>/Delay1'
            //   Delay: '<S388>/Delay3'
            //   MATLAB Function: '<S387>/MATLAB Function1'
            //   Sum: '<S388>/Sum'

            APF_CTL_VIS_Obs_2023a_B.Derivative2 =
              APF_CTL_VIS_Obs_202_rt_powd_snf
              (APF_CTL_VIS_Obs_2023a_P.adamax_beta_1,
               (APF_CTL_VIS_Obs_2023a_M->Timing.t[0] -
                APF_CTL_VIS_Obs_2023a_P.Phase2_End) / 0.1 + 1.0);
            APF_CTL_VIS_Obs_2023a_B.m_b[0] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] +
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[0];
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 = fabs
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0]);
            if ((APF_CTL_VIS_Obs_2023a_B.Sum6_gv >=
                 APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) || rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1)) {
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
            }

            APF_CTL_VIS_Obs_2023a_B.Sum_b[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;
            APF_CTL_VIS_Obs_2023a_B.u_t[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;
            APF_CTL_VIS_Obs_2023a_B.m_b[1] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] +
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[1];
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[1];
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 = fabs
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1]);
            if ((APF_CTL_VIS_Obs_2023a_B.Sum6_gv >=
                 APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) || rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1)) {
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
            }

            APF_CTL_VIS_Obs_2023a_B.Sum_b[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;
            APF_CTL_VIS_Obs_2023a_B.u_t[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;
            APF_CTL_VIS_Obs_2023a_B.m_b[2] = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] +
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_i[2];
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
              APF_CTL_VIS_Obs_2023a_P.adamax_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_m[2];
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 = fabs
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2]);
            if ((APF_CTL_VIS_Obs_2023a_B.Sum6_gv >=
                 APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) || rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1)) {
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
            }

            APF_CTL_VIS_Obs_2023a_B.u_t[2] =
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[0];

              // Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[0];

              // Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[1];

              // Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[1];

              // Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[2];

              // Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[2];

              // Delay: '<S391>/Delay'
              APF_CTL_VIS_Obs_2023a_B.Delay_n[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[0];
              APF_CTL_VIS_Obs_2023a_B.Delay_n[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[1];
              APF_CTL_VIS_Obs_2023a_B.Delay_n[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[2];
            }

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   Clock: '<S389>/Clock'
            //   Delay: '<S389>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_M->Timing.t
              [0] / 0.1 + 1.0;
            APF_CTL_VIS_Obs_2023a_B.link2_com_y =
              APF_CTL_VIS_Obs_202_rt_powd_snf
              (APF_CTL_VIS_Obs_2023a_P.adam_beta_2,
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv);
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 1.0 -
              APF_CTL_VIS_Obs_202_rt_powd_snf
              (APF_CTL_VIS_Obs_2023a_P.adam_beta_1,
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv);
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[0];

            // End of Outputs for SubSystem: '<S350>/APF'
            APF_CTL_VIS_Obs_2023a_B.m[0] = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // Outputs for IfAction SubSystem: '<S350>/APF' incorporates:
            //   ActionPort: '<S378>/Action Port'

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   Delay: '<S389>/Delay1'

            APF_CTL_VIS_Obs_2023a_B.t36 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2) *
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[0];
            APF_CTL_VIS_Obs_2023a_B.v[0] = APF_CTL_VIS_Obs_2023a_B.t36;

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   Delay: '<S389>/Delay1'
            //   Delay: '<S389>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Px - APF_CTL_VIS_Obs_2023a_P.adam_eta
              / (sqrt(APF_CTL_VIS_Obs_2023a_B.t36 / (1.0 -
                   APF_CTL_VIS_Obs_2023a_B.link2_com_y)) +
                 APF_CTL_VIS_Obs_2023a_P.adam_epsilon) *
              (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 / APF_CTL_VIS_Obs_2023a_B.Sum6_gv);
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[1];

            // End of Outputs for SubSystem: '<S350>/APF'
            APF_CTL_VIS_Obs_2023a_B.m[1] = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // Outputs for IfAction SubSystem: '<S350>/APF' incorporates:
            //   ActionPort: '<S378>/Action Port'

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   Delay: '<S389>/Delay1'

            APF_CTL_VIS_Obs_2023a_B.t36 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2) *
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[1];
            APF_CTL_VIS_Obs_2023a_B.v[1] = APF_CTL_VIS_Obs_2023a_B.t36;

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   Delay: '<S389>/Delay1'
            //   Delay: '<S389>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py - APF_CTL_VIS_Obs_2023a_P.adam_eta
              / (sqrt(APF_CTL_VIS_Obs_2023a_B.t36 / (1.0 -
                   APF_CTL_VIS_Obs_2023a_B.link2_com_y)) +
                 APF_CTL_VIS_Obs_2023a_P.adam_epsilon) *
              (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 / APF_CTL_VIS_Obs_2023a_B.Sum6_gv);
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1) *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_1 *
              APF_CTL_VIS_Obs_2023a_B.Delay3_j[2];

            // End of Outputs for SubSystem: '<S350>/APF'
            APF_CTL_VIS_Obs_2023a_B.m[2] = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // Outputs for IfAction SubSystem: '<S350>/APF' incorporates:
            //   ActionPort: '<S378>/Action Port'

            // MATLAB Function: '<S389>/MATLAB Function1' incorporates:
            //   Delay: '<S389>/Delay1'

            APF_CTL_VIS_Obs_2023a_B.t36 = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2) *
              APF_CTL_VIS_Obs_2023a_B.Derivative3 +
              APF_CTL_VIS_Obs_2023a_P.adam_beta_2 *
              APF_CTL_VIS_Obs_2023a_B.Delay1_o[2];
            APF_CTL_VIS_Obs_2023a_B.v[2] = APF_CTL_VIS_Obs_2023a_B.t36;

            // MATLAB Function: '<S391>/Momentum' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   Delay: '<S389>/Delay1'
            //   MATLAB Function: '<S389>/MATLAB Function1'
            //   SignalConversion generated from: '<S399>/ SFunction '

            APF_CTL_VIS_Obs_2023a_B.Sum3[0] =
              -APF_CTL_VIS_Obs_2023a_P.momentum_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_n[0] -
              APF_CTL_VIS_Obs_2023a_P.momentum_eta *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
            APF_CTL_VIS_Obs_2023a_B.Sum3[1] =
              -APF_CTL_VIS_Obs_2023a_P.momentum_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_n[1] -
              APF_CTL_VIS_Obs_2023a_P.momentum_eta *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
            APF_CTL_VIS_Obs_2023a_B.Sum3[2] =
              -APF_CTL_VIS_Obs_2023a_P.momentum_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_n[2] -
              APF_CTL_VIS_Obs_2023a_P.momentum_eta *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Px + APF_CTL_VIS_Obs_2023a_B.Sum3[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py + APF_CTL_VIS_Obs_2023a_B.Sum3[1];
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 =
              APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l +
              APF_CTL_VIS_Obs_2023a_B.Sum3[2];

            // Sum: '<S391>/Sum3' incorporates:
            //   Constant: '<S391>/Constant'

            APF_CTL_VIS_Obs_2023a_B.Sum3[0] +=
              APF_CTL_VIS_Obs_2023a_P.Constant_Value_j[0];
            APF_CTL_VIS_Obs_2023a_B.Sum3[1] +=
              APF_CTL_VIS_Obs_2023a_P.Constant_Value_j[1];
            APF_CTL_VIS_Obs_2023a_B.Sum3[2] +=
              APF_CTL_VIS_Obs_2023a_P.Constant_Value_j[2];
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Delay: '<S392>/Delay'
              APF_CTL_VIS_Obs_2023a_B.Delay_b[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[0];
              APF_CTL_VIS_Obs_2023a_B.Delay_b[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[1];
              APF_CTL_VIS_Obs_2023a_B.Delay_b[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[2];
            }

            // MATLAB Function: '<S392>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   DataStoreRead: '<S351>/Data Store Read4'
            //   DataStoreRead: '<S351>/Data Store Read5'
            //   DataStoreRead: '<S351>/Data Store Read6'
            //   DataStoreWrite: '<S350>/Data Store Write4'
            //   SignalConversion generated from: '<S400>/ SFunction '

            APF_CTL_VIS_Obs_2023a_B.state_red[0] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[0] +
              APF_CTL_VIS_Obs_2023a_DW.RED_Px;
            APF_CTL_VIS_Obs_2023a_B.state_red[1] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[1] +
              APF_CTL_VIS_Obs_2023a_DW.RED_Py;
            APF_CTL_VIS_Obs_2023a_B.state_red[2] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[2] +
              APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l;
            APF_CTL_VIS_Obs_2023a_B.state_red[3] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma * 0.0 +
              APF_CTL_VIS_Obs_2023a_DW.RED_Vx;
            APF_CTL_VIS_Obs_2023a_B.state_red[4] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma * 0.0 +
              APF_CTL_VIS_Obs_2023a_DW.RED_Vy;
            APF_CTL_VIS_Obs_2023a_B.state_red[5] =
              APF_CTL_VIS_Obs_2023a_P.nesterov_gamma * 0.0 +
              APF_CTL_VIS_Obs_2023a_DW.RED_RzD;
            if (APF_CTL_VIS_Obs_2023a_DW.Blue_Detection == 0.0) {
              APF_CTL_VIS_Obs_2023a_B.r_ct[0] =
                APF_CTL_VIS_Obs_2023a_B.state_red[0] -
                APF_CTL_VIS_Obs_2023a_B.States_a[0];
              APF_CTL_VIS_Obs_2023a_B.r_ct[1] =
                APF_CTL_VIS_Obs_2023a_B.state_red[1] -
                APF_CTL_VIS_Obs_2023a_B.States_a[1];
              APF_CTL_VIS_Obs_2023a_B.r_ct[2] =
                APF_CTL_VIS_Obs_2023a_B.States_a[2] -
                APF_CTL_VIS_Obs_2023a_B.States_a[2];
              APF_CTL_VIS_Obs_2023a_B.r_co[0] =
                APF_CTL_VIS_Obs_2023a_B.state_red[0] -
                APF_CTL_VIS_Obs_2023a_B.States[0];
              APF_CTL_VIS_Obs_2023a_B.r_co[1] =
                APF_CTL_VIS_Obs_2023a_B.state_red[1] -
                APF_CTL_VIS_Obs_2023a_B.States[1];
              APF_CTL_VIS_Obs_2023a_B.r_co[2] = APF_CTL_VIS_Obs_2023a_B.States[2]
                - APF_CTL_VIS_Obs_2023a_B.States[2];
              APF_CTL_VIS_Obs_2023a_Cardioid(APF_CTL_VIS_Obs_2023a_B.state_red,
                APF_CTL_VIS_Obs_2023a_B.States_a, APF_CTL_VIS_Obs_2023a_P.shape,
                &APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0,
                &APF_CTL_VIS_Obs_2023a_B.d);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
                APF_CTL_VIS_Obs_2023a_norm(APF_CTL_VIS_Obs_2023a_B.r_ct);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t71 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t16 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[2] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t37 = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
                -APF_CTL_VIS_Obs_2023a_B.r_co[0];
              APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 =
                -APF_CTL_VIS_Obs_2023a_B.r_co[1];
              APF_CTL_VIS_Obs_2023a_B.t56 = -APF_CTL_VIS_Obs_2023a_B.r_co[2];
              APF_CTL_VIS_Obs_2023a_B.d = 0.0;
              APF_CTL_VIS_Obs_2023a_B.dv[0] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [0] - APF_CTL_VIS_Obs_2023a_P.r_hold * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2])) +
                APF_CTL_VIS_Obs_2023a_P.r_off * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.t46_tmp = APF_CTL_VIS_Obs_2023a_P.r_hold *
                cos(APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.t7 = APF_CTL_VIS_Obs_2023a_P.r_off * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.dv[1] = (APF_CTL_VIS_Obs_2023a_B.t7 +
                APF_CTL_VIS_Obs_2023a_B.States_a[1]) +
                APF_CTL_VIS_Obs_2023a_B.t46_tmp;
              APF_CTL_VIS_Obs_2023a_B.dv[2] = APF_CTL_VIS_Obs_2023a_B.States_a[2]
                + 3.1415926535897931;
              APF_CTL_VIS_Obs_2023a_B.dv[3] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [3] - APF_CTL_VIS_Obs_2023a_P.r_hold * sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5]) +
                APF_CTL_VIS_Obs_2023a_P.r_off * cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]) *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[4] = (APF_CTL_VIS_Obs_2023a_B.t46_tmp *
                APF_CTL_VIS_Obs_2023a_B.States_a[5] +
                APF_CTL_VIS_Obs_2023a_B.States_a[4]) +
                APF_CTL_VIS_Obs_2023a_B.t7 * APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[5] = APF_CTL_VIS_Obs_2023a_B.States_a[5];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1;
                APF_CTL_VIS_Obs_2023a_B.vcol = 3 * APF_CTL_VIS_Obs_2023a_B.i_m +
                  2;
                APF_CTL_VIS_Obs_2023a_B.t37 += ((APF_CTL_VIS_Obs_2023a_P.P_b[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] * APF_CTL_VIS_Obs_2023a_B.t71 +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp] *
                  APF_CTL_VIS_Obs_2023a_B.t16) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.vcol] *
                  -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1) *
                  APF_CTL_VIS_Obs_2023a_B.r_cb[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.d += ((APF_CTL_VIS_Obs_2023a_P.Nmat[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m] *
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 +
                  APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.P_K_tmp] *
                  APF_CTL_VIS_Obs_2023a_B.r_co_idx_1) +
                  APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.vcol] *
                  APF_CTL_VIS_Obs_2023a_B.t56) *
                  APF_CTL_VIS_Obs_2023a_B.r_co[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.r_ct[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.state_red[APF_CTL_VIS_Obs_2023a_B.i_m]
                  - APF_CTL_VIS_Obs_2023a_B.dv[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.dv1[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m + 3]
                   * APF_CTL_VIS_Obs_2023a_B.r_co[1] +
                   APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_co[0]) +
                  APF_CTL_VIS_Obs_2023a_P.Nmat[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.r_co[2];
                APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 3] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[1] +
                   APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[0]) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = 2.0 *
                APF_CTL_VIS_Obs_2023a_P.kr * exp(APF_CTL_VIS_Obs_2023a_B.t37);
              APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 = 2.0 *
                APF_CTL_VIS_Obs_2023a_P.psi / APF_CTL_VIS_Obs_2023a_P.sigma *
                exp(APF_CTL_VIS_Obs_2023a_B.d / APF_CTL_VIS_Obs_2023a_P.sigma);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1];
              APF_CTL_VIS_Obs_2023a_B.d = APF_CTL_VIS_Obs_2023a_B.r_ct[0];
              APF_CTL_VIS_Obs_2023a_B.t71 = APF_CTL_VIS_Obs_2023a_B.r_ct[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Sum_n[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (((APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m + 3]
                     * APF_CTL_VIS_Obs_2023a_P.ka *
                     APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 +
                     APF_CTL_VIS_Obs_2023a_P.ka *
                     APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m] *
                     APF_CTL_VIS_Obs_2023a_B.d) +
                    APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m + 6]
                    * APF_CTL_VIS_Obs_2023a_P.ka * APF_CTL_VIS_Obs_2023a_B.t71)
                   - APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
                   APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m]) -
                  APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 *
                  APF_CTL_VIS_Obs_2023a_B.dv1[APF_CTL_VIS_Obs_2023a_B.i_m];
              }
            } else {
              APF_CTL_VIS_Obs_2023a_B.r_ct[0] =
                APF_CTL_VIS_Obs_2023a_B.state_red[0] -
                APF_CTL_VIS_Obs_2023a_B.States_a[0];
              APF_CTL_VIS_Obs_2023a_B.r_ct[1] =
                APF_CTL_VIS_Obs_2023a_B.state_red[1] -
                APF_CTL_VIS_Obs_2023a_B.States_a[1];
              APF_CTL_VIS_Obs_2023a_B.r_ct[2] =
                APF_CTL_VIS_Obs_2023a_B.States_a[2] -
                APF_CTL_VIS_Obs_2023a_B.States_a[2];
              APF_CTL_VIS_Obs_2023a_Cardioid(APF_CTL_VIS_Obs_2023a_B.state_red,
                APF_CTL_VIS_Obs_2023a_B.States_a, APF_CTL_VIS_Obs_2023a_P.shape,
                &APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0,
                &APF_CTL_VIS_Obs_2023a_B.d);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
                APF_CTL_VIS_Obs_2023a_norm(APF_CTL_VIS_Obs_2023a_B.r_ct);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[0] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t71 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[1] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t16 =
                -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] - APF_CTL_VIS_Obs_2023a_B.d *
                APF_CTL_VIS_Obs_2023a_B.r_ct[2] /
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.r_cb[2] =
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              APF_CTL_VIS_Obs_2023a_B.t37 = 0.0;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = sin
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 = cos
                (APF_CTL_VIS_Obs_2023a_B.States_a[2]);
              APF_CTL_VIS_Obs_2023a_B.t46_tmp = APF_CTL_VIS_Obs_2023a_P.r_hold *
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
              APF_CTL_VIS_Obs_2023a_B.d = APF_CTL_VIS_Obs_2023a_P.r_off *
                APF_CTL_VIS_Obs_2023a_B.r_co_idx_1;
              APF_CTL_VIS_Obs_2023a_B.dv[0] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [0] - APF_CTL_VIS_Obs_2023a_B.t46_tmp) +
                APF_CTL_VIS_Obs_2023a_B.d;
              APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 *=
                APF_CTL_VIS_Obs_2023a_P.r_hold;
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *=
                APF_CTL_VIS_Obs_2023a_P.r_off;
              APF_CTL_VIS_Obs_2023a_B.dv[1] =
                (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 +
                 APF_CTL_VIS_Obs_2023a_B.States_a[1]) +
                APF_CTL_VIS_Obs_2023a_B.r_co_idx_1;
              APF_CTL_VIS_Obs_2023a_B.dv[2] = APF_CTL_VIS_Obs_2023a_B.States_a[2]
                + 3.1415926535897931;
              APF_CTL_VIS_Obs_2023a_B.dv[3] = (APF_CTL_VIS_Obs_2023a_B.States_a
                [3] - APF_CTL_VIS_Obs_2023a_B.t46_tmp *
                APF_CTL_VIS_Obs_2023a_B.States_a[5]) + APF_CTL_VIS_Obs_2023a_B.d
                * APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[4] =
                (APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 *
                 APF_CTL_VIS_Obs_2023a_B.States_a[5] +
                 APF_CTL_VIS_Obs_2023a_B.States_a[4]) +
                APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
                APF_CTL_VIS_Obs_2023a_B.States_a[5];
              APF_CTL_VIS_Obs_2023a_B.dv[5] = APF_CTL_VIS_Obs_2023a_B.States_a[5];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.t37 += ((APF_CTL_VIS_Obs_2023a_P.P_b[3 *
                  APF_CTL_VIS_Obs_2023a_B.i_m + 1] * APF_CTL_VIS_Obs_2023a_B.t16
                  + APF_CTL_VIS_Obs_2023a_P.P_b[3 * APF_CTL_VIS_Obs_2023a_B.i_m]
                  * APF_CTL_VIS_Obs_2023a_B.t71) + APF_CTL_VIS_Obs_2023a_P.P_b[3
                  * APF_CTL_VIS_Obs_2023a_B.i_m + 2] *
                  -APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1) *
                  APF_CTL_VIS_Obs_2023a_B.r_cb[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.r_ct[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  APF_CTL_VIS_Obs_2023a_B.state_red[APF_CTL_VIS_Obs_2023a_B.i_m]
                  - APF_CTL_VIS_Obs_2023a_B.dv[APF_CTL_VIS_Obs_2023a_B.i_m];
                APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  (APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 3] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[1] +
                   APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m] *
                   APF_CTL_VIS_Obs_2023a_B.r_cb[0]) +
                  APF_CTL_VIS_Obs_2023a_P.P_b[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
              }

              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = 2.0 *
                APF_CTL_VIS_Obs_2023a_P.kr * exp(APF_CTL_VIS_Obs_2023a_B.t37);
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
                APF_CTL_VIS_Obs_2023a_B.r_ct[1];
              APF_CTL_VIS_Obs_2023a_B.d = APF_CTL_VIS_Obs_2023a_B.r_ct[0];
              APF_CTL_VIS_Obs_2023a_B.t71 = APF_CTL_VIS_Obs_2023a_B.r_ct[2];
              for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                   3; APF_CTL_VIS_Obs_2023a_B.i_m++) {
                APF_CTL_VIS_Obs_2023a_B.Sum_n[APF_CTL_VIS_Obs_2023a_B.i_m] =
                  ((APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m + 3]
                    * APF_CTL_VIS_Obs_2023a_P.ka *
                    APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 +
                    APF_CTL_VIS_Obs_2023a_P.ka *
                    APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m] *
                    APF_CTL_VIS_Obs_2023a_B.d) +
                   APF_CTL_VIS_Obs_2023a_P.Q_a[APF_CTL_VIS_Obs_2023a_B.i_m + 6] *
                   APF_CTL_VIS_Obs_2023a_P.ka * APF_CTL_VIS_Obs_2023a_B.t71) -
                  APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
                  APF_CTL_VIS_Obs_2023a_B.Z_k[APF_CTL_VIS_Obs_2023a_B.i_m];
              }
            }

            APF_CTL_VIS_Obs_2023a_B.Sum_n[0] =
              -APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[0] -
              APF_CTL_VIS_Obs_2023a_P.nesterov_eta *
              APF_CTL_VIS_Obs_2023a_B.Sum_n[0];
            APF_CTL_VIS_Obs_2023a_B.Sum_n[1] =
              -APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[1] -
              APF_CTL_VIS_Obs_2023a_P.nesterov_eta *
              APF_CTL_VIS_Obs_2023a_B.Sum_n[1];
            APF_CTL_VIS_Obs_2023a_B.Sum_n[2] =
              -APF_CTL_VIS_Obs_2023a_P.nesterov_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay_b[2] -
              APF_CTL_VIS_Obs_2023a_P.nesterov_eta *
              APF_CTL_VIS_Obs_2023a_B.Sum_n[2];
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Delay: '<S393>/Delay3'
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[0] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[0];
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[1] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[1];
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[2] =
                APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[2];
            }

            // MATLAB Function: '<S393>/MATLAB Function1' incorporates:
            //   Delay: '<S393>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma) *
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[0];
            APF_CTL_VIS_Obs_2023a_B.Eg[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

            // MATLAB Function: '<S393>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   Delay: '<S393>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_epsilon;
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] = sqrt
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0]);
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Px -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_eta /
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma) *
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[1];
            APF_CTL_VIS_Obs_2023a_B.Eg[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

            // MATLAB Function: '<S393>/MATLAB Function1' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read2'
            //   Delay: '<S393>/Delay3'

            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_epsilon;
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] = sqrt
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1]);
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_eta /
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = (1.0 -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma) *
              APF_CTL_VIS_Obs_2023a_B.Derivative3 +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_gamma *
              APF_CTL_VIS_Obs_2023a_B.Delay3_f3[2];
            APF_CTL_VIS_Obs_2023a_B.Eg[2] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

            // MATLAB Function: '<S393>/MATLAB Function1' incorporates:
            //   Delay: '<S393>/Delay3'
            //   SignalConversion generated from: '<S401>/ SFunction '

            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
              APF_CTL_VIS_Obs_2023a_P.RMSprop_epsilon;
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] = sqrt
              (APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2]);
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
              APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
              APF_CTL_VIS_Obs_2023a_P.RMSprop_eta /
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] *
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];

            // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
            //   Constant: '<S385>/Constant3'

            switch (static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_P.Method)) {
             case 1:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   DataStoreRead: '<S351>/Data Store Read'
              //   DataStoreRead: '<S351>/Data Store Read2'
              //   MATLAB Function: '<S390>/Batch'
              //   SignalConversion generated from: '<S398>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Px -
                APF_CTL_VIS_Obs_2023a_P.batch_eta *
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Py -
                APF_CTL_VIS_Obs_2023a_P.batch_eta *
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
                APF_CTL_VIS_Obs_2023a_P.batch_eta *
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];
              break;

             case 2:
              // MultiPortSwitch: '<S385>/Multiport Switch'
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
              break;

             case 3:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   DataStoreRead: '<S351>/Data Store Read'
              //   DataStoreRead: '<S351>/Data Store Read2'
              //   MATLAB Function: '<S392>/MATLAB Function1'
              //   SignalConversion generated from: '<S400>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Px + APF_CTL_VIS_Obs_2023a_B.Sum_n
                [0];
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Py + APF_CTL_VIS_Obs_2023a_B.Sum_n
                [1];
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l +
                APF_CTL_VIS_Obs_2023a_B.Sum_n[2];
              break;

             case 4:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   MATLAB Function: '<S387>/MATLAB Function1'
              //   SignalConversion generated from: '<S395>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
                APF_CTL_VIS_Obs_2023a_P.adagrad_eta / sqrt
                (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 +
                 APF_CTL_VIS_Obs_2023a_P.adagrad_epsilon) *
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];
              break;

             case 5:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   MATLAB Function: '<S386>/MATLAB Function1'
              //   SignalConversion generated from: '<S394>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
                APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;
              break;

             case 6:
              break;

             case 7:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   MATLAB Function: '<S389>/MATLAB Function1'
              //   SignalConversion generated from: '<S397>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1;
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
                APF_CTL_VIS_Obs_2023a_P.adam_eta / (sqrt
                (APF_CTL_VIS_Obs_2023a_B.t36 / (1.0 -
                APF_CTL_VIS_Obs_2023a_B.link2_com_y)) +
                APF_CTL_VIS_Obs_2023a_P.adam_epsilon) *
                (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 /
                 APF_CTL_VIS_Obs_2023a_B.Sum6_gv);
              break;

             default:
              // MultiPortSwitch: '<S385>/Multiport Switch' incorporates:
              //   DataStoreRead: '<S351>/Data Store Read'
              //   DataStoreRead: '<S351>/Data Store Read2'
              //   MATLAB Function: '<S388>/MATLAB Function1'
              //   SignalConversion generated from: '<S396>/ SFunction '

              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Px - APF_CTL_VIS_Obs_2023a_B.m_b[0]
                / (1.0 - APF_CTL_VIS_Obs_2023a_B.Derivative2) *
                (APF_CTL_VIS_Obs_2023a_P.adamax_eta /
                 APF_CTL_VIS_Obs_2023a_B.Sum_b[0]);
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
                APF_CTL_VIS_Obs_2023a_DW.RED_Py - APF_CTL_VIS_Obs_2023a_B.m_b[1]
                / (1.0 - APF_CTL_VIS_Obs_2023a_B.Derivative2) *
                (APF_CTL_VIS_Obs_2023a_P.adamax_eta /
                 APF_CTL_VIS_Obs_2023a_B.Sum_b[1]);
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2] =
                APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l -
                APF_CTL_VIS_Obs_2023a_B.m_b[2] / (1.0 -
                APF_CTL_VIS_Obs_2023a_B.Derivative2) *
                (APF_CTL_VIS_Obs_2023a_P.adamax_eta /
                 APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1);
              break;
            }

            // End of MultiPortSwitch: '<S385>/Multiport Switch'

            // Sum: '<S392>/Sum' incorporates:
            //   Constant: '<S392>/Constant1'

            APF_CTL_VIS_Obs_2023a_B.Sum_n[0] +=
              APF_CTL_VIS_Obs_2023a_P.Constant1_Value[0];
            APF_CTL_VIS_Obs_2023a_B.Sum_n[1] +=
              APF_CTL_VIS_Obs_2023a_P.Constant1_Value[1];
            APF_CTL_VIS_Obs_2023a_B.Sum_n[2] +=
              APF_CTL_VIS_Obs_2023a_P.Constant1_Value[2];

            // MATLAB Function: '<S378>/Looking Angle' incorporates:
            //   DataStoreRead: '<S351>/Data Store Read'
            //   DataStoreRead: '<S351>/Data Store Read2'

            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Px - (APF_CTL_VIS_Obs_2023a_P.r_off *
              cos(APF_CTL_VIS_Obs_2023a_B.States_a[2]) +
              APF_CTL_VIS_Obs_2023a_B.States_a[0]);
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] =
              APF_CTL_VIS_Obs_2023a_DW.RED_Py - (APF_CTL_VIS_Obs_2023a_P.r_off *
              sin(APF_CTL_VIS_Obs_2023a_B.States_a[2]) +
              APF_CTL_VIS_Obs_2023a_B.States_a[1]);

            // Switch: '<S378>/Switch' incorporates:
            //   Constant: '<S378>/Constant2'

            if (APF_CTL_VIS_Obs_2023a_P.Att_Mode >
                APF_CTL_VIS_Obs_2023a_P.Switch_Threshold_d) {
              // Switch: '<S378>/Switch'
              APF_CTL_VIS_Obs_2023a_B.Switch =
                APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[2];
            } else {
              // Switch: '<S378>/Switch' incorporates:
              //   MATLAB Function: '<S378>/Looking Angle'

              APF_CTL_VIS_Obs_2023a_B.Switch = APF_CTL_VIS_Obs_2_rt_atan2d_snf
                (APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1],
                 APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0]) + 3.1415926535897931;
            }

            // End of Switch: '<S378>/Switch'
            // End of Outputs for SubSystem: '<S350>/APF'
          }

          // End of If: '<S350>/If'

          // MultiPortSwitch: '<S350>/Multiport Switch' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          switch (static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_DW.Phase)) {
           case 1:
            // MultiPortSwitch: '<S350>/Multiport Switch'
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[1];
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[2];
            break;

           case 2:
            // MultiPortSwitch: '<S350>/Multiport Switch'
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[1];
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
              APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[2];
            break;

           default:
            // MultiPortSwitch: '<S350>/Multiport Switch'
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0];
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1];
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Switch;
            break;
          }

          // End of MultiPortSwitch: '<S350>/Multiport Switch'

          // Sum: '<S349>/Sum' incorporates:
          //   DataStoreRead: '<S351>/Data Store Read'

          APF_CTL_VIS_Obs_2023a_B.Sum = APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0
            - APF_CTL_VIS_Obs_2023a_DW.RED_Px;

          // Sum: '<S349>/Sum1' incorporates:
          //   DataStoreRead: '<S351>/Data Store Read2'

          APF_CTL_VIS_Obs_2023a_B.Sum1 = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o -
            APF_CTL_VIS_Obs_2023a_DW.RED_Py;

          // MATLAB Function: '<S363>/MATLAB Function2'
          APF_CTL_VIS_Obs_MATLABFunction2(APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
            APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f);

          // MATLAB Function: '<S363>/MATLAB Function3'
          APF_CTL_VIS_Obs_MATLABFunction3
            (APF_CTL_VIS_Obs_2023a_B.DataStoreRead3_l,
             APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c);

          // Sum: '<S363>/Subtract2'
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[0] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[0];
          APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f[1] -=
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pr_c[1];

          // MATLAB Function: '<S363>/MATLAB Function4'
          APF_CTL_VIS_Obs_MATLABFunction4(APF_CTL_VIS_Obs_2023a_B.rtb_Oy_kp_m,
            APF_CTL_VIS_Obs_2023a_B.rtb_Ox_pc_f, &APF_CTL_VIS_Obs_2023a_B.e_out);

          // If: '<S349>/If2' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 1.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem_m =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem_m;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S349>/Target Finder' incorporates:
            //   ActionPort: '<S365>/Action Port'

            APF_CTL_VIS_Obs_2_TargetTracker(APF_CTL_VIS_Obs_2023a_B.Sum,
              APF_CTL_VIS_Obs_2023a_B.Sum1, APF_CTL_VIS_Obs_2023a_B.e_out,
              APF_CTL_VIS_Obs_2023a_B.u, &APF_CTL_VIS_Obs_2023a_P.TargetFinder,
              &APF_CTL_VIS_Obs_2023a_X.TargetFinder);

            // End of Outputs for SubSystem: '<S349>/Target Finder'
          }

          // End of If: '<S349>/If2'

          // If: '<S349>/If1' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 2.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem_a =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem_a;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S349>/Target Tracker' incorporates:
            //   ActionPort: '<S366>/Action Port'

            APF_CTL_VIS_Obs_2_TargetTracker(APF_CTL_VIS_Obs_2023a_B.Sum,
              APF_CTL_VIS_Obs_2023a_B.Sum1, APF_CTL_VIS_Obs_2023a_B.e_out,
              APF_CTL_VIS_Obs_2023a_B.u_l,
              &APF_CTL_VIS_Obs_2023a_P.TargetTracker,
              &APF_CTL_VIS_Obs_2023a_X.TargetTracker);

            // End of Outputs for SubSystem: '<S349>/Target Tracker'
          }

          // End of If: '<S349>/If1'

          // If: '<S349>/If' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
          if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
            if (APF_CTL_VIS_Obs_2023a_DW.Phase == 3.0) {
              APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
            }

            APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_m =
              APF_CTL_VIS_Obs_2023a_B.rtAction;
          } else {
            APF_CTL_VIS_Obs_2023a_B.rtAction =
              APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_m;
          }

          if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
            // Outputs for IfAction SubSystem: '<S349>/If Action Subsystem' incorporates:
            //   ActionPort: '<S364>/Action Port'

            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator4'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator4 =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator4_DSTATE;

              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator5'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator5 =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator5_DSTATE;
            }

            // DataStoreWrite: '<S370>/Data Store Write'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_1 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator4;

            // DataStoreWrite: '<S370>/Data Store Write1'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_2 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator5;
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator2'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator2 =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator2_DSTATE;

              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator3'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator3 =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator3_DSTATE;
            }

            // DataStoreWrite: '<S370>/Data Store Write2'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_1 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator2;

            // DataStoreWrite: '<S370>/Data Store Write3'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_2 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator3;
            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator1'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator1 =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator1_DSTATE;

              // DiscreteIntegrator: '<S370>/Discrete-Time Integrator'
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator =
                APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator_DSTATE;
            }

            // DataStoreWrite: '<S370>/Data Store Write4'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_1 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator1;

            // DataStoreWrite: '<S370>/Data Store Write5'
            APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_2 =
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator;

            // Derivative: '<S370>/Derivative2'
            if ((APF_CTL_VIS_Obs_2023a_DW.TimeStampA >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) &&
                (APF_CTL_VIS_Obs_2023a_DW.TimeStampB >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0])) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                APF_CTL_VIS_Obs_2023a_DW.TimeStampA;
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA;
              if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA <
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB) {
                if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB <
                    APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                  APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                    APF_CTL_VIS_Obs_2023a_DW.TimeStampB;
                  lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB;
                }
              } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA >=
                         APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB;
                lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB;
              }

              APF_CTL_VIS_Obs_2023a_B.Derivative2 = (APF_CTL_VIS_Obs_2023a_B.Sum
                - *lastU) / (APF_CTL_VIS_Obs_2023a_M->Timing.t[0] -
                             APF_CTL_VIS_Obs_2023a_B.Derivative2);
            }

            // End of Derivative: '<S370>/Derivative2'

            // MATLAB Function: '<S370>/Fx Gain Derivatives' incorporates:
            //   MATLAB Function: '<S370>/Fy Gain Derivatives'

            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
              APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.Derivative2;
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Sum *
              APF_CTL_VIS_Obs_2023a_B.Sum;
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = -APF_CTL_VIS_Obs_2023a_P.lambda1
              * APF_CTL_VIS_Obs_2023a_P.p;
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
              APF_CTL_VIS_Obs_2023a_P.p * APF_CTL_VIS_Obs_2023a_P.lambda12 +
              APF_CTL_VIS_Obs_2023a_P.lambda1;
            APF_CTL_VIS_Obs_2023a_B.k1_dot_a =
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv -
               APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 *
               APF_CTL_VIS_Obs_2023a_B.Sum * APF_CTL_VIS_Obs_2023a_B.Derivative2)
              - APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 *
              APF_CTL_VIS_Obs_2023a_P.lambda12;
            APF_CTL_VIS_Obs_2023a_B.Derivative3 =
              -APF_CTL_VIS_Obs_2023a_P.lambda12 * APF_CTL_VIS_Obs_2023a_P.p;
            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
              APF_CTL_VIS_Obs_2023a_P.p * APF_CTL_VIS_Obs_2023a_P.lambda2 +
              APF_CTL_VIS_Obs_2023a_P.lambda12;
            APF_CTL_VIS_Obs_2023a_B.k2_dot_l =
              (APF_CTL_VIS_Obs_2023a_B.Derivative3 *
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv -
               APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
               APF_CTL_VIS_Obs_2023a_B.Sum * APF_CTL_VIS_Obs_2023a_B.Derivative2)
              - APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 *
              APF_CTL_VIS_Obs_2023a_P.lambda2;

            // Sum: '<S370>/u_x' incorporates:
            //   Product: '<S370>/k_1*q_1_x'
            //   Product: '<S370>/k_2*q2_x'

            APF_CTL_VIS_Obs_2023a_B.u_x = APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator4 +
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator5 *
              APF_CTL_VIS_Obs_2023a_B.Sum;

            // Derivative: '<S370>/Derivative1'
            if ((APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) &&
                (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0])) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d;
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_k;
              if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d <
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m) {
                if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m <
                    APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                  APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                    APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m;
                  lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_j;
                }
              } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d >=
                         APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m;
                lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_j;
              }

              APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                (APF_CTL_VIS_Obs_2023a_B.Sum1 - *lastU) /
                (APF_CTL_VIS_Obs_2023a_M->Timing.t[0] -
                 APF_CTL_VIS_Obs_2023a_B.Derivative2);
            }

            // End of Derivative: '<S370>/Derivative1'

            // MATLAB Function: '<S370>/Fy Gain Derivatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
              APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.Derivative2;
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Sum1 *
              APF_CTL_VIS_Obs_2023a_B.Sum1;
            APF_CTL_VIS_Obs_2023a_B.k1_dot_f =
              (APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 *
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv -
               APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 *
               APF_CTL_VIS_Obs_2023a_B.Sum1 *
               APF_CTL_VIS_Obs_2023a_B.Derivative2) -
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 *
              APF_CTL_VIS_Obs_2023a_P.lambda12;
            APF_CTL_VIS_Obs_2023a_B.k2_dot_p =
              (APF_CTL_VIS_Obs_2023a_B.Derivative3 *
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv -
               APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
               APF_CTL_VIS_Obs_2023a_B.Sum1 *
               APF_CTL_VIS_Obs_2023a_B.Derivative2) -
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 *
              APF_CTL_VIS_Obs_2023a_P.lambda2;

            // Sum: '<S370>/u_y' incorporates:
            //   Product: '<S370>/k_1*q_1_y'
            //   Product: '<S370>/k_2*q2_y'

            APF_CTL_VIS_Obs_2023a_B.u_y = APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator2 +
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator3 *
              APF_CTL_VIS_Obs_2023a_B.Sum1;

            // Derivative: '<S370>/Derivative3'
            if ((APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) &&
                (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k >=
                 APF_CTL_VIS_Obs_2023a_M->Timing.t[0])) {
              APF_CTL_VIS_Obs_2023a_B.Derivative3 = 0.0;
            } else {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n;
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_d;
              if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n <
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k) {
                if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k <
                    APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                  APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                    APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k;
                  lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_f;
                }
              } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n >=
                         APF_CTL_VIS_Obs_2023a_M->Timing.t[0]) {
                APF_CTL_VIS_Obs_2023a_B.Derivative2 =
                  APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k;
                lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_f;
              }

              APF_CTL_VIS_Obs_2023a_B.Derivative3 =
                (APF_CTL_VIS_Obs_2023a_B.e_out - *lastU) /
                (APF_CTL_VIS_Obs_2023a_M->Timing.t[0] -
                 APF_CTL_VIS_Obs_2023a_B.Derivative2);
            }

            // End of Derivative: '<S370>/Derivative3'

            // Sum: '<S370>/Add2' incorporates:
            //   Product: '<S370>/Product4'
            //   Product: '<S370>/Product5'

            APF_CTL_VIS_Obs_2023a_B.Add2 = APF_CTL_VIS_Obs_2023a_B.e_out *
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator1 +
              APF_CTL_VIS_Obs_2023a_B.DiscreteTimeIntegrator *
              APF_CTL_VIS_Obs_2023a_B.Derivative3;

            // MATLAB Function: '<S370>/Torque Gain Derivatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
              APF_CTL_VIS_Obs_2023a_B.Derivative3 *
              APF_CTL_VIS_Obs_2023a_B.Derivative3;
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = APF_CTL_VIS_Obs_2023a_B.e_out *
              APF_CTL_VIS_Obs_2023a_B.e_out;
            APF_CTL_VIS_Obs_2023a_B.k1_dot = (-APF_CTL_VIS_Obs_2023a_P.lambda1_t
              * APF_CTL_VIS_Obs_2023a_P.p_t * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2
              - (APF_CTL_VIS_Obs_2023a_P.p_t *
                 APF_CTL_VIS_Obs_2023a_P.lambda12_t +
                 APF_CTL_VIS_Obs_2023a_P.lambda1_t) *
              APF_CTL_VIS_Obs_2023a_B.e_out *
              APF_CTL_VIS_Obs_2023a_B.Derivative3) -
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
              APF_CTL_VIS_Obs_2023a_P.lambda12_t;
            APF_CTL_VIS_Obs_2023a_B.k2_dot =
              (-APF_CTL_VIS_Obs_2023a_P.lambda12_t * APF_CTL_VIS_Obs_2023a_P.p_t
               * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 -
               (APF_CTL_VIS_Obs_2023a_P.p_t * APF_CTL_VIS_Obs_2023a_P.lambda2_t
                + APF_CTL_VIS_Obs_2023a_P.lambda12_t) *
               APF_CTL_VIS_Obs_2023a_B.e_out *
               APF_CTL_VIS_Obs_2023a_B.Derivative3) -
              APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
              APF_CTL_VIS_Obs_2023a_P.lambda2_t;

            // End of Outputs for SubSystem: '<S349>/If Action Subsystem'
          }

          // End of If: '<S349>/If'

          // MultiPortSwitch: '<S349>/Multiport Switch' incorporates:
          //   DataStoreWrite: '<S350>/Data Store Write3'

          switch (static_cast<int32_T>(APF_CTL_VIS_Obs_2023a_DW.Phase)) {
           case 1:
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] =
              APF_CTL_VIS_Obs_2023a_B.u[0];
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] =
              APF_CTL_VIS_Obs_2023a_B.u[1];
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] =
              APF_CTL_VIS_Obs_2023a_B.u[2];
            break;

           case 2:
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] =
              APF_CTL_VIS_Obs_2023a_B.u_l[0];
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] =
              APF_CTL_VIS_Obs_2023a_B.u_l[1];
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] =
              APF_CTL_VIS_Obs_2023a_B.u_l[2];
            break;

           default:
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] =
              APF_CTL_VIS_Obs_2023a_B.u_x;
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] =
              APF_CTL_VIS_Obs_2023a_B.u_y;
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2] =
              APF_CTL_VIS_Obs_2023a_B.Add2;
            break;
          }

          // End of MultiPortSwitch: '<S349>/Multiport Switch'

          // DataStoreWrite: '<S247>/RED_Fx'
          APF_CTL_VIS_Obs_2023a_DW.RED_Fx =
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];

          // DataStoreWrite: '<S247>/RED_Fy'
          APF_CTL_VIS_Obs_2023a_DW.RED_Fy =
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];

          // DataStoreWrite: '<S247>/RED_Tz'
          APF_CTL_VIS_Obs_2023a_DW.RED_Tz =
            APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[2];

          // DataStoreWrite: '<S347>/Data Store Write'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_Est =
            APF_CTL_VIS_Obs_2023a_B.States_a[0];

          // DataStoreWrite: '<S347>/Data Store Write1'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_Est =
            APF_CTL_VIS_Obs_2023a_B.States_a[1];

          // DataStoreWrite: '<S347>/Data Store Write2'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_Est =
            APF_CTL_VIS_Obs_2023a_B.States_a[2];

          // DataStoreWrite: '<S347>/Data Store Write3'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_preKalm =
            APF_CTL_VIS_Obs_2023a_B.y_p[0];

          // DataStoreWrite: '<S347>/Data Store Write4'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_preKalm =
            APF_CTL_VIS_Obs_2023a_B.y_p[1];

          // DataStoreWrite: '<S347>/Data Store Write5'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_preKalm =
            APF_CTL_VIS_Obs_2023a_B.y_p[2];

          // DataStoreWrite: '<S355>/Data Store Write3'
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Reject = APF_CTL_VIS_Obs_2023a_B.Reject;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // SignalConversion generated from: '<S354>/Delay' incorporates:
            //   DataStoreRead: '<S347>/Data Store Read1'
            //   DataStoreRead: '<S347>/Data Store Read7'
            //   DataStoreRead: '<S347>/Data Store Read8'
            //   Delay: '<S354>/Delay'

            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[0] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data1;
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[1] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data2;
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[2] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data3;
          }

          // DataStoreWrite: '<S348>/Data Store Write'
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_Est = APF_CTL_VIS_Obs_2023a_B.States
            [0];

          // DataStoreWrite: '<S348>/Data Store Write1'
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_Est = APF_CTL_VIS_Obs_2023a_B.States
            [1];

          // DataStoreWrite: '<S348>/Data Store Write3'
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_preKalm =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];

          // DataStoreWrite: '<S348>/Data Store Write4'
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_preKalm =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];

          // Step: '<S360>/Step'
          if (APF_CTL_VIS_Obs_2023a_M->Timing.t[0] <
              APF_CTL_VIS_Obs_2023a_P.Step_Time) {
            // Step: '<S360>/Step'
            APF_CTL_VIS_Obs_2023a_B.Step = APF_CTL_VIS_Obs_2023a_P.Step_Y0;
          } else {
            // Step: '<S360>/Step'
            APF_CTL_VIS_Obs_2023a_B.Step = APF_CTL_VIS_Obs_2023a_P.Step_YFinal;
          }

          // End of Step: '<S360>/Step'

          // DataStoreWrite: '<S360>/Data Store Write3'
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Reject = APF_CTL_VIS_Obs_2023a_B.Step;

          // DataStoreWrite: '<S350>/Data Store Write'
          APF_CTL_VIS_Obs_2023a_DW.Command_Px =
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;

          // DataStoreWrite: '<S350>/Data Store Write1'
          APF_CTL_VIS_Obs_2023a_DW.Command_Py =
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;

          // DataStoreWrite: '<S350>/Data Store Write2'
          APF_CTL_VIS_Obs_2023a_DW.Command_Rz =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // SignalConversion generated from: '<S359>/Delay' incorporates:
            //   DataStoreRead: '<S348>/Data Store Read1'
            //   DataStoreRead: '<S348>/Data Store Read7'
            //   Delay: '<S359>/Delay'

            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[0] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data4;
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[1] =
              APF_CTL_VIS_Obs_2023a_DW.TX2_data5;

            // DataStoreWrite: '<S247>/Data Store Write3' incorporates:
            //   Constant: '<S247>/Puck State'

            APF_CTL_VIS_Obs_2023a_DW.Float_State =
              APF_CTL_VIS_Obs_2023a_P.PuckState_Value_a;

            // If: '<S247>/If' incorporates:
            //   Constant: '<S247>/Constant3'

            APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
            if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo))
            {
              if ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
                  (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
                  (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
                  (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0)) {
                APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
              }

              APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_l =
                APF_CTL_VIS_Obs_2023a_B.rtAction;
            } else {
              APF_CTL_VIS_Obs_2023a_B.rtAction =
                APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_l;
            }

            if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
              // Outputs for IfAction SubSystem: '<S247>/RED+ARM' incorporates:
              //   ActionPort: '<S352>/Action Port'

              // If: '<S352>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' incorporates:
              //   DataStoreRead: '<S352>/Data Store Read1'

              if (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0) {
                // Outputs for IfAction SubSystem: '<S352>/Simulated Position Controller' incorporates:
                //   ActionPort: '<S412>/Action Port'

                // DataStoreWrite: '<S352>/Data Store Write2' incorporates:
                //   Constant: '<S352>/Constant4'
                //   Constant: '<S352>/Constant5'
                //   Constant: '<S352>/Constant6'
                //   DataStoreWrite: '<S352>/Data Store Write'
                //   DataStoreWrite: '<S352>/Data Store Write1'

                APF_SimulatedPositionController
                  (APF_CTL_VIS_Obs_2023a_P.Constant4_Value_k,
                   APF_CTL_VIS_Obs_2023a_P.Constant5_Value,
                   APF_CTL_VIS_Obs_2023a_P.Constant6_Value,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
                   &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
                   &APF_CTL_VIS_Obs_2023a_B.SimulatedPositionController,
                   &APF_CTL_VIS_Obs_2023a_DW.SimulatedPositionController);

                // End of Outputs for SubSystem: '<S352>/Simulated Position Controller' 
              } else {
                // Outputs for IfAction SubSystem: '<S352>/Passthrough for Experiment' incorporates:
                //   ActionPort: '<S411>/Action Port'

                // DataStoreWrite: '<S352>/Data Store Write2' incorporates:
                //   Constant: '<S352>/Constant6'
                //   DataStoreWrite: '<S352>/Data Store Write'
                //   DataStoreWrite: '<S352>/Data Store Write1'

                APF_CT_PassthroughforExperiment(0.0, 0.0,
                  APF_CTL_VIS_Obs_2023a_P.Constant6_Value,
                  &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                  &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                  &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command);

                // End of Outputs for SubSystem: '<S352>/Passthrough for Experiment' 
              }

              // End of If: '<S352>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

              // DataStoreWrite: '<S352>/Data Store Write3' incorporates:
              //   Constant: '<S352>/Constant7'

              APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode =
                APF_CTL_VIS_Obs_2023a_P.Constant7_Value;

              // End of Outputs for SubSystem: '<S247>/RED+ARM'
            }

            // End of If: '<S247>/If'
          }

          // End of Outputs for SubSystem: '<S89>/Sub-Phase #4'
          break;
        }

        // End of If: '<S89>/Experiment Sub-Phases'
        // End of Outputs for SubSystem: '<S9>/Change RED Behavior'
      }

      // End of If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
      // End of Outputs for SubSystem: '<Root>/Phase #3: Experiment'
      break;

     case 4:
      // Outputs for IfAction SubSystem: '<Root>/Phase #4: Return Home' incorporates:
      //   ActionPort: '<S10>/Action Port'

      APF_CTL_VIS_Ob_Phase4ReturnHome(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Px, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Py,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Px, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Py,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.Float_State,
        &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Px, &APF_CTL_VIS_Obs_2023a_DW.RED_Py,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz, &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
        &APF_CTL_VIS_Obs_2023a_DW.WhoAmI, &APF_CTL_VIS_Obs_2023a_DW.isSim,
        &APF_CTL_VIS_Obs_2023a_B.Phase4ReturnHome,
        &APF_CTL_VIS_Obs_2023a_DW.Phase4ReturnHome,
        &APF_CTL_VIS_Obs_2023a_P.Phase4ReturnHome);

      // End of Outputs for SubSystem: '<Root>/Phase #4: Return Home'
      break;

     case 5:
      // Outputs for IfAction SubSystem: '<Root>/Phase #5: Hold Home' incorporates:
      //   ActionPort: '<S11>/Action Port'

      APF_CTL_VIS_Ob_Phase4ReturnHome(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Px, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Py,
        &APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Px, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Py,
        &APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
        &APF_CTL_VIS_Obs_2023a_DW.Float_State,
        &APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Fx, &APF_CTL_VIS_Obs_2023a_DW.RED_Fy,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Px, &APF_CTL_VIS_Obs_2023a_DW.RED_Py,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz, &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Tz, &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW,
        &APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
        &APF_CTL_VIS_Obs_2023a_DW.WhoAmI, &APF_CTL_VIS_Obs_2023a_DW.isSim,
        &APF_CTL_VIS_Obs_2023a_B.Phase5HoldHome,
        &APF_CTL_VIS_Obs_2023a_DW.Phase5HoldHome,
        &APF_CTL_VIS_Obs_2023a_P.Phase5HoldHome);

      // End of Outputs for SubSystem: '<Root>/Phase #5: Hold Home'
      break;

     case 6:
      // Outputs for IfAction SubSystem: '<Root>/Phase #6: Clean Shutdown' incorporates:
      //   ActionPort: '<S12>/Action Port'

      // If: '<S12>/This IF block determines whether or not to run the BLUE sim//exp' incorporates:
      //   DataStoreRead: '<S12>/Data Store Read'
      //   DataStoreRead: '<S12>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 3.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_f =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_f;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S12>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S530>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // DataStoreWrite: '<S530>/BLACK_Fx' incorporates:
          //   Constant: '<S530>/Constant3'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx =
            APF_CTL_VIS_Obs_2023a_P.Constant3_Value;

          // DataStoreWrite: '<S530>/BLACK_Fy' incorporates:
          //   Constant: '<S530>/Constant4'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy =
            APF_CTL_VIS_Obs_2023a_P.Constant4_Value_g;

          // DataStoreWrite: '<S530>/BLACK_Tz' incorporates:
          //   Constant: '<S530>/Constant5'

          APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz =
            APF_CTL_VIS_Obs_2023a_P.Constant5_Value_d;

          // DataStoreWrite: '<S530>/Data Store Write3' incorporates:
          //   Constant: '<S530>/Puck State'

          APF_CTL_VIS_Obs_2023a_DW.Float_State =
            APF_CTL_VIS_Obs_2023a_P.PuckState_Value_d;
        }

        // End of Outputs for SubSystem: '<S12>/Change BLACK Behavior'
      }

      // End of If: '<S12>/This IF block determines whether or not to run the BLUE sim//exp' 

      // If: '<S12>/This IF block determines whether or not to run the BLACK sim//exp' incorporates:
      //   DataStoreRead: '<S12>/Data Store Read'
      //   DataStoreRead: '<S12>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 2.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_dt =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_dt;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S12>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S531>/Action Port'

        APF_CTL_VIS__ChangeBLUEBehavior(APF_CTL_VIS_Obs_2023a_M,
          &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx, &APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy,
          &APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz,
          &APF_CTL_VIS_Obs_2023a_DW.Float_State,
          &APF_CTL_VIS_Obs_2023a_P.ChangeBLUEBehavior_l);

        // End of Outputs for SubSystem: '<S12>/Change BLUE Behavior'
      }

      // End of If: '<S12>/This IF block determines whether or not to run the BLACK sim//exp' 

      // If: '<S12>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S12>/Data Store Read'
      //   DataStoreRead: '<S12>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_l =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_l;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S12>/Change RED Behavior' incorporates:
        //   ActionPort: '<S532>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // DataStoreWrite: '<S532>/RED_Fx' incorporates:
          //   Constant: '<S532>/Constant'

          APF_CTL_VIS_Obs_2023a_DW.RED_Fx =
            APF_CTL_VIS_Obs_2023a_P.Constant_Value_b;

          // DataStoreWrite: '<S532>/RED_Fy' incorporates:
          //   Constant: '<S532>/Constant1'

          APF_CTL_VIS_Obs_2023a_DW.RED_Fy =
            APF_CTL_VIS_Obs_2023a_P.Constant1_Value_f;

          // DataStoreWrite: '<S532>/RED_Tz' incorporates:
          //   Constant: '<S532>/Constant2'

          APF_CTL_VIS_Obs_2023a_DW.RED_Tz =
            APF_CTL_VIS_Obs_2023a_P.Constant2_Value_h;

          // DataStoreWrite: '<S532>/Data Store Write1' incorporates:
          //   Constant: '<S532>/Constant3'

          APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode =
            APF_CTL_VIS_Obs_2023a_P.Constant3_Value_h;

          // DataStoreWrite: '<S532>/Data Store Write3' incorporates:
          //   Constant: '<S532>/Puck State'

          APF_CTL_VIS_Obs_2023a_DW.Float_State =
            APF_CTL_VIS_Obs_2023a_P.PuckState_Value_e;
        }

        // End of Outputs for SubSystem: '<S12>/Change RED Behavior'
      }

      // End of If: '<S12>/This IF block determines whether or not to run the RED sim//exp ' 
      // End of Outputs for SubSystem: '<Root>/Phase #6: Clean Shutdown'
      break;
    }

    // End of If: '<Root>/Separate Phases'
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // If: '<Root>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' incorporates:
      //   DataStoreRead: '<Root>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasimul =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasimul;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // DiscreteIntegrator: '<S581>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S578>/BLACK_Fx_Sat'
        //   MATLAB Function: '<S581>/MATLAB Function'
        //   SignalConversion generated from: '<S588>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Derivative3 =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx_Sat / APF_CTL_VIS_Obs_2023a_P.mBLACK
          * APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_j +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[0];
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] =
          APF_CTL_VIS_Obs_2023a_B.Derivative3;

        // DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_n *
          APF_CTL_VIS_Obs_2023a_B.Derivative3 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[0];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.y_p[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // Sum: '<S581>/Sum' incorporates:
        //   RandomNumber: '<S581>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput;

        // DiscreteIntegrator: '<S581>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S578>/BLACK_Fy_Sat'
        //   MATLAB Function: '<S581>/MATLAB Function'
        //   SignalConversion generated from: '<S588>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Derivative3 =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy_Sat / APF_CTL_VIS_Obs_2023a_P.mBLACK
          * APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_j +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[1];
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] =
          APF_CTL_VIS_Obs_2023a_B.Derivative3;

        // DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_n *
          APF_CTL_VIS_Obs_2023a_B.Derivative3 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[1];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.y_p[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // Sum: '<S581>/Sum' incorporates:
        //   RandomNumber: '<S581>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput;

        // DiscreteIntegrator: '<S581>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S578>/BLACK_Tz_Sat'
        //   MATLAB Function: '<S581>/MATLAB Function'
        //   SignalConversion generated from: '<S588>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Derivative3 =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz_Sat / APF_CTL_VIS_Obs_2023a_P.IBLACK
          * APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_j +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[2];

        // DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_n *
          APF_CTL_VIS_Obs_2023a_B.Derivative3 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[2];

        // Sum: '<S581>/Sum' incorporates:
        //   RandomNumber: '<S581>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput;

        // Delay: '<S587>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_ou) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_f =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];
        }

        // Sum: '<S587>/Sum6' incorporates:
        //   Delay: '<S587>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0] -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_f;

        // If: '<S587>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S587>/Hold this value' incorporates:
          //   ActionPort: '<S594>/Action Port'

          // SignalConversion generated from: '<S594>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_j = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S587>/Hold this value'
        }

        // End of If: '<S587>/if we went through a "step"'

        // Gain: '<S587>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vx'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_j;

        // Delay: '<S584>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vx'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_p4) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lg =
            APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx;
        }

        // Sum: '<S584>/Sum6' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vx'
        //   Delay: '<S584>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lg;

        // If: '<S584>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S584>/Hold this value' incorporates:
          //   ActionPort: '<S591>/Action Port'

          // SignalConversion generated from: '<S591>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_d = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S584>/Hold this value'
        }

        // End of If: '<S584>/if we went through a "step"'

        // Sum: '<S578>/Sum1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_IMU_Ax_I'
        //   Gain: '<S584>/divide by delta T'
        //   RandomNumber: '<S578>/Random Number1'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Ay = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_d +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_b;

        // Delay: '<S582>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_jc) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3a =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];
        }

        // Sum: '<S582>/Sum6' incorporates:
        //   Delay: '<S582>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1] -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3a;

        // If: '<S582>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S582>/Hold this value' incorporates:
          //   ActionPort: '<S589>/Action Port'

          // SignalConversion generated from: '<S589>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_pk = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S582>/Hold this value'
        }

        // End of If: '<S582>/if we went through a "step"'

        // Gain: '<S582>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vy'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_pk;

        // Delay: '<S585>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vy'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_jk) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ea =
            APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy;
        }

        // Sum: '<S585>/Sum6' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vy'
        //   Delay: '<S585>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ea;

        // If: '<S585>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S585>/Hold this value' incorporates:
          //   ActionPort: '<S592>/Action Port'

          // SignalConversion generated from: '<S592>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_pg = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S585>/Hold this value'
        }

        // End of If: '<S585>/if we went through a "step"'

        // Sum: '<S578>/Sum2' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_IMU_Ay_I'
        //   Gain: '<S585>/divide by delta T'
        //   RandomNumber: '<S578>/Random Number'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_RzDD = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_pg +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_j;

        // Delay: '<S583>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_jr) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cx =
            APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];
        }

        // Sum: '<S583>/Sum6' incorporates:
        //   Delay: '<S583>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2] -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cx;

        // If: '<S583>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S583>/Hold this value' incorporates:
          //   ActionPort: '<S590>/Action Port'

          // SignalConversion generated from: '<S590>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_c5 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S583>/Hold this value'
        }

        // End of If: '<S583>/if we went through a "step"'

        // Gain: '<S583>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_RzD'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_c5;

        // Delay: '<S586>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_RzD'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_jko) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ab =
            APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD;
        }

        // Sum: '<S586>/Sum6' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_RzD'
        //   Delay: '<S586>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ab;

        // If: '<S586>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW != 0.0) {
          // Outputs for IfAction SubSystem: '<S586>/Hold this value' incorporates:
          //   ActionPort: '<S593>/Action Port'

          // SignalConversion generated from: '<S593>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_ib = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

          // End of Outputs for SubSystem: '<S586>/Hold this value'
        }

        // End of If: '<S586>/if we went through a "step"'

        // Sum: '<S578>/Sum3' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_IMU_R'
        //   Gain: '<S586>/divide by delta T'
        //   RandomNumber: '<S578>/Random Number2'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Ax = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_ib +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_g;

        // DataStoreWrite: '<S578>/BLACK_Px'
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Px =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S578>/BLACK_Px'

        // DataStoreWrite: '<S578>/BLACK_Py'
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Py =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S578>/BLACK_Py'

        // DataStoreWrite: '<S578>/BLACK_Rz'
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S578>/BLACK_Rz'

        // DiscreteIntegrator: '<S595>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S579>/BLUE_Fx_Sat '
        //   MATLAB Function: '<S595>/MATLAB Function'
        //   SignalConversion generated from: '<S602>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx_Sat
          / APF_CTL_VIS_Obs_2023a_P.mBLUE *
          APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_p +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[0];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 =
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.Derivative2 =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_e *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[0];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0] =
          APF_CTL_VIS_Obs_2023a_B.Derivative2;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // Sum: '<S595>/Sum' incorporates:
        //   RandomNumber: '<S595>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 =
          APF_CTL_VIS_Obs_2023a_B.Derivative2 +
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_a;

        // DiscreteIntegrator: '<S595>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S579>/BLUE_Fy_Sat'
        //   MATLAB Function: '<S595>/MATLAB Function'
        //   SignalConversion generated from: '<S602>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy_Sat
          / APF_CTL_VIS_Obs_2023a_P.mBLUE *
          APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_p +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[1];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.Derivative2 =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_e *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[1];

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
        APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1] =
          APF_CTL_VIS_Obs_2023a_B.Derivative2;

        // Outputs for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' incorporates:
        //   ActionPort: '<S17>/Action Port'

        // Sum: '<S595>/Sum' incorporates:
        //   RandomNumber: '<S595>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_B.Derivative2
          + APF_CTL_VIS_Obs_2023a_DW.NextOutput_a;

        // DiscreteIntegrator: '<S595>/Acceleration  to Velocity' incorporates:
        //   DataStoreRead: '<S579>/BLUE_Tz_Sat'
        //   MATLAB Function: '<S595>/MATLAB Function'
        //   SignalConversion generated from: '<S602>/ SFunction '

        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz_Sat
          / APF_CTL_VIS_Obs_2023a_P.IBLUE *
          APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_p +
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[2];

        // DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_B.Derivative2 =
          APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval_e *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[2];

        // Sum: '<S595>/Sum' incorporates:
        //   RandomNumber: '<S595>/Random Number'

        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.Derivative2
          + APF_CTL_VIS_Obs_2023a_DW.NextOutput_a;

        // Delay: '<S601>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_do) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gv =
            APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
        }

        // Sum: '<S601>/Sum6' incorporates:
        //   Delay: '<S601>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gv;

        // If: '<S601>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
          // Outputs for IfAction SubSystem: '<S601>/Hold this value' incorporates:
          //   ActionPort: '<S608>/Action Port'

          // SignalConversion generated from: '<S608>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_ir = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // End of Outputs for SubSystem: '<S601>/Hold this value'
        }

        // End of If: '<S601>/if we went through a "step"'

        // Gain: '<S601>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vx'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_ir;

        // Delay: '<S598>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vx'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_nk) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ds =
            APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx;
        }

        // End of Delay: '<S598>/Delay1'

        // Delay: '<S596>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_ip) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i5 =
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
        }

        // Sum: '<S596>/Sum6' incorporates:
        //   Delay: '<S596>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i5;

        // If: '<S596>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
          // Outputs for IfAction SubSystem: '<S596>/Hold this value' incorporates:
          //   ActionPort: '<S603>/Action Port'

          // SignalConversion generated from: '<S603>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_ex = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // End of Outputs for SubSystem: '<S596>/Hold this value'
        }

        // End of If: '<S596>/if we went through a "step"'

        // Gain: '<S596>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vy'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_ex;

        // Delay: '<S599>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vy'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_az) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l0 =
            APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy;
        }

        // End of Delay: '<S599>/Delay1'

        // Delay: '<S597>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_dh) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_iq =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
        }

        // Sum: '<S597>/Sum6' incorporates:
        //   Delay: '<S597>/Delay1'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW -
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_iq;

        // If: '<S597>/if we went through a "step"'
        if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
          // Outputs for IfAction SubSystem: '<S597>/Hold this value' incorporates:
          //   ActionPort: '<S604>/Action Port'

          // SignalConversion generated from: '<S604>/In1'
          APF_CTL_VIS_Obs_2023a_B.In1_cz = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // End of Outputs for SubSystem: '<S597>/Hold this value'
        }

        // End of If: '<S597>/if we went through a "step"'

        // Gain: '<S597>/divide by delta T' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_RzD'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD = 1.0 /
          APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_cz;

        // Delay: '<S600>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_RzD'

        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_ex) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_eq =
            APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD;
        }

        // End of Delay: '<S600>/Delay1'

        // DataStoreWrite: '<S579>/BLUE_Px '
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Px =
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S579>/BLUE_Px '

        // DataStoreWrite: '<S579>/BLUE_Py'
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Py = APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S579>/BLUE_Py'

        // DataStoreWrite: '<S579>/BLUE_Rz'
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of DataStoreWrite: '<S579>/BLUE_Rz'

        // If: '<S580>/If' incorporates:
        //   Constant: '<S580>/Constant'

        if ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
            (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
            (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
            (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0)) {
          // Outputs for IfAction SubSystem: '<S580>/RED + ARM' incorporates:
          //   ActionPort: '<S609>/Action Port'

          // MATLAB Function: '<S611>/Inertia Function 1' incorporates:
          //   Delay: '<S611>/Delay'
          //   MATLAB Function: '<S611>/Coriolis Function1'

          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = APF_CTL_VIS_Obs_2023a_P.a1 +
            APF_CTL_VIS_Obs_2023a_P.b1;
          APF_CTL_VIS_Obs_2023a_B.d = APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[2]
            + APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[3];
          APF_CTL_VIS_Obs_2023a_B.t7 = cos(APF_CTL_VIS_Obs_2023a_B.d);
          APF_CTL_VIS_Obs_2023a_B.t21 = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.mPROX;
          APF_CTL_VIS_Obs_2023a_B.t8 = (APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 + APF_CTL_VIS_Obs_2023a_B.t21) +
            APF_CTL_VIS_Obs_2023a_P.mEE * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1;
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0_tmp =
            APF_CTL_VIS_Obs_2023a_P.a2 * APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t12_tmp = APF_CTL_VIS_Obs_2023a_B.d +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4];
          APF_CTL_VIS_Obs_2023a_B.t13 = cos(APF_CTL_VIS_Obs_2023a_B.t12_tmp);
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = APF_CTL_VIS_Obs_2023a_P.a2 +
            APF_CTL_VIS_Obs_2023a_P.b2;
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 *
            APF_CTL_VIS_Obs_2023a_P.mEE +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0_tmp;
          APF_CTL_VIS_Obs_2023a_B.link2_com_y = APF_CTL_VIS_Obs_2023a_B.t12_tmp
            + APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5];
          APF_CTL_VIS_Obs_2023a_B.t16 = cos(APF_CTL_VIS_Obs_2023a_B.link2_com_y);
          APF_CTL_VIS_Obs_2023a_B.t17 = ((APF_CTL_VIS_Obs_2023a_P.mRED +
            APF_CTL_VIS_Obs_2023a_P.mPROX) + APF_CTL_VIS_Obs_2023a_P.mDIST) +
            APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 = (APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.mPROX + APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.mDIST) + APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0 = (1.5707963267948966 -
            APF_CTL_VIS_Obs_2023a_P.Phi) +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[2];
          APF_CTL_VIS_Obs_2023a_B.t23 = sin(APF_CTL_VIS_Obs_2023a_B.d);
          APF_CTL_VIS_Obs_2023a_B.t24 = sin(APF_CTL_VIS_Obs_2023a_B.t12_tmp);
          APF_CTL_VIS_Obs_2023a_B.t25 = sin(APF_CTL_VIS_Obs_2023a_B.link2_com_y);
          APF_CTL_VIS_Obs_2023a_B.t28 = (APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_P.mEE +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0_tmp) +
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t91 = APF_CTL_VIS_Obs_2023a_B.t13 *
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 = APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t93 = APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1
            * APF_CTL_VIS_Obs_2023a_B.t16;
          APF_CTL_VIS_Obs_2023a_B.t96 = (-(APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.t8) - APF_CTL_VIS_Obs_2023a_B.t91) -
            APF_CTL_VIS_Obs_2023a_B.t93;
          APF_CTL_VIS_Obs_2023a_B.t30 = APF_CTL_VIS_Obs_2023a_B.t96 -
            APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 * sin
            (APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0);
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.t23;
          APF_CTL_VIS_Obs_2023a_B.t103 = APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
            APF_CTL_VIS_Obs_2023a_B.t24;
          APF_CTL_VIS_Obs_2023a_B.t104 =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
            APF_CTL_VIS_Obs_2023a_B.t25;
          APF_CTL_VIS_Obs_2023a_B.t33 = ((APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 *
            cos(APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0) -
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3) - APF_CTL_VIS_Obs_2023a_B.t103) -
            APF_CTL_VIS_Obs_2023a_B.t104;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 = APF_CTL_VIS_Obs_2023a_P.a1
            * APF_CTL_VIS_Obs_2023a_P.a1;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 = APF_CTL_VIS_Obs_2023a_P.a2
            * APF_CTL_VIS_Obs_2023a_P.a2;
          APF_CTL_VIS_Obs_2023a_B.t36 = APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.b0;
          APF_CTL_VIS_Obs_2023a_B.t37 = APF_CTL_VIS_Obs_2023a_P.b1 *
            APF_CTL_VIS_Obs_2023a_P.b1;
          APF_CTL_VIS_Obs_2023a_B.t45 = cos
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4]);
          APF_CTL_VIS_Obs_2023a_B.t46_tmp = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.a2;
          APF_CTL_VIS_Obs_2023a_B.t95 = APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_P.b1;
          APF_CTL_VIS_Obs_2023a_B.t100 = APF_CTL_VIS_Obs_2023a_B.t46_tmp *
            APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t46_tmp *= APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t92 = APF_CTL_VIS_Obs_2023a_B.t95 *
            APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t94 = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t95 *= APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t97 = APF_CTL_VIS_Obs_2023a_P.b1 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0 =
            (((((APF_CTL_VIS_Obs_2023a_B.t100 * 2.0 +
                 APF_CTL_VIS_Obs_2023a_B.t46_tmp * 2.0) +
                APF_CTL_VIS_Obs_2023a_B.t92 * 2.0) + APF_CTL_VIS_Obs_2023a_B.t94
               * 2.0) + APF_CTL_VIS_Obs_2023a_B.t95 * 2.0) +
             APF_CTL_VIS_Obs_2023a_B.t97 * 2.0) * APF_CTL_VIS_Obs_2023a_B.t45;
          APF_CTL_VIS_Obs_2023a_B.t50 = cos
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5]);
          APF_CTL_VIS_Obs_2023a_B.t51_tmp = APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_P.a3 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t79 = APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t51 = (APF_CTL_VIS_Obs_2023a_B.t51_tmp * 2.0 +
            APF_CTL_VIS_Obs_2023a_B.t79 * 2.0) * APF_CTL_VIS_Obs_2023a_B.t50;
          APF_CTL_VIS_Obs_2023a_B.t80 =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4] +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5];
          APF_CTL_VIS_Obs_2023a_B.t56 = cos(APF_CTL_VIS_Obs_2023a_B.t80);
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.a3 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.b1 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t57 = (APF_CTL_VIS_Obs_2023a_B.Sum6_gv * 2.0 +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 * 2.0) *
            APF_CTL_VIS_Obs_2023a_B.t56;
          APF_CTL_VIS_Obs_2023a_B.t54 = (1.5707963267948966 -
            APF_CTL_VIS_Obs_2023a_P.Phi) -
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[3];
          APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1 = sin
            (APF_CTL_VIS_Obs_2023a_B.t54);
          APF_CTL_VIS_Obs_2023a_B.t81 = (-(1.5707963267948966 -
            APF_CTL_VIS_Obs_2023a_P.Phi) +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[3]) +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4];
          APF_CTL_VIS_Obs_2023a_B.t61 = sin(APF_CTL_VIS_Obs_2023a_B.t81);
          APF_CTL_VIS_Obs_2023a_B.t63_tmp = APF_CTL_VIS_Obs_2023a_B.t81 +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5];
          APF_CTL_VIS_Obs_2023a_B.t63 = sin(APF_CTL_VIS_Obs_2023a_B.t63_tmp);
          APF_CTL_VIS_Obs_2023a_B.t64 = APF_CTL_VIS_Obs_2023a_P.mPROX *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1;
          APF_CTL_VIS_Obs_2023a_B.t65 = APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 *=
            APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t67 = APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
          APF_CTL_VIS_Obs_2023a_B.t68 = APF_CTL_VIS_Obs_2023a_P.mEE *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 = APF_CTL_VIS_Obs_2023a_P.a3
            * APF_CTL_VIS_Obs_2023a_P.a3 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t71 = APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.t72 = APF_CTL_VIS_Obs_2023a_P.mEE *
            APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.t74 = APF_CTL_VIS_Obs_2023a_P.b2 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t37 = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.b1;
          APF_CTL_VIS_Obs_2023a_B.t75 = APF_CTL_VIS_Obs_2023a_B.t37 *
            APF_CTL_VIS_Obs_2023a_P.mDIST * 2.0;
          APF_CTL_VIS_Obs_2023a_B.t76 = APF_CTL_VIS_Obs_2023a_B.t37 *
            APF_CTL_VIS_Obs_2023a_P.mEE * 2.0;
          APF_CTL_VIS_Obs_2023a_B.t37 = APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE * 2.0;
          APF_CTL_VIS_Obs_2023a_B.t82 = APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_P.b0;
          APF_CTL_VIS_Obs_2023a_B.t83 = APF_CTL_VIS_Obs_2023a_B.t82 *
            APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t82 *= APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t81_tmp = APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.b2 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t56 *= APF_CTL_VIS_Obs_2023a_B.Sum6_gv +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
          APF_CTL_VIS_Obs_2023a_B.t112_tmp = ((APF_CTL_VIS_Obs_2023a_B.t83 +
            APF_CTL_VIS_Obs_2023a_B.t82) + APF_CTL_VIS_Obs_2023a_B.t81_tmp) *
            APF_CTL_VIS_Obs_2023a_B.t61;
          APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp = APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.b0 * APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t113_tmp =
            APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp * APF_CTL_VIS_Obs_2023a_B.t63;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp = APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_P.b0;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_l = APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.b1;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_h = APF_CTL_VIS_Obs_2023a_B.t99_tmp *
            APF_CTL_VIS_Obs_2023a_P.mPROX;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_m = APF_CTL_VIS_Obs_2023a_B.t99_tmp *
            APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp *= APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_mc = APF_CTL_VIS_Obs_2023a_B.t99_tmp_l
            * APF_CTL_VIS_Obs_2023a_P.mDIST;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_l *= APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_h3 =
            ((((((((((((((((APF_CTL_VIS_Obs_2023a_P.IPROX +
                            APF_CTL_VIS_Obs_2023a_P.IDIST) +
                           APF_CTL_VIS_Obs_2023a_P.IEE) +
                          APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0) +
                         APF_CTL_VIS_Obs_2023a_B.t51) +
                        APF_CTL_VIS_Obs_2023a_B.t57) +
                       APF_CTL_VIS_Obs_2023a_B.t64) +
                      APF_CTL_VIS_Obs_2023a_B.t65) +
                     APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1) +
                    APF_CTL_VIS_Obs_2023a_B.t67) + APF_CTL_VIS_Obs_2023a_B.t68)
                  + APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2) +
                 APF_CTL_VIS_Obs_2023a_B.t71) + APF_CTL_VIS_Obs_2023a_B.t72) +
               APF_CTL_VIS_Obs_2023a_B.t74) + APF_CTL_VIS_Obs_2023a_B.t75) +
             APF_CTL_VIS_Obs_2023a_B.t76) + APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.t99 = ((((((APF_CTL_VIS_Obs_2023a_B.t99_tmp_h
            + APF_CTL_VIS_Obs_2023a_B.t99_tmp_m) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_mc) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_l) *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1 +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_h3) -
            APF_CTL_VIS_Obs_2023a_B.t112_tmp) - APF_CTL_VIS_Obs_2023a_B.t113_tmp;
          APF_CTL_VIS_Obs_2023a_B.t50 *= APF_CTL_VIS_Obs_2023a_B.t51_tmp +
            APF_CTL_VIS_Obs_2023a_B.t79;
          APF_CTL_VIS_Obs_2023a_B.t114_tmp_tmp =
            ((((((APF_CTL_VIS_Obs_2023a_P.IDIST + APF_CTL_VIS_Obs_2023a_P.IEE) +
                 APF_CTL_VIS_Obs_2023a_B.t51) + APF_CTL_VIS_Obs_2023a_B.t67) +
               APF_CTL_VIS_Obs_2023a_B.t68) +
              APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2) +
             APF_CTL_VIS_Obs_2023a_B.t74) + APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.t114_tmp = (((((APF_CTL_VIS_Obs_2023a_B.t100 +
            APF_CTL_VIS_Obs_2023a_B.t46_tmp) + APF_CTL_VIS_Obs_2023a_B.t92) +
            APF_CTL_VIS_Obs_2023a_B.t94) + APF_CTL_VIS_Obs_2023a_B.t95) +
            APF_CTL_VIS_Obs_2023a_B.t97) * APF_CTL_VIS_Obs_2023a_B.t45 +
            (APF_CTL_VIS_Obs_2023a_B.t114_tmp_tmp + APF_CTL_VIS_Obs_2023a_B.t56);
          APF_CTL_VIS_Obs_2023a_B.t45 = APF_CTL_VIS_Obs_2023a_P.IEE +
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
          APF_CTL_VIS_Obs_2023a_B.t115_tmp = (APF_CTL_VIS_Obs_2023a_B.t45 +
            APF_CTL_VIS_Obs_2023a_B.t56) + APF_CTL_VIS_Obs_2023a_B.t50;
          APF_CTL_VIS_Obs_2023a_B.t116 = APF_CTL_VIS_Obs_2023a_B.t45 +
            APF_CTL_VIS_Obs_2023a_B.t50;
          APF_CTL_VIS_Obs_2023a_B.increment[0] = APF_CTL_VIS_Obs_2023a_B.t17;
          APF_CTL_VIS_Obs_2023a_B.increment[1] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.increment[2] = APF_CTL_VIS_Obs_2023a_B.t30;
          APF_CTL_VIS_Obs_2023a_B.increment[3] = APF_CTL_VIS_Obs_2023a_B.t96;
          APF_CTL_VIS_Obs_2023a_B.increment[4] = -APF_CTL_VIS_Obs_2023a_B.t93 -
            APF_CTL_VIS_Obs_2023a_B.t13 * APF_CTL_VIS_Obs_2023a_B.t28;
          APF_CTL_VIS_Obs_2023a_B.increment[5] = -APF_CTL_VIS_Obs_2023a_B.t93;
          APF_CTL_VIS_Obs_2023a_B.increment[6] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.increment[7] = APF_CTL_VIS_Obs_2023a_B.t17;
          APF_CTL_VIS_Obs_2023a_B.increment[8] = APF_CTL_VIS_Obs_2023a_B.t33;
          APF_CTL_VIS_Obs_2023a_B.increment[9] =
            (-APF_CTL_VIS_Obs_2023a_B.Sum6_b3 - APF_CTL_VIS_Obs_2023a_B.t103) -
            APF_CTL_VIS_Obs_2023a_B.t104;
          APF_CTL_VIS_Obs_2023a_B.increment[10] = -APF_CTL_VIS_Obs_2023a_B.t104
            - APF_CTL_VIS_Obs_2023a_B.t24 * APF_CTL_VIS_Obs_2023a_B.t28;
          APF_CTL_VIS_Obs_2023a_B.increment[11] = -APF_CTL_VIS_Obs_2023a_B.t104;
          APF_CTL_VIS_Obs_2023a_B.increment[12] = APF_CTL_VIS_Obs_2023a_B.t30;
          APF_CTL_VIS_Obs_2023a_B.increment[13] = APF_CTL_VIS_Obs_2023a_B.t33;
          APF_CTL_VIS_Obs_2023a_B.increment[14] =
            (((((((((((((((((((((((APF_CTL_VIS_Obs_2023a_P.IRED +
            APF_CTL_VIS_Obs_2023a_P.IPROX) + APF_CTL_VIS_Obs_2023a_P.IDIST) +
            APF_CTL_VIS_Obs_2023a_P.IEE) +
            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0) +
                               APF_CTL_VIS_Obs_2023a_B.t51) +
                              APF_CTL_VIS_Obs_2023a_B.t57) +
                             APF_CTL_VIS_Obs_2023a_B.t64) +
                            APF_CTL_VIS_Obs_2023a_B.t65) +
                           APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1) +
                          APF_CTL_VIS_Obs_2023a_B.t67) +
                         APF_CTL_VIS_Obs_2023a_B.t68) +
                        APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2) +
                       APF_CTL_VIS_Obs_2023a_B.t71) +
                      APF_CTL_VIS_Obs_2023a_B.t72) + APF_CTL_VIS_Obs_2023a_B.t74)
                    + APF_CTL_VIS_Obs_2023a_B.t75) + APF_CTL_VIS_Obs_2023a_B.t76)
                  + APF_CTL_VIS_Obs_2023a_B.t37) +
                 ((((APF_CTL_VIS_Obs_2023a_B.t99_tmp_h * 2.0 +
                     APF_CTL_VIS_Obs_2023a_B.t99_tmp_m * 2.0) +
                    APF_CTL_VIS_Obs_2023a_B.t99_tmp * 2.0) +
                   APF_CTL_VIS_Obs_2023a_B.t99_tmp_mc * 2.0) +
                  APF_CTL_VIS_Obs_2023a_B.t99_tmp_l * 2.0) *
                 APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1) +
                APF_CTL_VIS_Obs_2023a_P.mPROX * APF_CTL_VIS_Obs_2023a_B.t36) +
               APF_CTL_VIS_Obs_2023a_P.mDIST * APF_CTL_VIS_Obs_2023a_B.t36) +
              APF_CTL_VIS_Obs_2023a_P.mEE * APF_CTL_VIS_Obs_2023a_B.t36) -
             ((APF_CTL_VIS_Obs_2023a_B.t83 * 2.0 + APF_CTL_VIS_Obs_2023a_B.t82 *
               2.0) + APF_CTL_VIS_Obs_2023a_B.t81_tmp * 2.0) *
             APF_CTL_VIS_Obs_2023a_B.t61) - APF_CTL_VIS_Obs_2023a_B.t113_tmp *
            2.0;
          APF_CTL_VIS_Obs_2023a_B.increment[15] = APF_CTL_VIS_Obs_2023a_B.t99;
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = (APF_CTL_VIS_Obs_2023a_B.t114_tmp -
            APF_CTL_VIS_Obs_2023a_B.t112_tmp) - APF_CTL_VIS_Obs_2023a_B.t113_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[16] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
          APF_CTL_VIS_Obs_2023a_B.increment[17] =
            APF_CTL_VIS_Obs_2023a_B.t115_tmp - APF_CTL_VIS_Obs_2023a_B.t113_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[18] = (-APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.t8 - APF_CTL_VIS_Obs_2023a_B.t91) -
            APF_CTL_VIS_Obs_2023a_B.t93;
          APF_CTL_VIS_Obs_2023a_B.increment[19] = (-APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.t23 - APF_CTL_VIS_Obs_2023a_B.t103) -
            APF_CTL_VIS_Obs_2023a_B.t104;
          APF_CTL_VIS_Obs_2023a_B.increment[20] = APF_CTL_VIS_Obs_2023a_B.t99;
          APF_CTL_VIS_Obs_2023a_B.increment[21] =
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_h3;
          APF_CTL_VIS_Obs_2023a_B.increment[22] =
            APF_CTL_VIS_Obs_2023a_B.t114_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[23] =
            APF_CTL_VIS_Obs_2023a_B.t115_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[24] = -APF_CTL_VIS_Obs_2023a_B.t13 *
            APF_CTL_VIS_Obs_2023a_B.t28 - APF_CTL_VIS_Obs_2023a_B.t93;
          APF_CTL_VIS_Obs_2023a_B.increment[25] = -APF_CTL_VIS_Obs_2023a_B.t24 *
            APF_CTL_VIS_Obs_2023a_B.t28 - APF_CTL_VIS_Obs_2023a_B.t104;
          APF_CTL_VIS_Obs_2023a_B.increment[26] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
          APF_CTL_VIS_Obs_2023a_B.increment[27] =
            APF_CTL_VIS_Obs_2023a_B.t114_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[28] =
            APF_CTL_VIS_Obs_2023a_B.t114_tmp_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[29] = APF_CTL_VIS_Obs_2023a_B.t116;
          APF_CTL_VIS_Obs_2023a_B.t7 = -APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.mEE;
          APF_CTL_VIS_Obs_2023a_B.increment[30] = APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.t16;
          APF_CTL_VIS_Obs_2023a_B.increment[31] = APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.t25;
          APF_CTL_VIS_Obs_2023a_B.increment[32] = (((APF_CTL_VIS_Obs_2023a_P.IEE
            + APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2) +
            APF_CTL_VIS_Obs_2023a_B.t56) + APF_CTL_VIS_Obs_2023a_B.t50) -
            APF_CTL_VIS_Obs_2023a_P.a3 * APF_CTL_VIS_Obs_2023a_P.b0 *
            APF_CTL_VIS_Obs_2023a_P.mEE * APF_CTL_VIS_Obs_2023a_B.t63;
          APF_CTL_VIS_Obs_2023a_B.increment[33] =
            APF_CTL_VIS_Obs_2023a_B.t115_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[34] = APF_CTL_VIS_Obs_2023a_B.t116;
          APF_CTL_VIS_Obs_2023a_B.increment[35] = APF_CTL_VIS_Obs_2023a_B.t45;

          // MATLAB Function: '<S611>/Coriolis Function1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_B.t36 = (APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 + APF_CTL_VIS_Obs_2023a_B.t21) +
            APF_CTL_VIS_Obs_2023a_P.mEE * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1;
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_P.mEE *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0_tmp;
          APF_CTL_VIS_Obs_2023a_B.t16 =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] *
            APF_CTL_VIS_Obs_2023a_B.t36 +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9] *
            APF_CTL_VIS_Obs_2023a_B.t36;
          APF_CTL_VIS_Obs_2023a_B.t21 = cos(APF_CTL_VIS_Obs_2023a_B.t12_tmp +
            1.5707963267948966);
          APF_CTL_VIS_Obs_2023a_B.t25 =
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] *
             APF_CTL_VIS_Obs_2023a_B.Sum6_b3 +
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9] *
             APF_CTL_VIS_Obs_2023a_B.Sum6_b3) +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10] *
            APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
          APF_CTL_VIS_Obs_2023a_B.t13 =
            ((APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] +
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
             APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          APF_CTL_VIS_Obs_2023a_B.t36 = sin(APF_CTL_VIS_Obs_2023a_B.t12_tmp +
            1.5707963267948966);
          APF_CTL_VIS_Obs_2023a_B.t12_tmp =
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] +
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10];
          APF_CTL_VIS_Obs_2023a_B.t8 = APF_CTL_VIS_Obs_2023a_B.t12_tmp +
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0 = cos
            (APF_CTL_VIS_Obs_2023a_B.t54);
          APF_CTL_VIS_Obs_2023a_B.t54 = cos(APF_CTL_VIS_Obs_2023a_B.t81);
          APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1 = cos
            (APF_CTL_VIS_Obs_2023a_B.t63_tmp);
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 = sin
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4]);
          APF_CTL_VIS_Obs_2023a_B.t63_tmp = ((((APF_CTL_VIS_Obs_2023a_B.t92 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10] +
            APF_CTL_VIS_Obs_2023a_B.t94 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t95 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t97 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t100 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t46_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10];
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 = sin
            (APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5]);
          APF_CTL_VIS_Obs_2023a_B.t71 = APF_CTL_VIS_Obs_2023a_B.t79 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11] +
            APF_CTL_VIS_Obs_2023a_B.t51_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          APF_CTL_VIS_Obs_2023a_B.t37 = sin(APF_CTL_VIS_Obs_2023a_B.t80);
          APF_CTL_VIS_Obs_2023a_B.t51_tmp =
            ((APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10] +
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11]) +
             APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          APF_CTL_VIS_Obs_2023a_B.t79 = APF_CTL_VIS_Obs_2023a_B.t83 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t80 = APF_CTL_VIS_Obs_2023a_B.t82 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t81 = APF_CTL_VIS_Obs_2023a_B.t81_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t81_tmp = ((((APF_CTL_VIS_Obs_2023a_B.t83 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9] +
            APF_CTL_VIS_Obs_2023a_B.t83 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t82 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_B.t82 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t81_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_B.t81_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10];
          APF_CTL_VIS_Obs_2023a_B.t82 = ((APF_CTL_VIS_Obs_2023a_B.t81_tmp +
            APF_CTL_VIS_Obs_2023a_B.t79) + APF_CTL_VIS_Obs_2023a_B.t80) +
            APF_CTL_VIS_Obs_2023a_B.t81;
          APF_CTL_VIS_Obs_2023a_B.t83 = APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp =
            (APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9] +
             APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          APF_CTL_VIS_Obs_2023a_B.t56 = APF_CTL_VIS_Obs_2023a_B.t99_tmp_h *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t17 = APF_CTL_VIS_Obs_2023a_B.t99_tmp_m *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t23 = APF_CTL_VIS_Obs_2023a_B.t99_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t24 = APF_CTL_VIS_Obs_2023a_B.t99_tmp_mc *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_B.t99_tmp_l *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t28 = APF_CTL_VIS_Obs_2023a_B.t92 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t91 = APF_CTL_VIS_Obs_2023a_B.t94 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t92 *=
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t93 = APF_CTL_VIS_Obs_2023a_B.t95 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t94 *=
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t95 *=
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t96 = APF_CTL_VIS_Obs_2023a_B.t97 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t97 *=
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t30 = APF_CTL_VIS_Obs_2023a_B.t100 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t99 = APF_CTL_VIS_Obs_2023a_B.t100 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t100 = APF_CTL_VIS_Obs_2023a_B.t46_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t63 = APF_CTL_VIS_Obs_2023a_B.t46_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t103 =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t104 =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t33 = APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.t51 = APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t57 = APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1
            * APF_CTL_VIS_Obs_2023a_B.t83;
          APF_CTL_VIS_Obs_2023a_B.t61 = (((((((((((APF_CTL_VIS_Obs_2023a_B.t28 +
            APF_CTL_VIS_Obs_2023a_B.t91) + APF_CTL_VIS_Obs_2023a_B.t92) +
            APF_CTL_VIS_Obs_2023a_B.t93) + APF_CTL_VIS_Obs_2023a_B.t94) +
            APF_CTL_VIS_Obs_2023a_B.t95) + APF_CTL_VIS_Obs_2023a_B.t96) +
            APF_CTL_VIS_Obs_2023a_B.t97) + APF_CTL_VIS_Obs_2023a_B.t30) +
            APF_CTL_VIS_Obs_2023a_B.t99) + APF_CTL_VIS_Obs_2023a_B.t100) +
            APF_CTL_VIS_Obs_2023a_B.t63) *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1;
          APF_CTL_VIS_Obs_2023a_B.t64 = (((APF_CTL_VIS_Obs_2023a_B.t103 +
            APF_CTL_VIS_Obs_2023a_B.t104) + APF_CTL_VIS_Obs_2023a_B.t33) +
            APF_CTL_VIS_Obs_2023a_B.t51) * APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.t65 = (((((APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] +
            APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_P.a2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) +
            APF_CTL_VIS_Obs_2023a_P.b2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8]) +
            APF_CTL_VIS_Obs_2023a_P.b2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_P.b2 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) *
            (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
             APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2);
          APF_CTL_VIS_Obs_2023a_B.t67 = (((APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] +
            APF_CTL_VIS_Obs_2023a_P.a1 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_P.b1 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8]) +
            APF_CTL_VIS_Obs_2023a_P.b1 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) *
            (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
             APF_CTL_VIS_Obs_2023a_B.t37);

          // MATLAB Function: '<S611>/Dynamics Model'
          APF_CTL_VIS_Obs_2023a_B.rEQ0 = true;
          for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
               APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 36;
               APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
            APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.P_K_tmp] = 0.0;
            if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
                APF_CTL_VIS_Obs_2023a_B.increment[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
              if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.Sum6_gv) || rtIsNaN
                  (APF_CTL_VIS_Obs_2023a_B.Sum6_gv)) {
                APF_CTL_VIS_Obs_2023a_B.rEQ0 = false;
              }
            }
          }

          if (!APF_CTL_VIS_Obs_2023a_B.rEQ0) {
            for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m <
                 36; APF_CTL_VIS_Obs_2023a_B.i_m++) {
              APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.i_m] = (rtNaN);
            }
          } else {
            APF_CTL_VIS_Obs_2023a_svd(APF_CTL_VIS_Obs_2023a_B.increment,
              APF_CTL_VIS_Obs_2023a_B.b_B, APF_CTL_VIS_Obs_2023a_B.s,
              APF_CTL_VIS_Obs_2023a_B.V_p);
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = fabs(APF_CTL_VIS_Obs_2023a_B.s[0]);
            if (rtIsInf(APF_CTL_VIS_Obs_2023a_B.Sum6_gv) || rtIsNaN
                (APF_CTL_VIS_Obs_2023a_B.Sum6_gv)) {
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = (rtNaN);
            } else if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv < 4.4501477170144028E-308)
            {
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 4.94065645841247E-324;
            } else {
              frexp(APF_CTL_VIS_Obs_2023a_B.Sum6_gv,
                    &APF_CTL_VIS_Obs_2023a_B.r_mg);
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv = ldexp(1.0,
                APF_CTL_VIS_Obs_2023a_B.r_mg - 53);
            }

            APF_CTL_VIS_Obs_2023a_B.Sum6_gv *= 6.0;
            APF_CTL_VIS_Obs_2023a_B.r_mg = -1;
            APF_CTL_VIS_Obs_2023a_B.k_l = 0;
            while ((APF_CTL_VIS_Obs_2023a_B.k_l < 6) &&
                   (APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.k_l] >
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv)) {
              APF_CTL_VIS_Obs_2023a_B.r_mg++;
              APF_CTL_VIS_Obs_2023a_B.k_l++;
            }

            if (APF_CTL_VIS_Obs_2023a_B.r_mg + 1 > 0) {
              APF_CTL_VIS_Obs_2023a_B.vcol = 1;
              for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.P_K_tmp <=
                   APF_CTL_VIS_Obs_2023a_B.r_mg; APF_CTL_VIS_Obs_2023a_B.P_K_tmp
                   ++) {
                APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 1.0 /
                  APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
                for (APF_CTL_VIS_Obs_2023a_B.k_l = APF_CTL_VIS_Obs_2023a_B.vcol;
                     APF_CTL_VIS_Obs_2023a_B.k_l <= APF_CTL_VIS_Obs_2023a_B.vcol
                     + 5; APF_CTL_VIS_Obs_2023a_B.k_l++) {
                  APF_CTL_VIS_Obs_2023a_B.V_p[APF_CTL_VIS_Obs_2023a_B.k_l - 1] *=
                    APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
                }

                APF_CTL_VIS_Obs_2023a_B.vcol += 6;
              }

              for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.P_K_tmp <= 30;
                   APF_CTL_VIS_Obs_2023a_B.P_K_tmp += 6) {
                for (APF_CTL_VIS_Obs_2023a_B.vcol =
                     APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1;
                     APF_CTL_VIS_Obs_2023a_B.vcol <=
                     APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 6;
                     APF_CTL_VIS_Obs_2023a_B.vcol++) {
                  APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.vcol - 1] =
                    0.0;
                }
              }

              APF_CTL_VIS_Obs_2023a_B.i_m = 0;
              for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
                   APF_CTL_VIS_Obs_2023a_B.P_K_tmp <= 30;
                   APF_CTL_VIS_Obs_2023a_B.P_K_tmp += 6) {
                APF_CTL_VIS_Obs_2023a_B.b_xoffset = -1;
                APF_CTL_VIS_Obs_2023a_B.i_m++;
                APF_CTL_VIS_Obs_2023a_B.xoffset = 6 *
                  APF_CTL_VIS_Obs_2023a_B.r_mg + APF_CTL_VIS_Obs_2023a_B.i_m;
                for (APF_CTL_VIS_Obs_2023a_B.vcol = APF_CTL_VIS_Obs_2023a_B.i_m;
                     APF_CTL_VIS_Obs_2023a_B.vcol <=
                     APF_CTL_VIS_Obs_2023a_B.xoffset;
                     APF_CTL_VIS_Obs_2023a_B.vcol += 6) {
                  for (APF_CTL_VIS_Obs_2023a_B.k_l =
                       APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1;
                       APF_CTL_VIS_Obs_2023a_B.k_l <=
                       APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 6;
                       APF_CTL_VIS_Obs_2023a_B.k_l++) {
                    APF_CTL_VIS_Obs_2023a_B.b_D[APF_CTL_VIS_Obs_2023a_B.k_l - 1]
                      += APF_CTL_VIS_Obs_2023a_B.V_p
                      [(APF_CTL_VIS_Obs_2023a_B.b_xoffset +
                        APF_CTL_VIS_Obs_2023a_B.k_l) -
                      APF_CTL_VIS_Obs_2023a_B.P_K_tmp] *
                      APF_CTL_VIS_Obs_2023a_B.b_B[APF_CTL_VIS_Obs_2023a_B.vcol -
                      1];
                  }

                  APF_CTL_VIS_Obs_2023a_B.b_xoffset += 6;
                }
              }
            }
          }

          // MATLAB Function: '<S611>/Coriolis Function1' incorporates:
          //   Delay: '<S611>/Delay'

          memset(&APF_CTL_VIS_Obs_2023a_B.increment[0], 0, 12U * sizeof(real_T));
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = cos
            (APF_CTL_VIS_Obs_2023a_B.link2_com_y + 1.5707963267948966) *
            APF_CTL_VIS_Obs_2023a_B.t13;
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 = (-cos
            (APF_CTL_VIS_Obs_2023a_B.d + 1.5707963267948966) *
            APF_CTL_VIS_Obs_2023a_B.t16 - APF_CTL_VIS_Obs_2023a_B.t21 *
            APF_CTL_VIS_Obs_2023a_B.t25) - APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
          APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 *=
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          APF_CTL_VIS_Obs_2023a_B.increment[12] =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 -
            APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 * cos
            (APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0);
          APF_CTL_VIS_Obs_2023a_B.t46_tmp = sin
            (APF_CTL_VIS_Obs_2023a_B.link2_com_y + 1.5707963267948966) *
            APF_CTL_VIS_Obs_2023a_B.t13;
          APF_CTL_VIS_Obs_2023a_B.d = (sin(APF_CTL_VIS_Obs_2023a_B.d +
            1.5707963267948966) * -APF_CTL_VIS_Obs_2023a_B.t16 -
            APF_CTL_VIS_Obs_2023a_B.t25 * APF_CTL_VIS_Obs_2023a_B.t36) -
            APF_CTL_VIS_Obs_2023a_B.t46_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[13] = APF_CTL_VIS_Obs_2023a_B.d -
            APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 * sin
            (APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0);
          APF_CTL_VIS_Obs_2023a_B.r_co_idx_1 =
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 *
            APF_CTL_VIS_Obs_2023a_B.t71;
          APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0 =
            APF_CTL_VIS_Obs_2023a_B.t37 * APF_CTL_VIS_Obs_2023a_B.t51_tmp;
          APF_CTL_VIS_Obs_2023a_B.t16 =
            -APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 *
            APF_CTL_VIS_Obs_2023a_B.t63_tmp;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp = (((APF_CTL_VIS_Obs_2023a_B.t99_tmp_h
            * APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9] +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_m *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_mc *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) +
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_l *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_l = (APF_CTL_VIS_Obs_2023a_B.t16 -
            APF_CTL_VIS_Obs_2023a_B.r_co_idx_1) -
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0;
          APF_CTL_VIS_Obs_2023a_B.increment[14] =
            ((APF_CTL_VIS_Obs_2023a_B.t99_tmp_l -
              APF_CTL_VIS_Obs_2023a_B.t99_tmp *
              APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0) -
             APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp *
             APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1) -
            APF_CTL_VIS_Obs_2023a_B.t81_tmp * APF_CTL_VIS_Obs_2023a_B.t54;
          APF_CTL_VIS_Obs_2023a_B.t99_tmp_h = ((APF_CTL_VIS_Obs_2023a_B.t79 +
            APF_CTL_VIS_Obs_2023a_B.t80) + APF_CTL_VIS_Obs_2023a_B.t81) *
            APF_CTL_VIS_Obs_2023a_B.t54 + APF_CTL_VIS_Obs_2023a_B.t57;
          APF_CTL_VIS_Obs_2023a_B.increment[15] =
            ((((APF_CTL_VIS_Obs_2023a_B.t56 + APF_CTL_VIS_Obs_2023a_B.t17) +
               APF_CTL_VIS_Obs_2023a_B.t23) + APF_CTL_VIS_Obs_2023a_B.t24) +
             APF_CTL_VIS_Obs_2023a_B.Sum6_b3) *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0 +
            (((APF_CTL_VIS_Obs_2023a_B.t99_tmp_h -
               APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1 *
               APF_CTL_VIS_Obs_2023a_B.t63_tmp) -
              APF_CTL_VIS_Obs_2023a_B.r_co_idx_1) -
             APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0);
          APF_CTL_VIS_Obs_2023a_B.increment[16] =
            ((APF_CTL_VIS_Obs_2023a_B.t99_tmp_h + APF_CTL_VIS_Obs_2023a_B.t61) +
             APF_CTL_VIS_Obs_2023a_B.t64) - APF_CTL_VIS_Obs_2023a_B.r_co_idx_1;
          APF_CTL_VIS_Obs_2023a_B.increment[17] = (APF_CTL_VIS_Obs_2023a_B.t57 +
            APF_CTL_VIS_Obs_2023a_B.t65) + APF_CTL_VIS_Obs_2023a_B.t67;
          APF_CTL_VIS_Obs_2023a_B.increment[18] =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
          APF_CTL_VIS_Obs_2023a_B.increment[19] = APF_CTL_VIS_Obs_2023a_B.d;
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
            (APF_CTL_VIS_Obs_2023a_B.t113_tmp_tmp + APF_CTL_VIS_Obs_2023a_B.t83)
            * APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1;
          APF_CTL_VIS_Obs_2023a_B.increment[20] =
            ((((APF_CTL_VIS_Obs_2023a_B.t16 - APF_CTL_VIS_Obs_2023a_B.t54 *
                APF_CTL_VIS_Obs_2023a_B.t82) -
               APF_CTL_VIS_Obs_2023a_B.r_co_idx_1) -
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0) -
             APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_0) -
            (((((APF_CTL_VIS_Obs_2023a_B.t99_tmp + APF_CTL_VIS_Obs_2023a_B.t56)
                + APF_CTL_VIS_Obs_2023a_B.t17) + APF_CTL_VIS_Obs_2023a_B.t23) +
              APF_CTL_VIS_Obs_2023a_B.t24) + APF_CTL_VIS_Obs_2023a_B.Sum6_b3) *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_0;
          APF_CTL_VIS_Obs_2023a_B.increment[21] =
            APF_CTL_VIS_Obs_2023a_B.t99_tmp_l;
          APF_CTL_VIS_Obs_2023a_B.increment[22] = (APF_CTL_VIS_Obs_2023a_B.t61 +
            APF_CTL_VIS_Obs_2023a_B.t64) - APF_CTL_VIS_Obs_2023a_B.r_co_idx_1;
          APF_CTL_VIS_Obs_2023a_B.increment[23] = APF_CTL_VIS_Obs_2023a_B.t65 +
            APF_CTL_VIS_Obs_2023a_B.t67;
          APF_CTL_VIS_Obs_2023a_B.increment[24] = -APF_CTL_VIS_Obs_2023a_B.t21 *
            APF_CTL_VIS_Obs_2023a_B.t25 - APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
          APF_CTL_VIS_Obs_2023a_B.increment[25] = -APF_CTL_VIS_Obs_2023a_B.t25 *
            APF_CTL_VIS_Obs_2023a_B.t36 - APF_CTL_VIS_Obs_2023a_B.t46_tmp;
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
            ((((((((((((APF_CTL_VIS_Obs_2023a_B.t63_tmp +
                        APF_CTL_VIS_Obs_2023a_B.t28) +
                       APF_CTL_VIS_Obs_2023a_B.t91) +
                      APF_CTL_VIS_Obs_2023a_B.t92) + APF_CTL_VIS_Obs_2023a_B.t93)
                    + APF_CTL_VIS_Obs_2023a_B.t94) + APF_CTL_VIS_Obs_2023a_B.t95)
                  + APF_CTL_VIS_Obs_2023a_B.t96) + APF_CTL_VIS_Obs_2023a_B.t97)
                + APF_CTL_VIS_Obs_2023a_B.t30) + APF_CTL_VIS_Obs_2023a_B.t99) +
              APF_CTL_VIS_Obs_2023a_B.t100) + APF_CTL_VIS_Obs_2023a_B.t63) *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_1;
          APF_CTL_VIS_Obs_2023a_B.t46_tmp = ((((APF_CTL_VIS_Obs_2023a_B.t51_tmp
            + APF_CTL_VIS_Obs_2023a_B.t103) + APF_CTL_VIS_Obs_2023a_B.t104) +
            APF_CTL_VIS_Obs_2023a_B.t33) + APF_CTL_VIS_Obs_2023a_B.t51) *
            APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.increment[26] =
            (((-APF_CTL_VIS_Obs_2023a_B.t54 * APF_CTL_VIS_Obs_2023a_B.t82 -
               APF_CTL_VIS_Obs_2023a_B.r_co_idx_1) -
              APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0) -
             APF_CTL_VIS_Obs_2023a_B.Sum6_gv) - APF_CTL_VIS_Obs_2023a_B.t46_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[27] =
            (-APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 *
             APF_CTL_VIS_Obs_2023a_B.t71 - APF_CTL_VIS_Obs_2023a_B.Sum6_gv) -
            APF_CTL_VIS_Obs_2023a_B.t46_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[28] = APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11] *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0;
          APF_CTL_VIS_Obs_2023a_B.increment[29] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2 *
            APF_CTL_VIS_Obs_2023a_B.t12_tmp;
          APF_CTL_VIS_Obs_2023a_B.increment[30] =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
            APF_CTL_VIS_Obs_2023a_B.t8 * sin(APF_CTL_VIS_Obs_2023a_B.link2_com_y);
          APF_CTL_VIS_Obs_2023a_B.increment[31] = APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.t8 * cos(APF_CTL_VIS_Obs_2023a_B.link2_com_y);
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 * APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.t37;
          APF_CTL_VIS_Obs_2023a_B.increment[32] = (-APF_CTL_VIS_Obs_2023a_P.a3 *
            APF_CTL_VIS_Obs_2023a_P.b0 * APF_CTL_VIS_Obs_2023a_P.mEE *
            APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_b_idx_1 -
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv * APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2) -
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.t7 *
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 * APF_CTL_VIS_Obs_2023a_B.t8 *
            APF_CTL_VIS_Obs_2023a_B.rtb_path_h1_idx_2;
          APF_CTL_VIS_Obs_2023a_B.increment[33] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv -
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
          APF_CTL_VIS_Obs_2023a_B.increment[34] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
          APF_CTL_VIS_Obs_2023a_B.increment[35] = 0.0;

          // SignalConversion generated from: '<S613>/ SFunction ' incorporates:
          //   DataStoreRead: '<S611>/RED_Fx_Sat1'
          //   DataStoreRead: '<S611>/RED_Fy_Sat1'
          //   DataStoreRead: '<S611>/RED_Tz_Sat1'
          //   DataStoreRead: '<S611>/RED_Tz_Sat2'
          //   DataStoreRead: '<S611>/RED_Tz_Sat3'
          //   DataStoreRead: '<S611>/RED_Tz_Sat4'
          //   MATLAB Function: '<S611>/Dynamics Model'

          APF_CTL_VIS_Obs_2023a_B.dv[0] = APF_CTL_VIS_Obs_2023a_DW.RED_Fx_Sat;
          APF_CTL_VIS_Obs_2023a_B.dv[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Fy_Sat;
          APF_CTL_VIS_Obs_2023a_B.dv[2] = APF_CTL_VIS_Obs_2023a_DW.RED_Tz_Sat;
          APF_CTL_VIS_Obs_2023a_B.dv[3] =
            APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command;
          APF_CTL_VIS_Obs_2023a_B.dv[4] =
            APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command;
          APF_CTL_VIS_Obs_2023a_B.dv[5] =
            APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command;

          // MATLAB Function: '<S611>/Dynamics Model' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_B.s[0] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.s[1] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.s[2] = 0.0;
          APF_CTL_VIS_Obs_2023a_B.s[3] = ((tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma2_sh *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) - tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma3_sh *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9])) *
            APF_CTL_VIS_Obs_2023a_P.Gamma1_sh + tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma5_sh *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9]) *
            APF_CTL_VIS_Obs_2023a_P.Gamma4_sh) +
            APF_CTL_VIS_Obs_2023a_P.Gamma6_sh *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];
          APF_CTL_VIS_Obs_2023a_B.s[4] = ((tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma2_el *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) - tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma3_el *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10])) *
            APF_CTL_VIS_Obs_2023a_P.Gamma1_el + tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma5_el *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10]) *
            APF_CTL_VIS_Obs_2023a_P.Gamma4_el) +
            APF_CTL_VIS_Obs_2023a_P.Gamma6_el *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10];
          APF_CTL_VIS_Obs_2023a_B.s[5] = ((tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma2_wr *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11]) - tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma3_wr *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11])) *
            APF_CTL_VIS_Obs_2023a_P.Gamma1_wr + tanh
            (APF_CTL_VIS_Obs_2023a_P.Gamma5_wr *
             APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11]) *
            APF_CTL_VIS_Obs_2023a_P.Gamma4_wr) +
            APF_CTL_VIS_Obs_2023a_P.Gamma6_wr *
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];
          for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 6;
               APF_CTL_VIS_Obs_2023a_B.i_m++) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                 APF_CTL_VIS_Obs_2023a_B.i++) {
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv +=
                APF_CTL_VIS_Obs_2023a_B.increment[6 * APF_CTL_VIS_Obs_2023a_B.i
                + APF_CTL_VIS_Obs_2023a_B.i_m] *
                APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[APF_CTL_VIS_Obs_2023a_B.i
                + 6];
            }

            APF_CTL_VIS_Obs_2023a_B.state_red[APF_CTL_VIS_Obs_2023a_B.i_m] =
              (APF_CTL_VIS_Obs_2023a_B.dv[APF_CTL_VIS_Obs_2023a_B.i_m] -
               APF_CTL_VIS_Obs_2023a_B.Sum6_gv) -
              APF_CTL_VIS_Obs_2023a_B.s[APF_CTL_VIS_Obs_2023a_B.i_m];
          }

          for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 6;
               APF_CTL_VIS_Obs_2023a_B.i_m++) {
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 6;
                 APF_CTL_VIS_Obs_2023a_B.i++) {
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv += APF_CTL_VIS_Obs_2023a_B.b_D[6 *
                APF_CTL_VIS_Obs_2023a_B.i + APF_CTL_VIS_Obs_2023a_B.i_m] *
                APF_CTL_VIS_Obs_2023a_B.state_red[APF_CTL_VIS_Obs_2023a_B.i];
            }

            // DiscreteIntegrator: '<S611>/Acceleration  to Velocity'
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[APF_CTL_VIS_Obs_2023a_B.i_m]
              =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[APF_CTL_VIS_Obs_2023a_B.i_m
              + 6] * APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainval +
              APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_f[APF_CTL_VIS_Obs_2023a_B.i_m];
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[APF_CTL_VIS_Obs_2023a_B.i_m
              + 6] =
              APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_f[APF_CTL_VIS_Obs_2023a_B.i_m
              + 6] + APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainval *
              APF_CTL_VIS_Obs_2023a_B.Sum6_gv;
          }

          // DataStoreWrite: '<S611>/Data Store Write' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[3];

          // DataStoreWrite: '<S611>/Data Store Write1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[4];

          // DataStoreWrite: '<S611>/Data Store Write2' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[5];

          // DataStoreWrite: '<S611>/Data Store Write6' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Shoulder =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[9];

          // DataStoreWrite: '<S611>/Data Store Write7' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Elbow =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[10];

          // DataStoreWrite: '<S611>/Data Store Write8' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Wrist =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[11];

          // Delay: '<S616>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_bs) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_by =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[6];
          }

          // Sum: '<S616>/Sum6' incorporates:
          //   Delay: '<S611>/Delay'
          //   Delay: '<S616>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[6] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_by;

          // If: '<S616>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
            // Outputs for IfAction SubSystem: '<S616>/Hold this value' incorporates:
            //   ActionPort: '<S619>/Action Port'

            // SignalConversion generated from: '<S619>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_pj = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

            // End of Outputs for SubSystem: '<S616>/Hold this value'
          }

          // End of If: '<S616>/if we went through a "step"'

          // Sum: '<S611>/Sum2' incorporates:
          //   DataStoreWrite: '<S611>/RED_IMU_Ay1'
          //   Gain: '<S616>/divide by delta T'
          //   RandomNumber: '<S611>/Random Number2'

          APF_CTL_VIS_Obs_2023a_DW.RED_Ax = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_pj +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_f;

          // Delay: '<S615>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_n5) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ny =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[7];
          }

          // Sum: '<S615>/Sum6' incorporates:
          //   Delay: '<S611>/Delay'
          //   Delay: '<S615>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[7] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ny;

          // If: '<S615>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
            // Outputs for IfAction SubSystem: '<S615>/Hold this value' incorporates:
            //   ActionPort: '<S618>/Action Port'

            // SignalConversion generated from: '<S618>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_a4 = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

            // End of Outputs for SubSystem: '<S615>/Hold this value'
          }

          // End of If: '<S615>/if we went through a "step"'

          // Sum: '<S611>/Sum3' incorporates:
          //   DataStoreWrite: '<S611>/RED_IMU_Ay_I1'
          //   Gain: '<S615>/divide by delta T'
          //   RandomNumber: '<S611>/Random Number1'

          APF_CTL_VIS_Obs_2023a_DW.RED_Ay = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_a4 +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_h;

          // Delay: '<S617>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_mj) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_nb =
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          }

          // Sum: '<S617>/Sum6' incorporates:
          //   Delay: '<S611>/Delay'
          //   Delay: '<S617>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_nb;

          // If: '<S617>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_gv != 0.0) {
            // Outputs for IfAction SubSystem: '<S617>/Hold this value' incorporates:
            //   ActionPort: '<S620>/Action Port'

            // SignalConversion generated from: '<S620>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_hq = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

            // End of Outputs for SubSystem: '<S617>/Hold this value'
          }

          // End of If: '<S617>/if we went through a "step"'

          // Sum: '<S611>/Sum4' incorporates:
          //   DataStoreWrite: '<S611>/RED_IMU_R1'
          //   Gain: '<S617>/divide by delta T'
          //   RandomNumber: '<S611>/Random Number3'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzDD = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_hq +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_go;

          // DataStoreWrite: '<S611>/RED_Px1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Px =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[0];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_Px1'

          // DataStoreWrite: '<S611>/RED_Py1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Py =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[1];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_Py1'

          // DataStoreWrite: '<S611>/RED_Rz1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Rz =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[2];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_Rz1'

          // DataStoreWrite: '<S611>/RED_RzD1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzD =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_RzD1'

          // DataStoreWrite: '<S611>/RED_Vx1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Vx =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[6];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_Vx1'

          // DataStoreWrite: '<S611>/RED_Vy1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.RED_Vy =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[7];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S611>/RED_Vy1'

          // Update for DiscreteIntegrator: '<S611>/Acceleration  to Velocity' incorporates:
          //   Delay: '<S611>/Delay'

          memcpy(&APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_f[0],
                 &APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[0], 12U * sizeof
                 (real_T));

          // Update for Delay: '<S616>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_bs = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_by =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[6];

          // Update for RandomNumber: '<S611>/Random Number2'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_f =
            APF__rt_nrand_Upu32_Yd_f_pw_snf
            (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_av) *
            APF_CTL_VIS_Obs_2023a_P.RandomNumber2_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Mean;

          // Update for Delay: '<S615>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_n5 = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ny =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[7];

          // Update for RandomNumber: '<S611>/Random Number1'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_h =
            APF__rt_nrand_Upu32_Yd_f_pw_snf
            (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4) *
            APF_CTL_VIS_Obs_2023a_P.RandomNumber1_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Mean;

          // Update for Delay: '<S617>/Delay1' incorporates:
          //   Delay: '<S611>/Delay'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_mj = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_nb =
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[8];

          // Update for RandomNumber: '<S611>/Random Number3'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_go =
            APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_i)
            * APF_CTL_VIS_Obs_2023a_P.RandomNumber3_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber3_Mean;

          // End of Outputs for SubSystem: '<S580>/RED + ARM'
        } else {
          // Outputs for IfAction SubSystem: '<S580>/RED Only' incorporates:
          //   ActionPort: '<S610>/Action Port'

          // DiscreteIntegrator: '<S622>/Acceleration  to Velocity' incorporates:
          //   DataStoreRead: '<S621>/RED_Fx_Sat'
          //   MATLAB Function: '<S622>/MATLAB Function'
          //   SignalConversion generated from: '<S629>/ SFunction '

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_DW.RED_Fx_Sat /
            APF_CTL_VIS_Obs_2023a_P.mRED *
            APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_g +
            APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[0];

          // End of Outputs for SubSystem: '<S580>/RED Only'
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // Outputs for IfAction SubSystem: '<S580>/RED Only' incorporates:
          //   ActionPort: '<S610>/Action Port'

          // DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_B.link2_com_y =
            APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval *
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv +
            APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[0];

          // End of Outputs for SubSystem: '<S580>/RED Only'
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 =
            APF_CTL_VIS_Obs_2023a_B.link2_com_y;

          // Outputs for IfAction SubSystem: '<S580>/RED Only' incorporates:
          //   ActionPort: '<S610>/Action Port'

          // Sum: '<S622>/Sum' incorporates:
          //   RandomNumber: '<S622>/Random Number'

          APF_CTL_VIS_Obs_2023a_B.Sum_b[0] = APF_CTL_VIS_Obs_2023a_B.link2_com_y
            + APF_CTL_VIS_Obs_2023a_DW.NextOutput_i;

          // DiscreteIntegrator: '<S622>/Acceleration  to Velocity' incorporates:
          //   DataStoreRead: '<S621>/RED_Fy_Sat'
          //   MATLAB Function: '<S622>/MATLAB Function'
          //   SignalConversion generated from: '<S629>/ SFunction '

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_DW.RED_Fy_Sat /
            APF_CTL_VIS_Obs_2023a_P.mRED *
            APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_g +
            APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[1];

          // End of Outputs for SubSystem: '<S580>/RED Only'
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // Outputs for IfAction SubSystem: '<S580>/RED Only' incorporates:
          //   ActionPort: '<S610>/Action Port'

          // DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_B.link2_com_y =
            APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval *
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv +
            APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[1];

          // End of Outputs for SubSystem: '<S580>/RED Only'
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 =
            APF_CTL_VIS_Obs_2023a_B.link2_com_y;

          // Outputs for IfAction SubSystem: '<S580>/RED Only' incorporates:
          //   ActionPort: '<S610>/Action Port'

          // Sum: '<S622>/Sum' incorporates:
          //   RandomNumber: '<S622>/Random Number'

          APF_CTL_VIS_Obs_2023a_B.Sum_b[1] = APF_CTL_VIS_Obs_2023a_B.link2_com_y
            + APF_CTL_VIS_Obs_2023a_DW.NextOutput_i;

          // DiscreteIntegrator: '<S622>/Acceleration  to Velocity' incorporates:
          //   DataStoreRead: '<S621>/Data Store Read'
          //   DataStoreRead: '<S621>/RED_Tz_Sat'
          //   MATLAB Function: '<S622>/MATLAB Function'
          //   Sum: '<S621>/Sum'

          APF_CTL_VIS_Obs_2023a_B.Sum6_gv = (APF_CTL_VIS_Obs_2023a_DW.RED_Tz_Sat
            + APF_CTL_VIS_Obs_2023a_DW.RED_Tz_RW_Sat) /
            APF_CTL_VIS_Obs_2023a_P.IRED *
            APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_gainva_g +
            APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[2];

          // DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_B.link2_com_y =
            APF_CTL_VIS_Obs_2023a_P.VelocitytoPosition_gainval *
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv +
            APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[2];

          // Sum: '<S622>/Sum' incorporates:
          //   RandomNumber: '<S622>/Random Number'

          APF_CTL_VIS_Obs_2023a_B.Sum_b[2] = APF_CTL_VIS_Obs_2023a_B.link2_com_y
            + APF_CTL_VIS_Obs_2023a_DW.NextOutput_i;

          // Delay: '<S624>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_nn) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n2 =
              APF_CTL_VIS_Obs_2023a_B.Sum_b[0];
          }

          // Sum: '<S624>/Sum6' incorporates:
          //   Delay: '<S624>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_B.Sum_b[0] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n2;

          // If: '<S624>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S624>/Hold this value' incorporates:
            //   ActionPort: '<S631>/Action Port'

            // SignalConversion generated from: '<S631>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_ff = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S624>/Hold this value'
          }

          // End of If: '<S624>/if we went through a "step"'

          // Gain: '<S624>/divide by delta T' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vx'

          APF_CTL_VIS_Obs_2023a_DW.RED_Vx = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_ff;

          // Delay: '<S626>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vx'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_kb) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc3 =
              APF_CTL_VIS_Obs_2023a_DW.RED_Vx;
          }

          // Sum: '<S626>/Sum6' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vx'
          //   Delay: '<S626>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_DW.RED_Vx -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc3;

          // If: '<S626>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S626>/Hold this value' incorporates:
            //   ActionPort: '<S633>/Action Port'

            // SignalConversion generated from: '<S633>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_fv = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S626>/Hold this value'
          }

          // End of If: '<S626>/if we went through a "step"'

          // Sum: '<S621>/Sum7' incorporates:
          //   DataStoreWrite: '<S621>/RED_IMU_Ay'
          //   Gain: '<S626>/divide by delta T'
          //   RandomNumber: '<S621>/Random Number7'

          APF_CTL_VIS_Obs_2023a_DW.RED_Ay = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_fv +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_n;

          // Delay: '<S623>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_jf) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k4 =
              APF_CTL_VIS_Obs_2023a_B.Sum_b[1];
          }

          // Sum: '<S623>/Sum6' incorporates:
          //   Delay: '<S623>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_B.Sum_b[1] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k4;

          // If: '<S623>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S623>/Hold this value' incorporates:
            //   ActionPort: '<S630>/Action Port'

            // SignalConversion generated from: '<S630>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_n = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S623>/Hold this value'
          }

          // End of If: '<S623>/if we went through a "step"'

          // Gain: '<S623>/divide by delta T' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vy'

          APF_CTL_VIS_Obs_2023a_DW.RED_Vy = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_n;

          // Delay: '<S627>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vy'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_dk) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_dh =
              APF_CTL_VIS_Obs_2023a_DW.RED_Vy;
          }

          // Sum: '<S627>/Sum6' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vy'
          //   Delay: '<S627>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_DW.RED_Vy -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_dh;

          // If: '<S627>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S627>/Hold this value' incorporates:
            //   ActionPort: '<S634>/Action Port'

            // SignalConversion generated from: '<S634>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_g0 = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S627>/Hold this value'
          }

          // End of If: '<S627>/if we went through a "step"'

          // Sum: '<S621>/Sum8' incorporates:
          //   DataStoreWrite: '<S621>/RED_IMU_Ay_I'
          //   Gain: '<S627>/divide by delta T'
          //   RandomNumber: '<S621>/Random Number6'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzDD = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_g0 +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_ga;

          // Delay: '<S625>/Delay1'
          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_l1) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lh =
              APF_CTL_VIS_Obs_2023a_B.Sum_b[2];
          }

          // Sum: '<S625>/Sum6' incorporates:
          //   Delay: '<S625>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_B.Sum_b[2] -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lh;

          // If: '<S625>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S625>/Hold this value' incorporates:
            //   ActionPort: '<S632>/Action Port'

            // SignalConversion generated from: '<S632>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_h = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S625>/Hold this value'
          }

          // End of If: '<S625>/if we went through a "step"'

          // Gain: '<S625>/divide by delta T' incorporates:
          //   DataStoreWrite: '<S621>/RED_RzD'

          APF_CTL_VIS_Obs_2023a_DW.RED_RzD = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_h;

          // Delay: '<S628>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_RzD'

          if (APF_CTL_VIS_Obs_2023a_DW.icLoad_kp) {
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_jb =
              APF_CTL_VIS_Obs_2023a_DW.RED_RzD;
          }

          // Sum: '<S628>/Sum6' incorporates:
          //   DataStoreWrite: '<S621>/RED_RzD'
          //   Delay: '<S628>/Delay1'

          APF_CTL_VIS_Obs_2023a_B.Sum6_b3 = APF_CTL_VIS_Obs_2023a_DW.RED_RzD -
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_jb;

          // If: '<S628>/if we went through a "step"'
          if (APF_CTL_VIS_Obs_2023a_B.Sum6_b3 != 0.0) {
            // Outputs for IfAction SubSystem: '<S628>/Hold this value' incorporates:
            //   ActionPort: '<S635>/Action Port'

            // SignalConversion generated from: '<S635>/In1'
            APF_CTL_VIS_Obs_2023a_B.In1_aw = APF_CTL_VIS_Obs_2023a_B.Sum6_b3;

            // End of Outputs for SubSystem: '<S628>/Hold this value'
          }

          // End of If: '<S628>/if we went through a "step"'

          // Sum: '<S621>/Sum9' incorporates:
          //   DataStoreWrite: '<S621>/RED_IMU_R'
          //   Gain: '<S628>/divide by delta T'
          //   RandomNumber: '<S621>/Random Number8'

          APF_CTL_VIS_Obs_2023a_DW.RED_Ax = 1.0 /
            APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_aw +
            APF_CTL_VIS_Obs_2023a_DW.NextOutput_l;

          // DataStoreWrite: '<S621>/RED_Px'
          APF_CTL_VIS_Obs_2023a_DW.RED_Px = APF_CTL_VIS_Obs_2023a_B.Sum_b[0];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S621>/RED_Px'

          // DataStoreWrite: '<S621>/RED_Py'
          APF_CTL_VIS_Obs_2023a_DW.RED_Py = APF_CTL_VIS_Obs_2023a_B.Sum_b[1];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S621>/RED_Py'

          // DataStoreWrite: '<S621>/RED_Rz' incorporates:
          //   DataStoreWrite: '<S621>/RED_RzD'
          //   DataStoreWrite: '<S621>/RED_Vx'
          //   DataStoreWrite: '<S621>/RED_Vy'

          APF_CTL_VIS_Obs_2023a_DW.RED_Rz = APF_CTL_VIS_Obs_2023a_B.Sum_b[2];
          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetBlockStateForSolverChangedAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
            rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
              (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          }

          // End of DataStoreWrite: '<S621>/RED_Rz'

          // Update for DiscreteIntegrator: '<S622>/Acceleration  to Velocity'
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[0] =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;

          // Update for DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[0] =
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0;

          // Update for DiscreteIntegrator: '<S622>/Acceleration  to Velocity'
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[1] =
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;

          // Update for DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[1] =
            APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1;

          // Update for DiscreteIntegrator: '<S622>/Acceleration  to Velocity'
          APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[2] =
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // Update for DiscreteIntegrator: '<S622>/Velocity to Position'
          APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[2] =
            APF_CTL_VIS_Obs_2023a_B.link2_com_y;

          // Update for RandomNumber: '<S622>/Random Number'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_i =
            APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_k)
            * sqrt(APF_CTL_VIS_Obs_2023a_P.noise_variance_RED) +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean;

          // Update for Delay: '<S624>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_nn = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n2 =
            APF_CTL_VIS_Obs_2023a_B.Sum_b[0];

          // Update for Delay: '<S626>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vx'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_kb = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc3 =
            APF_CTL_VIS_Obs_2023a_DW.RED_Vx;

          // Update for RandomNumber: '<S621>/Random Number7'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_n =
            APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_a)
            * APF_CTL_VIS_Obs_2023a_P.RandomNumber7_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber7_Mean;

          // Update for Delay: '<S623>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_jf = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k4 =
            APF_CTL_VIS_Obs_2023a_B.Sum_b[1];

          // Update for Delay: '<S627>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_Vy'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_dk = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_dh =
            APF_CTL_VIS_Obs_2023a_DW.RED_Vy;

          // Update for RandomNumber: '<S621>/Random Number6'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_ga =
            APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_f)
            * APF_CTL_VIS_Obs_2023a_P.RandomNumber6_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber6_Mean;

          // Update for Delay: '<S625>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_l1 = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lh =
            APF_CTL_VIS_Obs_2023a_B.Sum_b[2];

          // Update for Delay: '<S628>/Delay1' incorporates:
          //   DataStoreWrite: '<S621>/RED_RzD'

          APF_CTL_VIS_Obs_2023a_DW.icLoad_kp = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_jb =
            APF_CTL_VIS_Obs_2023a_DW.RED_RzD;

          // Update for RandomNumber: '<S621>/Random Number8'
          APF_CTL_VIS_Obs_2023a_DW.NextOutput_l =
            APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_h)
            * APF_CTL_VIS_Obs_2023a_P.RandomNumber8_StdDev +
            APF_CTL_VIS_Obs_2023a_P.RandomNumber8_Mean;

          // End of Outputs for SubSystem: '<S580>/RED Only'
        }

        // End of If: '<S580>/If'

        // Update for RandomNumber: '<S581>/Random Number'
        APF_CTL_VIS_Obs_2023a_DW.NextOutput = APF__rt_nrand_Upu32_Yd_f_pw_snf
          (&APF_CTL_VIS_Obs_2023a_DW.RandSeed) * sqrt
          (APF_CTL_VIS_Obs_2023a_P.noise_variance_BLACK) +
          APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_d;

        // Update for Delay: '<S587>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_ou = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_f =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[0];

        // Update for Delay: '<S584>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vx'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_p4 = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lg =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx;

        // Update for RandomNumber: '<S578>/Random Number1'
        APF_CTL_VIS_Obs_2023a_DW.NextOutput_b = APF__rt_nrand_Upu32_Yd_f_pw_snf(
          &APF_CTL_VIS_Obs_2023a_DW.RandSeed_n) *
          APF_CTL_VIS_Obs_2023a_P.RandomNumber1_StdDev_e +
          APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Mean_j;

        // Update for Delay: '<S582>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_jc = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3a =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[1];

        // Update for Delay: '<S585>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_Vy'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_jk = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ea =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy;

        // Update for RandomNumber: '<S578>/Random Number'
        APF_CTL_VIS_Obs_2023a_DW.NextOutput_j = APF__rt_nrand_Upu32_Yd_f_pw_snf(
          &APF_CTL_VIS_Obs_2023a_DW.RandSeed_g) *
          APF_CTL_VIS_Obs_2023a_P.RandomNumber_StdDev +
          APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_g;

        // Update for Delay: '<S583>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_jr = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cx =
          APF_CTL_VIS_Obs_2023a_B.Blue_Measurments_table_ref[2];

        // Update for Delay: '<S586>/Delay1' incorporates:
        //   DataStoreWrite: '<S578>/BLACK_RzD'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_jko = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ab =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD;

        // Update for RandomNumber: '<S578>/Random Number2'
        APF_CTL_VIS_Obs_2023a_DW.NextOutput_g = APF__rt_nrand_Upu32_Yd_f_pw_snf(
          &APF_CTL_VIS_Obs_2023a_DW.RandSeed_m) *
          APF_CTL_VIS_Obs_2023a_P.RandomNumber2_StdDev_c +
          APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Mean_b;

        // Update for DiscreteIntegrator: '<S581>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[0] =
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0];

        // Update for DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[0] =
          APF_CTL_VIS_Obs_2023a_B.y_p[0];

        // Update for DiscreteIntegrator: '<S595>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0;

        // Update for DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[0] =
          APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[0];

        // Update for DiscreteIntegrator: '<S581>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[1] =
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1];

        // Update for DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[1] =
          APF_CTL_VIS_Obs_2023a_B.y_p[1];

        // Update for DiscreteIntegrator: '<S595>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1;

        // Update for DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[1] =
          APF_CTL_VIS_Obs_2023a_B.MultiportSwitch_f[1];

        // Update for DiscreteIntegrator: '<S581>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[2] =
          APF_CTL_VIS_Obs_2023a_B.Derivative3;

        // Update for DiscreteIntegrator: '<S581>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[2] =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;

        // Update for DiscreteIntegrator: '<S595>/Acceleration  to Velocity'
        APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[2] =
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;

        // Update for DiscreteIntegrator: '<S595>/Velocity to Position'
        APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[2] =
          APF_CTL_VIS_Obs_2023a_B.Derivative2;

        // Update for RandomNumber: '<S595>/Random Number'
        APF_CTL_VIS_Obs_2023a_DW.NextOutput_a = APF__rt_nrand_Upu32_Yd_f_pw_snf(
          &APF_CTL_VIS_Obs_2023a_DW.RandSeed_o) * sqrt
          (APF_CTL_VIS_Obs_2023a_P.noise_variance_BLUE) +
          APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_dq;

        // Update for Delay: '<S601>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_do = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gv =
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0;

        // Update for Delay: '<S598>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vx'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_nk = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ds =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx;

        // Update for RandomNumber: '<S579>/Random Number4'
        APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0);

        // Update for Delay: '<S596>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_ip = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i5 =
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;

        // Update for Delay: '<S599>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_Vy'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_az = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l0 =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy;

        // Update for RandomNumber: '<S579>/Random Number3'
        APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_e);

        // Update for Delay: '<S597>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_dh = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_iq =
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

        // Update for Delay: '<S600>/Delay1' incorporates:
        //   DataStoreWrite: '<S579>/BLUE_RzD'

        APF_CTL_VIS_Obs_2023a_DW.icLoad_ex = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_eq =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD;

        // Update for RandomNumber: '<S579>/Random Number5'
        APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_c);

        // End of Outputs for SubSystem: '<Root>/Simulate Plant Dynamics'
      }

      // End of If: '<Root>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

      // If: '<S1>/This IF block determines whether or not to run the BLACK sim//exp' incorporates:
      //   DataStoreRead: '<S1>/Data Store Read'
      //   DataStoreRead: '<S1>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 2.0) &&
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhetherorn =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhetherorn;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S1>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S20>/Action Port'

        APF_CTL_VIS_ChangeBLACKBehavior(APF_CTL_VIS_Obs_2023a_M,
          &APF_CTL_VIS_Obs_2023a_DW.ChangeBLACKBehavior,
          &APF_CTL_VIS_Obs_2023a_P.ChangeBLACKBehavior);

        // End of Outputs for SubSystem: '<S1>/Change BLACK Behavior'
      }

      // End of If: '<S1>/This IF block determines whether or not to run the BLACK sim//exp' 

      // If: '<S1>/This IF block determines whether or not to run the BLUE sim//exp' incorporates:
      //   DataStoreRead: '<S1>/Data Store Read'
      //   DataStoreRead: '<S1>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 3.0) &&
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_j =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_j;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S1>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S21>/Action Port'

        APF_CTL_VIS_ChangeBLACKBehavior(APF_CTL_VIS_Obs_2023a_M,
          &APF_CTL_VIS_Obs_2023a_DW.ChangeBLUEBehavior,
          &APF_CTL_VIS_Obs_2023a_P.ChangeBLUEBehavior);

        // End of Outputs for SubSystem: '<S1>/Change BLUE Behavior'
      }

      // End of If: '<S1>/This IF block determines whether or not to run the BLUE sim//exp' 

      // If: '<S1>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S1>/Data Store Read'
      //   DataStoreRead: '<S1>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) &&
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_o =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_o;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S1>/Change RED Behavior' incorporates:
        //   ActionPort: '<S22>/Action Port'

        // Update for S-Function (sdspToNetwork): '<S22>/UDP Send' incorporates:
        //   Constant: '<S22>/Constant1'

        sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
        LibUpdate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U],
                          &APF_CTL_VIS_Obs_2023a_P.Constant1_Value_i, 1);
        if (*sErr != 0) {
          rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
          rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
        }

        // End of Update for S-Function (sdspToNetwork): '<S22>/UDP Send'
        // End of Outputs for SubSystem: '<S1>/Change RED Behavior'
      }

      // End of If: '<S1>/This IF block determines whether or not to run the RED sim//exp ' 

      // MATLABSystem: '<S23>/MATLAB System' incorporates:
      //   DataStoreRead: '<S3>/ARM_Command_Mode'
      //   DataStoreRead: '<S3>/BLACK_Ax'
      //   DataStoreRead: '<S3>/BLACK_Ay'
      //   DataStoreRead: '<S3>/BLACK_Fx_Sat'
      //   DataStoreRead: '<S3>/BLACK_Fy_Sat'
      //   DataStoreRead: '<S3>/BLACK_Px'
      //   DataStoreRead: '<S3>/BLACK_Py'
      //   DataStoreRead: '<S3>/BLACK_Rz'
      //   DataStoreRead: '<S3>/BLACK_RzD'
      //   DataStoreRead: '<S3>/BLACK_RzDD'
      //   DataStoreRead: '<S3>/BLACK_Thruster_ON_Count'
      //   DataStoreRead: '<S3>/BLACK_Tz_Sat'
      //   DataStoreRead: '<S3>/BLACK_Vx'
      //   DataStoreRead: '<S3>/BLACK_Vy'
      //   DataStoreRead: '<S3>/BLUE_Fx_Sat'
      //   DataStoreRead: '<S3>/BLUE_Fy_Sat'
      //   DataStoreRead: '<S3>/BLUE_Px'
      //   DataStoreRead: '<S3>/BLUE_Py'
      //   DataStoreRead: '<S3>/BLUE_Rz'
      //   DataStoreRead: '<S3>/BLUE_RzD'
      //   DataStoreRead: '<S3>/BLUE_Thruster_ON_Count'
      //   DataStoreRead: '<S3>/BLUE_Tz_Sat'
      //   DataStoreRead: '<S3>/BLUE_Vx'
      //   DataStoreRead: '<S3>/BLUE_Vy'
      //   DataStoreRead: '<S3>/Command_Px'
      //   DataStoreRead: '<S3>/Command_Py'
      //   DataStoreRead: '<S3>/Command_Rz'
      //   DataStoreRead: '<S3>/DAC_Attitude_k_1'
      //   DataStoreRead: '<S3>/DAC_Attitude_k_2'
      //   DataStoreRead: '<S3>/DAC_Posx_k_1'
      //   DataStoreRead: '<S3>/DAC_Posx_k_2'
      //   DataStoreRead: '<S3>/DAC_Posy_k_1'
      //   DataStoreRead: '<S3>/DAC_Posy_k_2'
      //   DataStoreRead: '<S3>/Data Store Read'
      //   DataStoreRead: '<S3>/Data Store Read1'
      //   DataStoreRead: '<S3>/Data Store Read10'
      //   DataStoreRead: '<S3>/Data Store Read11'
      //   DataStoreRead: '<S3>/Data Store Read12'
      //   DataStoreRead: '<S3>/Data Store Read13'
      //   DataStoreRead: '<S3>/Data Store Read14'
      //   DataStoreRead: '<S3>/Data Store Read15'
      //   DataStoreRead: '<S3>/Data Store Read16'
      //   DataStoreRead: '<S3>/Data Store Read17'
      //   DataStoreRead: '<S3>/Data Store Read18'
      //   DataStoreRead: '<S3>/Data Store Read2'
      //   DataStoreRead: '<S3>/Data Store Read3'
      //   DataStoreRead: '<S3>/Data Store Read4'
      //   DataStoreRead: '<S3>/Data Store Read5'
      //   DataStoreRead: '<S3>/Data Store Read6'
      //   DataStoreRead: '<S3>/Data Store Read7'
      //   DataStoreRead: '<S3>/Data Store Read8'
      //   DataStoreRead: '<S3>/Data Store Read9'
      //   DataStoreRead: '<S3>/RED_Ax'
      //   DataStoreRead: '<S3>/RED_Ay'
      //   DataStoreRead: '<S3>/RED_Fx_Sat'
      //   DataStoreRead: '<S3>/RED_Fy_Sat'
      //   DataStoreRead: '<S3>/RED_Px'
      //   DataStoreRead: '<S3>/RED_Py '
      //   DataStoreRead: '<S3>/RED_Rz'
      //   DataStoreRead: '<S3>/RED_RzDD'
      //   DataStoreRead: '<S3>/RED_RzD_Elbow'
      //   DataStoreRead: '<S3>/RED_RzD_Shoulder'
      //   DataStoreRead: '<S3>/RED_RzD_Wrist'
      //   DataStoreRead: '<S3>/RED_Rz_Elbow'
      //   DataStoreRead: '<S3>/RED_Rz_Shoulder'
      //   DataStoreRead: '<S3>/RED_Rz_Wrist'
      //   DataStoreRead: '<S3>/RED_Thruster_ON_Count'
      //   DataStoreRead: '<S3>/RED_Tz_Elbow'
      //   DataStoreRead: '<S3>/RED_Tz_Sat'
      //   DataStoreRead: '<S3>/RED_Tz_Shoulder'
      //   DataStoreRead: '<S3>/RED_Tz_Wrist'
      //   DataStoreRead: '<S3>/RED_Vx '
      //   DataStoreRead: '<S3>/RED_Vy'
      //   DataStoreRead: '<S3>/RED_Vz'
      //   DataStoreRead: '<S3>/Universal_Time'
      //   MATLAB Function: '<S23>/MATLAB Function'
      //   SignalConversion generated from: '<S23>/MATLAB System'

      //         %% Define input properties
      //  Call C-function implementing device output
      APF_CTL_VIS_Obs_2023a_B.b_u1[0] = APF_CTL_VIS_Obs_2023a_DW.Univ_Time;
      APF_CTL_VIS_Obs_2023a_B.b_u1[1] = APF_CTL_VIS_Obs_2023a_DW.RED_Fx_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[2] = APF_CTL_VIS_Obs_2023a_DW.RED_Fy_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[3] = APF_CTL_VIS_Obs_2023a_DW.RED_Tz_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[4] = APF_CTL_VIS_Obs_2023a_DW.RED_Px;
      APF_CTL_VIS_Obs_2023a_B.b_u1[5] = APF_CTL_VIS_Obs_2023a_DW.RED_Py;
      APF_CTL_VIS_Obs_2023a_B.b_u1[6] = APF_CTL_VIS_Obs_2023a_DW.RED_Rz;
      APF_CTL_VIS_Obs_2023a_B.b_u1[7] = APF_CTL_VIS_Obs_2023a_DW.RED_Vx;
      APF_CTL_VIS_Obs_2023a_B.b_u1[8] = APF_CTL_VIS_Obs_2023a_DW.RED_Vy;
      APF_CTL_VIS_Obs_2023a_B.b_u1[9] = APF_CTL_VIS_Obs_2023a_DW.RED_RzD;
      APF_CTL_VIS_Obs_2023a_B.b_u1[10] = APF_CTL_VIS_Obs_2023a_DW.RED_Ax;
      APF_CTL_VIS_Obs_2023a_B.b_u1[11] = APF_CTL_VIS_Obs_2023a_DW.RED_Ay;
      APF_CTL_VIS_Obs_2023a_B.b_u1[12] = APF_CTL_VIS_Obs_2023a_DW.RED_RzDD;
      APF_CTL_VIS_Obs_2023a_B.b_u1[13] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[14] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[15] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[16] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Px;
      APF_CTL_VIS_Obs_2023a_B.b_u1[17] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Py;
      APF_CTL_VIS_Obs_2023a_B.b_u1[18] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz;
      APF_CTL_VIS_Obs_2023a_B.b_u1[19] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx;
      APF_CTL_VIS_Obs_2023a_B.b_u1[20] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy;
      APF_CTL_VIS_Obs_2023a_B.b_u1[21] = APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD;
      APF_CTL_VIS_Obs_2023a_B.b_u1[22] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Ax;
      APF_CTL_VIS_Obs_2023a_B.b_u1[23] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Ay;
      APF_CTL_VIS_Obs_2023a_B.b_u1[24] = APF_CTL_VIS_Obs_2023a_DW.BLACK_RzDD;
      APF_CTL_VIS_Obs_2023a_B.b_u1[25] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[26] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[27] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz_Sat;
      APF_CTL_VIS_Obs_2023a_B.b_u1[28] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Px;
      APF_CTL_VIS_Obs_2023a_B.b_u1[29] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Py;
      APF_CTL_VIS_Obs_2023a_B.b_u1[30] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz;
      APF_CTL_VIS_Obs_2023a_B.b_u1[31] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx;
      APF_CTL_VIS_Obs_2023a_B.b_u1[32] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy;
      APF_CTL_VIS_Obs_2023a_B.b_u1[33] = APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD;
      APF_CTL_VIS_Obs_2023a_B.b_u1[34] =
        APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder;
      APF_CTL_VIS_Obs_2023a_B.b_u1[35] = APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow;
      APF_CTL_VIS_Obs_2023a_B.b_u1[36] = APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist;
      APF_CTL_VIS_Obs_2023a_B.b_u1[37] =
        APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Shoulder;
      APF_CTL_VIS_Obs_2023a_B.b_u1[38] = APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Elbow;
      APF_CTL_VIS_Obs_2023a_B.b_u1[39] = APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Wrist;
      APF_CTL_VIS_Obs_2023a_B.b_u1[40] =
        APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode;
      APF_CTL_VIS_Obs_2023a_B.b_u1[41] =
        APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command;
      APF_CTL_VIS_Obs_2023a_B.b_u1[42] =
        APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command;
      APF_CTL_VIS_Obs_2023a_B.b_u1[43] =
        APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command;
      APF_CTL_VIS_Obs_2023a_B.b_u1[44] =
        APF_CTL_VIS_Obs_2023a_DW.RED_Thruster_ON_Count;
      APF_CTL_VIS_Obs_2023a_B.b_u1[45] =
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Thruster_ON_Count;
      APF_CTL_VIS_Obs_2023a_B.b_u1[46] =
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Thruster_ON_Count;
      APF_CTL_VIS_Obs_2023a_B.b_u1[47] = APF_CTL_VIS_Obs_2023a_DW.Command_Px;
      APF_CTL_VIS_Obs_2023a_B.b_u1[48] = APF_CTL_VIS_Obs_2023a_DW.Command_Py;
      APF_CTL_VIS_Obs_2023a_B.b_u1[49] = APF_CTL_VIS_Obs_2023a_DW.Command_Rz;
      APF_CTL_VIS_Obs_2023a_B.b_u1[50] = APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_1;
      APF_CTL_VIS_Obs_2023a_B.b_u1[51] = APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_2;
      APF_CTL_VIS_Obs_2023a_B.b_u1[52] = APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_1;
      APF_CTL_VIS_Obs_2023a_B.b_u1[53] = APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_2;
      APF_CTL_VIS_Obs_2023a_B.b_u1[54] =
        APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_1;
      APF_CTL_VIS_Obs_2023a_B.b_u1[55] =
        APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_2;
      APF_CTL_VIS_Obs_2023a_B.b_u1[56] = APF_CTL_VIS_Obs_2023a_DW.TX2_data1;
      APF_CTL_VIS_Obs_2023a_B.b_u1[57] = APF_CTL_VIS_Obs_2023a_DW.TX2_data2;
      APF_CTL_VIS_Obs_2023a_B.b_u1[58] = APF_CTL_VIS_Obs_2023a_DW.TX2_data3;
      APF_CTL_VIS_Obs_2023a_B.b_u1[59] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_Est;
      APF_CTL_VIS_Obs_2023a_B.b_u1[60] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_Est;
      APF_CTL_VIS_Obs_2023a_B.b_u1[61] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_Est;
      APF_CTL_VIS_Obs_2023a_B.b_u1[62] =
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_preKalm;
      APF_CTL_VIS_Obs_2023a_B.b_u1[63] =
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_preKalm;
      APF_CTL_VIS_Obs_2023a_B.b_u1[64] =
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_preKalm;
      APF_CTL_VIS_Obs_2023a_B.b_u1[65] = APF_CTL_VIS_Obs_2023a_DW.TX2_data4;
      APF_CTL_VIS_Obs_2023a_B.b_u1[66] = APF_CTL_VIS_Obs_2023a_DW.TX2_data5;
      APF_CTL_VIS_Obs_2023a_B.b_u1[67] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_Est;
      APF_CTL_VIS_Obs_2023a_B.b_u1[68] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_Est;
      APF_CTL_VIS_Obs_2023a_B.b_u1[69] =
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_preKalm;
      APF_CTL_VIS_Obs_2023a_B.b_u1[70] =
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_preKalm;
      APF_CTL_VIS_Obs_2023a_B.b_u1[71] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Reject;
      APF_CTL_VIS_Obs_2023a_B.b_u1[72] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Reject;
      APF_CTL_VIS_Obs_2023a_B.b_u1[73] = APF_CTL_VIS_Obs_2023a_DW.Blue_Detection;
      APF_CTL_VIS_Obs_2023a_B.b_u1[74] = APF_CTL_VIS_Obs_2023a_DW.Phase;
      appendDataToFile(&APF_CTL_VIS_Obs_2023a_B.b_u1[0], 75.0);

      // If: '<S4>/This IF block determines whether or not to run the exp code' incorporates:
      //   DataStoreRead: '<S4>/Data Store Read'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_d =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_d;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S4>/Enable Pucks' incorporates:
        //   ActionPort: '<S25>/Action Port'

        // MATLABSystem: '<S25>/Set Pin 428 (Pucks) to HIGH' incorporates:
        //   DataStoreRead: '<S25>/Data Store Read1'

        if (APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin !=
            APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_gpioPin) {
          APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin =
            APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_gpioPin;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj_p.pinDirection !=
            APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_pinDirecti) {
          APF_CTL_VIS_Obs_2023a_DW.obj_p.pinDirection =
            APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_pinDirecti;
        }

        //         %% Define input properties
        //  Call C-function implementing device output
        // coder.ceval('export_gpio', obj.gpioPin);
        set_pin_direction(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin,
                          APF_CTL_VIS_Obs_2023a_DW.obj_p.pinDirection);
        change_gpio_value(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin,
                          APF_CTL_VIS_Obs_2023a_DW.Float_State);

        // End of MATLABSystem: '<S25>/Set Pin 428 (Pucks) to HIGH'
        // End of Outputs for SubSystem: '<S4>/Enable Pucks'
      }

      // End of If: '<S4>/This IF block determines whether or not to run the exp code' 

      // If: '<S5>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S5>/Data Store Read1'
      //   DataStoreRead: '<S5>/Data Store Read2'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) &&
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_a =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_a;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S5>/Change RED Behavior' incorporates:
        //   ActionPort: '<S26>/Action Port'

        // MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' incorporates:
        //   DataStoreWrite: '<S26>/Data Store Write3'
        //   DataStoreWrite: '<S26>/Data Store Write4'
        //   DataStoreWrite: '<S26>/Data Store Write5'
        //   Delay: '<S26>/Delay'
        //   Delay: '<S26>/Delay1'
        //   Delay: '<S26>/Delay2'

        if (APF_CTL_VIS_Obs_2023a_DW.obj_d.SampleTime !=
            APF_CTL_VIS_Obs_2023a_P.baseRate) {
          if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
                (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
              (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime =
              APF_CTL_VIS_Obs_2023a_P.baseRate;
          }

          APF_CTL_VIS_Obs_2023a_DW.obj_d.SampleTime =
            APF_CTL_VIS_Obs_2023a_B.sampleTime;
        }

        //         %% Define input properties
        //         %% Define output properties
        APF_CTL_VIS_Obs_2023a_B.sampleTime = 0.0;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 0.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = 0.0;
        APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Shoulder = 0.0;
        APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Elbow = 0.0;
        APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Wrist = 0.0;
        read_dynamixel_position(&APF_CTL_VIS_Obs_2023a_B.sampleTime,
          &APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW, &APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o,
          &APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Shoulder,
          &APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Elbow,
          &APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Wrist,
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_as,
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pw,
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_c);
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_as =
          APF_CTL_VIS_Obs_2023a_B.sampleTime;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pw =
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_c =
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;

        // End of MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' 

        // DataStoreWrite: '<S26>/Data Store Write' incorporates:
        //   Delay: '<S26>/Delay'

        APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_as;

        // DataStoreWrite: '<S26>/Data Store Write1' incorporates:
        //   Delay: '<S26>/Delay1'

        APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pw;

        // DataStoreWrite: '<S26>/Data Store Write2' incorporates:
        //   Delay: '<S26>/Delay2'

        APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_c;

        // End of Outputs for SubSystem: '<S5>/Change RED Behavior'
      }

      // End of If: '<S5>/This IF block determines whether or not to run the RED sim//exp ' 
    }

    // If: '<S13>/If performing an experiment, grab the PhaseSpace data. Otherwise, use a clock to set time in SIM.' incorporates:
    //   Constant: '<S535>/Constant'
    //   DataStoreRead: '<S13>/Data Store Read2'
    //   RelationalOperator: '<S535>/Relational Operator'
    //   RelationalOperator: '<S535>/Relational Operator1'

    APF_CTL_VIS_Obs_2023a_B.rtPrevAction =
      APF_CTL_VIS_Obs_2023a_DW.Ifperforminganexperimentgrabthe;
    APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
    if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
      if (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
      } else if (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0) {
        APF_CTL_VIS_Obs_2023a_B.rtAction = 1;
      }

      APF_CTL_VIS_Obs_2023a_DW.Ifperforminganexperimentgrabthe =
        APF_CTL_VIS_Obs_2023a_B.rtAction;
    } else {
      APF_CTL_VIS_Obs_2023a_B.rtAction =
        APF_CTL_VIS_Obs_2023a_DW.Ifperforminganexperimentgrabthe;
    }

    if ((APF_CTL_VIS_Obs_2023a_B.rtPrevAction !=
         APF_CTL_VIS_Obs_2023a_B.rtAction) &&
        (APF_CTL_VIS_Obs_2023a_B.rtPrevAction == 0)) {
      // Disable for If: '<S544>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jt = -1;

      // Disable for If: '<S541>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lg = -1;

      // Disable for If: '<S549>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ch = -1;

      // Disable for If: '<S538>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_c5 = -1;

      // Disable for If: '<S550>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ls = -1;

      // Disable for If: '<S539>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_i2 = -1;

      // Disable for If: '<S551>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_kz = -1;

      // Disable for If: '<S540>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ed = -1;

      // Disable for If: '<S545>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_o2 = -1;

      // Disable for If: '<S542>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_cu = -1;

      // Disable for If: '<S546>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hb = -1;

      // Disable for If: '<S543>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_fj = -1;

      // Disable for If: '<S537>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ca = -1;

      // Disable for If: '<S552>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ez = -1;

      // Disable for If: '<S547>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_oo = -1;

      // Disable for If: '<S553>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hv = -1;

      // Disable for If: '<S548>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lu = -1;

      // Disable for If: '<S554>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_Active_lgb = -1;

      // Disable for Enabled SubSystem: '<S535>/Enabled Subsystem1'
      APF_CTL_VIS_Obs_2023a_DW.EnabledSubsystem1_MODE = false;

      // End of Disable for SubSystem: '<S535>/Enabled Subsystem1'
    }

    switch (APF_CTL_VIS_Obs_2023a_B.rtAction) {
     case 0:
      // Outputs for IfAction SubSystem: '<S13>/Use Hardware to Obtain States' incorporates:
      //   ActionPort: '<S534>/Action Port'

      // S-Function (sdspFromNetwork): '<S534>/UDP Receive1'
      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b
                            [0U]);
      APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 10;
      LibOutputs_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U],
                         &APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[0U],
                         &APF_CTL_VIS_Obs_2023a_B.ntIdx0);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of S-Function (sdspFromNetwork): '<S534>/UDP Receive1'

      // Gain: '<S534>/Convert REDX from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertREDXfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertREDXfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[1];

      // DataStoreWrite: '<S534>/RED_Px1'
      APF_CTL_VIS_Obs_2023a_DW.RED_Px =
        APF_CTL_VIS_Obs_2023a_B.ConvertREDXfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px1'

      // Gain: '<S534>/Convert BLUX from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertBLUXfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertBLUXfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[7];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S544>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_lu) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_eo =
            APF_CTL_VIS_Obs_2023a_B.ConvertBLUXfrommmtom;
        }

        // Delay: '<S544>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_hy =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_eo;
      }

      // Sum: '<S544>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLUXfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_hy;

      // If: '<S544>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jt =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jt;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S544>/Hold this value' incorporates:
        //   ActionPort: '<S564>/Action Port'

        // SignalConversion generated from: '<S564>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_lk = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S544>/Hold this value'
      }

      // End of If: '<S544>/if we went through a "step"'

      // Gain: '<S544>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_lk;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S541>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_ld) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gs =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT;
        }

        // Delay: '<S541>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_g =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gs;
      }

      // If: '<S541>/if we went through a "step"' incorporates:
      //   Sum: '<S541>/Sum6'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.dividebydeltaT -
            APF_CTL_VIS_Obs_2023a_B.Delay1_g != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lg =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      }

      // End of If: '<S541>/if we went through a "step"'

      // Gain: '<S534>/Convert BLAX from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertBLAXfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertBLAXfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[4];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S549>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_dc) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_bm =
            APF_CTL_VIS_Obs_2023a_B.ConvertBLAXfrommmtom;
        }

        // Delay: '<S549>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_ha =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_bm;
      }

      // Sum: '<S549>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLAXfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_ha;

      // If: '<S549>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ch =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ch;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S549>/Hold this value' incorporates:
        //   ActionPort: '<S569>/Action Port'

        // SignalConversion generated from: '<S569>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_m = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S549>/Hold this value'
      }

      // End of If: '<S549>/if we went through a "step"'

      // Gain: '<S549>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_f = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_m;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S538>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_k) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4 =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_f;
        }

        // Delay: '<S538>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_gd =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4;
      }

      // Sum: '<S538>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_f -
        APF_CTL_VIS_Obs_2023a_B.Delay1_gd;

      // If: '<S538>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_c5 =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_c5;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S538>/Hold this value' incorporates:
        //   ActionPort: '<S558>/Action Port'

        // SignalConversion generated from: '<S558>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_p = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S538>/Hold this value'
      }

      // End of If: '<S538>/if we went through a "step"'

      // Gain: '<S538>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px11'

      APF_CTL_VIS_Obs_2023a_DW.BLACK_Ax = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
        * APF_CTL_VIS_Obs_2023a_B.In1_p;

      // Gain: '<S534>/Convert BLAY from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertBLAYfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertBLAYfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[5];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S550>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fv) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_md =
            APF_CTL_VIS_Obs_2023a_B.ConvertBLAYfrommmtom;
        }

        // Delay: '<S550>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_pp =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_md;
      }

      // Sum: '<S550>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLAYfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_pp;

      // If: '<S550>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ls =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ls;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S550>/Hold this value' incorporates:
        //   ActionPort: '<S570>/Action Port'

        // SignalConversion generated from: '<S570>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_b = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S550>/Hold this value'
      }

      // End of If: '<S550>/if we went through a "step"'

      // Gain: '<S550>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_l = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_b;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S539>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_na) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_l;
        }

        // Delay: '<S539>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_jr =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j;
      }

      // Sum: '<S539>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_l -
        APF_CTL_VIS_Obs_2023a_B.Delay1_jr;

      // If: '<S539>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_i2 =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_i2;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S539>/Hold this value' incorporates:
        //   ActionPort: '<S559>/Action Port'

        // SignalConversion generated from: '<S559>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_c = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S539>/Hold this value'
      }

      // End of If: '<S539>/if we went through a "step"'

      // Gain: '<S539>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px12'

      APF_CTL_VIS_Obs_2023a_DW.BLACK_Ay = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
        * APF_CTL_VIS_Obs_2023a_B.In1_c;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // S-Function (sdspunwrap2): '<S534>/Unwrap1'
        if (APF_CTL_VIS_Obs_2023a_DW.Unwrap1_FirstStep) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap1_Prev =
            APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[6];
          APF_CTL_VIS_Obs_2023a_DW.Unwrap1_FirstStep = false;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[6] -
          APF_CTL_VIS_Obs_2023a_DW.Unwrap1_Prev;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.sampleTime -
          floor((APF_CTL_VIS_Obs_2023a_B.sampleTime + 3.1415926535897931) /
                6.2831853071795862) * 6.2831853071795862;
        if ((APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW == -3.1415926535897931) &&
            (APF_CTL_VIS_Obs_2023a_B.sampleTime > 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 3.1415926535897931;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW -
          APF_CTL_VIS_Obs_2023a_B.sampleTime;
        if (fabs(APF_CTL_VIS_Obs_2023a_B.sampleTime) > 3.1415926535897931) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap1_Cumsum +=
            APF_CTL_VIS_Obs_2023a_B.sampleTime;
        }

        APF_CTL_VIS_Obs_2023a_DW.Unwrap1_Prev =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[6];

        // S-Function (sdspunwrap2): '<S534>/Unwrap1'
        APF_CTL_VIS_Obs_2023a_B.Unwrap1 =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[6] +
          APF_CTL_VIS_Obs_2023a_DW.Unwrap1_Cumsum;

        // Delay: '<S551>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_gx) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4s =
            APF_CTL_VIS_Obs_2023a_B.Unwrap1;
        }

        // Delay: '<S551>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_ma =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4s;
      }

      // Sum: '<S551>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.Unwrap1 -
        APF_CTL_VIS_Obs_2023a_B.Delay1_ma;

      // If: '<S551>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_kz =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_kz;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S551>/Hold this value' incorporates:
        //   ActionPort: '<S571>/Action Port'

        // SignalConversion generated from: '<S571>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_eg = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S551>/Hold this value'
      }

      // End of If: '<S551>/if we went through a "step"'

      // Gain: '<S551>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_e = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_eg;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S540>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_m) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_e;
        }

        // Delay: '<S540>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_ez =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k;
      }

      // Sum: '<S540>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_e -
        APF_CTL_VIS_Obs_2023a_B.Delay1_ez;

      // If: '<S540>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ed =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ed;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S540>/Hold this value' incorporates:
        //   ActionPort: '<S560>/Action Port'

        // SignalConversion generated from: '<S560>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_a = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S540>/Hold this value'
      }

      // End of If: '<S540>/if we went through a "step"'

      // Gain: '<S540>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px13'

      APF_CTL_VIS_Obs_2023a_DW.BLACK_RzDD = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_a;

      // Gain: '<S534>/Convert BLUY from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertBLUYfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertBLUYfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[8];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S545>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_e) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mi =
            APF_CTL_VIS_Obs_2023a_B.ConvertBLUYfrommmtom;
        }

        // Delay: '<S545>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_pz =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mi;
      }

      // Sum: '<S545>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLUYfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_pz;

      // If: '<S545>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_o2 =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_o2;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S545>/Hold this value' incorporates:
        //   ActionPort: '<S565>/Action Port'

        // SignalConversion generated from: '<S565>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_fy = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S545>/Hold this value'
      }

      // End of If: '<S545>/if we went through a "step"'

      // Gain: '<S545>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_c = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_fy;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S542>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fpv) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_c;
        }

        // Delay: '<S542>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_pt =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc;
      }

      // If: '<S542>/if we went through a "step"' incorporates:
      //   Sum: '<S542>/Sum6'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_c -
            APF_CTL_VIS_Obs_2023a_B.Delay1_pt != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_cu =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      }

      // End of If: '<S542>/if we went through a "step"'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // S-Function (sdspunwrap2): '<S534>/Unwrap2'
        if (APF_CTL_VIS_Obs_2023a_DW.Unwrap2_FirstStep) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap2_Prev =
            APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[9];
          APF_CTL_VIS_Obs_2023a_DW.Unwrap2_FirstStep = false;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[9] -
          APF_CTL_VIS_Obs_2023a_DW.Unwrap2_Prev;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.sampleTime -
          floor((APF_CTL_VIS_Obs_2023a_B.sampleTime + 3.1415926535897931) /
                6.2831853071795862) * 6.2831853071795862;
        if ((APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW == -3.1415926535897931) &&
            (APF_CTL_VIS_Obs_2023a_B.sampleTime > 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 3.1415926535897931;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW -
          APF_CTL_VIS_Obs_2023a_B.sampleTime;
        if (fabs(APF_CTL_VIS_Obs_2023a_B.sampleTime) > 3.1415926535897931) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap2_Cumsum +=
            APF_CTL_VIS_Obs_2023a_B.sampleTime;
        }

        APF_CTL_VIS_Obs_2023a_DW.Unwrap2_Prev =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[9];

        // S-Function (sdspunwrap2): '<S534>/Unwrap2'
        APF_CTL_VIS_Obs_2023a_B.Unwrap2 =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[9] +
          APF_CTL_VIS_Obs_2023a_DW.Unwrap2_Cumsum;

        // Delay: '<S546>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_mt) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cu =
            APF_CTL_VIS_Obs_2023a_B.Unwrap2;
        }

        // Delay: '<S546>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_ph =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cu;
      }

      // Sum: '<S546>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.Unwrap2 -
        APF_CTL_VIS_Obs_2023a_B.Delay1_ph;

      // If: '<S546>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hb =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hb;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S546>/Hold this value' incorporates:
        //   ActionPort: '<S566>/Action Port'

        // SignalConversion generated from: '<S566>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_gd = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S546>/Hold this value'
      }

      // End of If: '<S546>/if we went through a "step"'

      // Gain: '<S546>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_cy = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_gd;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S543>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_nw) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a0 =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_cy;
        }

        // Delay: '<S543>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_k =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a0;
      }

      // If: '<S543>/if we went through a "step"' incorporates:
      //   Sum: '<S543>/Sum6'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_cy -
            APF_CTL_VIS_Obs_2023a_B.Delay1_k != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_fj =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      }

      // End of If: '<S543>/if we went through a "step"'

      // DataStoreWrite: '<S534>/RED_Px17'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx = APF_CTL_VIS_Obs_2023a_B.dividebydeltaT;

      // DataStoreWrite: '<S534>/RED_Px18'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_Px =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLUXfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px18'

      // DataStoreWrite: '<S534>/RED_Px19'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_Py =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLUYfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px19'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S537>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_h) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_h =
            APF_CTL_VIS_Obs_2023a_B.ConvertREDXfrommmtom;
        }

        // Delay: '<S537>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_f5 =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_h;
      }

      // Sum: '<S537>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertREDXfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_f5;

      // If: '<S537>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ca =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ca;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S537>/Hold this value' incorporates:
        //   ActionPort: '<S557>/Action Port'

        // SignalConversion generated from: '<S557>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_gt = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S537>/Hold this value'
      }

      // End of If: '<S537>/if we went through a "step"'

      // Gain: '<S537>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_gt;

      // DataStoreWrite: '<S534>/RED_Px2'
      APF_CTL_VIS_Obs_2023a_DW.RED_Vx = APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px2'

      // DataStoreWrite: '<S534>/RED_Px20'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz = APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1
        [9];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px20'

      // DataStoreWrite: '<S534>/RED_Px3'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_f;

      // DataStoreWrite: '<S534>/RED_Px4'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_Px =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLAXfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px4'

      // DataStoreWrite: '<S534>/RED_Px5'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_Py =
        APF_CTL_VIS_Obs_2023a_B.ConvertBLAYfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px5'

      // DataStoreWrite: '<S534>/RED_Px6'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz =
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[6];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Px6'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S552>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_au) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ah =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n;
        }

        // Delay: '<S552>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_cz =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ah;
      }

      // Sum: '<S552>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n -
        APF_CTL_VIS_Obs_2023a_B.Delay1_cz;

      // If: '<S552>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ez =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ez;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S552>/Hold this value' incorporates:
        //   ActionPort: '<S572>/Action Port'

        // SignalConversion generated from: '<S572>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_f = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S552>/Hold this value'
      }

      // End of If: '<S552>/if we went through a "step"'

      // Gain: '<S552>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px7'

      APF_CTL_VIS_Obs_2023a_DW.RED_Ax = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
        APF_CTL_VIS_Obs_2023a_B.In1_f;

      // Gain: '<S534>/Convert REDY from [mm] to [m]'
      APF_CTL_VIS_Obs_2023a_B.ConvertREDYfrommmtom =
        APF_CTL_VIS_Obs_2023a_P.ConvertREDYfrommmtom_Gain *
        APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[2];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S547>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_eo) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lx =
            APF_CTL_VIS_Obs_2023a_B.ConvertREDYfrommmtom;
        }

        // Delay: '<S547>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_lh =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lx;
      }

      // Sum: '<S547>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.ConvertREDYfrommmtom -
        APF_CTL_VIS_Obs_2023a_B.Delay1_lh;

      // If: '<S547>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_oo =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_oo;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S547>/Hold this value' incorporates:
        //   ActionPort: '<S567>/Action Port'

        // SignalConversion generated from: '<S567>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_em = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S547>/Hold this value'
      }

      // End of If: '<S547>/if we went through a "step"'

      // Gain: '<S547>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n1 = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_em;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S553>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fh) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j3 =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n1;
        }

        // Delay: '<S553>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_jo =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j3;
      }

      // Sum: '<S553>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n1 -
        APF_CTL_VIS_Obs_2023a_B.Delay1_jo;

      // If: '<S553>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hv =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hv;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S553>/Hold this value' incorporates:
        //   ActionPort: '<S573>/Action Port'

        // SignalConversion generated from: '<S573>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_l = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S553>/Hold this value'
      }

      // End of If: '<S553>/if we went through a "step"'

      // Gain: '<S553>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px8'

      APF_CTL_VIS_Obs_2023a_DW.RED_Ay = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate *
        APF_CTL_VIS_Obs_2023a_B.In1_l;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // S-Function (sdspunwrap2): '<S534>/Unwrap'
        if (APF_CTL_VIS_Obs_2023a_DW.Unwrap_FirstStep) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap_Prev =
            APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[3];
          APF_CTL_VIS_Obs_2023a_DW.Unwrap_FirstStep = false;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[3] -
          APF_CTL_VIS_Obs_2023a_DW.Unwrap_Prev;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_B.sampleTime -
          floor((APF_CTL_VIS_Obs_2023a_B.sampleTime + 3.1415926535897931) /
                6.2831853071795862) * 6.2831853071795862;
        if ((APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW == -3.1415926535897931) &&
            (APF_CTL_VIS_Obs_2023a_B.sampleTime > 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = 3.1415926535897931;
        }

        APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW -
          APF_CTL_VIS_Obs_2023a_B.sampleTime;
        if (fabs(APF_CTL_VIS_Obs_2023a_B.sampleTime) > 3.1415926535897931) {
          APF_CTL_VIS_Obs_2023a_DW.Unwrap_Cumsum +=
            APF_CTL_VIS_Obs_2023a_B.sampleTime;
        }

        APF_CTL_VIS_Obs_2023a_DW.Unwrap_Prev =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[3];

        // S-Function (sdspunwrap2): '<S534>/Unwrap'
        APF_CTL_VIS_Obs_2023a_B.Unwrap = APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1
          [3] + APF_CTL_VIS_Obs_2023a_DW.Unwrap_Cumsum;

        // Delay: '<S548>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_fow) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m2 =
            APF_CTL_VIS_Obs_2023a_B.Unwrap;
        }

        // Delay: '<S548>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_gm =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m2;
      }

      // Sum: '<S548>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime = APF_CTL_VIS_Obs_2023a_B.Unwrap -
        APF_CTL_VIS_Obs_2023a_B.Delay1_gm;

      // If: '<S548>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lu =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lu;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S548>/Hold this value' incorporates:
        //   ActionPort: '<S568>/Action Port'

        // SignalConversion generated from: '<S568>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_en = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S548>/Hold this value'
      }

      // End of If: '<S548>/if we went through a "step"'

      // Gain: '<S548>/divide by delta T'
      APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_m = 1.0 /
        APF_CTL_VIS_Obs_2023a_P.baseRate * APF_CTL_VIS_Obs_2023a_B.In1_en;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S554>/Delay1'
        if (APF_CTL_VIS_Obs_2023a_DW.icLoad_aq) {
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hi =
            APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_m;
        }

        // Delay: '<S554>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_dd =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hi;
      }

      // Sum: '<S554>/Sum6'
      APF_CTL_VIS_Obs_2023a_B.sampleTime =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_m -
        APF_CTL_VIS_Obs_2023a_B.Delay1_dd;

      // If: '<S554>/if we went through a "step"'
      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_B.sampleTime != 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_Active_lgb =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_Active_lgb;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S554>/Hold this value' incorporates:
        //   ActionPort: '<S574>/Action Port'

        // SignalConversion generated from: '<S574>/In1'
        APF_CTL_VIS_Obs_2023a_B.In1_e0 = APF_CTL_VIS_Obs_2023a_B.sampleTime;

        // End of Outputs for SubSystem: '<S554>/Hold this value'
      }

      // End of If: '<S554>/if we went through a "step"'

      // Gain: '<S554>/divide by delta T' incorporates:
      //   DataStoreWrite: '<S534>/RED_Px9'

      APF_CTL_VIS_Obs_2023a_DW.RED_RzDD = 1.0 / APF_CTL_VIS_Obs_2023a_P.baseRate
        * APF_CTL_VIS_Obs_2023a_B.In1_e0;

      // DataStoreWrite: '<S534>/RED_Py1'
      APF_CTL_VIS_Obs_2023a_DW.RED_Py =
        APF_CTL_VIS_Obs_2023a_B.ConvertREDYfrommmtom;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Py1'

      // DataStoreWrite: '<S534>/RED_Py2'
      APF_CTL_VIS_Obs_2023a_DW.RED_Vy =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n1;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Py2'

      // DataStoreWrite: '<S534>/RED_Py3'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_l;

      // DataStoreWrite: '<S534>/RED_Py4'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_c;

      // DataStoreWrite: '<S534>/RED_Rz1'
      APF_CTL_VIS_Obs_2023a_DW.RED_Rz = APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[3];
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Rz1'

      // DataStoreWrite: '<S534>/RED_Rz2'
      APF_CTL_VIS_Obs_2023a_DW.RED_RzD =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_m;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        rtsiSetBlockStateForSolverChangedAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
      }

      // End of DataStoreWrite: '<S534>/RED_Rz2'

      // DataStoreWrite: '<S534>/RED_Rz3'
      APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_e;

      // DataStoreWrite: '<S534>/RED_Rz4'
      APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD =
        APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_cy;
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_B.Delay_g =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[0];

        // Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_B.Delay1_cj =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[0];

        // Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_B.Delay2_c =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[0];
      }

      // MATLAB Function: '<S534>/MATLAB Function'
      APF_CTL_VIS_Obs_2023a_B.StartClock = 0;
      if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 1.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = (APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1);
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 2.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = (APF_CTL_VIS_Obs_2023a_B.Delay1_cj ==
          1);
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 3.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay1_cj == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay1_cj == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = (APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1);
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 6.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = (APF_CTL_VIS_Obs_2023a_B.Delay2_c ==
          1);
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 7.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay2_c == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 8.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay1_cj == 1) &&
          (APF_CTL_VIS_Obs_2023a_B.Delay2_c == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 9.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay1_cj
          == 1) && (APF_CTL_VIS_Obs_2023a_B.Delay2_c == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay2_c == 1));
      } else if (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0) {
        APF_CTL_VIS_Obs_2023a_B.StartClock = ((APF_CTL_VIS_Obs_2023a_B.Delay_g ==
          1) && (APF_CTL_VIS_Obs_2023a_B.Delay1_cj == 1) &&
          (APF_CTL_VIS_Obs_2023a_B.Delay2_c == 1));
      }

      // End of MATLAB Function: '<S534>/MATLAB Function'
      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Outputs for Enabled SubSystem: '<S535>/Enabled Subsystem' incorporates:
        //   EnablePort: '<S555>/Enable'

        if (APF_CTL_VIS_Obs_2023a_B.StartClock !=
            APF_CTL_VIS_Obs_2023a_P.Constant_Value) {
          // Memory: '<S555>/Memory'
          APF_CTL_VIS_Obs_2023a_B.Memory =
            APF_CTL_VIS_Obs_2023a_DW.Memory_PreviousInput;

          // Update for Memory: '<S555>/Memory'
          APF_CTL_VIS_Obs_2023a_DW.Memory_PreviousInput =
            APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[0];
        }

        // End of Outputs for SubSystem: '<S535>/Enabled Subsystem'

        // Outputs for Enabled SubSystem: '<S535>/Enabled Subsystem1' incorporates:
        //   EnablePort: '<S556>/Enable'

        if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
          APF_CTL_VIS_Obs_2023a_DW.EnabledSubsystem1_MODE =
            (APF_CTL_VIS_Obs_2023a_B.StartClock ==
             APF_CTL_VIS_Obs_2023a_P.Constant_Value);
        }

        // End of Outputs for SubSystem: '<S535>/Enabled Subsystem1'
      }

      // Outputs for Enabled SubSystem: '<S535>/Enabled Subsystem1' incorporates:
      //   EnablePort: '<S556>/Enable'

      if (APF_CTL_VIS_Obs_2023a_DW.EnabledSubsystem1_MODE) {
        // Sum: '<S556>/Subtract'
        APF_CTL_VIS_Obs_2023a_B.Subtract_l =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive1_o1[0] -
          APF_CTL_VIS_Obs_2023a_B.Memory;
      }

      // End of Outputs for SubSystem: '<S535>/Enabled Subsystem1'

      // DataStoreWrite: '<S534>/Universal_Time' incorporates:
      //   Constant: '<S535>/Constant'
      //   RelationalOperator: '<S535>/Relational Operator'
      //   RelationalOperator: '<S535>/Relational Operator1'

      APF_CTL_VIS_Obs_2023a_DW.Univ_Time = APF_CTL_VIS_Obs_2023a_B.Subtract_l;

      // S-Function (sdspFromNetwork): '<S534>/UDP Receive'
      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
      APF_CTL_VIS_Obs_2023a_B.StartClock = 1;
      LibOutputs_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U],
                         &APF_CTL_VIS_Obs_2023a_B.UDPReceive_o1,
                         &APF_CTL_VIS_Obs_2023a_B.StartClock);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of S-Function (sdspFromNetwork): '<S534>/UDP Receive'

      // S-Function (sdspFromNetwork): '<S534>/UDP Receive2'
      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
      APF_CTL_VIS_Obs_2023a_B.yElIdx = 1;
      LibOutputs_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U],
                         &APF_CTL_VIS_Obs_2023a_B.UDPReceive2_o1,
                         &APF_CTL_VIS_Obs_2023a_B.yElIdx);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of S-Function (sdspFromNetwork): '<S534>/UDP Receive2'

      // S-Function (sdspFromNetwork): '<S534>/UDP Receive3'
      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
      APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 1;
      LibOutputs_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U],
                         &APF_CTL_VIS_Obs_2023a_B.UDPReceive3_o1,
                         &APF_CTL_VIS_Obs_2023a_B.uElOffset1);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of S-Function (sdspFromNetwork): '<S534>/UDP Receive3'
      // End of Outputs for SubSystem: '<S13>/Use Hardware to Obtain States'
      break;

     case 1:
      // Outputs for IfAction SubSystem: '<S13>/Initialize Universal Time (Simulation)' incorporates:
      //   ActionPort: '<S533>/Action Port'

      // Clock: '<S533>/Set Universal Time (If this is a simulation)' incorporates:
      //   DataStoreWrite: '<S533>/Universal_Time'

      APF_CTL_VIS_Obs_2023a_DW.Univ_Time = APF_CTL_VIS_Obs_2023a_M->Timing.t[0];

      // End of Outputs for SubSystem: '<S13>/Initialize Universal Time (Simulation)' 
      break;
    }

    // End of If: '<S13>/If performing an experiment, grab the PhaseSpace data. Otherwise, use a clock to set time in SIM.' 
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // If: '<S14>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' incorporates:
      //   DataStoreRead: '<S14>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_f =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_f;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S14>/Subsystem' incorporates:
        //   ActionPort: '<S575>/Action Port'

        // MATLABSystem: '<S575>/WhoAmI' incorporates:
        //   DataStoreWrite: '<S575>/Data Store Write'

        if (APF_CTL_VIS_Obs_2023a_DW.obj_dk.SampleTime !=
            APF_CTL_VIS_Obs_2023a_P.baseRate) {
          if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
                (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
              (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p =
              APF_CTL_VIS_Obs_2023a_P.baseRate;
          }

          APF_CTL_VIS_Obs_2023a_DW.obj_dk.SampleTime =
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        }

        //         %% Define output properties
        //  Call C-function implementing device output
        APF_CTL_VIS_Obs_2023a_DW.WhoAmI = WhoAmI();

        // End of MATLABSystem: '<S575>/WhoAmI'

        // DataStoreWrite: '<S575>/Data Store Write'
        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          rtsiSetBlockStateForSolverChangedAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
          rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
            (&APF_CTL_VIS_Obs_2023a_M->solverInfo, true);
        }

        // End of Outputs for SubSystem: '<S14>/Subsystem'
      }

      // End of If: '<S14>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

      // If: '<S15>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S15>/Data Store Read'
      //   DataStoreRead: '<S15>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) &&
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_g =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_g;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S15>/Change RED Behavior' incorporates:
        //   ActionPort: '<S576>/Action Port'

        // MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' incorporates:
        //   DataStoreRead: '<S576>/Arm Control Mode'
        //   DataStoreRead: '<S576>/Elbow Command'
        //   DataStoreRead: '<S576>/Shoulder Command'
        //   DataStoreRead: '<S576>/Wrist Command'

        if (APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_P_GAIN !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsineith) {
          APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_P_GAIN =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsineith;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_I_GAIN !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_c) {
          APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_I_GAIN =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_c;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_D_GAIN !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_d) {
          APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_D_GAIN =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_d;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.MAX_POSITION !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_n) {
          APF_CTL_VIS_Obs_2023a_DW.obj.MAX_POSITION =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_n;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.MIN_POSITION !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_g) {
          APF_CTL_VIS_Obs_2023a_DW.obj.MIN_POSITION =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_g;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.MOVE_TIME !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsine_cw) {
          APF_CTL_VIS_Obs_2023a_DW.obj.MOVE_TIME =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsine_cw;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.CURRENT_LIMIT !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_e) {
          APF_CTL_VIS_Obs_2023a_DW.obj.CURRENT_LIMIT =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_e;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_P_GAIN !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_k) {
          APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_P_GAIN =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_k;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_I_GAIN !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_j) {
          APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_I_GAIN =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_j;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.VELOCITY_LIMIT !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_l) {
          APF_CTL_VIS_Obs_2023a_DW.obj.VELOCITY_LIMIT =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_l;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.ACCELERATION_TIME !=
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_o) {
          APF_CTL_VIS_Obs_2023a_DW.obj.ACCELERATION_TIME =
            APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_o;
        }

        if (APF_CTL_VIS_Obs_2023a_DW.obj.SampleTime !=
            APF_CTL_VIS_Obs_2023a_P.baseRate) {
          if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
                (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
              (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e =
              APF_CTL_VIS_Obs_2023a_P.baseRate;
          }

          APF_CTL_VIS_Obs_2023a_DW.obj.SampleTime =
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e;
        }

        //         %% Define input properties
        //  Call C-function implementing device output
        //  include the dynamicel functions
        //  Run the main controller code. If the switch state is
        //  true then this code will initialize the parameters and
        //  then start the actuator, and THEN run the command. If the
        //  switch state is false, it will not reinitialize the
        //  motor
        dynamixel_controller(APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode,
                             APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_P_GAIN,
                             APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_I_GAIN,
                             APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_D_GAIN,
                             APF_CTL_VIS_Obs_2023a_DW.obj.MAX_POSITION,
                             APF_CTL_VIS_Obs_2023a_DW.obj.MIN_POSITION,
                             APF_CTL_VIS_Obs_2023a_DW.obj.MOVE_TIME,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
                             APF_CTL_VIS_Obs_2023a_DW.obj.CURRENT_LIMIT,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
                             APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_P_GAIN,
                             APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_I_GAIN,
                             APF_CTL_VIS_Obs_2023a_DW.obj.VELOCITY_LIMIT,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command,
                             APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command,
                             APF_CTL_VIS_Obs_2023a_DW.obj.ACCELERATION_TIME);

        // End of MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' 
        // End of Outputs for SubSystem: '<S15>/Change RED Behavior'
      }

      // End of If: '<S15>/This IF block determines whether or not to run the RED sim//exp ' 

      // If: '<S16>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' incorporates:
      //   DataStoreRead: '<S16>/Data Store Read1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if (APF_CTL_VIS_Obs_2023a_DW.isSim == 0.0) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_h =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_h;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S16>/Subsystem' incorporates:
        //   ActionPort: '<S577>/Action Port'

        // SignalConversion generated from: '<S577>/UDP Send' incorporates:
        //   DataStoreRead: '<S577>/BLACK_Px'
        //   DataStoreRead: '<S577>/BLACK_Py'
        //   DataStoreRead: '<S577>/BLACK_Rz'
        //   DataStoreRead: '<S577>/BLACK_RzD'
        //   DataStoreRead: '<S577>/BLACK_Vx'
        //   DataStoreRead: '<S577>/BLACK_Vy'
        //   DataStoreRead: '<S577>/BLUE_Px'
        //   DataStoreRead: '<S577>/BLUE_Py'
        //   DataStoreRead: '<S577>/BLUE_Rz'
        //   DataStoreRead: '<S577>/BLUE_RzD'
        //   DataStoreRead: '<S577>/BLUE_Vx'
        //   DataStoreRead: '<S577>/BLUE_Vy'
        //   DataStoreRead: '<S577>/RED_Px'
        //   DataStoreRead: '<S577>/RED_Py '
        //   DataStoreRead: '<S577>/RED_Rz'
        //   DataStoreRead: '<S577>/RED_Vx '
        //   DataStoreRead: '<S577>/RED_Vy'
        //   DataStoreRead: '<S577>/RED_Vz'
        //   DataStoreRead: '<S577>/Time'

        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[0] =
          APF_CTL_VIS_Obs_2023a_DW.Univ_Time;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[1] =
          APF_CTL_VIS_Obs_2023a_DW.RED_Px;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[2] =
          APF_CTL_VIS_Obs_2023a_DW.RED_Py;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[3] =
          APF_CTL_VIS_Obs_2023a_DW.RED_Rz;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[4] =
          APF_CTL_VIS_Obs_2023a_DW.RED_Vx;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[5] =
          APF_CTL_VIS_Obs_2023a_DW.RED_Vy;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[6] =
          APF_CTL_VIS_Obs_2023a_DW.RED_RzD;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[7] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Px;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[8] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Py;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[9] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[10] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[11] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[12] =
          APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[13] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Px;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[14] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Py;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[15] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[16] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[17] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy;
        APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o[18] =
          APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD;

        // Update for S-Function (sdspToNetwork): '<S577>/UDP Send' incorporates:
        //   SignalConversion generated from: '<S577>/UDP Send'
        //
        sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
        LibUpdate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U],
                          &APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendI_o
                          [0U], 19);
        if (*sErr != 0) {
          rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
          rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
        }

        // End of Update for S-Function (sdspToNetwork): '<S577>/UDP Send'
        // End of Outputs for SubSystem: '<S16>/Subsystem'
      }

      // End of If: '<S16>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 

      // If: '<S19>/This IF block determines whether or not to run the RED sim//exp ' incorporates:
      //   DataStoreRead: '<S19>/Data Store Read'
      //   DataStoreRead: '<S19>/Data Store Read1'
      //   If: '<S663>/If'
      //   If: '<S663>/If1'
      //   If: '<S663>/If2'
      //   MATLAB Function: '<S663>/MATLAB Function4'
      //   MATLAB Function: '<S663>/MATLAB Function7'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 1.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_p =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_p;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S19>/Change RED Behavior' incorporates:
        //   ActionPort: '<S638>/Action Port'

        // MATLAB Function: '<S663>/MATLAB Function3'
        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);

        // MATLAB Function: '<S663>/MATLAB Function' incorporates:
        //   DataStoreRead: '<S663>/Data Store Read'
        //   DataStoreRead: '<S663>/Data Store Read7'
        //   DataStoreRead: '<S663>/Data Store Read8'
        //   MATLAB Function: '<S663>/MATLAB Function4'
        //   MATLAB Function: '<S663>/MATLAB Function6'

        APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 = cos
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966);
        APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = APF_CTL_VIS_Obs_2023a_P.b0 * cos
          (APF_CTL_VIS_Obs_2023a_P.Phi);
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = APF_CTL_VIS_Obs_2023a_P.a1 *
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
        APF_CTL_VIS_Obs_2023a_B.Derivative3 = sin
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966);
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = APF_CTL_VIS_Obs_2023a_P.b0 * sin
          (APF_CTL_VIS_Obs_2023a_P.Phi);
        APF_CTL_VIS_Obs_2023a_B.d = APF_CTL_VIS_Obs_2023a_P.a1 *
          APF_CTL_VIS_Obs_2023a_B.Derivative3;
        APF_CTL_VIS_Obs_2023a_B.Derivative2 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW
          + APF_CTL_VIS_Obs_2023a_B.d;
        APF_CTL_VIS_Obs_2023a_B.sampleTime_p =
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966) +
          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow;
        APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = cos
          (APF_CTL_VIS_Obs_2023a_B.sampleTime_p);
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = (APF_CTL_VIS_Obs_2023a_P.b1 *
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1) + APF_CTL_VIS_Obs_2023a_P.a2 *
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 = sin
          (APF_CTL_VIS_Obs_2023a_B.sampleTime_p);
        APF_CTL_VIS_Obs_2023a_B.Derivative3 *= APF_CTL_VIS_Obs_2023a_P.b1;
        APF_CTL_VIS_Obs_2023a_B.link2_com_y =
          (APF_CTL_VIS_Obs_2023a_B.Derivative3 +
           APF_CTL_VIS_Obs_2023a_B.Derivative2) + APF_CTL_VIS_Obs_2023a_P.a2 *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p +
          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist;
        APF_CTL_VIS_Obs_2023a_B.sampleTime = ((APF_CTL_VIS_Obs_2023a_P.mRED +
          APF_CTL_VIS_Obs_2023a_P.mPROX) + APF_CTL_VIS_Obs_2023a_P.mDIST) +
          APF_CTL_VIS_Obs_2023a_P.mEE;
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0 = cos
          (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
          APF_CTL_VIS_Obs_2023a_P.a3;
        APF_CTL_VIS_Obs_2023a_B.t16 = APF_CTL_VIS_Obs_2023a_P.b2 *
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
        APF_CTL_VIS_Obs_2023a_B.sampleTime_p = (((APF_CTL_VIS_Obs_2023a_B.t16 +
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0) +
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0) *
          APF_CTL_VIS_Obs_2023a_P.mEE + (APF_CTL_VIS_Obs_2023a_P.mPROX *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 + APF_CTL_VIS_Obs_2023a_P.mDIST *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 = sin
          (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
          APF_CTL_VIS_Obs_2023a_P.a3;
        APF_CTL_VIS_Obs_2023a_B.sampleTime_e = (((APF_CTL_VIS_Obs_2023a_P.b2 *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
          APF_CTL_VIS_Obs_2023a_B.link2_com_y) +
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
          APF_CTL_VIS_Obs_2023a_P.mEE + (APF_CTL_VIS_Obs_2023a_P.mPROX *
          APF_CTL_VIS_Obs_2023a_B.Derivative2 + APF_CTL_VIS_Obs_2023a_P.mDIST *
          APF_CTL_VIS_Obs_2023a_B.link2_com_y)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          // MATLAB Function: '<S663>/MATLAB Function3'
          APF_CTL_VIS_Obs_2023a_B.Derivative2 =
            APF_CTL_VIS_Obs_2023a_P.F_thrusters_RED[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.Derivative2;

          // MATLAB Function: '<S663>/MATLAB Function'
          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
            = APF_CTL_VIS_Obs_2023a_B.Derivative2 / 2.0;
        }

        // MATLAB Function: '<S663>/MATLAB Function'
        memset(&APF_CTL_VIS_Obs_2023a_B.y_c[0], 0, sizeof(real_T) << 6U);

        // If: '<S663>/If' incorporates:
        //   Constant: '<S663>/Constant'

        APF_CTL_VIS_Obs_2023a_B.rEQ0 =
          ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0));

        // MATLAB Function: '<S663>/MATLAB Function'
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[0] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[1] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[2] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[3] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[4] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[5] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[6] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[7] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_c[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b_g[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }

          // MATLAB Function: '<S663>/MATLAB Function3'
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1]
            = c[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 2]
            =
            APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[APF_CTL_VIS_Obs_2023a_B.i_m]
            / 1000.0;
        }

        // MATLAB Function: '<S663>/MATLAB Function3'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem' incorporates:
          //   ActionPort: '<S665>/Action Port'

          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem1' incorporates:
          //   ActionPort: '<S666>/Action Port'

          // SignalConversion generated from: '<S665>/In1' incorporates:
          //   MATLAB Function: '<S663>/MATLAB Function'
          //   Product: '<S681>/Product2'
          //   SignalConversion generated from: '<S666>/In1'

          memcpy(&APF_CTL_VIS_Obs_2023a_B.Product2_m[0],
                 &APF_CTL_VIS_Obs_2023a_B.b_g[0], 24U * sizeof(real_T));

          // End of Outputs for SubSystem: '<S663>/If Action Subsystem1'
          // End of Outputs for SubSystem: '<S663>/If Action Subsystem'
        } else {
          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem1' incorporates:
          //   ActionPort: '<S666>/Action Port'

          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem' incorporates:
          //   ActionPort: '<S665>/Action Port'

          // SignalConversion generated from: '<S666>/In1' incorporates:
          //   MATLAB Function: '<S663>/MATLAB Function'
          //   MATLAB Function: '<S663>/MATLAB Function3'
          //   Product: '<S681>/Product2'
          //   SignalConversion generated from: '<S665>/In1'

          memcpy(&APF_CTL_VIS_Obs_2023a_B.Product2_m[0],
                 &APF_CTL_VIS_Obs_2023a_B.b[0], 24U * sizeof(real_T));

          // End of Outputs for SubSystem: '<S663>/If Action Subsystem'
          // End of Outputs for SubSystem: '<S663>/If Action Subsystem1'
        }

        // PermuteDimensions: '<S680>/transpose' incorporates:
        //   If: '<S663>/If'
        //   Merge: '<S663>/Merge1'
        //   Product: '<S681>/Product2'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S680>/transpose'

        // MATLAB Function: '<S664>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S638>/RED_Rz'
        //   Product: '<S663>/Product2'

        APF_CTL__CreateRotationMatrix_g(APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
          &APF_CTL_VIS_Obs_2023a_B.Product2_b[0]);

        // Product: '<S664>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S638>/RED_Fx'
        //   DataStoreRead: '<S638>/RED_Fy'
        //   SignalConversion generated from: '<S664>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Product2_b[0] *
          APF_CTL_VIS_Obs_2023a_DW.RED_Fx + APF_CTL_VIS_Obs_2023a_B.Product2_b[2]
          * APF_CTL_VIS_Obs_2023a_DW.RED_Fy;

        // SignalConversion generated from: '<S663>/Product'
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

        // Product: '<S664>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S638>/RED_Fx'
        //   DataStoreRead: '<S638>/RED_Fy'
        //   SignalConversion generated from: '<S664>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
          APF_CTL_VIS_Obs_2023a_B.Product2_b[1] *
          APF_CTL_VIS_Obs_2023a_DW.RED_Fx + APF_CTL_VIS_Obs_2023a_B.Product2_b[3]
          * APF_CTL_VIS_Obs_2023a_DW.RED_Fy;

        // SignalConversion generated from: '<S663>/Product' incorporates:
        //   DataStoreRead: '<S638>/RED_Tz'

        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[2] = APF_CTL_VIS_Obs_2023a_DW.RED_Tz;

        // Product: '<S680>/Product' incorporates:
        //   Merge: '<S663>/Merge1'
        //   Product: '<S681>/Product2'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.Merge1_d[(APF_CTL_VIS_Obs_2023a_B.i_m <<
                3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[APF_CTL_VIS_Obs_2023a_B.i +
              3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        // Product: '<S680>/Product1' incorporates:
        //   Product: '<S680>/Product'

        APF_CTL_VIS_Obs__rt_invd3x3_snf(APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b,
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n);
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S663>/Product'
          APF_CTL_VIS_Obs_2023a_B.sampleTime_e = 0.0;

          // Product: '<S680>/Product2' incorporates:
          //   Merge: '<S663>/Merge1'

          APF_CTL_VIS_Obs_2023a_B.sampleTime_p =
            APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.Derivative2 =
            APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 =
            APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.i_m + 16];
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            // Product: '<S663>/Product'
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e +=
              ((APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                APF_CTL_VIS_Obs_2023a_B.i + 1] *
                APF_CTL_VIS_Obs_2023a_B.sampleTime_p +
                APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
                APF_CTL_VIS_Obs_2023a_B.i] * APF_CTL_VIS_Obs_2023a_B.Derivative2)
               + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
               APF_CTL_VIS_Obs_2023a_B.i + 2] *
               APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1) *
              APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i];
          }

          // End of Product: '<S680>/Product2'

          // Product: '<S663>/Product'
          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e;
        }

        // DataStoreWrite: '<S663>/Data Store Write1' incorporates:
        //   MATLAB Function: '<S663>/MATLAB Function5'

        APF_CTL_VIS_Ob_MATLABFunction10(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          &APF_CTL_VIS_Obs_2023a_B.sampleTime_p,
          &APF_CTL_VIS_Obs_2023a_DW.RED_Thruster_ON_Count,
          &APF_CTL_VIS_Obs_2023a_B.sf_MATLABFunction5);

        // MATLAB Function: '<S679>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S663>/RED_Rz'

        APF_CTL_VI_CreateRotationMatrix(APF_CTL_VIS_Obs_2023a_DW.RED_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip);

        // MATLAB Function: '<S663>/MATLAB Function7' incorporates:
        //   MATLAB Function: '<S663>/MATLAB Function11'
        //   MATLAB Function: '<S663>/MATLAB Function4'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
          APF_CTL_VIS_Obs_2023a_P.F_red_X_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 =
          APF_CTL_VIS_Obs_2023a_P.F_red_Y_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        // MATLAB Function: '<S663>/MATLAB Function4'
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 = APF_CTL_VIS_Obs_2023a_P.a1 *
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
        APF_CTL_VIS_Obs_2023a_B.Derivative2 = APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW
          + APF_CTL_VIS_Obs_2023a_B.d;
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 = (APF_CTL_VIS_Obs_2023a_P.b1 *
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 +
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1) + APF_CTL_VIS_Obs_2023a_P.a2 *
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h;
        APF_CTL_VIS_Obs_2023a_B.link2_com_y =
          (APF_CTL_VIS_Obs_2023a_B.Derivative3 +
           APF_CTL_VIS_Obs_2023a_B.Derivative2) + APF_CTL_VIS_Obs_2023a_P.a2 *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2;
        APF_CTL_VIS_Obs_2023a_B.sampleTime_p = (((APF_CTL_VIS_Obs_2023a_B.t16 +
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0) +
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_0) *
          APF_CTL_VIS_Obs_2023a_P.mEE + (APF_CTL_VIS_Obs_2023a_P.mPROX *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 + APF_CTL_VIS_Obs_2023a_P.mDIST *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        APF_CTL_VIS_Obs_2023a_B.sampleTime_e = (((APF_CTL_VIS_Obs_2023a_P.b2 *
          APF_CTL_VIS_Obs_2023a_B.Z_k_idx_2 +
          APF_CTL_VIS_Obs_2023a_B.link2_com_y) +
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
          APF_CTL_VIS_Obs_2023a_P.mEE + (APF_CTL_VIS_Obs_2023a_P.mPROX *
          APF_CTL_VIS_Obs_2023a_B.Derivative2 + APF_CTL_VIS_Obs_2023a_P.mDIST *
          APF_CTL_VIS_Obs_2023a_B.link2_com_y)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        memset(&APF_CTL_VIS_Obs_2023a_B.y_c[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        // MATLAB Function: '<S663>/MATLAB Function11' incorporates:
        //   MATLAB Function: '<S663>/MATLAB Function6'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y_k[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_k[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        // MATLAB Function: '<S663>/MATLAB Function6' incorporates:
        //   DataStoreRead: '<S663>/Data Store Read1'
        //   DataStoreRead: '<S663>/Data Store Read2'
        //   DataStoreRead: '<S663>/Data Store Read3'

        APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h = cos
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966);
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 =
          APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
          APF_CTL_VIS_Obs_2023a_P.a1 + APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
        APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 = sin
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966);
        APF_CTL_VIS_Obs_2023a_B.Derivative2 =
          APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 * APF_CTL_VIS_Obs_2023a_P.a1
          + APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
        APF_CTL_VIS_Obs_2023a_B.Derivative3 =
          (APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder + 1.5707963267948966) +
          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = cos
          (APF_CTL_VIS_Obs_2023a_B.Derivative3);
        APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0 =
          (APF_CTL_VIS_Obs_2023a_B.rtb_Blue_Measurments_table_re_h *
           APF_CTL_VIS_Obs_2023a_P.b1 + APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1) +
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW * APF_CTL_VIS_Obs_2023a_P.a2;
        APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o = sin
          (APF_CTL_VIS_Obs_2023a_B.Derivative3);
        APF_CTL_VIS_Obs_2023a_B.link2_com_y =
          (APF_CTL_VIS_Obs_2023a_B.rtb_path_p_idx_0 * APF_CTL_VIS_Obs_2023a_P.b1
           + APF_CTL_VIS_Obs_2023a_B.Derivative2) +
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o * APF_CTL_VIS_Obs_2023a_P.a2;
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1 =
          APF_CTL_VIS_Obs_2023a_B.Derivative3 +
          APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist;
        APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW = (((APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW
          * APF_CTL_VIS_Obs_2023a_P.b2 + APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0) +
          cos(APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
          APF_CTL_VIS_Obs_2023a_P.a3) * APF_CTL_VIS_Obs_2023a_P.mEE +
          (APF_CTL_VIS_Obs_2023a_P.mPROX * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_1 +
           APF_CTL_VIS_Obs_2023a_P.mDIST * APF_CTL_VIS_Obs_2023a_B.Z_k_idx_0)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        APF_CTL_VIS_Obs_2023a_B.sampleTime =
          (((APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o * APF_CTL_VIS_Obs_2023a_P.b2 +
             APF_CTL_VIS_Obs_2023a_B.link2_com_y) + sin
            (APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_o_idx_1) *
            APF_CTL_VIS_Obs_2023a_P.a3) * APF_CTL_VIS_Obs_2023a_P.mEE +
           (APF_CTL_VIS_Obs_2023a_P.mPROX * APF_CTL_VIS_Obs_2023a_B.Derivative2
            + APF_CTL_VIS_Obs_2023a_P.mDIST *
            APF_CTL_VIS_Obs_2023a_B.link2_com_y)) /
          APF_CTL_VIS_Obs_2023a_B.sampleTime * 1000.0;
        memset(&APF_CTL_VIS_Obs_2023a_B.y_cx[0], 0, sizeof(real_T) << 6U);

        // If: '<S663>/If2' incorporates:
        //   Constant: '<S663>/Constant2'

        APF_CTL_VIS_Obs_2023a_B.rEQ0 =
          ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0));

        // MATLAB Function: '<S663>/MATLAB Function6'
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_cx[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[0] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[1] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[2] -
           APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[3] -
           APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[4] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[5] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[6] +
           APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[7] +
           APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_cx[(APF_CTL_VIS_Obs_2023a_B.i_m << 3)
                + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b_g[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }

          // MATLAB Function: '<S663>/MATLAB Function11'
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1]
            = c[APF_CTL_VIS_Obs_2023a_B.i_m];
        }

        // MATLAB Function: '<S663>/MATLAB Function11'
        APF_CTL_VIS_Obs_2023a_B.Product2_m[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_k[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem4' incorporates:
          //   ActionPort: '<S669>/Action Port'

          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem5' incorporates:
          //   ActionPort: '<S670>/Action Port'

          // SignalConversion generated from: '<S669>/H' incorporates:
          //   MATLAB Function: '<S663>/MATLAB Function6'
          //   Product: '<S681>/Product2'
          //   SignalConversion generated from: '<S670>/In1'

          memcpy(&APF_CTL_VIS_Obs_2023a_B.Product2_m[0],
                 &APF_CTL_VIS_Obs_2023a_B.b_g[0], 24U * sizeof(real_T));

          // End of Outputs for SubSystem: '<S663>/If Action Subsystem5'
          // End of Outputs for SubSystem: '<S663>/If Action Subsystem4'
        } else {
          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem5' incorporates:
          //   ActionPort: '<S670>/Action Port'

          // Outputs for IfAction SubSystem: '<S663>/If Action Subsystem4' incorporates:
          //   ActionPort: '<S669>/Action Port'

          // SignalConversion generated from: '<S670>/In1' incorporates:
          //   MATLAB Function: '<S663>/MATLAB Function11'
          //   MATLAB Function: '<S663>/MATLAB Function6'
          //   Product: '<S681>/Product2'
          //   SignalConversion generated from: '<S669>/H'

          memcpy(&APF_CTL_VIS_Obs_2023a_B.Product2_m[0],
                 &APF_CTL_VIS_Obs_2023a_B.b[0], 24U * sizeof(real_T));

          // End of Outputs for SubSystem: '<S663>/If Action Subsystem4'
          // End of Outputs for SubSystem: '<S663>/If Action Subsystem5'
        }

        // PermuteDimensions: '<S681>/transpose' incorporates:
        //   If: '<S663>/If2'
        //   Product: '<S681>/Product2'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.transpose[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S681>/transpose'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            // Product: '<S681>/Product' incorporates:
            //   Product: '<S663>/Product2'

            APF_CTL_VIS_Obs_2023a_B.sampleTime = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              // Product: '<S663>/Product2' incorporates:
              //   PermuteDimensions: '<S681>/transpose'
              //   Product: '<S681>/Product'
              //   Product: '<S681>/Product2'

              APF_CTL_VIS_Obs_2023a_B.sampleTime +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.transpose[(APF_CTL_VIS_Obs_2023a_B.i_m <<
                3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            // Product: '<S681>/Product' incorporates:
            //   Product: '<S663>/Product2'

            APF_CTL_VIS_Obs_2023a_B.Product2_b[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.sampleTime;
          }
        }

        // Product: '<S681>/Product1' incorporates:
        //   Product: '<S663>/Product2'

        memcpy(&APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[0],
               &APF_CTL_VIS_Obs_2023a_B.Product2_b[0], 9U * sizeof(real_T));
        APF_CTL_VIS_Obs__rt_invd3x3_snf
          (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n,
           APF_CTL_VIS_Obs_2023a_B.Product2_b);

        // Product: '<S681>/Product2' incorporates:
        //   PermuteDimensions: '<S681>/transpose'
        //   Product: '<S663>/Product2'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.transpose[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
            APF_CTL_VIS_Obs_2023a_B.transpose[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
            APF_CTL_VIS_Obs_2023a_B.transpose[APF_CTL_VIS_Obs_2023a_B.i_m + 16];
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m +
              (APF_CTL_VIS_Obs_2023a_B.i << 3)] =
              (APF_CTL_VIS_Obs_2023a_B.Product2_b[3 * APF_CTL_VIS_Obs_2023a_B.i
               + 1] * APF_CTL_VIS_Obs_2023a_B.sampleTime +
               APF_CTL_VIS_Obs_2023a_B.Product2_b[3 * APF_CTL_VIS_Obs_2023a_B.i]
               * APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW) +
              APF_CTL_VIS_Obs_2023a_B.Product2_b[3 * APF_CTL_VIS_Obs_2023a_B.i +
              2] * APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;
          }
        }

        // End of Product: '<S681>/Product2'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S663>/Product2' incorporates:
          //   Product: '<S664>/Rotate F_I to F_b'
          //   Product: '<S681>/Product2'

          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 8] *
            APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 +
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m] *
            APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

          // Product: '<S663>/Product2' incorporates:
          //   DataStoreRead: '<S638>/RED_Tz'
          //   Product: '<S681>/Product2'
          //   SignalConversion generated from: '<S663>/Product'

          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 16]
            * APF_CTL_VIS_Obs_2023a_DW.RED_Tz;
          APF_CTL_VIS_Obs_2023a_B.Derivative2 =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +
            APF_CTL_VIS_Obs_2023a_B.sampleTime;

          // Product: '<S663>/Product2'
          APF_CTL_VIS_Obs_2023a_B.Product2_b[APF_CTL_VIS_Obs_2023a_B.i_m] =
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW +
            APF_CTL_VIS_Obs_2023a_B.sampleTime;

          // Saturate: '<S663>/Remove Negatives' incorporates:
          //   Product: '<S663>/Product2'

          if (APF_CTL_VIS_Obs_2023a_B.Derivative2 >
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat_k) {
            // Saturate: '<S663>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat_k;
          } else if (APF_CTL_VIS_Obs_2023a_B.Derivative2 <
                     APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat_k) {
            // Saturate: '<S663>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat_k;
          } else {
            // Saturate: '<S663>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }

          // End of Saturate: '<S663>/Remove Negatives'
        }

        // MATLAB Function: '<S663>/MATLAB Function2'
        APF_CTL_VIS_O_MATLABFunction1_l(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final);

        // If: '<S663>/If1' incorporates:
        //   Constant: '<S663>/Constant1'

        APF_CTL_VIS_Obs_2023a_B.rEQ0 =
          ((APF_CTL_VIS_Obs_2023a_P.platformSelection == 4.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 5.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 10.0) ||
           (APF_CTL_VIS_Obs_2023a_P.platformSelection == 11.0));

        // MATLAB Function: '<S663>/MATLAB Function4'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.i_m];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[0] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[1] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[2] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[3] -
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[4] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[5] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_e) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[6] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          (APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[7] +
           APF_CTL_VIS_Obs_2023a_B.sampleTime_p) / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_c[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b_g[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }

          // MATLAB Function: '<S663>/MATLAB Function7'
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.Product2_m[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1]
            = c[APF_CTL_VIS_Obs_2023a_B.i_m];
        }

        // MATLAB Function: '<S663>/MATLAB Function7'
        APF_CTL_VIS_Obs_2023a_B.Product2_m[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.Product2_m[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_RED[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.b[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_B.rEQ0) {
          memcpy(&APF_CTL_VIS_Obs_2023a_B.Merge1_d[0],
                 &APF_CTL_VIS_Obs_2023a_B.b_g[0], 24U * sizeof(real_T));
        } else {
          memcpy(&APF_CTL_VIS_Obs_2023a_B.Merge1_d[0],
                 &APF_CTL_VIS_Obs_2023a_B.b[0], 24U * sizeof(real_T));
        }

        // Product: '<S663>/Product1' incorporates:
        //   If: '<S663>/If1'
        //   MATLAB Function: '<S663>/MATLAB Function4'
        //   MATLAB Function: '<S663>/MATLAB Function7'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.Derivative3 = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 8;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative3 +=
              APF_CTL_VIS_Obs_2023a_B.Merge1_d[3 * APF_CTL_VIS_Obs_2023a_B.i +
              APF_CTL_VIS_Obs_2023a_B.i_m] *
              APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[APF_CTL_VIS_Obs_2023a_B.i];
          }

          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i_m] =
            APF_CTL_VIS_Obs_2023a_B.Derivative3;
        }

        // End of Product: '<S663>/Product1'

        // DataStoreWrite: '<S663>/RED_Fx_Sat' incorporates:
        //   Product: '<S679>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.RED_Fx_Sat =
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[0] *
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[2];

        // DataStoreWrite: '<S663>/RED_Fy_Sat' incorporates:
        //   Product: '<S679>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.RED_Fy_Sat = APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0]
          * APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[1] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[3];

        // DataStoreWrite: '<S663>/RED_Tz_Sat'
        APF_CTL_VIS_Obs_2023a_DW.RED_Tz_Sat = APF_CTL_VIS_Obs_2023a_B.x_ddot_d[2];

        // End of Outputs for SubSystem: '<S19>/Change RED Behavior'
      }

      // End of If: '<S19>/This IF block determines whether or not to run the RED sim//exp ' 

      // If: '<S19>/This IF block determines whether or not to run the BLACK sim//exp' incorporates:
      //   DataStoreRead: '<S19>/Data Store Read'
      //   DataStoreRead: '<S19>/Data Store Read1'
      //   Product: '<S648>/Product1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 2.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_am =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_am;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S19>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S636>/Action Port'

        // MATLAB Function: '<S646>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S639>/BLACK_Rz'

        APF_CTL_VI_CreateRotationMatrix(APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip);

        // MATLAB Function: '<S639>/MATLAB Function'
        for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 8;
             APF_CTL_VIS_Obs_2023a_B.i++) {
          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i] =
            APF_CTL_VIS_Obs_2023a_P.F_thrusters_BLACK[APF_CTL_VIS_Obs_2023a_B.i]
            / 2.0;
        }

        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 2] =
            APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
            / 1000.0;
        }

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p += APF_CTL_VIS_Obs_2023a_B.b
                [3 * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }
        }

        // End of MATLAB Function: '<S639>/MATLAB Function'

        // PermuteDimensions: '<S647>/transpose' incorporates:
        //   Product: '<S648>/Product1'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Merge1_d[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S647>/transpose'

        // Product: '<S647>/Product' incorporates:
        //   Product: '<S648>/Product1'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p +=
                APF_CTL_VIS_Obs_2023a_B.Merge1_d[3 * APF_CTL_VIS_Obs_2023a_B.d_j
                + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.Product1_e[(APF_CTL_VIS_Obs_2023a_B.i_m <<
                3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[APF_CTL_VIS_Obs_2023a_B.i +
              3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }
        }

        // Product: '<S647>/Product1' incorporates:
        //   Product: '<S647>/Product'

        APF_CTL_VIS_Obs__rt_invd3x3_snf(APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b,
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n);

        // Product: '<S647>/Product2' incorporates:
        //   Product: '<S639>/Product5'
        //   Product: '<S648>/Product1'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.sampleTime_e =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 16];
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m +
              (APF_CTL_VIS_Obs_2023a_B.i << 3)] =
              (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
               APF_CTL_VIS_Obs_2023a_B.i + 1] *
               APF_CTL_VIS_Obs_2023a_B.sampleTime_e +
               APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
               APF_CTL_VIS_Obs_2023a_B.i] * APF_CTL_VIS_Obs_2023a_B.sampleTime)
              + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
              APF_CTL_VIS_Obs_2023a_B.i + 2] * APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;
          }
        }

        // End of Product: '<S647>/Product2'

        // MATLAB Function: '<S640>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S636>/BLACK_Rz'
        //   Product: '<S648>/Product2'

        APF_CTL__CreateRotationMatrix_g(APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz,
          &APF_CTL_VIS_Obs_2023a_B.Product2_n[0]);

        // Product: '<S640>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S636>/BLACK_Fx'
        //   DataStoreRead: '<S636>/BLACK_Fy'
        //   SignalConversion generated from: '<S640>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Product2_n[0] *
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx +
          APF_CTL_VIS_Obs_2023a_B.Product2_n[2] *
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy;

        // SignalConversion generated from: '<S639>/Product' incorporates:
        //   Product: '<S640>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

        // Product: '<S640>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S636>/BLACK_Fx'
        //   DataStoreRead: '<S636>/BLACK_Fy'
        //   SignalConversion generated from: '<S640>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
          APF_CTL_VIS_Obs_2023a_B.Product2_n[1] *
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx +
          APF_CTL_VIS_Obs_2023a_B.Product2_n[3] *
          APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy;

        // SignalConversion generated from: '<S639>/Product' incorporates:
        //   DataStoreRead: '<S636>/BLACK_Tz'

        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[2] = APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S639>/Product' incorporates:
          //   DataStoreRead: '<S636>/BLACK_Tz'
          //   Product: '<S639>/Product5'
          //   Product: '<S640>/Rotate F_I to F_b'
          //   SignalConversion generated from: '<S639>/Product'

          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
            (APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 8]
             * APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 +
             APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m] *
             APF_CTL_VIS_Obs_2023a_B.Sum6_gv) +
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 16]
            * APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz;
        }

        // DataStoreWrite: '<S639>/Data Store Write2' incorporates:
        //   MATLAB Function: '<S639>/MATLAB Function10'

        APF_CTL_VIS_Ob_MATLABFunction10(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          &APF_CTL_VIS_Obs_2023a_B.sampleTime_p,
          &APF_CTL_VIS_Obs_2023a_DW.BLACK_Thruster_ON_Count,
          &APF_CTL_VIS_Obs_2023a_B.sf_MATLABFunction10);

        // MATLAB Function: '<S639>/MATLAB Function3' incorporates:
        //   MATLAB Function: '<S639>/MATLAB Function11'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
          APF_CTL_VIS_Obs_2023a_P.F_Black_X_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 =
          APF_CTL_VIS_Obs_2023a_P.F_Black_Y_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        // MATLAB Function: '<S639>/MATLAB Function11'
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y_c[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_e += APF_CTL_VIS_Obs_2023a_B.b
                [3 * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_c[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_e;
          }
        }

        // PermuteDimensions: '<S648>/transpose' incorporates:
        //   Product: '<S639>/Product5'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S648>/transpose'

        // Product: '<S648>/Product' incorporates:
        //   Product: '<S639>/Product5'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_e = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_e +=
                APF_CTL_VIS_Obs_2023a_B.Product1_e[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.Product2_m[(APF_CTL_VIS_Obs_2023a_B.i_m <<
                3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[APF_CTL_VIS_Obs_2023a_B.i +
              3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_e;
          }
        }

        // Product: '<S648>/Product1' incorporates:
        //   Product: '<S648>/Product'

        APF_CTL_VIS_Obs__rt_invd3x3_snf(APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b,
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n);
        memcpy(&APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[0],
               &APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[0], 9U *
               sizeof(real_T));
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S648>/Product2' incorporates:
          //   Product: '<S639>/Product5'

          APF_CTL_VIS_Obs_2023a_B.Derivative2 =
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.sampleTime_e =
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i_m + 16];

          // Product: '<S639>/Product5'
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            // Product: '<S648>/Product2'
            APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
              (APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
               APF_CTL_VIS_Obs_2023a_B.i + 1] *
               APF_CTL_VIS_Obs_2023a_B.Derivative2 +
               APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
               APF_CTL_VIS_Obs_2023a_B.i] * APF_CTL_VIS_Obs_2023a_B.sampleTime_e)
              + APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
              APF_CTL_VIS_Obs_2023a_B.i + 2] *
              APF_CTL_VIS_Obs_2023a_B.sampleTime;

            // Product: '<S648>/Product2'
            APF_CTL_VIS_Obs_2023a_B.Product2_n[APF_CTL_VIS_Obs_2023a_B.i_m +
              (APF_CTL_VIS_Obs_2023a_B.i << 3)] =
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // Product: '<S639>/Product5' incorporates:
            //   Product: '<S648>/Product2'

            APF_CTL_VIS_Obs_2023a_B.sampleTime_p +=
              APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW *
              APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i];
          }

          // Saturate: '<S639>/Remove Negatives' incorporates:
          //   Product: '<S639>/Product5'

          if (APF_CTL_VIS_Obs_2023a_B.sampleTime_p >
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat) {
            // Saturate: '<S639>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat;
          } else if (APF_CTL_VIS_Obs_2023a_B.sampleTime_p <
                     APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat) {
            // Saturate: '<S639>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat;
          } else {
            // Saturate: '<S639>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }

          // End of Saturate: '<S639>/Remove Negatives'
        }

        // MATLAB Function: '<S639>/MATLAB Function1' incorporates:
        //   Product: '<S648>/Product1'

        APF_CTL_VIS_O_MATLABFunction1_l(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d);

        // MATLAB Function: '<S639>/MATLAB Function3'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.i_m];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLACK[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S639>/Product1'
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i_m] = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 8;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i_m] +=
              APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[APF_CTL_VIS_Obs_2023a_B.i];
          }

          // End of Product: '<S639>/Product1'
        }

        // DataStoreWrite: '<S639>/BLACK_Fx_Sat' incorporates:
        //   Product: '<S646>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx_Sat =
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[0] *
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[2];

        // DataStoreWrite: '<S639>/BLACK_Fy_Sat' incorporates:
        //   Product: '<S646>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy_Sat =
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[1] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[3];

        // DataStoreWrite: '<S639>/BLACK_Tz_Sat'
        APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz_Sat =
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[2];

        // End of Outputs for SubSystem: '<S19>/Change BLACK Behavior'
      }

      // End of If: '<S19>/This IF block determines whether or not to run the BLACK sim//exp' 

      // If: '<S19>/This IF block determines whether or not to run the BLUE sim//exp' incorporates:
      //   DataStoreRead: '<S19>/Data Store Read'
      //   DataStoreRead: '<S19>/Data Store Read1'
      //   Product: '<S660>/Product1'

      APF_CTL_VIS_Obs_2023a_B.rtAction = -1;
      if (rtsiIsModeUpdateTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        if ((APF_CTL_VIS_Obs_2023a_DW.WhoAmI == 3.0) ||
            (APF_CTL_VIS_Obs_2023a_DW.isSim == 1.0)) {
          APF_CTL_VIS_Obs_2023a_B.rtAction = 0;
        }

        APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_h =
          APF_CTL_VIS_Obs_2023a_B.rtAction;
      } else {
        APF_CTL_VIS_Obs_2023a_B.rtAction =
          APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_h;
      }

      if (APF_CTL_VIS_Obs_2023a_B.rtAction == 0) {
        // Outputs for IfAction SubSystem: '<S19>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S637>/Action Port'

        // MATLAB Function: '<S658>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S651>/BLUE_Rz'

        APF_CTL_VI_CreateRotationMatrix(APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz,
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip);

        // MATLAB Function: '<S651>/MATLAB Function'
        for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 8;
             APF_CTL_VIS_Obs_2023a_B.i++) {
          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i] =
            APF_CTL_VIS_Obs_2023a_P.F_thrusters_BLUE[APF_CTL_VIS_Obs_2023a_B.i] /
            2.0;
        }

        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 2] =
            APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[APF_CTL_VIS_Obs_2023a_B.P_K_tmp]
            / 1000.0;
        }

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] = APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        // End of MATLAB Function: '<S651>/MATLAB Function'

        // PermuteDimensions: '<S659>/transpose' incorporates:
        //   Product: '<S660>/Product1'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Product2_m[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S659>/transpose'

        // Product: '<S659>/Product' incorporates:
        //   Product: '<S660>/Product1'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 +=
                APF_CTL_VIS_Obs_2023a_B.Product2_m[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.Product1_it[(APF_CTL_VIS_Obs_2023a_B.i_m
                << 3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[APF_CTL_VIS_Obs_2023a_B.i +
              3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.Derivative2;
          }
        }

        // Product: '<S659>/Product1' incorporates:
        //   Product: '<S659>/Product'

        APF_CTL_VIS_Obs__rt_invd3x3_snf(APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b,
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n);

        // Product: '<S659>/Product2' incorporates:
        //   Product: '<S651>/Product4'
        //   Product: '<S660>/Product1'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p =
            APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.sampleTime_e =
            APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.i_m + 16];
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m +
              (APF_CTL_VIS_Obs_2023a_B.i << 3)] =
              (APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
               APF_CTL_VIS_Obs_2023a_B.i + 1] *
               APF_CTL_VIS_Obs_2023a_B.sampleTime_p +
               APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
               APF_CTL_VIS_Obs_2023a_B.i] * APF_CTL_VIS_Obs_2023a_B.sampleTime_e)
              + APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[3 *
              APF_CTL_VIS_Obs_2023a_B.i + 2] *
              APF_CTL_VIS_Obs_2023a_B.sampleTime;
          }
        }

        // End of Product: '<S659>/Product2'

        // MATLAB Function: '<S652>/Create Rotation Matrix' incorporates:
        //   DataStoreRead: '<S637>/BLUE_Rz'
        //   Product: '<S660>/Product2'

        APF_CTL__CreateRotationMatrix_g(APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz,
          &APF_CTL_VIS_Obs_2023a_B.Product2[0]);

        // Product: '<S652>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S637>/BLUE_Fx'
        //   DataStoreRead: '<S637>/BLUE_Fy'
        //   SignalConversion generated from: '<S652>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.Sum6_gv = APF_CTL_VIS_Obs_2023a_B.Product2[0] *
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx + APF_CTL_VIS_Obs_2023a_B.Product2[2]
          * APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy;

        // SignalConversion generated from: '<S651>/Product' incorporates:
        //   Product: '<S652>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] = APF_CTL_VIS_Obs_2023a_B.Sum6_gv;

        // Product: '<S652>/Rotate F_I to F_b' incorporates:
        //   DataStoreRead: '<S637>/BLUE_Fx'
        //   DataStoreRead: '<S637>/BLUE_Fy'
        //   SignalConversion generated from: '<S652>/Rotate F_I to F_b'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 =
          APF_CTL_VIS_Obs_2023a_B.Product2[1] * APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx
          + APF_CTL_VIS_Obs_2023a_B.Product2[3] *
          APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy;

        // SignalConversion generated from: '<S651>/Product' incorporates:
        //   DataStoreRead: '<S637>/BLUE_Tz'

        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0;
        APF_CTL_VIS_Obs_2023a_B.x_ddot_d[2] = APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S651>/Product' incorporates:
          //   DataStoreRead: '<S637>/BLUE_Tz'
          //   Product: '<S651>/Product4'
          //   Product: '<S652>/Rotate F_I to F_b'
          //   SignalConversion generated from: '<S651>/Product'

          APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
            (APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 8]
             * APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_0 +
             APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m] *
             APF_CTL_VIS_Obs_2023a_B.Sum6_gv) +
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 16]
            * APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz;
        }

        // DataStoreWrite: '<S651>/Data Store Write1' incorporates:
        //   MATLAB Function: '<S651>/MATLAB Function6'

        APF_CTL_VIS_Ob_MATLABFunction10(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          &APF_CTL_VIS_Obs_2023a_B.sampleTime_p,
          &APF_CTL_VIS_Obs_2023a_DW.BLUE_Thruster_ON_Count,
          &APF_CTL_VIS_Obs_2023a_B.sf_MATLABFunction6);

        // MATLAB Function: '<S651>/MATLAB Function1' incorporates:
        //   MATLAB Function: '<S651>/MATLAB Function7'

        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 =
          APF_CTL_VIS_Obs_2023a_P.F_Blue_X_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 =
          APF_CTL_VIS_Obs_2023a_P.F_Blue_Y_nominal *
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        // MATLAB Function: '<S651>/MATLAB Function7'
        APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[0] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[1] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.Sum6_b3 /= 2.0;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[2] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[3] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[4] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[5] =
          APF_CTL_VIS_Obs_2023a_B.rtb_x_ddot_idx_1;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[6] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[7] =
          APF_CTL_VIS_Obs_2023a_B.Sum6_b3;
        memset(&APF_CTL_VIS_Obs_2023a_B.y_c[0], 0, sizeof(real_T) << 6U);
        for (APF_CTL_VIS_Obs_2023a_B.P_K_tmp = 0;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp < 8;
             APF_CTL_VIS_Obs_2023a_B.P_K_tmp++) {
          APF_CTL_VIS_Obs_2023a_B.y_c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp +
            (APF_CTL_VIS_Obs_2023a_B.P_K_tmp << 3)] =
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp] =
            b[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.P_K_tmp + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.P_K_tmp];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p += APF_CTL_VIS_Obs_2023a_B.b
                [3 * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.y_c[(APF_CTL_VIS_Obs_2023a_B.i_m << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.i + 3 *
              APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }
        }

        // PermuteDimensions: '<S660>/transpose' incorporates:
        //   Product: '<S651>/Product4'

        APF_CTL_VIS_Obs_2023a_B.yElIdx = 0;
        APF_CTL_VIS_Obs_2023a_B.uElOffset1 = 0;
        for (APF_CTL_VIS_Obs_2023a_B.ntIdx1 = 0; APF_CTL_VIS_Obs_2023a_B.ntIdx1 <
             3; APF_CTL_VIS_Obs_2023a_B.ntIdx1++) {
          APF_CTL_VIS_Obs_2023a_B.StartClock =
            APF_CTL_VIS_Obs_2023a_B.uElOffset1;
          for (APF_CTL_VIS_Obs_2023a_B.ntIdx0 = 0;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0 < 8;
               APF_CTL_VIS_Obs_2023a_B.ntIdx0++) {
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.yElIdx] =
              APF_CTL_VIS_Obs_2023a_B.Product1_it[APF_CTL_VIS_Obs_2023a_B.StartClock];
            APF_CTL_VIS_Obs_2023a_B.yElIdx++;
            APF_CTL_VIS_Obs_2023a_B.StartClock += 3;
          }

          APF_CTL_VIS_Obs_2023a_B.uElOffset1++;
        }

        // End of PermuteDimensions: '<S660>/transpose'

        // Product: '<S660>/Product' incorporates:
        //   Product: '<S651>/Product4'

        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p +=
                APF_CTL_VIS_Obs_2023a_B.Product1_it[3 *
                APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i] *
                APF_CTL_VIS_Obs_2023a_B.Product1_e[(APF_CTL_VIS_Obs_2023a_B.i_m <<
                3) + APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[APF_CTL_VIS_Obs_2023a_B.i +
              3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }
        }

        // Product: '<S660>/Product1' incorporates:
        //   Product: '<S660>/Product'

        APF_CTL_VIS_Obs__rt_invd3x3_snf(APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b,
          APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n);
        memcpy(&APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[0],
               &APF_CTL_VIS_Obs_2023a_B.rtb_Black_Measurments_table_r_n[0], 9U *
               sizeof(real_T));
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S660>/Product2' incorporates:
          //   Product: '<S651>/Product4'

          APF_CTL_VIS_Obs_2023a_B.sampleTime_e =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 8];
          APF_CTL_VIS_Obs_2023a_B.sampleTime =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW =
            APF_CTL_VIS_Obs_2023a_B.Product1_e[APF_CTL_VIS_Obs_2023a_B.i_m + 16];

          // Product: '<S651>/Product4'
          APF_CTL_VIS_Obs_2023a_B.sampleTime_p = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 3;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            // Product: '<S660>/Product2'
            APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o =
              (APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
               APF_CTL_VIS_Obs_2023a_B.i + 1] *
               APF_CTL_VIS_Obs_2023a_B.sampleTime_e +
               APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
               APF_CTL_VIS_Obs_2023a_B.i] * APF_CTL_VIS_Obs_2023a_B.sampleTime)
              + APF_CTL_VIS_Obs_2023a_B.rtb_Product2_m_b[3 *
              APF_CTL_VIS_Obs_2023a_B.i + 2] * APF_CTL_VIS_Obs_2023a_B.RED_Tz_RW;

            // Product: '<S660>/Product2'
            APF_CTL_VIS_Obs_2023a_B.Product2[APF_CTL_VIS_Obs_2023a_B.i_m +
              (APF_CTL_VIS_Obs_2023a_B.i << 3)] =
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o;

            // Product: '<S651>/Product4' incorporates:
            //   Product: '<S660>/Product2'

            APF_CTL_VIS_Obs_2023a_B.sampleTime_p +=
              APF_CTL_VIS_Obs_2023a_B.rtb_y_f_o *
              APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i];
          }

          // Saturate: '<S651>/Remove Negatives' incorporates:
          //   Product: '<S651>/Product4'

          if (APF_CTL_VIS_Obs_2023a_B.sampleTime_p >
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat_m) {
            // Saturate: '<S651>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_UpperSat_m;
          } else if (APF_CTL_VIS_Obs_2023a_B.sampleTime_p <
                     APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat_a) {
            // Saturate: '<S651>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_P.RemoveNegatives_LowerSat_a;
          } else {
            // Saturate: '<S651>/Remove Negatives'
            APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn[APF_CTL_VIS_Obs_2023a_B.i_m] =
              APF_CTL_VIS_Obs_2023a_B.sampleTime_p;
          }

          // End of Saturate: '<S651>/Remove Negatives'
        }

        // MATLAB Function: '<S651>/MATLAB Function2' incorporates:
        //   Product: '<S660>/Product1'

        APF_CTL_VIS_O_MATLABFunction1_l(APF_CTL_VIS_Obs_2023a_B.rtb_Product_bn,
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e);

        // MATLAB Function: '<S651>/MATLAB Function1'
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 8;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m] =
            b[APF_CTL_VIS_Obs_2023a_B.i_m];
          APF_CTL_VIS_Obs_2023a_B.b[3 * APF_CTL_VIS_Obs_2023a_B.i_m + 1] =
            c[APF_CTL_VIS_Obs_2023a_B.i_m];
        }

        APF_CTL_VIS_Obs_2023a_B.b[2] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[0] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[5] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[1] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[8] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[2] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[11] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[3] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[14] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[4] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[17] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[5] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[20] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[6] / 1000.0;
        APF_CTL_VIS_Obs_2023a_B.b[23] =
          APF_CTL_VIS_Obs_2023a_P.thruster_dist2CG_BLUE[7] / 1000.0;
        for (APF_CTL_VIS_Obs_2023a_B.i_m = 0; APF_CTL_VIS_Obs_2023a_B.i_m < 3;
             APF_CTL_VIS_Obs_2023a_B.i_m++) {
          // Product: '<S651>/Product1'
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i_m] = 0.0;
          for (APF_CTL_VIS_Obs_2023a_B.i = 0; APF_CTL_VIS_Obs_2023a_B.i < 8;
               APF_CTL_VIS_Obs_2023a_B.i++) {
            APF_CTL_VIS_Obs_2023a_B.Derivative2 = 0.0;
            for (APF_CTL_VIS_Obs_2023a_B.d_j = 0; APF_CTL_VIS_Obs_2023a_B.d_j <
                 8; APF_CTL_VIS_Obs_2023a_B.d_j++) {
              APF_CTL_VIS_Obs_2023a_B.Derivative2 += APF_CTL_VIS_Obs_2023a_B.b[3
                * APF_CTL_VIS_Obs_2023a_B.d_j + APF_CTL_VIS_Obs_2023a_B.i_m] *
                APF_CTL_VIS_Obs_2023a_B.y[(APF_CTL_VIS_Obs_2023a_B.i << 3) +
                APF_CTL_VIS_Obs_2023a_B.d_j];
            }

            APF_CTL_VIS_Obs_2023a_B.x_ddot_d[APF_CTL_VIS_Obs_2023a_B.i_m] +=
              APF_CTL_VIS_Obs_2023a_B.Derivative2 *
              APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[APF_CTL_VIS_Obs_2023a_B.i];
          }

          // End of Product: '<S651>/Product1'
        }

        // DataStoreWrite: '<S651>/BLUE_Fx_Sat' incorporates:
        //   Product: '<S658>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx_Sat =
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[0] *
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[0] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[2];

        // DataStoreWrite: '<S651>/BLUE_Fy_Sat' incorporates:
        //   Product: '<S658>/Rotate F_b to F_I'

        APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy_Sat = APF_CTL_VIS_Obs_2023a_B.x_ddot_d
          [0] * APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[1] +
          APF_CTL_VIS_Obs_2023a_B.x_ddot_d[1] *
          APF_CTL_VIS_Obs_2023a_B.rtb_C_Ib_ip[3];

        // DataStoreWrite: '<S651>/BLUE_Tz_Sat'
        APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz_Sat = APF_CTL_VIS_Obs_2023a_B.x_ddot_d
          [2];

        // End of Outputs for SubSystem: '<S19>/Change BLUE Behavior'
      }

      // End of If: '<S19>/This IF block determines whether or not to run the BLUE sim//exp' 

      // SignalConversion generated from: '<S19>/UDP Send' incorporates:
      //   Constant: '<S19>/PWM Frequency'
      //   Constant: '<S19>/Safety Number'
      //   Gain: '<S19>/Gain'
      //   Gain: '<S19>/Gain1'
      //   Gain: '<S19>/Gain2'
      //   Gain: '<S19>/Gain3'
      //   Gain: '<S19>/Gain4'
      //   Gain: '<S19>/Gain5'
      //   Gain: '<S19>/Gain6'
      //   Gain: '<S19>/Gain7'
      //   Sum: '<S19>/Sum'
      //   Sum: '<S19>/Sum1'
      //   Sum: '<S19>/Sum2'
      //   Sum: '<S19>/Sum3'
      //   Sum: '<S19>/Sum4'
      //   Sum: '<S19>/Sum5'
      //   Sum: '<S19>/Sum6'
      //   Sum: '<S19>/Sum7'

      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[0] =
        APF_CTL_VIS_Obs_2023a_P.SafetyNumber_Value;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[1] =
        APF_CTL_VIS_Obs_2023a_P.PWMFreq;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[2] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[0] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[0]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[0]) *
        APF_CTL_VIS_Obs_2023a_P.Gain_Gain_c;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[3] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[1] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[1]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[1]) *
        APF_CTL_VIS_Obs_2023a_P.Gain1_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[4] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[2] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[2]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[2]) *
        APF_CTL_VIS_Obs_2023a_P.Gain2_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[5] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[3] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[3]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[3]) *
        APF_CTL_VIS_Obs_2023a_P.Gain3_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[6] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[4] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[4]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[4]) *
        APF_CTL_VIS_Obs_2023a_P.Gain4_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[7] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[5] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[5]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[5]) *
        APF_CTL_VIS_Obs_2023a_P.Gain5_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[8] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[6] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[6]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[6]) *
        APF_CTL_VIS_Obs_2023a_P.Gain6_Gain;
      APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[9] =
        ((APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[7] +
          APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[7]) +
         APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[7]) *
        APF_CTL_VIS_Obs_2023a_P.Gain7_Gain;
    }
  }

  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    real_T *lastU;
    int32_T i;
    char_T *sErr;

    // Update for If: '<Root>/Separate Phases'
    switch (APF_CTL_VIS_Obs_2023a_DW.SeparatePhases_ActiveSubsystem) {
     case 0:
     case 1:
     case 6:
      break;

     case 2:
      // Update for IfAction SubSystem: '<Root>/Phase #2: Initial Position' incorporates:
      //   ActionPort: '<S8>/Action Port'

      // Update for If: '<S8>/This IF block determines whether or not to run the BLUE sim//exp' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_l2 == 0) {
        // Update for IfAction SubSystem: '<S8>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S33>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Update for Delay: '<S42>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_fp = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_i =
            APF_CTL_VIS_Obs_2023a_B.Subtract_d;

          // Update for Delay: '<S44>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_ig = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c =
            APF_CTL_VIS_Obs_2023a_B.Subtract1_g;

          // Update for Delay: '<S40>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_p = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_c1 =
            APF_CTL_VIS_Obs_2023a_B.e_out_m;
        }

        // End of Update for SubSystem: '<S8>/Change BLACK Behavior'
      }

      // End of Update for If: '<S8>/This IF block determines whether or not to run the BLUE sim//exp' 

      // Update for If: '<S8>/This IF block determines whether or not to run the BLACK sim//exp' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_h2 == 0) {
        // Update for IfAction SubSystem: '<S8>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S34>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Update for Delay: '<S55>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_o = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mw =
            APF_CTL_VIS_Obs_2023a_B.Subtract_n;

          // Update for Delay: '<S57>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_n = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_et =
            APF_CTL_VIS_Obs_2023a_B.Subtract1_ld;

          // Update for Delay: '<S53>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_bb = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a =
            APF_CTL_VIS_Obs_2023a_B.e_out_md;
        }

        // End of Update for SubSystem: '<S8>/Change BLUE Behavior'
      }

      // End of Update for If: '<S8>/This IF block determines whether or not to run the BLACK sim//exp' 

      // Update for If: '<S8>/This IF block determines whether or not to run the RED sim//exp ' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_gv == 0) {
        // Update for IfAction SubSystem: '<S8>/Change RED Behavior' incorporates:
        //   ActionPort: '<S35>/Action Port'

        if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
          // Update for Delay: '<S67>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_g = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gi =
            APF_CTL_VIS_Obs_2023a_B.e_out_k;

          // Update for Delay: '<S69>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_a = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m =
            APF_CTL_VIS_Obs_2023a_B.Subtract_j;

          // Update for Delay: '<S71>/Delay1'
          APF_CTL_VIS_Obs_2023a_DW.icLoad_b = false;
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ej =
            APF_CTL_VIS_Obs_2023a_B.Subtract1_n;
        }

        // End of Update for SubSystem: '<S8>/Change RED Behavior'
      }

      // End of Update for If: '<S8>/This IF block determines whether or not to run the RED sim//exp ' 
      // End of Update for SubSystem: '<Root>/Phase #2: Initial Position'
      break;

     case 3:
      // Update for IfAction SubSystem: '<Root>/Phase #3: Experiment' incorporates:
      //   ActionPort: '<S9>/Action Port'

      // Update for If: '<S9>/This IF block determines whether or not to run the BLACK sim//exp' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_n == 0) {
        // Update for IfAction SubSystem: '<S9>/Change BLACK Behavior' incorporates:
        //   ActionPort: '<S87>/Action Port'

        // Update for If: '<S87>/Experiment Sub-Phases'
        switch (APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_l) {
         case 0:
          // Update for IfAction SubSystem: '<S87>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S90>/Action Port'

          APF_CTL_VIS_Ob_SubPhase1_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1);

          // End of Update for SubSystem: '<S87>/Sub-Phase #1'
          break;

         case 1:
          // Update for IfAction SubSystem: '<S87>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S91>/Action Port'

          APF_CTL_VIS_Ob_SubPhase1_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2);

          // End of Update for SubSystem: '<S87>/Sub-Phase #2 '
          break;

         case 2:
          // Update for IfAction SubSystem: '<S87>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S92>/Action Port'

          APF_CTL_VIS_Ob_SubPhase1_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase3,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase3);

          // End of Update for SubSystem: '<S87>/Sub-Phase #3 '
          break;

         case 3:
          // Update for IfAction SubSystem: '<S87>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S93>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Update for DiscreteIntegrator: '<S149>/Start Pos' incorporates:
            //   Constant: '<S149>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_k +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval *
              APF_CTL_VIS_Obs_2023a_P.BLACK_ini[3];

            // Update for Delay: '<S154>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_c = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pn =
              APF_CTL_VIS_Obs_2023a_B.Subtract_k;

            // Update for DiscreteIntegrator: '<S150>/Start Pos' incorporates:
            //   Constant: '<S150>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_c +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval_k *
              APF_CTL_VIS_Obs_2023a_P.BLACK_ini[4];

            // Update for Delay: '<S156>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_j = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_na =
              APF_CTL_VIS_Obs_2023a_B.Subtract1_l;

            // Update for DiscreteIntegrator: '<S151>/Start Pos' incorporates:
            //   Constant: '<S151>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_e +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval_a *
              APF_CTL_VIS_Obs_2023a_P.BLACK_ini[5];

            // Update for Delay: '<S152>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_fo = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p2 =
              APF_CTL_VIS_Obs_2023a_B.e_out_b;
          }

          // End of Update for SubSystem: '<S87>/Sub-Phase #4'
          break;
        }

        // End of Update for If: '<S87>/Experiment Sub-Phases'
        // End of Update for SubSystem: '<S9>/Change BLACK Behavior'
      }

      // End of Update for If: '<S9>/This IF block determines whether or not to run the BLACK sim//exp' 

      // Update for If: '<S9>/This IF block determines whether or not to run the BLUE sim//exp' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_al == 0) {
        // Update for IfAction SubSystem: '<S9>/Change BLUE Behavior' incorporates:
        //   ActionPort: '<S88>/Action Port'

        // Update for If: '<S88>/Experiment Sub-Phases'
        switch (APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_c) {
         case 0:
          // Update for IfAction SubSystem: '<S88>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S161>/Action Port'

          APF_CTL_VIS__SubPhase1_b_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1_g,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_g);

          // End of Update for SubSystem: '<S88>/Sub-Phase #1'
          break;

         case 1:
          // Update for IfAction SubSystem: '<S88>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S162>/Action Port'

          APF_CTL_VIS__SubPhase1_b_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2_c,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_c);

          // End of Update for SubSystem: '<S88>/Sub-Phase #2 '
          break;

         case 2:
          // Update for IfAction SubSystem: '<S88>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S163>/Action Port'

          APF_CTL_VIS__SubPhase1_b_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase3_e,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase3_e);

          // End of Update for SubSystem: '<S88>/Sub-Phase #3 '
          break;

         case 3:
          // Update for IfAction SubSystem: '<S88>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S164>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Update for DiscreteIntegrator: '<S232>/Start Pos' incorporates:
            //   Constant: '<S232>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval_b *
              APF_CTL_VIS_Obs_2023a_P.BLUE_ini[3];

            // Update for Delay: '<S237>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_d = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_b =
              APF_CTL_VIS_Obs_2023a_B.Subtract_p;

            // Update for DiscreteIntegrator: '<S233>/Start Pos' incorporates:
            //   Constant: '<S233>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_b +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval_i *
              APF_CTL_VIS_Obs_2023a_P.BLUE_ini[4];

            // Update for Delay: '<S239>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_d4 = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_e =
              APF_CTL_VIS_Obs_2023a_B.Subtract1;

            // Update for DiscreteIntegrator: '<S234>/Start Pos' incorporates:
            //   Constant: '<S234>/Velocity'

            APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_p +=
              APF_CTL_VIS_Obs_2023a_P.StartPos_gainval_o *
              APF_CTL_VIS_Obs_2023a_P.BLUE_ini[5];

            // Update for Delay: '<S235>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_l = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_do =
              APF_CTL_VIS_Obs_2023a_B.e_out_pv;
          }

          // End of Update for SubSystem: '<S88>/Sub-Phase #4'
          break;
        }

        // End of Update for If: '<S88>/Experiment Sub-Phases'
        // End of Update for SubSystem: '<S9>/Change BLUE Behavior'
      }

      // End of Update for If: '<S9>/This IF block determines whether or not to run the BLUE sim//exp' 

      // Update for If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
      if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_fg == 0) {
        // Update for IfAction SubSystem: '<S9>/Change RED Behavior' incorporates:
        //   ActionPort: '<S89>/Action Port'

        // Update for If: '<S89>/Experiment Sub-Phases'
        switch (APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSubsy) {
         case 0:
          // Update for IfAction SubSystem: '<S89>/Sub-Phase #1' incorporates:
          //   ActionPort: '<S244>/Action Port'

          APF_CTL_VIS__SubPhase1_g_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase1_p,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_p);

          // End of Update for SubSystem: '<S89>/Sub-Phase #1'
          break;

         case 1:
          // Update for IfAction SubSystem: '<S89>/Sub-Phase #2 ' incorporates:
          //   ActionPort: '<S245>/Action Port'

          APF_CTL_VIS__SubPhase1_g_Update(APF_CTL_VIS_Obs_2023a_M,
            &APF_CTL_VIS_Obs_2023a_B.SubPhase2_p,
            &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_p);

          // End of Update for SubSystem: '<S89>/Sub-Phase #2 '
          break;

         case 2:
          // Update for IfAction SubSystem: '<S89>/Sub-Phase #3 ' incorporates:
          //   ActionPort: '<S246>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Update for Delay: '<S323>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_da =
              APF_CTL_VIS_Obs_2023a_B.e_out_p;

            // Update for Delay: '<S325>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_f = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d3 =
              APF_CTL_VIS_Obs_2023a_B.Subtract;

            // Update for Delay: '<S327>/Delay1'
            APF_CTL_VIS_Obs_2023a_DW.icLoad_i = false;
            APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_g =
              APF_CTL_VIS_Obs_2023a_B.Subtract2;
          }

          // End of Update for SubSystem: '<S89>/Sub-Phase #3 '
          break;

         case 3:
          // Update for IfAction SubSystem: '<S89>/Sub-Phase #4' incorporates:
          //   ActionPort: '<S247>/Action Port'

          if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
            // Update for Delay: '<S355>/Delay1'
            for (i = 0; i < 6; i++) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE[i] =
                APF_CTL_VIS_Obs_2023a_B.States_a[i];
            }

            // End of Update for Delay: '<S355>/Delay1'

            // Update for Delay: '<S355>/Delay'
            memcpy(&APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_e[0],
                   &APF_CTL_VIS_Obs_2023a_B.P_K_g[0], 36U * sizeof(real_T));

            // Update for Delay: '<S355>/Delay3'
            APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE =
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum_b;

            // Update for Delay: '<S355>/Delay2'
            APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE =
              APF_CTL_VIS_Obs_2023a_B.Reject;

            // Update for Delay: '<S379>/Delay'
            APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_h = APF_CTL_VIS_Obs_2023a_B.k;

            // Update for Delay: '<S360>/Delay1'
            for (i = 0; i < 6; i++) {
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p[i] =
                APF_CTL_VIS_Obs_2023a_B.States[i];
            }

            // End of Update for Delay: '<S360>/Delay1'

            // Update for Delay: '<S360>/Delay'
            memcpy(&APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_a[0],
                   &APF_CTL_VIS_Obs_2023a_B.P_K[0], 36U * sizeof(real_T));

            // Update for Delay: '<S360>/Delay3'
            APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_o =
              APF_CTL_VIS_Obs_2023a_B.Reject_Sum;

            // Update for Delay: '<S360>/Delay2'
            APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_h =
              APF_CTL_VIS_Obs_2023a_B.Step;
          }

          // Update for If: '<S350>/If1'
          if (APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem == 0) {
            // Update for IfAction SubSystem: '<S350>/Target Tracker' incorporates:
            //   ActionPort: '<S381>/Action Port'

            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Update for DiscreteTransferFcn: '<S381>/Discrete Transfer Fcn1' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTransferFcn1_states =
                (APF_CTL_VIS_Obs_2023a_B.theta_desired -
                 APF_CTL_VIS_Obs_2023a_P.DiscreteTransferFcn1_DenCoef[1] *
                 APF_CTL_VIS_Obs_2023a_DW.DiscreteTransferFcn1_states) /
                APF_CTL_VIS_Obs_2023a_P.DiscreteTransferFcn1_DenCoef[0];
            }

            // End of Update for SubSystem: '<S350>/Target Tracker'
          }

          // End of Update for If: '<S350>/If1'

          // Update for If: '<S350>/If'
          if (APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem == 0) {
            // Update for IfAction SubSystem: '<S350>/APF' incorporates:
            //   ActionPort: '<S378>/Action Port'

            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Update for Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[0] =
                APF_CTL_VIS_Obs_2023a_B.Eg_n[0];

              // Update for Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[0] =
                APF_CTL_VIS_Obs_2023a_B.Etheta[0];

              // Update for Delay: '<S387>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[0] =
                APF_CTL_VIS_Obs_2023a_B.Gt[0];

              // Update for Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[0] =
                APF_CTL_VIS_Obs_2023a_B.u_t[0];

              // Update for Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[0] =
                APF_CTL_VIS_Obs_2023a_B.m_b[0];

              // Update for Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[0] =
                APF_CTL_VIS_Obs_2023a_B.v[0];

              // Update for Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[0] =
                APF_CTL_VIS_Obs_2023a_B.m[0];

              // Update for Delay: '<S391>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[0] =
                APF_CTL_VIS_Obs_2023a_B.Sum3[0];

              // Update for Delay: '<S392>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[0] =
                APF_CTL_VIS_Obs_2023a_B.Sum_n[0];

              // Update for Delay: '<S393>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[0] =
                APF_CTL_VIS_Obs_2023a_B.Eg[0];

              // Update for Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[1] =
                APF_CTL_VIS_Obs_2023a_B.Eg_n[1];

              // Update for Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[1] =
                APF_CTL_VIS_Obs_2023a_B.Etheta[1];

              // Update for Delay: '<S387>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[1] =
                APF_CTL_VIS_Obs_2023a_B.Gt[1];

              // Update for Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[1] =
                APF_CTL_VIS_Obs_2023a_B.u_t[1];

              // Update for Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[1] =
                APF_CTL_VIS_Obs_2023a_B.m_b[1];

              // Update for Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[1] =
                APF_CTL_VIS_Obs_2023a_B.v[1];

              // Update for Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[1] =
                APF_CTL_VIS_Obs_2023a_B.m[1];

              // Update for Delay: '<S391>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[1] =
                APF_CTL_VIS_Obs_2023a_B.Sum3[1];

              // Update for Delay: '<S392>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[1] =
                APF_CTL_VIS_Obs_2023a_B.Sum_n[1];

              // Update for Delay: '<S393>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[1] =
                APF_CTL_VIS_Obs_2023a_B.Eg[1];

              // Update for Delay: '<S386>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[2] =
                APF_CTL_VIS_Obs_2023a_B.Eg_n[2];

              // Update for Delay: '<S386>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[2] =
                APF_CTL_VIS_Obs_2023a_B.Etheta[2];

              // Update for Delay: '<S387>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[2] =
                APF_CTL_VIS_Obs_2023a_B.Gt[2];

              // Update for Delay: '<S388>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[2] =
                APF_CTL_VIS_Obs_2023a_B.u_t[2];

              // Update for Delay: '<S388>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[2] =
                APF_CTL_VIS_Obs_2023a_B.m_b[2];

              // Update for Delay: '<S389>/Delay1'
              APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[2] =
                APF_CTL_VIS_Obs_2023a_B.v[2];

              // Update for Delay: '<S389>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[2] =
                APF_CTL_VIS_Obs_2023a_B.m[2];

              // Update for Delay: '<S391>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[2] =
                APF_CTL_VIS_Obs_2023a_B.Sum3[2];

              // Update for Delay: '<S392>/Delay'
              APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[2] =
                APF_CTL_VIS_Obs_2023a_B.Sum_n[2];

              // Update for Delay: '<S393>/Delay3'
              APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[2] =
                APF_CTL_VIS_Obs_2023a_B.Eg[2];
            }

            // End of Update for SubSystem: '<S350>/APF'
          }

          // End of Update for If: '<S350>/If'

          // Update for If: '<S349>/If'
          if (APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_m == 0) {
            // Update for IfAction SubSystem: '<S349>/If Action Subsystem' incorporates:
            //   ActionPort: '<S364>/Action Port'

            if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator4' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator4_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator4_gainval *
                APF_CTL_VIS_Obs_2023a_B.k2_dot_l;

              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator5' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator5_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator5_gainval *
                APF_CTL_VIS_Obs_2023a_B.k1_dot_a;

              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator2' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator2_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator2_gainval *
                APF_CTL_VIS_Obs_2023a_B.k2_dot_p;

              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator3' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator3_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator3_gainval *
                APF_CTL_VIS_Obs_2023a_B.k1_dot_f;

              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator1' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator1_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator1_gainval *
                APF_CTL_VIS_Obs_2023a_B.k1_dot;

              // Update for DiscreteIntegrator: '<S370>/Discrete-Time Integrator' 
              APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator_DSTATE +=
                APF_CTL_VIS_Obs_2023a_P.DiscreteTimeIntegrator_gainval *
                APF_CTL_VIS_Obs_2023a_B.k2_dot;
            }

            // Update for Derivative: '<S370>/Derivative2'
            if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA <
                       APF_CTL_VIS_Obs_2023a_DW.TimeStampB) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA;
            } else {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB;
            }

            *lastU = APF_CTL_VIS_Obs_2023a_B.Sum;

            // End of Update for Derivative: '<S370>/Derivative2'

            // Update for Derivative: '<S370>/Derivative1'
            if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_k;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_j;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d <
                       APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_k;
            } else {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_j;
            }

            *lastU = APF_CTL_VIS_Obs_2023a_B.Sum1;

            // End of Update for Derivative: '<S370>/Derivative1'

            // Update for Derivative: '<S370>/Derivative3'
            if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_d;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k == (rtInf)) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_f;
            } else if (APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n <
                       APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k) {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeA_d;
            } else {
              APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k =
                APF_CTL_VIS_Obs_2023a_M->Timing.t[0];
              lastU = &APF_CTL_VIS_Obs_2023a_DW.LastUAtTimeB_f;
            }

            *lastU = APF_CTL_VIS_Obs_2023a_B.e_out;

            // End of Update for Derivative: '<S370>/Derivative3'
            // End of Update for SubSystem: '<S349>/If Action Subsystem'
          }

          // End of Update for If: '<S349>/If'
          // End of Update for SubSystem: '<S89>/Sub-Phase #4'
          break;
        }

        // End of Update for If: '<S89>/Experiment Sub-Phases'
        // End of Update for SubSystem: '<S9>/Change RED Behavior'
      }

      // End of Update for If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
      // End of Update for SubSystem: '<Root>/Phase #3: Experiment'
      break;

     case 4:
      // Update for IfAction SubSystem: '<Root>/Phase #4: Return Home' incorporates:
      //   ActionPort: '<S10>/Action Port'

      APF_CTL_Phase4ReturnHome_Update(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_B.Phase4ReturnHome,
        &APF_CTL_VIS_Obs_2023a_DW.Phase4ReturnHome);

      // End of Update for SubSystem: '<Root>/Phase #4: Return Home'
      break;

     case 5:
      // Update for IfAction SubSystem: '<Root>/Phase #5: Hold Home' incorporates:
      //   ActionPort: '<S11>/Action Port'

      APF_CTL_Phase4ReturnHome_Update(APF_CTL_VIS_Obs_2023a_M,
        &APF_CTL_VIS_Obs_2023a_B.Phase5HoldHome,
        &APF_CTL_VIS_Obs_2023a_DW.Phase5HoldHome);

      // End of Update for SubSystem: '<Root>/Phase #5: Hold Home'
      break;
    }

    // End of Update for If: '<Root>/Separate Phases'

    // Update for If: '<S13>/If performing an experiment, grab the PhaseSpace data. Otherwise, use a clock to set time in SIM.' 
    if (APF_CTL_VIS_Obs_2023a_DW.Ifperforminganexperimentgrabthe == 0) {
      // Update for IfAction SubSystem: '<S13>/Use Hardware to Obtain States' incorporates:
      //   ActionPort: '<S534>/Action Port'

      if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
        // Update for Delay: '<S544>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_lu = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_eo =
          APF_CTL_VIS_Obs_2023a_B.ConvertBLUXfrommmtom;

        // Update for Delay: '<S541>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_ld = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_gs =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT;

        // Update for Delay: '<S549>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_dc = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_bm =
          APF_CTL_VIS_Obs_2023a_B.ConvertBLAXfrommmtom;

        // Update for Delay: '<S538>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_k = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4 =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_f;

        // Update for Delay: '<S550>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_fv = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_md =
          APF_CTL_VIS_Obs_2023a_B.ConvertBLAYfrommmtom;

        // Update for Delay: '<S539>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_na = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_l;

        // Update for Delay: '<S551>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_gx = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p4s =
          APF_CTL_VIS_Obs_2023a_B.Unwrap1;

        // Update for Delay: '<S540>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_m = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_k =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_e;

        // Update for Delay: '<S545>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_e = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_mi =
          APF_CTL_VIS_Obs_2023a_B.ConvertBLUYfrommmtom;

        // Update for Delay: '<S542>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_fpv = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pc =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_c;

        // Update for Delay: '<S546>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_mt = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_cu =
          APF_CTL_VIS_Obs_2023a_B.Unwrap2;

        // Update for Delay: '<S543>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_nw = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_a0 =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_cy;

        // Update for Delay: '<S537>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_h = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_h =
          APF_CTL_VIS_Obs_2023a_B.ConvertREDXfrommmtom;

        // Update for Delay: '<S552>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_au = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_ah =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n;

        // Update for Delay: '<S547>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_eo = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_lx =
          APF_CTL_VIS_Obs_2023a_B.ConvertREDYfrommmtom;

        // Update for Delay: '<S553>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_fh = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_j3 =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_n1;

        // Update for Delay: '<S548>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_fow = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_m2 =
          APF_CTL_VIS_Obs_2023a_B.Unwrap;

        // Update for Delay: '<S554>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.icLoad_aq = false;
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hi =
          APF_CTL_VIS_Obs_2023a_B.dividebydeltaT_m;

        // Update for Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[0] =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[1];

        // Update for Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[0] =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[1];

        // Update for Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[0] =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[1];

        // Update for Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[1] =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[2];

        // Update for Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[1] =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[2];

        // Update for Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[1] =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[2];

        // Update for Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[2] =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[3];

        // Update for Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[2] =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[3];

        // Update for Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[2] =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[3];

        // Update for Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[3] =
          APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[4];

        // Update for Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[3] =
          APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[4];

        // Update for Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[3] =
          APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[4];

        // Update for Delay: '<S534>/Delay'
        APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[4] =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive_o1;

        // Update for Delay: '<S534>/Delay1'
        APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[4] =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive2_o1;

        // Update for Delay: '<S534>/Delay2'
        APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[4] =
          APF_CTL_VIS_Obs_2023a_B.UDPReceive3_o1;
      }

      // End of Update for SubSystem: '<S13>/Use Hardware to Obtain States'
    }

    // End of Update for If: '<S13>/If performing an experiment, grab the PhaseSpace data. Otherwise, use a clock to set time in SIM.' 
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      // Update for S-Function (sdspToNetwork): '<S19>/UDP Send' incorporates:
      //   SignalConversion generated from: '<S19>/UDP Send'

      sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
      LibUpdate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U],
                        &APF_CTL_VIS_Obs_2023a_B.TmpSignalConversionAtUDPSendInp[
                        0U], 10);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }

      // End of Update for S-Function (sdspToNetwork): '<S19>/UDP Send'
    }

    // ContTimeOutputInconsistentWithStateAtMajorOutputFlag is set, need to run a minor output 
    if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
      if (rtsiGetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo)) {
        rtsiSetSimTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo,MINOR_TIME_STEP);
        rtsiSetContTimeOutputInconsistentWithStateAtMajorStep
          (&APF_CTL_VIS_Obs_2023a_M->solverInfo, false);
        APF_CTL_VIS_Obs_2023a_step();
        rtsiSetSimTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo, MAJOR_TIME_STEP);
      }
    }
  }                                    // end MajorTimeStep

  if (rtmIsMajorTimeStep(APF_CTL_VIS_Obs_2023a_M)) {
    rt_ertODEUpdateContinuousStates(&APF_CTL_VIS_Obs_2023a_M->solverInfo);

    // Update absolute time for base rate
    // The "clockTick0" counts the number of times the code of this task has
    //  been executed. The absolute time is the multiplication of "clockTick0"
    //  and "Timing.stepSize0". Size of "clockTick0" ensures timer will not
    //  overflow during the application lifespan selected.

    ++APF_CTL_VIS_Obs_2023a_M->Timing.clockTick0;
    APF_CTL_VIS_Obs_2023a_M->Timing.t[0] = rtsiGetSolverStopTime
      (&APF_CTL_VIS_Obs_2023a_M->solverInfo);

    {
      // Update absolute timer for sample time: [0.01s, 0.0s]
      // The "clockTick1" counts the number of times the code of this task has
      //  been executed. The resolution of this integer timer is 0.01, which is the step size
      //  of the task. Size of "clockTick1" ensures timer will not overflow during the
      //  application lifespan selected.

      APF_CTL_VIS_Obs_2023a_M->Timing.clockTick1++;
    }
  }                                    // end MajorTimeStep
}

// Derivatives for root system: '<Root>'
void APF_CTL_VIS_Obs_2023a_derivatives(void)
{
  XDot_APF_CTL_VIS_Obs_2023a_T *_rtXdot;
  _rtXdot = ((XDot_APF_CTL_VIS_Obs_2023a_T *) APF_CTL_VIS_Obs_2023a_M->derivs);

  // Derivatives for If: '<Root>/Separate Phases'
  {
    real_T *dx;
    int_T i;
    dx = &(((XDot_APF_CTL_VIS_Obs_2023a_T *) APF_CTL_VIS_Obs_2023a_M->derivs)
           ->TargetFinder.PseudoDerivative_CSTATE);
    for (i=0; i < 6; i++) {
      dx[i] = 0.0;
    }
  }

  if (APF_CTL_VIS_Obs_2023a_DW.SeparatePhases_ActiveSubsystem == 3) {
    // Derivatives for IfAction SubSystem: '<Root>/Phase #3: Experiment' incorporates:
    //   ActionPort: '<S9>/Action Port'

    // Derivatives for If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
    {
      real_T *dx;
      int_T i;
      dx = &(((XDot_APF_CTL_VIS_Obs_2023a_T *) APF_CTL_VIS_Obs_2023a_M->derivs
             )->TargetFinder.PseudoDerivative_CSTATE);
      for (i=0; i < 6; i++) {
        dx[i] = 0.0;
      }
    }

    if (APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_fg == 0) {
      // Derivatives for IfAction SubSystem: '<S9>/Change RED Behavior' incorporates:
      //   ActionPort: '<S89>/Action Port'

      // Derivatives for If: '<S89>/Experiment Sub-Phases'
      {
        real_T *dx;
        int_T i;
        dx = &(((XDot_APF_CTL_VIS_Obs_2023a_T *) APF_CTL_VIS_Obs_2023a_M->derivs)
               ->TargetFinder.PseudoDerivative_CSTATE);
        for (i=0; i < 6; i++) {
          dx[i] = 0.0;
        }
      }

      if (APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSubsy == 3) {
        // Derivatives for IfAction SubSystem: '<S89>/Sub-Phase #4' incorporates:
        //   ActionPort: '<S247>/Action Port'

        // Derivatives for If: '<S349>/If2'
        {
          real_T *dx;
          int_T i;
          dx = &(((XDot_APF_CTL_VIS_Obs_2023a_T *)
                  APF_CTL_VIS_Obs_2023a_M->derivs)
                 ->TargetFinder.PseudoDerivative_CSTATE);
          for (i=0; i < 3; i++) {
            dx[i] = 0.0;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem_m == 0) {
          // Derivatives for IfAction SubSystem: '<S349>/Target Finder' incorporates:
          //   ActionPort: '<S365>/Action Port'

          APF_CTL_VIS_TargetTracker_Deriv(APF_CTL_VIS_Obs_2023a_B.Sum,
            APF_CTL_VIS_Obs_2023a_B.Sum1, APF_CTL_VIS_Obs_2023a_B.e_out,
            &APF_CTL_VIS_Obs_2023a_P.TargetFinder,
            &APF_CTL_VIS_Obs_2023a_X.TargetFinder, &_rtXdot->TargetFinder);

          // End of Derivatives for SubSystem: '<S349>/Target Finder'
        }

        // End of Derivatives for If: '<S349>/If2'

        // Derivatives for If: '<S349>/If1'
        {
          real_T *dx;
          int_T i;
          dx = &(((XDot_APF_CTL_VIS_Obs_2023a_T *)
                  APF_CTL_VIS_Obs_2023a_M->derivs)
                 ->TargetTracker.PseudoDerivative_CSTATE);
          for (i=0; i < 3; i++) {
            dx[i] = 0.0;
          }
        }

        if (APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem_a == 0) {
          // Derivatives for IfAction SubSystem: '<S349>/Target Tracker' incorporates:
          //   ActionPort: '<S366>/Action Port'

          APF_CTL_VIS_TargetTracker_Deriv(APF_CTL_VIS_Obs_2023a_B.Sum,
            APF_CTL_VIS_Obs_2023a_B.Sum1, APF_CTL_VIS_Obs_2023a_B.e_out,
            &APF_CTL_VIS_Obs_2023a_P.TargetTracker,
            &APF_CTL_VIS_Obs_2023a_X.TargetTracker, &_rtXdot->TargetTracker);

          // End of Derivatives for SubSystem: '<S349>/Target Tracker'
        }

        // End of Derivatives for If: '<S349>/If1'
        // End of Derivatives for SubSystem: '<S89>/Sub-Phase #4'
      }

      // End of Derivatives for If: '<S89>/Experiment Sub-Phases'
      // End of Derivatives for SubSystem: '<S9>/Change RED Behavior'
    }

    // End of Derivatives for If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
    // End of Derivatives for SubSystem: '<Root>/Phase #3: Experiment'
  }

  // End of Derivatives for If: '<Root>/Separate Phases'
}

// Model initialize function
void APF_CTL_VIS_Obs_2023a_initialize(void)
{
  // Registration code

  // initialize non-finites
  rt_InitInfAndNaN(sizeof(real_T));

  {
    // Setup solver object
    rtsiSetSimTimeStepPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                          &APF_CTL_VIS_Obs_2023a_M->Timing.simTimeStep);
    rtsiSetTPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo, &rtmGetTPtr
                (APF_CTL_VIS_Obs_2023a_M));
    rtsiSetStepSizePtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                       &APF_CTL_VIS_Obs_2023a_M->Timing.stepSize0);
    rtsiSetdXPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                 &APF_CTL_VIS_Obs_2023a_M->derivs);
    rtsiSetContStatesPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo, (real_T **)
                         &APF_CTL_VIS_Obs_2023a_M->contStates);
    rtsiSetNumContStatesPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
      &APF_CTL_VIS_Obs_2023a_M->Sizes.numContStates);
    rtsiSetNumPeriodicContStatesPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
      &APF_CTL_VIS_Obs_2023a_M->Sizes.numPeriodicContStates);
    rtsiSetPeriodicContStateIndicesPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
      &APF_CTL_VIS_Obs_2023a_M->periodicContStateIndices);
    rtsiSetPeriodicContStateRangesPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
      &APF_CTL_VIS_Obs_2023a_M->periodicContStateRanges);
    rtsiSetErrorStatusPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                          (&rtmGetErrorStatus(APF_CTL_VIS_Obs_2023a_M)));
    rtsiSetRTModelPtr(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
                      APF_CTL_VIS_Obs_2023a_M);
  }

  rtsiSetSimTimeStep(&APF_CTL_VIS_Obs_2023a_M->solverInfo, MAJOR_TIME_STEP);
  APF_CTL_VIS_Obs_2023a_M->intgData.y = APF_CTL_VIS_Obs_2023a_M->odeY;
  APF_CTL_VIS_Obs_2023a_M->intgData.f[0] = APF_CTL_VIS_Obs_2023a_M->odeF[0];
  APF_CTL_VIS_Obs_2023a_M->intgData.f[1] = APF_CTL_VIS_Obs_2023a_M->odeF[1];
  APF_CTL_VIS_Obs_2023a_M->intgData.f[2] = APF_CTL_VIS_Obs_2023a_M->odeF[2];
  APF_CTL_VIS_Obs_2023a_M->intgData.f[3] = APF_CTL_VIS_Obs_2023a_M->odeF[3];
  APF_CTL_VIS_Obs_2023a_M->contStates = ((X_APF_CTL_VIS_Obs_2023a_T *)
    &APF_CTL_VIS_Obs_2023a_X);
  rtsiSetSolverData(&APF_CTL_VIS_Obs_2023a_M->solverInfo, static_cast<void *>
                    (&APF_CTL_VIS_Obs_2023a_M->intgData));
  rtsiSetIsMinorTimeStepWithModeChange(&APF_CTL_VIS_Obs_2023a_M->solverInfo,
    false);
  rtsiSetSolverName(&APF_CTL_VIS_Obs_2023a_M->solverInfo,"ode4");
  rtmSetTPtr(APF_CTL_VIS_Obs_2023a_M, &APF_CTL_VIS_Obs_2023a_M->Timing.tArray[0]);
  APF_CTL_VIS_Obs_2023a_M->Timing.stepSize0 = 0.01;

  {
    real_T sampleTime;
    real_T sampleTime_0;
    real_T sampleTime_1;
    real_T tmp;
    int32_T i;
    int32_T t;
    uint32_T tseed;
    char_T *sErr;

    // Start for S-Function (sdspFromNetwork): '<S2>/UDP Receive1'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U], 0,
                        "0.0.0.0", APF_CTL_VIS_Obs_2023a_P.UDPReceive1_Port_f,
                        "0.0.0.0", -1, 8192, 1, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspFromNetwork): '<S2>/UDP Receive1'

    // Start for If: '<Root>/Separate Phases'
    APF_CTL_VIS_Obs_2023a_DW.SeparatePhases_ActiveSubsystem = -1;

    // Start for If: '<Root>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 
    APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasimul = -1;

    // Start for If: '<S1>/This IF block determines whether or not to run the BLACK sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhetherorn = -1;

    // Start for If: '<S1>/This IF block determines whether or not to run the BLUE sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_j = -1;

    // Start for If: '<S1>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_o = -1;

    // Start for If: '<S4>/This IF block determines whether or not to run the exp code' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_d = -1;

    // Start for If: '<S5>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_a = -1;

    // Start for If: '<S13>/If performing an experiment, grab the PhaseSpace data. Otherwise, use a clock to set time in SIM.' 
    APF_CTL_VIS_Obs_2023a_DW.Ifperforminganexperimentgrabthe = -1;

    // Start for If: '<S14>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 
    APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_f = -1;

    // Start for If: '<S15>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_g = -1;

    // Start for If: '<S16>/If 'simMode' set to '1', then this is a simulation and the dynamics will be simulated. Otherwise, this is an experiment, and the simulation will not be run.' 
    APF_CTL_VIS_Obs_2023a_DW.IfsimModesetto1thenthisisasim_h = -1;

    // Start for If: '<S19>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_p = -1;

    // Start for If: '<S19>/This IF block determines whether or not to run the BLACK sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_am = -1;

    // Start for If: '<S19>/This IF block determines whether or not to run the BLUE sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_h = -1;

    // Start for S-Function (sdspToNetwork): '<S19>/UDP Send'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U], 1,
                        "0.0.0.0", -1, "127.0.0.1",
                        APF_CTL_VIS_Obs_2023a_P.UDPSend_Port_d5, 8192, 8, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspToNetwork): '<S19>/UDP Send'

    // Start for DataStoreMemory: '<Root>/BLACK_Fx'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fx_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fx1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fx1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fx_Sat'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Fx_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fx_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fx_Sat2'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Fx_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fx_Sat2_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fy'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fy_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fy1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fy1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fy_Sat'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Fy_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fy_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Fy_Sat2'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Fy_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Fy_Sat2_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Px =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Px =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px2'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_Est =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px2_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px3'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Px_preKalm =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px3_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px4'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_Est =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px4_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Px5'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Px_preKalm =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Px5_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Py =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Py =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py2'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_Est =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py2_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py3'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Py_preKalm =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py3_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py4'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_Est =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py4_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py5'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Py_preKalm =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py5_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py6'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Reject =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py6_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py7'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Reject =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py7_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py8'
    APF_CTL_VIS_Obs_2023a_DW.Blue_Detection =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py8_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Py9'
    APF_CTL_VIS_Obs_2023a_DW.Phase =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Py9_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Rz'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Rz_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Rz1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Rz =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Rz1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Rz2'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_Est =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Rz2_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Rz3'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Rz_preKalm =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Rz3_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Tz'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Tz_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Tz1'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Tz1_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Tz_Sat'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Tz_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Tz_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/BLACK_Tz_Sat2'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Tz_Sat =
      APF_CTL_VIS_Obs_2023a_P.BLACK_Tz_Sat2_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Fx1'
    APF_CTL_VIS_Obs_2023a_DW.RED_Fx =
      APF_CTL_VIS_Obs_2023a_P.RED_Fx1_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Fx_Sat'
    APF_CTL_VIS_Obs_2023a_DW.RED_Fx_Sat =
      APF_CTL_VIS_Obs_2023a_P.RED_Fx_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Fy'
    APF_CTL_VIS_Obs_2023a_DW.RED_Fy =
      APF_CTL_VIS_Obs_2023a_P.RED_Fy_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Fy_Sat'
    APF_CTL_VIS_Obs_2023a_DW.RED_Fy_Sat =
      APF_CTL_VIS_Obs_2023a_P.RED_Fy_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Px'
    APF_CTL_VIS_Obs_2023a_DW.RED_Px =
      APF_CTL_VIS_Obs_2023a_P.RED_Px_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Py'
    APF_CTL_VIS_Obs_2023a_DW.RED_Py =
      APF_CTL_VIS_Obs_2023a_P.RED_Py_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Rz'
    APF_CTL_VIS_Obs_2023a_DW.RED_Rz =
      APF_CTL_VIS_Obs_2023a_P.RED_Rz_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz'
    APF_CTL_VIS_Obs_2023a_DW.RED_Tz =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz12'
    APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Shoulder =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz12_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz13'
    APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Elbow =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz13_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz14'
    APF_CTL_VIS_Obs_2023a_DW.RED_RzD_Wrist =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz14_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz15'
    APF_CTL_VIS_Obs_2023a_DW.RED_ARM_Control_Mode =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz15_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz16'
    APF_CTL_VIS_Obs_2023a_DW.RED_Shoulder_Command =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz16_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz4'
    APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Shoulder =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz4_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz5'
    APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Elbow =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz5_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz6'
    APF_CTL_VIS_Obs_2023a_DW.RED_Rz_Wrist =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz6_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz7'
    APF_CTL_VIS_Obs_2023a_DW.Float_State =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz7_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz_RW Sat'
    APF_CTL_VIS_Obs_2023a_DW.RED_Tz_RW_Sat =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz_RWSat_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_Tz_Sat'
    APF_CTL_VIS_Obs_2023a_DW.RED_Tz_Sat =
      APF_CTL_VIS_Obs_2023a_P.RED_Tz_Sat_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat1'
    APF_CTL_VIS_Obs_2023a_DW.Command_Px =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat1_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat10'
    APF_CTL_VIS_Obs_2023a_DW.TX2_data1 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat10_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat11'
    APF_CTL_VIS_Obs_2023a_DW.TX2_data2 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat11_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat12'
    APF_CTL_VIS_Obs_2023a_DW.TX2_data3 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat12_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat13'
    APF_CTL_VIS_Obs_2023a_DW.TX2_data4 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat13_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat14'
    APF_CTL_VIS_Obs_2023a_DW.TX2_data5 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat14_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat2'
    APF_CTL_VIS_Obs_2023a_DW.Command_Py =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat2_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat3'
    APF_CTL_VIS_Obs_2023a_DW.Command_Rz =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat3_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat4'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_1 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat4_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat5'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Posx_k_2 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat5_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat6'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_1 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat6_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat7'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Posy_k_2 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat7_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat8'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_1 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat8_InitialValue;

    // Start for DataStoreMemory: '<Root>/RED_dRz_RW Sat9'
    APF_CTL_VIS_Obs_2023a_DW.DAC_Attitude_k_2 =
      APF_CTL_VIS_Obs_2023a_P.RED_dRz_RWSat9_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time'
    APF_CTL_VIS_Obs_2023a_DW.Univ_Time =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time1'
    APF_CTL_VIS_Obs_2023a_DW.RED_Vx =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time1_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time10'
    APF_CTL_VIS_Obs_2023a_DW.RED_Ax =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time10_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time11'
    APF_CTL_VIS_Obs_2023a_DW.RED_Ay =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time11_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time12'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Ax =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time12_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time13'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Ay =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time13_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time14'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_RzDD =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time14_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time15'
    APF_CTL_VIS_Obs_2023a_DW.RED_RzDD =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time15_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time16'
    APF_CTL_VIS_Obs_2023a_DW.RED_Thruster_ON_Count =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time16_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time17'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Thruster_ON_Count =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time17_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time18'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Thruster_ON_Count =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time18_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time19'
    APF_CTL_VIS_Obs_2023a_DW.WhoAmI =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time19_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time2'
    APF_CTL_VIS_Obs_2023a_DW.RED_Vy =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time2_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time20'
    APF_CTL_VIS_Obs_2023a_DW.isSim =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time20_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time21'
    APF_CTL_VIS_Obs_2023a_DW.RED_Elbow_Command =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time21_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time22'
    APF_CTL_VIS_Obs_2023a_DW.RED_Wrist_Command =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time22_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time3'
    APF_CTL_VIS_Obs_2023a_DW.RED_RzD =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time3_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time4'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Vx =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time4_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time5'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_Vy =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time5_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time6'
    APF_CTL_VIS_Obs_2023a_DW.BLACK_RzD =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time6_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time7'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Vx =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time7_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time8'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_Vy =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time8_InitialValue;

    // Start for DataStoreMemory: '<Root>/Universal_Time9'
    APF_CTL_VIS_Obs_2023a_DW.BLUE_RzD =
      APF_CTL_VIS_Obs_2023a_P.Universal_Time9_InitialValue;

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #0: Synchronization' 
    APF__Phase0Synchronization_Init
      (&APF_CTL_VIS_Obs_2023a_DW.Phase0Synchronization);

    // End of SystemInitialize for SubSystem: '<Root>/Phase #0: Synchronization' 

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #1: Start Floating ' 
    APF__Phase0Synchronization_Init
      (&APF_CTL_VIS_Obs_2023a_DW.Phase1StartFloating);

    // End of SystemInitialize for SubSystem: '<Root>/Phase #1: Start Floating ' 

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #2: Initial Position' 
    // Start for If: '<S8>/This IF block determines whether or not to run the BLUE sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_l2 = -1;

    // Start for If: '<S8>/This IF block determines whether or not to run the BLACK sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_h2 = -1;

    // Start for If: '<S8>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_gv = -1;

    // SystemInitialize for IfAction SubSystem: '<S8>/Change BLACK Behavior'
    // Start for If: '<S42>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ba = -1;

    // Start for If: '<S44>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_il = -1;

    // Start for If: '<S40>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_m = -1;

    // InitializeConditions for Delay: '<S42>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fp = true;

    // InitializeConditions for Delay: '<S44>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_ig = true;

    // InitializeConditions for Delay: '<S40>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_p = true;

    // SystemInitialize for IfAction SubSystem: '<S42>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S43>/In1' incorporates:
    //   Outport: '<S43>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdy =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_nx;

    // End of SystemInitialize for SubSystem: '<S42>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S44>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S45>/In1' incorporates:
    //   Outport: '<S45>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cd =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_g4;

    // End of SystemInitialize for SubSystem: '<S44>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S40>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S41>/In1' incorporates:
    //   Outport: '<S41>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyi =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_gf;

    // End of SystemInitialize for SubSystem: '<S40>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S8>/Change BLACK Behavior'

    // SystemInitialize for IfAction SubSystem: '<S8>/Change BLUE Behavior'
    // Start for If: '<S55>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_e = -1;

    // Start for If: '<S57>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_f = -1;

    // Start for If: '<S53>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jh = -1;

    // InitializeConditions for Delay: '<S55>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_o = true;

    // InitializeConditions for Delay: '<S57>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_n = true;

    // InitializeConditions for Delay: '<S53>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_bb = true;

    // SystemInitialize for IfAction SubSystem: '<S55>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S56>/In1' incorporates:
    //   Outport: '<S56>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_e = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bq;

    // End of SystemInitialize for SubSystem: '<S55>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S57>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S58>/In1' incorporates:
    //   Outport: '<S58>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0cdyix =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_c1;

    // End of SystemInitialize for SubSystem: '<S57>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S53>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S54>/In1' incorporates:
    //   Outport: '<S54>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_o = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_nj;

    // End of SystemInitialize for SubSystem: '<S53>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S8>/Change BLUE Behavior'

    // SystemInitialize for IfAction SubSystem: '<S8>/Change RED Behavior'
    // Start for If: '<S67>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_n = -1;

    // Start for If: '<S69>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_c = -1;

    // Start for If: '<S71>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_j = -1;

    // InitializeConditions for Delay: '<S67>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_g = true;

    // InitializeConditions for Delay: '<S69>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_a = true;

    // InitializeConditions for Delay: '<S71>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_b = true;

    // SystemInitialize for IfAction SubSystem: '<S67>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S68>/In1' incorporates:
    //   Outport: '<S68>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0c = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_hs;

    // End of SystemInitialize for SubSystem: '<S67>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S69>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S70>/In1' incorporates:
    //   Outport: '<S70>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi0 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_cr;

    // End of SystemInitialize for SubSystem: '<S69>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S71>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S72>/In1' incorporates:
    //   Outport: '<S72>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtgi = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_dg;

    // End of SystemInitialize for SubSystem: '<S71>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S35>/RED+ARM'
    APF_CTL_VIS_Obs_202_REDARM_Init(&APF_CTL_VIS_Obs_2023a_B.REDARM_e,
      &APF_CTL_VIS_Obs_2023a_DW.REDARM_e, &APF_CTL_VIS_Obs_2023a_P.REDARM_e);

    // End of SystemInitialize for SubSystem: '<S35>/RED+ARM'
    // End of SystemInitialize for SubSystem: '<S8>/Change RED Behavior'
    // End of SystemInitialize for SubSystem: '<Root>/Phase #2: Initial Position' 

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #3: Experiment'
    // Start for If: '<S9>/This IF block determines whether or not to run the BLACK sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_n = -1;

    // Start for If: '<S9>/This IF block determines whether or not to run the BLUE sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_al = -1;

    // Start for If: '<S9>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_fg = -1;

    // SystemInitialize for IfAction SubSystem: '<S9>/Change BLACK Behavior'
    // Start for If: '<S87>/Experiment Sub-Phases'
    APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_l = -1;

    // SystemInitialize for IfAction SubSystem: '<S87>/Sub-Phase #1'
    APF_CTL_VIS_Obs__SubPhase1_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase1,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase1, &APF_CTL_VIS_Obs_2023a_P.SubPhase1);

    // End of SystemInitialize for SubSystem: '<S87>/Sub-Phase #1'

    // SystemInitialize for IfAction SubSystem: '<S87>/Sub-Phase #2 '
    APF_CTL_VIS_Obs__SubPhase1_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase2,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase2, &APF_CTL_VIS_Obs_2023a_P.SubPhase2);

    // End of SystemInitialize for SubSystem: '<S87>/Sub-Phase #2 '

    // SystemInitialize for IfAction SubSystem: '<S87>/Sub-Phase #3 '
    APF_CTL_VIS_Obs__SubPhase1_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase3,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase3, &APF_CTL_VIS_Obs_2023a_P.SubPhase3);

    // End of SystemInitialize for SubSystem: '<S87>/Sub-Phase #3 '

    // SystemInitialize for IfAction SubSystem: '<S87>/Sub-Phase #4'
    // Start for If: '<S154>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_o = -1;

    // Start for If: '<S156>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_op = -1;

    // Start for If: '<S152>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_b = -1;

    // InitializeConditions for DiscreteIntegrator: '<S149>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_k =
      APF_CTL_VIS_Obs_2023a_P.BLACK_ini[0];

    // InitializeConditions for Delay: '<S154>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_c = true;

    // InitializeConditions for DiscreteIntegrator: '<S150>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_c =
      APF_CTL_VIS_Obs_2023a_P.BLACK_ini[1];

    // InitializeConditions for Delay: '<S156>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_j = true;

    // InitializeConditions for DiscreteIntegrator: '<S151>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_e =
      APF_CTL_VIS_Obs_2023a_P.BLACK_ini[2];

    // InitializeConditions for Delay: '<S152>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fo = true;

    // SystemInitialize for IfAction SubSystem: '<S154>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S155>/In1' incorporates:
    //   Outport: '<S155>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdt = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bh;

    // End of SystemInitialize for SubSystem: '<S154>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S156>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S157>/In1' incorporates:
    //   Outport: '<S157>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asd = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_jy;

    // End of SystemInitialize for SubSystem: '<S156>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S152>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S153>/In1' incorporates:
    //   Outport: '<S153>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20asdtg = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_am;

    // End of SystemInitialize for SubSystem: '<S152>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S87>/Sub-Phase #4'
    // End of SystemInitialize for SubSystem: '<S9>/Change BLACK Behavior'

    // SystemInitialize for IfAction SubSystem: '<S9>/Change BLUE Behavior'
    // Start for If: '<S88>/Experiment Sub-Phases'
    APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSub_c = -1;

    // SystemInitialize for IfAction SubSystem: '<S88>/Sub-Phase #1'
    APF_CTL_VIS_Ob_SubPhase1_l_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase1_g,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_g,
      &APF_CTL_VIS_Obs_2023a_P.SubPhase1_g);

    // End of SystemInitialize for SubSystem: '<S88>/Sub-Phase #1'

    // SystemInitialize for IfAction SubSystem: '<S88>/Sub-Phase #2 '
    APF_CTL_VIS_Ob_SubPhase1_l_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase2_c,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_c,
      &APF_CTL_VIS_Obs_2023a_P.SubPhase2_c);

    // End of SystemInitialize for SubSystem: '<S88>/Sub-Phase #2 '

    // SystemInitialize for IfAction SubSystem: '<S88>/Sub-Phase #3 '
    APF_CTL_VIS_Ob_SubPhase1_l_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase3_e,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase3_e,
      &APF_CTL_VIS_Obs_2023a_P.SubPhase3_e);

    // End of SystemInitialize for SubSystem: '<S88>/Sub-Phase #3 '

    // SystemInitialize for IfAction SubSystem: '<S88>/Sub-Phase #4'
    // Start for If: '<S237>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_p = -1;

    // Start for If: '<S239>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_i = -1;

    // Start for If: '<S235>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_k = -1;

    // InitializeConditions for DiscreteIntegrator: '<S232>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE = APF_CTL_VIS_Obs_2023a_P.BLUE_ini
      [0];

    // InitializeConditions for Delay: '<S237>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_d = true;

    // InitializeConditions for DiscreteIntegrator: '<S233>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_b =
      APF_CTL_VIS_Obs_2023a_P.BLUE_ini[1];

    // InitializeConditions for Delay: '<S239>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_d4 = true;

    // InitializeConditions for DiscreteIntegrator: '<S234>/Start Pos'
    APF_CTL_VIS_Obs_2023a_DW.StartPos_DSTATE_p =
      APF_CTL_VIS_Obs_2023a_P.BLUE_ini[2];

    // InitializeConditions for Delay: '<S235>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_l = true;

    // SystemInitialize for IfAction SubSystem: '<S237>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S238>/In1' incorporates:
    //   Outport: '<S238>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20a = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_me;

    // End of SystemInitialize for SubSystem: '<S237>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S239>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S240>/In1' incorporates:
    //   Outport: '<S240>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bg;

    // End of SystemInitialize for SubSystem: '<S239>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S235>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S236>/In1' incorporates:
    //   Outport: '<S236>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g20as = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ep;

    // End of SystemInitialize for SubSystem: '<S235>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S88>/Sub-Phase #4'
    // End of SystemInitialize for SubSystem: '<S9>/Change BLUE Behavior'

    // SystemInitialize for IfAction SubSystem: '<S9>/Change RED Behavior'
    // Start for If: '<S89>/Experiment Sub-Phases'
    APF_CTL_VIS_Obs_2023a_DW.ExperimentSubPhases_ActiveSubsy = -1;

    // SystemInitialize for IfAction SubSystem: '<S89>/Sub-Phase #1'
    APF_CTL_VIS_Ob_SubPhase1_o_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase1_p,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase1_p,
      &APF_CTL_VIS_Obs_2023a_P.SubPhase1_p);

    // End of SystemInitialize for SubSystem: '<S89>/Sub-Phase #1'

    // SystemInitialize for IfAction SubSystem: '<S89>/Sub-Phase #2 '
    APF_CTL_VIS_Ob_SubPhase1_o_Init(&APF_CTL_VIS_Obs_2023a_B.SubPhase2_p,
      &APF_CTL_VIS_Obs_2023a_DW.SubPhase2_p,
      &APF_CTL_VIS_Obs_2023a_P.SubPhase2_p);

    // End of SystemInitialize for SubSystem: '<S89>/Sub-Phase #2 '

    // SystemInitialize for IfAction SubSystem: '<S89>/Sub-Phase #3 '
    // Start for If: '<S323>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSubs = -1;

    // Start for If: '<S325>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_h = -1;

    // Start for If: '<S327>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveSu_l = -1;

    // InitializeConditions for Delay: '<S323>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad = true;

    // InitializeConditions for Delay: '<S325>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_f = true;

    // InitializeConditions for Delay: '<S327>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_i = true;

    // SystemInitialize for IfAction SubSystem: '<S323>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S324>/In1' incorporates:
    //   Outport: '<S324>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g2 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ig;

    // End of SystemInitialize for SubSystem: '<S323>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S325>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S326>/In1' incorporates:
    //   Outport: '<S326>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_fb;

    // End of SystemInitialize for SubSystem: '<S325>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S327>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S328>/In1' incorporates:
    //   Outport: '<S328>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bj;

    // End of SystemInitialize for SubSystem: '<S327>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S246>/RED+ARM'
    APF_CTL_VIS_Obs_202_REDARM_Init(&APF_CTL_VIS_Obs_2023a_B.REDARM_m,
      &APF_CTL_VIS_Obs_2023a_DW.REDARM_m, &APF_CTL_VIS_Obs_2023a_P.REDARM_m);

    // End of SystemInitialize for SubSystem: '<S246>/RED+ARM'
    // End of SystemInitialize for SubSystem: '<S89>/Sub-Phase #3 '

    // SystemInitialize for IfAction SubSystem: '<S89>/Sub-Phase #4'
    // Start for InitialCondition: '<S355>/IC'
    APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime = true;

    // Start for If: '<S350>/If2'
    APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem = -1;

    // Start for If: '<S350>/If1'
    APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem = -1;

    // Start for InitialCondition: '<S355>/IC'
    memcpy(&APF_CTL_VIS_Obs_2023a_B.IC[0], &APF_CTL_VIS_Obs_2023a_P.P_IC_Black[0],
           36U * sizeof(real_T));

    // Start for InitialCondition: '<S360>/IC'
    memcpy(&APF_CTL_VIS_Obs_2023a_B.IC_e[0], &APF_CTL_VIS_Obs_2023a_P.P_IC_Blue
           [0], 36U * sizeof(real_T));

    // Start for InitialCondition: '<S360>/IC'
    APF_CTL_VIS_Obs_2023a_DW.IC_FirstOutputTime_b = true;

    // Start for If: '<S350>/If'
    APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem = -1;

    // Start for If: '<S349>/If2'
    APF_CTL_VIS_Obs_2023a_DW.If2_ActiveSubsystem_m = -1;

    // Start for If: '<S349>/If1'
    APF_CTL_VIS_Obs_2023a_DW.If1_ActiveSubsystem_a = -1;

    // Start for If: '<S349>/If'
    APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_m = -1;

    // Start for If: '<S247>/If'
    APF_CTL_VIS_Obs_2023a_DW.If_ActiveSubsystem_l = -1;

    // InitializeConditions for Delay: '<S354>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_li;
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_li;
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_li;

    // InitializeConditions for Delay: '<S355>/Delay1'
    for (i = 0; i < 6; i++) {
      APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_dc;
    }

    // End of InitializeConditions for Delay: '<S355>/Delay1'

    // InitializeConditions for Delay: '<S355>/Delay'
    for (i = 0; i < 36; i++) {
      APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_e[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_b;
    }

    // End of InitializeConditions for Delay: '<S355>/Delay'

    // InitializeConditions for Delay: '<S355>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_j;

    // InitializeConditions for Delay: '<S355>/Delay2'
    APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.Delay2_InitialCondition_d;

    // InitializeConditions for Delay: '<S379>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_h =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_c;

    // InitializeConditions for Delay: '<S359>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_m;
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_b[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_m;

    // InitializeConditions for Delay: '<S360>/Delay1'
    for (i = 0; i < 6; i++) {
      APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_p[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_df;
    }

    // End of InitializeConditions for Delay: '<S360>/Delay1'

    // InitializeConditions for Delay: '<S360>/Delay'
    for (i = 0; i < 36; i++) {
      APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_a[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_a;
    }

    // End of InitializeConditions for Delay: '<S360>/Delay'

    // InitializeConditions for Delay: '<S360>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_o =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_o;

    // InitializeConditions for Delay: '<S360>/Delay2'
    APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_h =
      APF_CTL_VIS_Obs_2023a_P.Delay2_InitialCondition_h;

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Tracker'
    // InitializeConditions for DiscreteTransferFcn: '<S381>/Discrete Transfer Fcn1' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTransferFcn1_states =
      APF_CTL_VIS_Obs_2023a_P.DiscreteTransferFcn1_InitialSta;

    // End of SystemInitialize for SubSystem: '<S350>/Target Tracker'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Finder'
    // SystemInitialize for SignalConversion generated from: '<S380>/Desired States' incorporates:
    //   Outport: '<S380>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[0] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0_g;

    // End of SystemInitialize for SubSystem: '<S350>/Target Finder'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Tracker'
    // SystemInitialize for SignalConversion generated from: '<S381>/Desired States' incorporates:
    //   Outport: '<S381>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[0] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0;

    // End of SystemInitialize for SubSystem: '<S350>/Target Tracker'

    // SystemInitialize for IfAction SubSystem: '<S350>/APF'
    // InitializeConditions for Delay: '<S386>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_p[0];

    // InitializeConditions for Delay: '<S386>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_d[0];

    // InitializeConditions for Delay: '<S387>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition;

    // InitializeConditions for Delay: '<S388>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_p;

    // InitializeConditions for Delay: '<S388>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_p;

    // InitializeConditions for Delay: '<S389>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_o;

    // InitializeConditions for Delay: '<S389>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_e;

    // InitializeConditions for Delay: '<S391>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_n;

    // InitializeConditions for Delay: '<S392>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_l;

    // InitializeConditions for Delay: '<S393>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[0] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_a;

    // End of SystemInitialize for SubSystem: '<S350>/APF'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Finder'
    // SystemInitialize for SignalConversion generated from: '<S380>/Desired States' incorporates:
    //   Outport: '<S380>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[1] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0_g;

    // End of SystemInitialize for SubSystem: '<S350>/Target Finder'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Tracker'
    // SystemInitialize for SignalConversion generated from: '<S381>/Desired States' incorporates:
    //   Outport: '<S381>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[1] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0;

    // End of SystemInitialize for SubSystem: '<S350>/Target Tracker'

    // SystemInitialize for IfAction SubSystem: '<S350>/APF'
    // InitializeConditions for Delay: '<S386>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_p[1];

    // InitializeConditions for Delay: '<S386>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_d[1];

    // InitializeConditions for Delay: '<S387>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition;

    // InitializeConditions for Delay: '<S388>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_p;

    // InitializeConditions for Delay: '<S388>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_p;

    // InitializeConditions for Delay: '<S389>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_o;

    // InitializeConditions for Delay: '<S389>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_e;

    // InitializeConditions for Delay: '<S391>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_n;

    // InitializeConditions for Delay: '<S392>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_l;

    // InitializeConditions for Delay: '<S393>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[1] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_a;

    // End of SystemInitialize for SubSystem: '<S350>/APF'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Finder'
    // SystemInitialize for SignalConversion generated from: '<S380>/Desired States' incorporates:
    //   Outport: '<S380>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates[2] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0_g;

    // End of SystemInitialize for SubSystem: '<S350>/Target Finder'

    // SystemInitialize for IfAction SubSystem: '<S350>/Target Tracker'
    // SystemInitialize for SignalConversion generated from: '<S381>/Desired States' incorporates:
    //   Outport: '<S381>/Desired States'

    APF_CTL_VIS_Obs_2023a_B.OutportBufferForDesiredStates_c[2] =
      APF_CTL_VIS_Obs_2023a_P.DesiredStates_Y0;

    // End of SystemInitialize for SubSystem: '<S350>/Target Tracker'

    // SystemInitialize for IfAction SubSystem: '<S350>/APF'
    // InitializeConditions for Delay: '<S386>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_d[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_p[2];

    // InitializeConditions for Delay: '<S386>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_n[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_d[2];

    // InitializeConditions for Delay: '<S387>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition;

    // InitializeConditions for Delay: '<S388>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_l[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_p;

    // InitializeConditions for Delay: '<S388>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_j[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_p;

    // InitializeConditions for Delay: '<S389>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_d[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_o;

    // InitializeConditions for Delay: '<S389>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_a5[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_e;

    // InitializeConditions for Delay: '<S391>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_c[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_n;

    // InitializeConditions for Delay: '<S392>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_o[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_l;

    // InitializeConditions for Delay: '<S393>/Delay3'
    APF_CTL_VIS_Obs_2023a_DW.Delay3_DSTATE_d[2] =
      APF_CTL_VIS_Obs_2023a_P.Delay3_InitialCondition_a;

    // SystemInitialize for Outport: '<S378>/Out1' incorporates:
    //   MultiPortSwitch: '<S385>/Multiport Switch'

    APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[0] =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bjy;
    APF_CTL_VIS_Obs_2023a_B.MultiportSwitch[1] =
      APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bjy;

    // SystemInitialize for Switch: '<S378>/Switch' incorporates:
    //   Outport: '<S378>/Out1'

    APF_CTL_VIS_Obs_2023a_B.Switch = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bjy;

    // End of SystemInitialize for SubSystem: '<S350>/APF'

    // SystemInitialize for IfAction SubSystem: '<S349>/Target Finder'
    APF_CTL_VIS__TargetTracker_Init(APF_CTL_VIS_Obs_2023a_B.u,
      &APF_CTL_VIS_Obs_2023a_P.TargetFinder,
      &APF_CTL_VIS_Obs_2023a_X.TargetFinder);

    // End of SystemInitialize for SubSystem: '<S349>/Target Finder'

    // SystemInitialize for IfAction SubSystem: '<S349>/Target Tracker'
    APF_CTL_VIS__TargetTracker_Init(APF_CTL_VIS_Obs_2023a_B.u_l,
      &APF_CTL_VIS_Obs_2023a_P.TargetTracker,
      &APF_CTL_VIS_Obs_2023a_X.TargetTracker);

    // End of SystemInitialize for SubSystem: '<S349>/Target Tracker'

    // SystemInitialize for IfAction SubSystem: '<S349>/If Action Subsystem'
    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator4' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator4_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_2_0;

    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator5' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator5_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_1_0;

    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator2' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator2_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_2_0;

    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator3' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator3_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_1_0;

    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator1' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator1_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_1_t_0;

    // InitializeConditions for DiscreteIntegrator: '<S370>/Discrete-Time Integrator' 
    APF_CTL_VIS_Obs_2023a_DW.DiscreteTimeIntegrator_DSTATE =
      APF_CTL_VIS_Obs_2023a_P.k_2_t_0;

    // InitializeConditions for Derivative: '<S370>/Derivative2'
    APF_CTL_VIS_Obs_2023a_DW.TimeStampA = (rtInf);
    APF_CTL_VIS_Obs_2023a_DW.TimeStampB = (rtInf);

    // InitializeConditions for Derivative: '<S370>/Derivative1'
    APF_CTL_VIS_Obs_2023a_DW.TimeStampA_d = (rtInf);
    APF_CTL_VIS_Obs_2023a_DW.TimeStampB_m = (rtInf);

    // InitializeConditions for Derivative: '<S370>/Derivative3'
    APF_CTL_VIS_Obs_2023a_DW.TimeStampA_n = (rtInf);
    APF_CTL_VIS_Obs_2023a_DW.TimeStampB_k = (rtInf);

    // SystemInitialize for Sum: '<S370>/u_x' incorporates:
    //   Outport: '<S364>/Out1'

    APF_CTL_VIS_Obs_2023a_B.u_x = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ll;

    // SystemInitialize for Sum: '<S370>/u_y' incorporates:
    //   Outport: '<S364>/Out1'

    APF_CTL_VIS_Obs_2023a_B.u_y = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ll;

    // SystemInitialize for Sum: '<S370>/Add2' incorporates:
    //   Outport: '<S364>/Out1'

    APF_CTL_VIS_Obs_2023a_B.Add2 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ll;

    // End of SystemInitialize for SubSystem: '<S349>/If Action Subsystem'

    // SystemInitialize for IfAction SubSystem: '<S247>/RED+ARM'
    // SystemInitialize for IfAction SubSystem: '<S352>/Simulated Position Controller' 
    SimulatedPositionControlle_Init
      (&APF_CTL_VIS_Obs_2023a_B.SimulatedPositionController,
       &APF_CTL_VIS_Obs_2023a_DW.SimulatedPositionController,
       &APF_CTL_VIS_Obs_2023a_P.SimulatedPositionController);

    // End of SystemInitialize for SubSystem: '<S352>/Simulated Position Controller' 
    // End of SystemInitialize for SubSystem: '<S247>/RED+ARM'
    // End of SystemInitialize for SubSystem: '<S89>/Sub-Phase #4'
    // End of SystemInitialize for SubSystem: '<S9>/Change RED Behavior'
    // End of SystemInitialize for SubSystem: '<Root>/Phase #3: Experiment'

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #4: Return Home'
    APF_CTL_V_Phase4ReturnHome_Init(&APF_CTL_VIS_Obs_2023a_B.Phase4ReturnHome,
      &APF_CTL_VIS_Obs_2023a_DW.Phase4ReturnHome,
      &APF_CTL_VIS_Obs_2023a_P.Phase4ReturnHome);

    // End of SystemInitialize for SubSystem: '<Root>/Phase #4: Return Home'

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #5: Hold Home'
    APF_CTL_V_Phase4ReturnHome_Init(&APF_CTL_VIS_Obs_2023a_B.Phase5HoldHome,
      &APF_CTL_VIS_Obs_2023a_DW.Phase5HoldHome,
      &APF_CTL_VIS_Obs_2023a_P.Phase5HoldHome);

    // End of SystemInitialize for SubSystem: '<Root>/Phase #5: Hold Home'

    // SystemInitialize for IfAction SubSystem: '<Root>/Phase #6: Clean Shutdown' 
    // Start for If: '<S12>/This IF block determines whether or not to run the BLUE sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_f = -1;

    // Start for If: '<S12>/This IF block determines whether or not to run the BLACK sim//exp' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhether_dt = -1;

    // Start for If: '<S12>/This IF block determines whether or not to run the RED sim//exp ' 
    APF_CTL_VIS_Obs_2023a_DW.ThisIFblockdetermineswhethero_l = -1;

    // End of SystemInitialize for SubSystem: '<Root>/Phase #6: Clean Shutdown'

    // SystemInitialize for IfAction SubSystem: '<Root>/Simulate Plant Dynamics' 
    // InitializeConditions for DiscreteIntegrator: '<S581>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[0] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_p;

    // InitializeConditions for DiscreteIntegrator: '<S581>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[0] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLACK[0];

    // InitializeConditions for DiscreteIntegrator: '<S581>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[1] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_p;

    // InitializeConditions for DiscreteIntegrator: '<S581>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[1] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLACK[1];

    // InitializeConditions for DiscreteIntegrator: '<S581>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE[2] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_p;

    // InitializeConditions for DiscreteIntegrator: '<S581>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE[2] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLACK[2];

    // InitializeConditions for RandomNumber: '<S581>/Random Number'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber_Seed_g);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed) * sqrt
      (APF_CTL_VIS_Obs_2023a_P.noise_variance_BLACK) +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_d;

    // End of InitializeConditions for RandomNumber: '<S581>/Random Number'

    // InitializeConditions for Delay: '<S587>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_ou = true;

    // InitializeConditions for Delay: '<S584>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_p4 = true;

    // InitializeConditions for RandomNumber: '<S578>/Random Number1'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Seed_j);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>
      (static_cast<uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_n = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_n < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_n = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_n > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_n = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_b = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_n) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber1_StdDev_e +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Mean_j;

    // End of InitializeConditions for RandomNumber: '<S578>/Random Number1'

    // InitializeConditions for Delay: '<S582>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_jc = true;

    // InitializeConditions for Delay: '<S585>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_jk = true;

    // InitializeConditions for RandomNumber: '<S578>/Random Number'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber_Seed_d);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_g = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_g < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_g = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_g > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_g = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_j = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_g) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_g;

    // End of InitializeConditions for RandomNumber: '<S578>/Random Number'

    // InitializeConditions for Delay: '<S583>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_jr = true;

    // InitializeConditions for Delay: '<S586>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_jko = true;

    // InitializeConditions for RandomNumber: '<S578>/Random Number2'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Seed_g);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_m = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_m < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_m = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_m > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_m = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_g = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_m) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber2_StdDev_c +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Mean_b;

    // End of InitializeConditions for RandomNumber: '<S578>/Random Number2'

    // InitializeConditions for DiscreteIntegrator: '<S595>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[0] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_e;

    // InitializeConditions for DiscreteIntegrator: '<S595>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[0] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLUE[0];

    // InitializeConditions for DiscreteIntegrator: '<S595>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[1] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_e;

    // InitializeConditions for DiscreteIntegrator: '<S595>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[1] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLUE[1];

    // InitializeConditions for DiscreteIntegrator: '<S595>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_i[2] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_e;

    // InitializeConditions for DiscreteIntegrator: '<S595>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_a[2] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_BLUE[2];

    // InitializeConditions for RandomNumber: '<S595>/Random Number'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber_Seed_p);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_o = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_o < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_o = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_o > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_o = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_a = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_o) * sqrt
      (APF_CTL_VIS_Obs_2023a_P.noise_variance_BLUE) +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean_dq;

    // End of InitializeConditions for RandomNumber: '<S595>/Random Number'

    // InitializeConditions for Delay: '<S601>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_do = true;

    // InitializeConditions for Delay: '<S598>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_nk = true;

    // InitializeConditions for RandomNumber: '<S579>/Random Number4'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber4_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0 = ((((tseed - (static_cast<uint32_T>(i)
      << 16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0 < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0 = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0 > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0 = 2147483646U;
    }

    APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_n0);

    // End of InitializeConditions for RandomNumber: '<S579>/Random Number4'

    // InitializeConditions for Delay: '<S596>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_ip = true;

    // InitializeConditions for Delay: '<S599>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_az = true;

    // InitializeConditions for RandomNumber: '<S579>/Random Number3'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber3_Seed_m);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>
      (static_cast<uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_e = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_e < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_e = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_e > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_e = 2147483646U;
    }

    APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_e);

    // End of InitializeConditions for RandomNumber: '<S579>/Random Number3'

    // InitializeConditions for Delay: '<S597>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_dh = true;

    // InitializeConditions for Delay: '<S600>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_ex = true;

    // InitializeConditions for RandomNumber: '<S579>/Random Number5'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber5_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_c = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_c < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_c = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_c > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_c = 2147483646U;
    }

    APF__rt_nrand_Upu32_Yd_f_pw_snf(&APF_CTL_VIS_Obs_2023a_DW.RandSeed_c);

    // End of InitializeConditions for RandomNumber: '<S579>/Random Number5'

    // SystemInitialize for IfAction SubSystem: '<S587>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S594>/In1' incorporates:
    //   Outport: '<S594>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_j = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_n;

    // End of SystemInitialize for SubSystem: '<S587>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S584>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S591>/In1' incorporates:
    //   Outport: '<S591>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_d = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_g;

    // End of SystemInitialize for SubSystem: '<S584>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S582>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S589>/In1' incorporates:
    //   Outport: '<S589>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_pk = APF_CTL_VIS_Obs_2023a_P.Out1_Y0;

    // End of SystemInitialize for SubSystem: '<S582>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S585>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S592>/In1' incorporates:
    //   Outport: '<S592>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_pg = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_gc;

    // End of SystemInitialize for SubSystem: '<S585>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S583>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S590>/In1' incorporates:
    //   Outport: '<S590>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_c5 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_a;

    // End of SystemInitialize for SubSystem: '<S583>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S586>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S593>/In1' incorporates:
    //   Outport: '<S593>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_ib = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_e;

    // End of SystemInitialize for SubSystem: '<S586>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S601>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S608>/In1' incorporates:
    //   Outport: '<S608>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_ir = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_i;

    // End of SystemInitialize for SubSystem: '<S601>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S596>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S603>/In1' incorporates:
    //   Outport: '<S603>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_ex = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_o;

    // End of SystemInitialize for SubSystem: '<S596>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S597>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S604>/In1' incorporates:
    //   Outport: '<S604>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_cz = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ow;

    // End of SystemInitialize for SubSystem: '<S597>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S580>/RED + ARM'
    for (i = 0; i < 12; i++) {
      // InitializeConditions for Delay: '<S611>/Delay'
      APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_of[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition;

      // InitializeConditions for DiscreteIntegrator: '<S611>/Acceleration  to Velocity' 
      APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_f[i] =
        APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC[i];
    }

    // InitializeConditions for Delay: '<S616>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_bs = true;

    // InitializeConditions for RandomNumber: '<S611>/Random Number2'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_av = ((((tseed - (static_cast<uint32_T>(i)
      << 16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_av < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_av = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_av > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_av = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_f = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_av) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber2_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber2_Mean;

    // End of InitializeConditions for RandomNumber: '<S611>/Random Number2'

    // InitializeConditions for Delay: '<S615>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_n5 = true;

    // InitializeConditions for RandomNumber: '<S611>/Random Number1'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>
      (static_cast<uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4 = ((((tseed - (static_cast<uint32_T>(i)
      << 16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4 < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4 = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4 > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4 = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_h = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_a4) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber1_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber1_Mean;

    // End of InitializeConditions for RandomNumber: '<S611>/Random Number1'

    // InitializeConditions for Delay: '<S617>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_mj = true;

    // InitializeConditions for RandomNumber: '<S611>/Random Number3'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber3_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>
      (static_cast<uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_i = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_i < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_i = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_i > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_i = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_go = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_i) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber3_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber3_Mean;

    // End of InitializeConditions for RandomNumber: '<S611>/Random Number3'

    // SystemInitialize for IfAction SubSystem: '<S616>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S619>/In1' incorporates:
    //   Outport: '<S619>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_pj = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_asw;

    // End of SystemInitialize for SubSystem: '<S616>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S615>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S618>/In1' incorporates:
    //   Outport: '<S618>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_a4 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_b;

    // End of SystemInitialize for SubSystem: '<S615>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S617>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S620>/In1' incorporates:
    //   Outport: '<S620>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_hq = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ea;

    // End of SystemInitialize for SubSystem: '<S617>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S580>/RED + ARM'

    // SystemInitialize for IfAction SubSystem: '<S580>/RED Only'
    // InitializeConditions for DiscreteIntegrator: '<S622>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[0] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_n;

    // InitializeConditions for DiscreteIntegrator: '<S622>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[0] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_RED[0];

    // InitializeConditions for DiscreteIntegrator: '<S622>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[1] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_n;

    // InitializeConditions for DiscreteIntegrator: '<S622>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[1] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_RED[1];

    // InitializeConditions for DiscreteIntegrator: '<S622>/Acceleration  to Velocity' 
    APF_CTL_VIS_Obs_2023a_DW.AccelerationtoVelocity_DSTATE_b[2] =
      APF_CTL_VIS_Obs_2023a_P.AccelerationtoVelocity_IC_n;

    // InitializeConditions for DiscreteIntegrator: '<S622>/Velocity to Position' 
    APF_CTL_VIS_Obs_2023a_DW.VelocitytoPosition_DSTATE_m[2] =
      APF_CTL_VIS_Obs_2023a_P.drop_states_RED[2];

    // InitializeConditions for RandomNumber: '<S622>/Random Number'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_k = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_k < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_k = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_k > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_k = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_i = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_k) * sqrt
      (APF_CTL_VIS_Obs_2023a_P.noise_variance_RED) +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber_Mean;

    // End of InitializeConditions for RandomNumber: '<S622>/Random Number'

    // InitializeConditions for Delay: '<S624>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_nn = true;

    // InitializeConditions for Delay: '<S626>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_kb = true;

    // InitializeConditions for RandomNumber: '<S621>/Random Number7'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber7_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_a = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_a < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_a = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_a > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_a = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_n = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_a) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber7_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber7_Mean;

    // End of InitializeConditions for RandomNumber: '<S621>/Random Number7'

    // InitializeConditions for Delay: '<S623>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_jf = true;

    // InitializeConditions for Delay: '<S627>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_dk = true;

    // InitializeConditions for RandomNumber: '<S621>/Random Number6'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber6_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_f = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_f < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_f = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_f > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_f = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_ga = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_f) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber6_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber6_Mean;

    // End of InitializeConditions for RandomNumber: '<S621>/Random Number6'

    // InitializeConditions for Delay: '<S625>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_l1 = true;

    // InitializeConditions for Delay: '<S628>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_kp = true;

    // InitializeConditions for RandomNumber: '<S621>/Random Number8'
    tmp = floor(APF_CTL_VIS_Obs_2023a_P.RandomNumber8_Seed);
    if (rtIsNaN(tmp) || rtIsInf(tmp)) {
      tmp = 0.0;
    } else {
      tmp = fmod(tmp, 4.294967296E+9);
    }

    tseed = tmp < 0.0 ? static_cast<uint32_T>(-static_cast<int32_T>(static_cast<
      uint32_T>(-tmp))) : static_cast<uint32_T>(tmp);
    i = static_cast<int32_T>(tseed >> 16U);
    t = static_cast<int32_T>(tseed & 32768U);
    APF_CTL_VIS_Obs_2023a_DW.RandSeed_h = ((((tseed - (static_cast<uint32_T>(i) <<
      16U)) + static_cast<uint32_T>(t)) << 16U) + static_cast<uint32_T>(t)) +
      static_cast<uint32_T>(i);
    if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_h < 1U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_h = 1144108930U;
    } else if (APF_CTL_VIS_Obs_2023a_DW.RandSeed_h > 2147483646U) {
      APF_CTL_VIS_Obs_2023a_DW.RandSeed_h = 2147483646U;
    }

    APF_CTL_VIS_Obs_2023a_DW.NextOutput_l = APF__rt_nrand_Upu32_Yd_f_pw_snf
      (&APF_CTL_VIS_Obs_2023a_DW.RandSeed_h) *
      APF_CTL_VIS_Obs_2023a_P.RandomNumber8_StdDev +
      APF_CTL_VIS_Obs_2023a_P.RandomNumber8_Mean;

    // End of InitializeConditions for RandomNumber: '<S621>/Random Number8'

    // SystemInitialize for IfAction SubSystem: '<S624>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S631>/In1' incorporates:
    //   Outport: '<S631>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_ff = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_l;

    // End of SystemInitialize for SubSystem: '<S624>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S626>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S633>/In1' incorporates:
    //   Outport: '<S633>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_fv = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_bf;

    // End of SystemInitialize for SubSystem: '<S626>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S623>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S630>/In1' incorporates:
    //   Outport: '<S630>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_n = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_j;

    // End of SystemInitialize for SubSystem: '<S623>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S627>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S634>/In1' incorporates:
    //   Outport: '<S634>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_g0 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_gt;

    // End of SystemInitialize for SubSystem: '<S627>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S625>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S632>/In1' incorporates:
    //   Outport: '<S632>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_h = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_d;

    // End of SystemInitialize for SubSystem: '<S625>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S628>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S635>/In1' incorporates:
    //   Outport: '<S635>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_aw = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_em;

    // End of SystemInitialize for SubSystem: '<S628>/Hold this value'
    // End of SystemInitialize for SubSystem: '<S580>/RED Only'
    // End of SystemInitialize for SubSystem: '<Root>/Simulate Plant Dynamics'

    // SystemInitialize for IfAction SubSystem: '<S1>/Change BLACK Behavior'
    APF_CT_ChangeBLACKBehavior_Init(APF_CTL_VIS_Obs_2023a_M,
      &APF_CTL_VIS_Obs_2023a_DW.ChangeBLACKBehavior,
      &APF_CTL_VIS_Obs_2023a_P.ChangeBLACKBehavior);

    // End of SystemInitialize for SubSystem: '<S1>/Change BLACK Behavior'

    // SystemInitialize for IfAction SubSystem: '<S1>/Change BLUE Behavior'
    APF_CT_ChangeBLACKBehavior_Init(APF_CTL_VIS_Obs_2023a_M,
      &APF_CTL_VIS_Obs_2023a_DW.ChangeBLUEBehavior,
      &APF_CTL_VIS_Obs_2023a_P.ChangeBLUEBehavior);

    // End of SystemInitialize for SubSystem: '<S1>/Change BLUE Behavior'

    // SystemInitialize for IfAction SubSystem: '<S1>/Change RED Behavior'
    // Start for S-Function (sdspToNetwork): '<S22>/UDP Send'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U], 1,
                        "0.0.0.0", -1, "255.255.255.255",
                        APF_CTL_VIS_Obs_2023a_P.UDPSend_Port, 8192, 4, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspToNetwork): '<S22>/UDP Send'
    // End of SystemInitialize for SubSystem: '<S1>/Change RED Behavior'

    // SystemInitialize for IfAction SubSystem: '<S4>/Enable Pucks'
    // Start for MATLABSystem: '<S25>/Set Pin 428 (Pucks) to HIGH'
    //  Constructor
    //  Support name-value pair arguments when constructing the object.
    APF_CTL_VIS_Obs_2023a_DW.obj_p.matlabCodegenIsDeleted = false;
    APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin =
      APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_gpioPin;
    APF_CTL_VIS_Obs_2023a_DW.obj_p.pinDirection =
      APF_CTL_VIS_Obs_2023a_P.SetPin428PuckstoHIGH_pinDirecti;
    APF_CTL_VIS_Obs_2023a_DW.obj_p.isInitialized = 1;

    //         %% Define input properties
    //  Call C-function implementing device initialization
    export_gpio(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin);
    set_pin_direction(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin,
                      APF_CTL_VIS_Obs_2023a_DW.obj_p.pinDirection);
    APF_CTL_VIS_Obs_2023a_DW.obj_p.isSetupComplete = true;

    // End of SystemInitialize for SubSystem: '<S4>/Enable Pucks'

    // SystemInitialize for IfAction SubSystem: '<S5>/Change RED Behavior'
    // InitializeConditions for Delay: '<S26>/Delay'
    APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_as =
      APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_f;

    // InitializeConditions for Delay: '<S26>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_pw =
      APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition;

    // InitializeConditions for Delay: '<S26>/Delay2'
    APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_c =
      APF_CTL_VIS_Obs_2023a_P.Delay2_InitialCondition;

    // Start for MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' 
    APF_CTL_VIS_Obs_2023a_DW.obj_d.matlabCodegenIsDeleted = false;
    if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
          (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
        (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
      sampleTime = APF_CTL_VIS_Obs_2023a_P.baseRate;
    }

    APF_CTL_VIS_Obs_2023a_DW.obj_d.SampleTime = sampleTime;
    APF_CTL_VIS_Obs_2023a_DW.obj_d.isInitialized = 1;

    //         %% Define input properties
    //  Call C-function implementing device initialization
    APF_CTL_VIS_Obs_2023a_DW.obj_d.isSetupComplete = true;

    // End of Start for MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' 
    // End of SystemInitialize for SubSystem: '<S5>/Change RED Behavior'

    // SystemInitialize for IfAction SubSystem: '<S13>/Use Hardware to Obtain States' 
    // Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive1'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U],
                        0, "0.0.0.0", APF_CTL_VIS_Obs_2023a_P.UDPReceive1_Port,
                        "0.0.0.0", -1, 8192, 8, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive1'

    // Start for If: '<S544>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_jt = -1;

    // Start for If: '<S541>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lg = -1;

    // Start for If: '<S549>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ch = -1;

    // Start for If: '<S538>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_c5 = -1;

    // Start for If: '<S550>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ls = -1;

    // Start for If: '<S539>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_i2 = -1;

    // Start for If: '<S551>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_kz = -1;

    // Start for If: '<S540>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ed = -1;

    // Start for If: '<S545>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_o2 = -1;

    // Start for If: '<S542>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_cu = -1;

    // Start for If: '<S546>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hb = -1;

    // Start for If: '<S543>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_fj = -1;

    // Start for If: '<S537>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ca = -1;

    // Start for If: '<S552>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_ez = -1;

    // Start for If: '<S547>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_oo = -1;

    // Start for If: '<S553>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_hv = -1;

    // Start for If: '<S548>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_ActiveS_lu = -1;

    // Start for If: '<S554>/if we went through a "step"'
    APF_CTL_VIS_Obs_2023a_DW.ifwewentthroughastep_Active_lgb = -1;

    // Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U], 0,
                        "0.0.0.0", APF_CTL_VIS_Obs_2023a_P.UDPReceive_Port,
                        "0.0.0.0", -1, 8192, 4, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive'

    // Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive2'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U], 0,
                        "0.0.0.0", APF_CTL_VIS_Obs_2023a_P.UDPReceive2_Port,
                        "0.0.0.0", -1, 8192, 4, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive2'

    // Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive3'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U], 0,
                        "0.0.0.0", APF_CTL_VIS_Obs_2023a_P.UDPReceive3_Port,
                        "0.0.0.0", -1, 8192, 4, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspFromNetwork): '<S534>/UDP Receive3'

    // InitializeConditions for Delay: '<S544>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_lu = true;

    // InitializeConditions for Delay: '<S541>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_ld = true;

    // InitializeConditions for Delay: '<S549>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_dc = true;

    // InitializeConditions for Delay: '<S538>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_k = true;

    // InitializeConditions for Delay: '<S550>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fv = true;

    // InitializeConditions for Delay: '<S539>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_na = true;

    // InitializeConditions for S-Function (sdspunwrap2): '<S534>/Unwrap1'
    APF_CTL_VIS_Obs_2023a_DW.Unwrap1_FirstStep = true;

    // InitializeConditions for Delay: '<S551>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_gx = true;

    // InitializeConditions for Delay: '<S540>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_m = true;

    // InitializeConditions for Delay: '<S545>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_e = true;

    // InitializeConditions for Delay: '<S542>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fpv = true;

    // InitializeConditions for S-Function (sdspunwrap2): '<S534>/Unwrap2'
    APF_CTL_VIS_Obs_2023a_DW.Unwrap2_FirstStep = true;

    // InitializeConditions for Delay: '<S546>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_mt = true;

    // InitializeConditions for Delay: '<S543>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_nw = true;

    // InitializeConditions for Delay: '<S537>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_h = true;

    // InitializeConditions for Delay: '<S552>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_au = true;

    // InitializeConditions for Delay: '<S547>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_eo = true;

    // InitializeConditions for Delay: '<S553>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fh = true;

    // InitializeConditions for S-Function (sdspunwrap2): '<S534>/Unwrap'
    APF_CTL_VIS_Obs_2023a_DW.Unwrap_FirstStep = true;

    // InitializeConditions for Delay: '<S548>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_fow = true;

    // InitializeConditions for Delay: '<S554>/Delay1'
    APF_CTL_VIS_Obs_2023a_DW.icLoad_aq = true;
    for (i = 0; i < 5; i++) {
      // InitializeConditions for Delay: '<S534>/Delay'
      APF_CTL_VIS_Obs_2023a_DW.Delay_DSTATE_l[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay_InitialCondition_g;

      // InitializeConditions for Delay: '<S534>/Delay1'
      APF_CTL_VIS_Obs_2023a_DW.Delay1_DSTATE_hu[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay1_InitialCondition_h;

      // InitializeConditions for Delay: '<S534>/Delay2'
      APF_CTL_VIS_Obs_2023a_DW.Delay2_DSTATE_k[i] =
        APF_CTL_VIS_Obs_2023a_P.Delay2_InitialCondition_j;
    }

    // SystemInitialize for IfAction SubSystem: '<S544>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S564>/In1' incorporates:
    //   Outport: '<S564>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_lk = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_hp;

    // End of SystemInitialize for SubSystem: '<S544>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S549>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S569>/In1' incorporates:
    //   Outport: '<S569>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_m = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ck;

    // End of SystemInitialize for SubSystem: '<S549>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S538>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S558>/In1' incorporates:
    //   Outport: '<S558>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_p = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_f;

    // End of SystemInitialize for SubSystem: '<S538>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S550>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S570>/In1' incorporates:
    //   Outport: '<S570>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_b = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ii;

    // End of SystemInitialize for SubSystem: '<S550>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S539>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S559>/In1' incorporates:
    //   Outport: '<S559>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_c = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_m3;

    // End of SystemInitialize for SubSystem: '<S539>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S551>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S571>/In1' incorporates:
    //   Outport: '<S571>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_eg = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_l2;

    // End of SystemInitialize for SubSystem: '<S551>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S540>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S560>/In1' incorporates:
    //   Outport: '<S560>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_a = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_m34;

    // End of SystemInitialize for SubSystem: '<S540>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S545>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S565>/In1' incorporates:
    //   Outport: '<S565>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_fy = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_p0;

    // End of SystemInitialize for SubSystem: '<S545>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S546>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S566>/In1' incorporates:
    //   Outport: '<S566>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_gd = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_iy;

    // End of SystemInitialize for SubSystem: '<S546>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S537>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S557>/In1' incorporates:
    //   Outport: '<S557>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_gt = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_lf;

    // End of SystemInitialize for SubSystem: '<S537>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S552>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S572>/In1' incorporates:
    //   Outport: '<S572>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_f = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_nz;

    // End of SystemInitialize for SubSystem: '<S552>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S547>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S567>/In1' incorporates:
    //   Outport: '<S567>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_em = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_c;

    // End of SystemInitialize for SubSystem: '<S547>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S553>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S573>/In1' incorporates:
    //   Outport: '<S573>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_l = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_fr;

    // End of SystemInitialize for SubSystem: '<S553>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S548>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S568>/In1' incorporates:
    //   Outport: '<S568>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_en = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_d0;

    // End of SystemInitialize for SubSystem: '<S548>/Hold this value'

    // SystemInitialize for IfAction SubSystem: '<S554>/Hold this value'
    // SystemInitialize for SignalConversion generated from: '<S574>/In1' incorporates:
    //   Outport: '<S574>/Out1'

    APF_CTL_VIS_Obs_2023a_B.In1_e0 = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_e1;

    // End of SystemInitialize for SubSystem: '<S554>/Hold this value'

    // SystemInitialize for Enabled SubSystem: '<S535>/Enabled Subsystem'
    // InitializeConditions for Memory: '<S555>/Memory'
    APF_CTL_VIS_Obs_2023a_DW.Memory_PreviousInput =
      APF_CTL_VIS_Obs_2023a_P.Memory_InitialCondition;

    // SystemInitialize for Memory: '<S555>/Memory' incorporates:
    //   Outport: '<S555>/Out1'

    APF_CTL_VIS_Obs_2023a_B.Memory = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_m;

    // End of SystemInitialize for SubSystem: '<S535>/Enabled Subsystem'

    // SystemInitialize for Enabled SubSystem: '<S535>/Enabled Subsystem1'
    // SystemInitialize for Sum: '<S556>/Subtract' incorporates:
    //   Outport: '<S556>/Out1'

    APF_CTL_VIS_Obs_2023a_B.Subtract_l = APF_CTL_VIS_Obs_2023a_P.Out1_Y0_ei;

    // End of SystemInitialize for SubSystem: '<S535>/Enabled Subsystem1'
    // End of SystemInitialize for SubSystem: '<S13>/Use Hardware to Obtain States' 

    // SystemInitialize for IfAction SubSystem: '<S14>/Subsystem'
    // Start for MATLABSystem: '<S575>/WhoAmI'
    //  Constructor
    //  Support name-value pair arguments when constructing the object.
    APF_CTL_VIS_Obs_2023a_DW.obj_dk.matlabCodegenIsDeleted = false;
    if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
          (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
        (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
      sampleTime_0 = APF_CTL_VIS_Obs_2023a_P.baseRate;
    }

    APF_CTL_VIS_Obs_2023a_DW.obj_dk.SampleTime = sampleTime_0;
    APF_CTL_VIS_Obs_2023a_DW.obj_dk.isInitialized = 1;

    //         %% Define output properties
    //  Call C-function implementing device initialization
    APF_CTL_VIS_Obs_2023a_DW.obj_dk.isSetupComplete = true;

    // End of Start for MATLABSystem: '<S575>/WhoAmI'
    // End of SystemInitialize for SubSystem: '<S14>/Subsystem'

    // SystemInitialize for IfAction SubSystem: '<S15>/Change RED Behavior'
    // Start for MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' 
    //  Constructor
    //  Support name-value pair arguments when constructing the object.
    APF_CTL_VIS_Obs_2023a_DW.obj.matlabCodegenIsDeleted = false;
    APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_P_GAIN =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsineith;
    APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_I_GAIN =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_c;
    APF_CTL_VIS_Obs_2023a_DW.obj.POSITION_D_GAIN =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_d;
    APF_CTL_VIS_Obs_2023a_DW.obj.MAX_POSITION =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_n;
    APF_CTL_VIS_Obs_2023a_DW.obj.MIN_POSITION =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_g;
    APF_CTL_VIS_Obs_2023a_DW.obj.MOVE_TIME =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsine_cw;
    APF_CTL_VIS_Obs_2023a_DW.obj.CURRENT_LIMIT =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_e;
    APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_P_GAIN =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_k;
    APF_CTL_VIS_Obs_2023a_DW.obj.SPEED_I_GAIN =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_j;
    APF_CTL_VIS_Obs_2023a_DW.obj.VELOCITY_LIMIT =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_l;
    APF_CTL_VIS_Obs_2023a_DW.obj.ACCELERATION_TIME =
      APF_CTL_VIS_Obs_2023a_P.ControlDynamixelActuatorsinei_o;
    if (((!rtIsInf(APF_CTL_VIS_Obs_2023a_P.baseRate)) && (!rtIsNaN
          (APF_CTL_VIS_Obs_2023a_P.baseRate))) || rtIsInf
        (APF_CTL_VIS_Obs_2023a_P.baseRate)) {
      sampleTime_1 = APF_CTL_VIS_Obs_2023a_P.baseRate;
    }

    APF_CTL_VIS_Obs_2023a_DW.obj.SampleTime = sampleTime_1;
    APF_CTL_VIS_Obs_2023a_DW.obj.isInitialized = 1;

    //         %% Define input properties
    initialize_dynamixel();
    APF_CTL_VIS_Obs_2023a_DW.obj.isSetupComplete = true;

    // End of Start for MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' 
    // End of SystemInitialize for SubSystem: '<S15>/Change RED Behavior'

    // SystemInitialize for IfAction SubSystem: '<S16>/Subsystem'
    // Start for S-Function (sdspToNetwork): '<S577>/UDP Send'
    sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
    CreateUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
    if (*sErr == 0) {
      LibCreate_Network(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U], 1,
                        "0.0.0.0", -1, "192.168.1.113",
                        APF_CTL_VIS_Obs_2023a_P.UDPSend_Port_d, 8192, 8, 0);
    }

    if (*sErr == 0) {
      LibStart(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
    }

    if (*sErr != 0) {
      DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
      if (*sErr != 0) {
        rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
        rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
      }
    }

    // End of Start for S-Function (sdspToNetwork): '<S577>/UDP Send'
    // End of SystemInitialize for SubSystem: '<S16>/Subsystem'

    // SystemInitialize for IfAction SubSystem: '<S19>/Change BLUE Behavior'
    // SystemInitialize for IfAction SubSystem: '<S19>/Change BLACK Behavior'
    // SystemInitialize for IfAction SubSystem: '<S19>/Change RED Behavior'
    for (i = 0; i < 8; i++) {
      // SystemInitialize for Outport: '<S638>/RED PWM'
      APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final[i] =
        APF_CTL_VIS_Obs_2023a_P.REDPWM_Y0;

      // SystemInitialize for Outport: '<S636>/BLACK PWM'
      APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_d[i] =
        APF_CTL_VIS_Obs_2023a_P.BLACKPWM_Y0;

      // SystemInitialize for Outport: '<S637>/BLUE PWM'
      APF_CTL_VIS_Obs_2023a_B.ThrustPer_Final_e[i] =
        APF_CTL_VIS_Obs_2023a_P.BLUEPWM_Y0;
    }

    // End of SystemInitialize for SubSystem: '<S19>/Change RED Behavior'
    // End of SystemInitialize for SubSystem: '<S19>/Change BLACK Behavior'
    // End of SystemInitialize for SubSystem: '<S19>/Change BLUE Behavior'

    // Start for MATLABSystem: '<S23>/MATLAB System'
    //  Constructor
    //  Support name-value pair arguments when constructing the object.
    APF_CTL_VIS_Obs_2023a_DW.obj_i.matlabCodegenIsDeleted = false;
    APF_CTL_VIS_Obs_2023a_DW.obj_i.isInitialized = 1;

    //         %% Define input properties
    //  Call C-function implementing device initialization
    createFile();
    APF_CTL_VIS_Obs_2023a_DW.obj_i.isSetupComplete = true;
  }
}

// Model terminate function
void APF_CTL_VIS_Obs_2023a_terminate(void)
{
  char_T *sErr;

  // Terminate for S-Function (sdspFromNetwork): '<S2>/UDP Receive1'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U], 0);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspFromNetwork): '<S2>/UDP Receive1'

  // Terminate for IfAction SubSystem: '<S1>/Change BLACK Behavior'
  APF_CT_ChangeBLACKBehavior_Term(APF_CTL_VIS_Obs_2023a_M,
    &APF_CTL_VIS_Obs_2023a_DW.ChangeBLACKBehavior);

  // End of Terminate for SubSystem: '<S1>/Change BLACK Behavior'

  // Terminate for IfAction SubSystem: '<S1>/Change BLUE Behavior'
  APF_CT_ChangeBLACKBehavior_Term(APF_CTL_VIS_Obs_2023a_M,
    &APF_CTL_VIS_Obs_2023a_DW.ChangeBLUEBehavior);

  // End of Terminate for SubSystem: '<S1>/Change BLUE Behavior'

  // Terminate for IfAction SubSystem: '<S1>/Change RED Behavior'
  // Terminate for S-Function (sdspToNetwork): '<S22>/UDP Send'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U], 1);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_l[0U]);

  // End of Terminate for S-Function (sdspToNetwork): '<S22>/UDP Send'
  // End of Terminate for SubSystem: '<S1>/Change RED Behavior'

  // Terminate for MATLABSystem: '<S23>/MATLAB System'
  if (!APF_CTL_VIS_Obs_2023a_DW.obj_i.matlabCodegenIsDeleted) {
    APF_CTL_VIS_Obs_2023a_DW.obj_i.matlabCodegenIsDeleted = true;
  }

  // End of Terminate for MATLABSystem: '<S23>/MATLAB System'

  // Terminate for IfAction SubSystem: '<S4>/Enable Pucks'
  // Terminate for MATLABSystem: '<S25>/Set Pin 428 (Pucks) to HIGH'
  if (!APF_CTL_VIS_Obs_2023a_DW.obj_p.matlabCodegenIsDeleted) {
    APF_CTL_VIS_Obs_2023a_DW.obj_p.matlabCodegenIsDeleted = true;
    if ((APF_CTL_VIS_Obs_2023a_DW.obj_p.isInitialized == 1) &&
        APF_CTL_VIS_Obs_2023a_DW.obj_p.isSetupComplete) {
      //  Call C-function implementing device termination
      change_gpio_value(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin, 0.0);
      unexport_gpio(APF_CTL_VIS_Obs_2023a_DW.obj_p.gpioPin);
    }
  }

  // End of Terminate for MATLABSystem: '<S25>/Set Pin 428 (Pucks) to HIGH'
  // End of Terminate for SubSystem: '<S4>/Enable Pucks'

  // Terminate for IfAction SubSystem: '<S5>/Change RED Behavior'
  // Terminate for MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' 
  if (!APF_CTL_VIS_Obs_2023a_DW.obj_d.matlabCodegenIsDeleted) {
    APF_CTL_VIS_Obs_2023a_DW.obj_d.matlabCodegenIsDeleted = true;
  }

  // End of Terminate for MATLABSystem: '<S26>/Read Joint Positions using  Dynamixel Encoders' 
  // End of Terminate for SubSystem: '<S5>/Change RED Behavior'

  // Terminate for IfAction SubSystem: '<S13>/Use Hardware to Obtain States'
  // Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive1'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U], 0);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive1_NetworkLib_b[0U]);

  // End of Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive1'

  // Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U], 0);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive'

  // Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive2'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U], 0);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive2_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive2'

  // Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive3'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U], 0);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPReceive3_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspFromNetwork): '<S534>/UDP Receive3'
  // End of Terminate for SubSystem: '<S13>/Use Hardware to Obtain States'

  // Terminate for IfAction SubSystem: '<S14>/Subsystem'
  // Terminate for MATLABSystem: '<S575>/WhoAmI'
  if (!APF_CTL_VIS_Obs_2023a_DW.obj_dk.matlabCodegenIsDeleted) {
    APF_CTL_VIS_Obs_2023a_DW.obj_dk.matlabCodegenIsDeleted = true;
  }

  // End of Terminate for MATLABSystem: '<S575>/WhoAmI'
  // End of Terminate for SubSystem: '<S14>/Subsystem'

  // Terminate for IfAction SubSystem: '<S15>/Change RED Behavior'
  // Terminate for MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' 
  if (!APF_CTL_VIS_Obs_2023a_DW.obj.matlabCodegenIsDeleted) {
    APF_CTL_VIS_Obs_2023a_DW.obj.matlabCodegenIsDeleted = true;
    if ((APF_CTL_VIS_Obs_2023a_DW.obj.isInitialized == 1) &&
        APF_CTL_VIS_Obs_2023a_DW.obj.isSetupComplete) {
      terminate_dynamixel();
    }
  }

  // End of Terminate for MATLABSystem: '<S576>/Control Dynamixel Actuators in  either Position, Current, or Speed  Control Modes' 
  // End of Terminate for SubSystem: '<S15>/Change RED Behavior'

  // Terminate for IfAction SubSystem: '<S16>/Subsystem'
  // Terminate for S-Function (sdspToNetwork): '<S577>/UDP Send'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U], 1);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib_m[0U]);

  // End of Terminate for S-Function (sdspToNetwork): '<S577>/UDP Send'
  // End of Terminate for SubSystem: '<S16>/Subsystem'

  // Terminate for S-Function (sdspToNetwork): '<S19>/UDP Send'
  sErr = GetErrorBuffer(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
  LibTerminate(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);
  if (*sErr != 0) {
    rtmSetErrorStatus(APF_CTL_VIS_Obs_2023a_M, sErr);
    rtmSetStopRequested(APF_CTL_VIS_Obs_2023a_M, 1);
  }

  LibDestroy(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U], 1);
  DestroyUDPInterface(&APF_CTL_VIS_Obs_2023a_DW.UDPSend_NetworkLib[0U]);

  // End of Terminate for S-Function (sdspToNetwork): '<S19>/UDP Send'
}

//
// File trailer for generated code.
//
// [EOF]
//
